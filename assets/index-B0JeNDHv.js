(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const h of document.querySelectorAll('link[rel="modulepreload"]'))c(h);new MutationObserver(h=>{for(const m of h)if(m.type==="childList")for(const b of m.addedNodes)b.tagName==="LINK"&&b.rel==="modulepreload"&&c(b)}).observe(document,{childList:!0,subtree:!0});function u(h){const m={};return h.integrity&&(m.integrity=h.integrity),h.referrerPolicy&&(m.referrerPolicy=h.referrerPolicy),h.crossOrigin==="use-credentials"?m.credentials="include":h.crossOrigin==="anonymous"?m.credentials="omit":m.credentials="same-origin",m}function c(h){if(h.ep)return;h.ep=!0;const m=u(h);fetch(h.href,m)}})();var vd={exports:{}},On={};var Qf;function wv(){if(Qf)return On;Qf=1;var n=Symbol.for("react.transitional.element"),o=Symbol.for("react.fragment");function u(c,h,m){var b=null;if(m!==void 0&&(b=""+m),h.key!==void 0&&(b=""+h.key),"key"in h){m={};for(var x in h)x!=="key"&&(m[x]=h[x])}else m=h;return h=m.ref,{$$typeof:n,type:c,key:b,ref:h!==void 0?h:null,props:m}}return On.Fragment=o,On.jsx=u,On.jsxs=u,On}var Xf;function Cv(){return Xf||(Xf=1,vd.exports=wv()),vd.exports}var a=Cv(),gd={exports:{}},In={},yd={exports:{}},jd={};var Zf;function Av(){return Zf||(Zf=1,(function(n){function o(k,K){var ne=k.length;k.push(K);e:for(;0<ne;){var fe=ne-1>>>1,ye=k[fe];if(0<h(ye,K))k[fe]=K,k[ne]=ye,ne=fe;else break e}}function u(k){return k.length===0?null:k[0]}function c(k){if(k.length===0)return null;var K=k[0],ne=k.pop();if(ne!==K){k[0]=ne;e:for(var fe=0,ye=k.length,N=ye>>>1;fe<N;){var B=2*(fe+1)-1,W=k[B],J=B+1,de=k[J];if(0>h(W,ne))J<ye&&0>h(de,W)?(k[fe]=de,k[J]=ne,fe=J):(k[fe]=W,k[B]=ne,fe=B);else if(J<ye&&0>h(de,ne))k[fe]=de,k[J]=ne,fe=J;else break e}}return K}function h(k,K){var ne=k.sortIndex-K.sortIndex;return ne!==0?ne:k.id-K.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var m=performance;n.unstable_now=function(){return m.now()}}else{var b=Date,x=b.now();n.unstable_now=function(){return b.now()-x}}var g=[],d=[],w=1,A=null,E=3,C=!1,S=!1,v=!1,p=!1,y=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;function q(k){for(var K=u(d);K!==null;){if(K.callback===null)c(d);else if(K.startTime<=k)c(d),K.sortIndex=K.expirationTime,o(g,K);else break;K=u(d)}}function Y(k){if(v=!1,q(k),!S)if(u(g)!==null)S=!0,z||(z=!0,M());else{var K=u(d);K!==null&&R(Y,K.startTime-k)}}var z=!1,L=-1,te=5,oe=-1;function H(){return p?!0:!(n.unstable_now()-oe<te)}function se(){if(p=!1,z){var k=n.unstable_now();oe=k;var K=!0;try{e:{S=!1,v&&(v=!1,_(L),L=-1),C=!0;var ne=E;try{t:{for(q(k),A=u(g);A!==null&&!(A.expirationTime>k&&H());){var fe=A.callback;if(typeof fe=="function"){A.callback=null,E=A.priorityLevel;var ye=fe(A.expirationTime<=k);if(k=n.unstable_now(),typeof ye=="function"){A.callback=ye,q(k),K=!0;break t}A===u(g)&&c(g),q(k)}else c(g);A=u(g)}if(A!==null)K=!0;else{var N=u(d);N!==null&&R(Y,N.startTime-k),K=!1}}break e}finally{A=null,E=ne,C=!1}K=void 0}}finally{K?M():z=!1}}}var M;if(typeof O=="function")M=function(){O(se)};else if(typeof MessageChannel<"u"){var ie=new MessageChannel,V=ie.port2;ie.port1.onmessage=se,M=function(){V.postMessage(null)}}else M=function(){y(se,0)};function R(k,K){L=y(function(){k(n.unstable_now())},K)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(k){k.callback=null},n.unstable_forceFrameRate=function(k){0>k||125<k?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):te=0<k?Math.floor(1e3/k):5},n.unstable_getCurrentPriorityLevel=function(){return E},n.unstable_next=function(k){switch(E){case 1:case 2:case 3:var K=3;break;default:K=E}var ne=E;E=K;try{return k()}finally{E=ne}},n.unstable_requestPaint=function(){p=!0},n.unstable_runWithPriority=function(k,K){switch(k){case 1:case 2:case 3:case 4:case 5:break;default:k=3}var ne=E;E=k;try{return K()}finally{E=ne}},n.unstable_scheduleCallback=function(k,K,ne){var fe=n.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?fe+ne:fe):ne=fe,k){case 1:var ye=-1;break;case 2:ye=250;break;case 5:ye=1073741823;break;case 4:ye=1e4;break;default:ye=5e3}return ye=ne+ye,k={id:w++,callback:K,priorityLevel:k,startTime:ne,expirationTime:ye,sortIndex:-1},ne>fe?(k.sortIndex=ne,o(d,k),u(g)===null&&k===u(d)&&(v?(_(L),L=-1):v=!0,R(Y,ne-fe))):(k.sortIndex=ye,o(g,k),S||C||(S=!0,z||(z=!0,M()))),k},n.unstable_shouldYield=H,n.unstable_wrapCallback=function(k){var K=E;return function(){var ne=E;E=K;try{return k.apply(this,arguments)}finally{E=ne}}}})(jd)),jd}var Kf;function Tv(){return Kf||(Kf=1,yd.exports=Av()),yd.exports}var Nd={exports:{}},Ce={};var Jf;function Mv(){if(Jf)return Ce;Jf=1;var n=Symbol.for("react.transitional.element"),o=Symbol.for("react.portal"),u=Symbol.for("react.fragment"),c=Symbol.for("react.strict_mode"),h=Symbol.for("react.profiler"),m=Symbol.for("react.consumer"),b=Symbol.for("react.context"),x=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),A=Symbol.for("react.activity"),E=Symbol.iterator;function C(N){return N===null||typeof N!="object"?null:(N=E&&N[E]||N["@@iterator"],typeof N=="function"?N:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,p={};function y(N,B,W){this.props=N,this.context=B,this.refs=p,this.updater=W||S}y.prototype.isReactComponent={},y.prototype.setState=function(N,B){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,B,"setState")},y.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function _(){}_.prototype=y.prototype;function O(N,B,W){this.props=N,this.context=B,this.refs=p,this.updater=W||S}var q=O.prototype=new _;q.constructor=O,v(q,y.prototype),q.isPureReactComponent=!0;var Y=Array.isArray;function z(){}var L={H:null,A:null,T:null,S:null},te=Object.prototype.hasOwnProperty;function oe(N,B,W){var J=W.ref;return{$$typeof:n,type:N,key:B,ref:J!==void 0?J:null,props:W}}function H(N,B){return oe(N.type,B,N.props)}function se(N){return typeof N=="object"&&N!==null&&N.$$typeof===n}function M(N){var B={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function(W){return B[W]})}var ie=/\/+/g;function V(N,B){return typeof N=="object"&&N!==null&&N.key!=null?M(""+N.key):B.toString(36)}function R(N){switch(N.status){case"fulfilled":return N.value;case"rejected":throw N.reason;default:switch(typeof N.status=="string"?N.then(z,z):(N.status="pending",N.then(function(B){N.status==="pending"&&(N.status="fulfilled",N.value=B)},function(B){N.status==="pending"&&(N.status="rejected",N.reason=B)})),N.status){case"fulfilled":return N.value;case"rejected":throw N.reason}}throw N}function k(N,B,W,J,de){var be=typeof N;(be==="undefined"||be==="boolean")&&(N=null);var je=!1;if(N===null)je=!0;else switch(be){case"bigint":case"string":case"number":je=!0;break;case"object":switch(N.$$typeof){case n:case o:je=!0;break;case w:return je=N._init,k(je(N._payload),B,W,J,de)}}if(je)return de=de(N),je=J===""?"."+V(N,0):J,Y(de)?(W="",je!=null&&(W=je.replace(ie,"$&/")+"/"),k(de,B,W,"",function(it){return it})):de!=null&&(se(de)&&(de=H(de,W+(de.key==null||N&&N.key===de.key?"":(""+de.key).replace(ie,"$&/")+"/")+je)),B.push(de)),1;je=0;var we=J===""?".":J+":";if(Y(N))for(var Ae=0;Ae<N.length;Ae++)J=N[Ae],be=we+V(J,Ae),je+=k(J,B,W,be,de);else if(Ae=C(N),typeof Ae=="function")for(N=Ae.call(N),Ae=0;!(J=N.next()).done;)J=J.value,be=we+V(J,Ae++),je+=k(J,B,W,be,de);else if(be==="object"){if(typeof N.then=="function")return k(R(N),B,W,J,de);throw B=String(N),Error("Objects are not valid as a React child (found: "+(B==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":B)+"). If you meant to render a collection of children, use an array instead.")}return je}function K(N,B,W){if(N==null)return N;var J=[],de=0;return k(N,J,"","",function(be){return B.call(W,be,de++)}),J}function ne(N){if(N._status===-1){var B=N._result;B=B(),B.then(function(W){(N._status===0||N._status===-1)&&(N._status=1,N._result=W)},function(W){(N._status===0||N._status===-1)&&(N._status=2,N._result=W)}),N._status===-1&&(N._status=0,N._result=B)}if(N._status===1)return N._result.default;throw N._result}var fe=typeof reportError=="function"?reportError:function(N){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var B=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof N=="object"&&N!==null&&typeof N.message=="string"?String(N.message):String(N),error:N});if(!window.dispatchEvent(B))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",N);return}console.error(N)},ye={map:K,forEach:function(N,B,W){K(N,function(){B.apply(this,arguments)},W)},count:function(N){var B=0;return K(N,function(){B++}),B},toArray:function(N){return K(N,function(B){return B})||[]},only:function(N){if(!se(N))throw Error("React.Children.only expected to receive a single React element child.");return N}};return Ce.Activity=A,Ce.Children=ye,Ce.Component=y,Ce.Fragment=u,Ce.Profiler=h,Ce.PureComponent=O,Ce.StrictMode=c,Ce.Suspense=g,Ce.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=L,Ce.__COMPILER_RUNTIME={__proto__:null,c:function(N){return L.H.useMemoCache(N)}},Ce.cache=function(N){return function(){return N.apply(null,arguments)}},Ce.cacheSignal=function(){return null},Ce.cloneElement=function(N,B,W){if(N==null)throw Error("The argument must be a React element, but you passed "+N+".");var J=v({},N.props),de=N.key;if(B!=null)for(be in B.key!==void 0&&(de=""+B.key),B)!te.call(B,be)||be==="key"||be==="__self"||be==="__source"||be==="ref"&&B.ref===void 0||(J[be]=B[be]);var be=arguments.length-2;if(be===1)J.children=W;else if(1<be){for(var je=Array(be),we=0;we<be;we++)je[we]=arguments[we+2];J.children=je}return oe(N.type,de,J)},Ce.createContext=function(N){return N={$$typeof:b,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null},N.Provider=N,N.Consumer={$$typeof:m,_context:N},N},Ce.createElement=function(N,B,W){var J,de={},be=null;if(B!=null)for(J in B.key!==void 0&&(be=""+B.key),B)te.call(B,J)&&J!=="key"&&J!=="__self"&&J!=="__source"&&(de[J]=B[J]);var je=arguments.length-2;if(je===1)de.children=W;else if(1<je){for(var we=Array(je),Ae=0;Ae<je;Ae++)we[Ae]=arguments[Ae+2];de.children=we}if(N&&N.defaultProps)for(J in je=N.defaultProps,je)de[J]===void 0&&(de[J]=je[J]);return oe(N,be,de)},Ce.createRef=function(){return{current:null}},Ce.forwardRef=function(N){return{$$typeof:x,render:N}},Ce.isValidElement=se,Ce.lazy=function(N){return{$$typeof:w,_payload:{_status:-1,_result:N},_init:ne}},Ce.memo=function(N,B){return{$$typeof:d,type:N,compare:B===void 0?null:B}},Ce.startTransition=function(N){var B=L.T,W={};L.T=W;try{var J=N(),de=L.S;de!==null&&de(W,J),typeof J=="object"&&J!==null&&typeof J.then=="function"&&J.then(z,fe)}catch(be){fe(be)}finally{B!==null&&W.types!==null&&(B.types=W.types),L.T=B}},Ce.unstable_useCacheRefresh=function(){return L.H.useCacheRefresh()},Ce.use=function(N){return L.H.use(N)},Ce.useActionState=function(N,B,W){return L.H.useActionState(N,B,W)},Ce.useCallback=function(N,B){return L.H.useCallback(N,B)},Ce.useContext=function(N){return L.H.useContext(N)},Ce.useDebugValue=function(){},Ce.useDeferredValue=function(N,B){return L.H.useDeferredValue(N,B)},Ce.useEffect=function(N,B){return L.H.useEffect(N,B)},Ce.useEffectEvent=function(N){return L.H.useEffectEvent(N)},Ce.useId=function(){return L.H.useId()},Ce.useImperativeHandle=function(N,B,W){return L.H.useImperativeHandle(N,B,W)},Ce.useInsertionEffect=function(N,B){return L.H.useInsertionEffect(N,B)},Ce.useLayoutEffect=function(N,B){return L.H.useLayoutEffect(N,B)},Ce.useMemo=function(N,B){return L.H.useMemo(N,B)},Ce.useOptimistic=function(N,B){return L.H.useOptimistic(N,B)},Ce.useReducer=function(N,B,W){return L.H.useReducer(N,B,W)},Ce.useRef=function(N){return L.H.useRef(N)},Ce.useState=function(N){return L.H.useState(N)},Ce.useSyncExternalStore=function(N,B,W){return L.H.useSyncExternalStore(N,B,W)},Ce.useTransition=function(){return L.H.useTransition()},Ce.version="19.2.4",Ce}var Wf;function Pd(){return Wf||(Wf=1,Nd.exports=Mv()),Nd.exports}var Sd={exports:{}},yt={};var eh;function kv(){if(eh)return yt;eh=1;var n=Pd();function o(g){var d="https://react.dev/errors/"+g;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var w=2;w<arguments.length;w++)d+="&args[]="+encodeURIComponent(arguments[w])}return"Minified React error #"+g+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function u(){}var c={d:{f:u,r:function(){throw Error(o(522))},D:u,C:u,L:u,m:u,X:u,S:u,M:u},p:0,findDOMNode:null},h=Symbol.for("react.portal");function m(g,d,w){var A=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:h,key:A==null?null:""+A,children:g,containerInfo:d,implementation:w}}var b=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function x(g,d){if(g==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return yt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=c,yt.createPortal=function(g,d){var w=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(o(299));return m(g,d,null,w)},yt.flushSync=function(g){var d=b.T,w=c.p;try{if(b.T=null,c.p=2,g)return g()}finally{b.T=d,c.p=w,c.d.f()}},yt.preconnect=function(g,d){typeof g=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,c.d.C(g,d))},yt.prefetchDNS=function(g){typeof g=="string"&&c.d.D(g)},yt.preinit=function(g,d){if(typeof g=="string"&&d&&typeof d.as=="string"){var w=d.as,A=x(w,d.crossOrigin),E=typeof d.integrity=="string"?d.integrity:void 0,C=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;w==="style"?c.d.S(g,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:A,integrity:E,fetchPriority:C}):w==="script"&&c.d.X(g,{crossOrigin:A,integrity:E,fetchPriority:C,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},yt.preinitModule=function(g,d){if(typeof g=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var w=x(d.as,d.crossOrigin);c.d.M(g,{crossOrigin:w,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&c.d.M(g)},yt.preload=function(g,d){if(typeof g=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var w=d.as,A=x(w,d.crossOrigin);c.d.L(g,w,{crossOrigin:A,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},yt.preloadModule=function(g,d){if(typeof g=="string")if(d){var w=x(d.as,d.crossOrigin);c.d.m(g,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:w,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else c.d.m(g)},yt.requestFormReset=function(g){c.d.r(g)},yt.unstable_batchedUpdates=function(g,d){return g(d)},yt.useFormState=function(g,d,w){return b.H.useFormState(g,d,w)},yt.useFormStatus=function(){return b.H.useHostTransitionStatus()},yt.version="19.2.4",yt}var th;function Ev(){if(th)return Sd.exports;th=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(o){console.error(o)}}return n(),Sd.exports=kv(),Sd.exports}var ah;function zv(){if(ah)return In;ah=1;var n=Tv(),o=Pd(),u=Ev();function c(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)t+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function h(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function m(e){var t=e,l=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(l=t.return),e=t.return;while(e)}return t.tag===3?l:null}function b(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function x(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function g(e){if(m(e)!==e)throw Error(c(188))}function d(e){var t=e.alternate;if(!t){if(t=m(e),t===null)throw Error(c(188));return t!==e?null:e}for(var l=e,s=t;;){var r=l.return;if(r===null)break;var i=r.alternate;if(i===null){if(s=r.return,s!==null){l=s;continue}break}if(r.child===i.child){for(i=r.child;i;){if(i===l)return g(r),e;if(i===s)return g(r),t;i=i.sibling}throw Error(c(188))}if(l.return!==s.return)l=r,s=i;else{for(var f=!1,T=r.child;T;){if(T===l){f=!0,l=r,s=i;break}if(T===s){f=!0,s=r,l=i;break}T=T.sibling}if(!f){for(T=i.child;T;){if(T===l){f=!0,l=i,s=r;break}if(T===s){f=!0,s=i,l=r;break}T=T.sibling}if(!f)throw Error(c(189))}}if(l.alternate!==s)throw Error(c(190))}if(l.tag!==3)throw Error(c(188));return l.stateNode.current===l?e:t}function w(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=w(e),t!==null)return t;e=e.sibling}return null}var A=Object.assign,E=Symbol.for("react.element"),C=Symbol.for("react.transitional.element"),S=Symbol.for("react.portal"),v=Symbol.for("react.fragment"),p=Symbol.for("react.strict_mode"),y=Symbol.for("react.profiler"),_=Symbol.for("react.consumer"),O=Symbol.for("react.context"),q=Symbol.for("react.forward_ref"),Y=Symbol.for("react.suspense"),z=Symbol.for("react.suspense_list"),L=Symbol.for("react.memo"),te=Symbol.for("react.lazy"),oe=Symbol.for("react.activity"),H=Symbol.for("react.memo_cache_sentinel"),se=Symbol.iterator;function M(e){return e===null||typeof e!="object"?null:(e=se&&e[se]||e["@@iterator"],typeof e=="function"?e:null)}var ie=Symbol.for("react.client.reference");function V(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===ie?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case v:return"Fragment";case y:return"Profiler";case p:return"StrictMode";case Y:return"Suspense";case z:return"SuspenseList";case oe:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case S:return"Portal";case O:return e.displayName||"Context";case _:return(e._context.displayName||"Context")+".Consumer";case q:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case L:return t=e.displayName||null,t!==null?t:V(e.type)||"Memo";case te:t=e._payload,e=e._init;try{return V(e(t))}catch{}}return null}var R=Array.isArray,k=o.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,K=u.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ne={pending:!1,data:null,method:null,action:null},fe=[],ye=-1;function N(e){return{current:e}}function B(e){0>ye||(e.current=fe[ye],fe[ye]=null,ye--)}function W(e,t){ye++,fe[ye]=e.current,e.current=t}var J=N(null),de=N(null),be=N(null),je=N(null);function we(e,t){switch(W(be,t),W(de,e),W(J,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?bf(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=bf(t),e=vf(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}B(J),W(J,e)}function Ae(){B(J),B(de),B(be)}function it(e){e.memoizedState!==null&&W(je,e);var t=J.current,l=vf(t,e.type);t!==l&&(W(de,e),W(J,l))}function Ze(e){de.current===e&&(B(J),B(de)),je.current===e&&(B(je),zn._currentValue=ne)}var St,re;function ve(e){if(St===void 0)try{throw Error()}catch(l){var t=l.stack.trim().match(/\n( *(at )?)/);St=t&&t[1]||"",re=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+St+e+re}var Fe=!1;function vt(e,t){if(!e||Fe)return"";Fe=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var s={DetermineComponentFrameRoot:function(){try{if(t){var le=function(){throw Error()};if(Object.defineProperty(le.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(le,[])}catch(Z){var Q=Z}Reflect.construct(e,[],le)}else{try{le.call()}catch(Z){Q=Z}e.call(le.prototype)}}else{try{throw Error()}catch(Z){Q=Z}(le=e())&&typeof le.catch=="function"&&le.catch(function(){})}}catch(Z){if(Z&&Q&&typeof Z.stack=="string")return[Z.stack,Q.stack]}return[null,null]}};s.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var r=Object.getOwnPropertyDescriptor(s.DetermineComponentFrameRoot,"name");r&&r.configurable&&Object.defineProperty(s.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var i=s.DetermineComponentFrameRoot(),f=i[0],T=i[1];if(f&&T){var D=f.split(`
`),G=T.split(`
`);for(r=s=0;s<D.length&&!D[s].includes("DetermineComponentFrameRoot");)s++;for(;r<G.length&&!G[r].includes("DetermineComponentFrameRoot");)r++;if(s===D.length||r===G.length)for(s=D.length-1,r=G.length-1;1<=s&&0<=r&&D[s]!==G[r];)r--;for(;1<=s&&0<=r;s--,r--)if(D[s]!==G[r]){if(s!==1||r!==1)do if(s--,r--,0>r||D[s]!==G[r]){var ee=`
`+D[s].replace(" at new "," at ");return e.displayName&&ee.includes("<anonymous>")&&(ee=ee.replace("<anonymous>",e.displayName)),ee}while(1<=s&&0<=r);break}}}finally{Fe=!1,Error.prepareStackTrace=l}return(l=e?e.displayName||e.name:"")?ve(l):""}function We(e,t){switch(e.tag){case 26:case 27:case 5:return ve(e.type);case 16:return ve("Lazy");case 13:return e.child!==t&&t!==null?ve("Suspense Fallback"):ve("Suspense");case 19:return ve("SuspenseList");case 0:case 15:return vt(e.type,!1);case 11:return vt(e.type.render,!1);case 1:return vt(e.type,!0);case 31:return ve("Activity");default:return""}}function _t(e){try{var t="",l=null;do t+=We(e,l),l=e,e=e.return;while(e);return t}catch(s){return`
Error generating stack: `+s.message+`
`+s.stack}}var dt=Object.prototype.hasOwnProperty,kt=n.unstable_scheduleCallback,Sa=n.unstable_cancelCallback,Ji=n.unstable_shouldYield,Jn=n.unstable_requestPaint,wt=n.unstable_now,Wi=n.unstable_getCurrentPriorityLevel,Wn=n.unstable_ImmediatePriority,er=n.unstable_UserBlockingPriority,$l=n.unstable_NormalPriority,eo=n.unstable_LowPriority,tr=n.unstable_IdlePriority,to=n.log,ao=n.unstable_setDisableYieldValue,pl=null,Ct=null;function ua(e){if(typeof to=="function"&&ao(e),Ct&&typeof Ct.setStrictMode=="function")try{Ct.setStrictMode(pl,e)}catch{}}var At=Math.clz32?Math.clz32:no,lo=Math.log,so=Math.LN2;function no(e){return e>>>=0,e===0?32:31-(lo(e)/so|0)|0}var Pl=256,Fl=262144,Gl=4194304;function wa(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Vl(e,t,l){var s=e.pendingLanes;if(s===0)return 0;var r=0,i=e.suspendedLanes,f=e.pingedLanes;e=e.warmLanes;var T=s&134217727;return T!==0?(s=T&~i,s!==0?r=wa(s):(f&=T,f!==0?r=wa(f):l||(l=T&~e,l!==0&&(r=wa(l))))):(T=s&~i,T!==0?r=wa(T):f!==0?r=wa(f):l||(l=s&~e,l!==0&&(r=wa(l)))),r===0?0:t!==0&&t!==r&&(t&i)===0&&(i=r&-r,l=t&-t,i>=l||i===32&&(l&4194048)!==0)?t:r}function bl(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function ro(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ar(){var e=Gl;return Gl<<=1,(Gl&62914560)===0&&(Gl=4194304),e}function $s(e){for(var t=[],l=0;31>l;l++)t.push(e);return t}function vl(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function io(e,t,l,s,r,i){var f=e.pendingLanes;e.pendingLanes=l,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=l,e.entangledLanes&=l,e.errorRecoveryDisabledLanes&=l,e.shellSuspendCounter=0;var T=e.entanglements,D=e.expirationTimes,G=e.hiddenUpdates;for(l=f&~l;0<l;){var ee=31-At(l),le=1<<ee;T[ee]=0,D[ee]=-1;var Q=G[ee];if(Q!==null)for(G[ee]=null,ee=0;ee<Q.length;ee++){var Z=Q[ee];Z!==null&&(Z.lane&=-536870913)}l&=~le}s!==0&&lr(e,s,0),i!==0&&r===0&&e.tag!==0&&(e.suspendedLanes|=i&~(f&~t))}function lr(e,t,l){e.pendingLanes|=t,e.suspendedLanes&=~t;var s=31-At(t);e.entangledLanes|=t,e.entanglements[s]=e.entanglements[s]|1073741824|l&261930}function sr(e,t){var l=e.entangledLanes|=t;for(e=e.entanglements;l;){var s=31-At(l),r=1<<s;r&t|e[s]&t&&(e[s]|=t),l&=~r}}function nr(e,t){var l=t&-t;return l=(l&42)!==0?1:Ps(l),(l&(e.suspendedLanes|t))!==0?0:l}function Ps(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Fs(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function rr(){var e=K.p;return e!==0?e:(e=window.event,e===void 0?32:Uf(e.type))}function ir(e,t){var l=K.p;try{return K.p=e,t()}finally{K.p=l}}var ma=Math.random().toString(36).slice(2),ot="__reactFiber$"+ma,gt="__reactProps$"+ma,Ga="__reactContainer$"+ma,Gs="__reactEvents$"+ma,oo="__reactListeners$"+ma,co="__reactHandles$"+ma,P="__reactResources$"+ma,ue="__reactMarker$"+ma;function Tt(e){delete e[ot],delete e[gt],delete e[Gs],delete e[oo],delete e[co]}function na(e){var t=e[ot];if(t)return t;for(var l=e.parentNode;l;){if(t=l[Ga]||l[ot]){if(l=t.alternate,t.child!==null||l!==null&&l.child!==null)for(e=Cf(e);e!==null;){if(l=e[ot])return l;e=Cf(e)}return t}e=l,l=e.parentNode}return null}function Yl(e){if(e=e[ot]||e[Ga]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function Vs(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(c(33))}function Ql(e){var t=e[P];return t||(t=e[P]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function ut(e){e[ue]=!0}var su=new Set,nu={};function gl(e,t){Xl(e,t),Xl(e+"Capture",t)}function Xl(e,t){for(nu[e]=t,e=0;e<t.length;e++)su.add(t[e])}var hb=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ru={},iu={};function pb(e){return dt.call(iu,e)?!0:dt.call(ru,e)?!1:hb.test(e)?iu[e]=!0:(ru[e]=!0,!1)}function or(e,t,l){if(pb(t))if(l===null)e.removeAttribute(t);else{switch(typeof l){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var s=t.toLowerCase().slice(0,5);if(s!=="data-"&&s!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+l)}}function cr(e,t,l){if(l===null)e.removeAttribute(t);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+l)}}function Ca(e,t,l,s){if(s===null)e.removeAttribute(l);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(l);return}e.setAttributeNS(t,l,""+s)}}function Vt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function ou(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function bb(e,t,l){var s=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var r=s.get,i=s.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(f){l=""+f,i.call(this,f)}}),Object.defineProperty(e,t,{enumerable:s.enumerable}),{getValue:function(){return l},setValue:function(f){l=""+f},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function uo(e){if(!e._valueTracker){var t=ou(e)?"checked":"value";e._valueTracker=bb(e,t,""+e[t])}}function cu(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var l=t.getValue(),s="";return e&&(s=ou(e)?e.checked?"true":"false":e.value),e=s,e!==l?(t.setValue(e),!0):!1}function dr(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var vb=/[\n"\\]/g;function Yt(e){return e.replace(vb,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function mo(e,t,l,s,r,i,f,T){e.name="",f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"?e.type=f:e.removeAttribute("type"),t!=null?f==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+Vt(t)):e.value!==""+Vt(t)&&(e.value=""+Vt(t)):f!=="submit"&&f!=="reset"||e.removeAttribute("value"),t!=null?xo(e,f,Vt(t)):l!=null?xo(e,f,Vt(l)):s!=null&&e.removeAttribute("value"),r==null&&i!=null&&(e.defaultChecked=!!i),r!=null&&(e.checked=r&&typeof r!="function"&&typeof r!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?e.name=""+Vt(T):e.removeAttribute("name")}function du(e,t,l,s,r,i,f,T){if(i!=null&&typeof i!="function"&&typeof i!="symbol"&&typeof i!="boolean"&&(e.type=i),t!=null||l!=null){if(!(i!=="submit"&&i!=="reset"||t!=null)){uo(e);return}l=l!=null?""+Vt(l):"",t=t!=null?""+Vt(t):l,T||t===e.value||(e.value=t),e.defaultValue=t}s=s??r,s=typeof s!="function"&&typeof s!="symbol"&&!!s,e.checked=T?e.checked:!!s,e.defaultChecked=!!s,f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(e.name=f),uo(e)}function xo(e,t,l){t==="number"&&dr(e.ownerDocument)===e||e.defaultValue===""+l||(e.defaultValue=""+l)}function Zl(e,t,l,s){if(e=e.options,t){t={};for(var r=0;r<l.length;r++)t["$"+l[r]]=!0;for(l=0;l<e.length;l++)r=t.hasOwnProperty("$"+e[l].value),e[l].selected!==r&&(e[l].selected=r),r&&s&&(e[l].defaultSelected=!0)}else{for(l=""+Vt(l),t=null,r=0;r<e.length;r++){if(e[r].value===l){e[r].selected=!0,s&&(e[r].defaultSelected=!0);return}t!==null||e[r].disabled||(t=e[r])}t!==null&&(t.selected=!0)}}function uu(e,t,l){if(t!=null&&(t=""+Vt(t),t!==e.value&&(e.value=t),l==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=l!=null?""+Vt(l):""}function mu(e,t,l,s){if(t==null){if(s!=null){if(l!=null)throw Error(c(92));if(R(s)){if(1<s.length)throw Error(c(93));s=s[0]}l=s}l==null&&(l=""),t=l}l=Vt(t),e.defaultValue=l,s=e.textContent,s===l&&s!==""&&s!==null&&(e.value=s),uo(e)}function Kl(e,t){if(t){var l=e.firstChild;if(l&&l===e.lastChild&&l.nodeType===3){l.nodeValue=t;return}}e.textContent=t}var gb=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function xu(e,t,l){var s=t.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?s?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":s?e.setProperty(t,l):typeof l!="number"||l===0||gb.has(t)?t==="float"?e.cssFloat=l:e[t]=(""+l).trim():e[t]=l+"px"}function fu(e,t,l){if(t!=null&&typeof t!="object")throw Error(c(62));if(e=e.style,l!=null){for(var s in l)!l.hasOwnProperty(s)||t!=null&&t.hasOwnProperty(s)||(s.indexOf("--")===0?e.setProperty(s,""):s==="float"?e.cssFloat="":e[s]="");for(var r in t)s=t[r],t.hasOwnProperty(r)&&l[r]!==s&&xu(e,r,s)}else for(var i in t)t.hasOwnProperty(i)&&xu(e,i,t[i])}function fo(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var yb=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),jb=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ur(e){return jb.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Aa(){}var ho=null;function po(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Jl=null,Wl=null;function hu(e){var t=Yl(e);if(t&&(e=t.stateNode)){var l=e[gt]||null;e:switch(e=t.stateNode,t.type){case"input":if(mo(e,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),t=l.name,l.type==="radio"&&t!=null){for(l=e;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+Yt(""+t)+'"][type="radio"]'),t=0;t<l.length;t++){var s=l[t];if(s!==e&&s.form===e.form){var r=s[gt]||null;if(!r)throw Error(c(90));mo(s,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name)}}for(t=0;t<l.length;t++)s=l[t],s.form===e.form&&cu(s)}break e;case"textarea":uu(e,l.value,l.defaultValue);break e;case"select":t=l.value,t!=null&&Zl(e,!!l.multiple,t,!1)}}}var bo=!1;function pu(e,t,l){if(bo)return e(t,l);bo=!0;try{var s=e(t);return s}finally{if(bo=!1,(Jl!==null||Wl!==null)&&(Jr(),Jl&&(t=Jl,e=Wl,Wl=Jl=null,hu(t),e)))for(t=0;t<e.length;t++)hu(e[t])}}function Ys(e,t){var l=e.stateNode;if(l===null)return null;var s=l[gt]||null;if(s===null)return null;l=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(l&&typeof l!="function")throw Error(c(231,t,typeof l));return l}var Ta=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),vo=!1;if(Ta)try{var Qs={};Object.defineProperty(Qs,"passive",{get:function(){vo=!0}}),window.addEventListener("test",Qs,Qs),window.removeEventListener("test",Qs,Qs)}catch{vo=!1}var Va=null,go=null,mr=null;function bu(){if(mr)return mr;var e,t=go,l=t.length,s,r="value"in Va?Va.value:Va.textContent,i=r.length;for(e=0;e<l&&t[e]===r[e];e++);var f=l-e;for(s=1;s<=f&&t[l-s]===r[i-s];s++);return mr=r.slice(e,1<s?1-s:void 0)}function xr(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function fr(){return!0}function vu(){return!1}function Et(e){function t(l,s,r,i,f){this._reactName=l,this._targetInst=r,this.type=s,this.nativeEvent=i,this.target=f,this.currentTarget=null;for(var T in e)e.hasOwnProperty(T)&&(l=e[T],this[T]=l?l(i):i[T]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?fr:vu,this.isPropagationStopped=vu,this}return A(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=fr)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=fr)},persist:function(){},isPersistent:fr}),t}var yl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hr=Et(yl),Xs=A({},yl,{view:0,detail:0}),Nb=Et(Xs),yo,jo,Zs,pr=A({},Xs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:So,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Zs&&(Zs&&e.type==="mousemove"?(yo=e.screenX-Zs.screenX,jo=e.screenY-Zs.screenY):jo=yo=0,Zs=e),yo)},movementY:function(e){return"movementY"in e?e.movementY:jo}}),gu=Et(pr),Sb=A({},pr,{dataTransfer:0}),wb=Et(Sb),Cb=A({},Xs,{relatedTarget:0}),No=Et(Cb),Ab=A({},yl,{animationName:0,elapsedTime:0,pseudoElement:0}),Tb=Et(Ab),Mb=A({},yl,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kb=Et(Mb),Eb=A({},yl,{data:0}),yu=Et(Eb),zb={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Db={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Rb={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Lb(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Rb[e])?!!t[e]:!1}function So(){return Lb}var Ob=A({},Xs,{key:function(e){if(e.key){var t=zb[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=xr(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Db[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:So,charCode:function(e){return e.type==="keypress"?xr(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?xr(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Ib=Et(Ob),_b=A({},pr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ju=Et(_b),Hb=A({},Xs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:So}),qb=Et(Hb),Bb=A({},yl,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ub=Et(Bb),$b=A({},pr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Pb=Et($b),Fb=A({},yl,{newState:0,oldState:0}),Gb=Et(Fb),Vb=[9,13,27,32],wo=Ta&&"CompositionEvent"in window,Ks=null;Ta&&"documentMode"in document&&(Ks=document.documentMode);var Yb=Ta&&"TextEvent"in window&&!Ks,Nu=Ta&&(!wo||Ks&&8<Ks&&11>=Ks),Su=" ",wu=!1;function Cu(e,t){switch(e){case"keyup":return Vb.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Au(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var es=!1;function Qb(e,t){switch(e){case"compositionend":return Au(t);case"keypress":return t.which!==32?null:(wu=!0,Su);case"textInput":return e=t.data,e===Su&&wu?null:e;default:return null}}function Xb(e,t){if(es)return e==="compositionend"||!wo&&Cu(e,t)?(e=bu(),mr=go=Va=null,es=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Nu&&t.locale!=="ko"?null:t.data;default:return null}}var Zb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Tu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Zb[e.type]:t==="textarea"}function Mu(e,t,l,s){Jl?Wl?Wl.push(s):Wl=[s]:Jl=s,t=ni(t,"onChange"),0<t.length&&(l=new hr("onChange","change",null,l,s),e.push({event:l,listeners:t}))}var Js=null,Ws=null;function Kb(e){uf(e,0)}function br(e){var t=Vs(e);if(cu(t))return e}function ku(e,t){if(e==="change")return t}var Eu=!1;if(Ta){var Co;if(Ta){var Ao="oninput"in document;if(!Ao){var zu=document.createElement("div");zu.setAttribute("oninput","return;"),Ao=typeof zu.oninput=="function"}Co=Ao}else Co=!1;Eu=Co&&(!document.documentMode||9<document.documentMode)}function Du(){Js&&(Js.detachEvent("onpropertychange",Ru),Ws=Js=null)}function Ru(e){if(e.propertyName==="value"&&br(Ws)){var t=[];Mu(t,Ws,e,po(e)),pu(Kb,t)}}function Jb(e,t,l){e==="focusin"?(Du(),Js=t,Ws=l,Js.attachEvent("onpropertychange",Ru)):e==="focusout"&&Du()}function Wb(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return br(Ws)}function e0(e,t){if(e==="click")return br(t)}function t0(e,t){if(e==="input"||e==="change")return br(t)}function a0(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ht=typeof Object.is=="function"?Object.is:a0;function en(e,t){if(Ht(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var l=Object.keys(e),s=Object.keys(t);if(l.length!==s.length)return!1;for(s=0;s<l.length;s++){var r=l[s];if(!dt.call(t,r)||!Ht(e[r],t[r]))return!1}return!0}function Lu(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ou(e,t){var l=Lu(e);e=0;for(var s;l;){if(l.nodeType===3){if(s=e+l.textContent.length,e<=t&&s>=t)return{node:l,offset:t-e};e=s}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Lu(l)}}function Iu(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Iu(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function _u(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=dr(e.document);t instanceof e.HTMLIFrameElement;){try{var l=typeof t.contentWindow.location.href=="string"}catch{l=!1}if(l)e=t.contentWindow;else break;t=dr(e.document)}return t}function To(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var l0=Ta&&"documentMode"in document&&11>=document.documentMode,ts=null,Mo=null,tn=null,ko=!1;function Hu(e,t,l){var s=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;ko||ts==null||ts!==dr(s)||(s=ts,"selectionStart"in s&&To(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),tn&&en(tn,s)||(tn=s,s=ni(Mo,"onSelect"),0<s.length&&(t=new hr("onSelect","select",null,t,l),e.push({event:t,listeners:s}),t.target=ts)))}function jl(e,t){var l={};return l[e.toLowerCase()]=t.toLowerCase(),l["Webkit"+e]="webkit"+t,l["Moz"+e]="moz"+t,l}var as={animationend:jl("Animation","AnimationEnd"),animationiteration:jl("Animation","AnimationIteration"),animationstart:jl("Animation","AnimationStart"),transitionrun:jl("Transition","TransitionRun"),transitionstart:jl("Transition","TransitionStart"),transitioncancel:jl("Transition","TransitionCancel"),transitionend:jl("Transition","TransitionEnd")},Eo={},qu={};Ta&&(qu=document.createElement("div").style,"AnimationEvent"in window||(delete as.animationend.animation,delete as.animationiteration.animation,delete as.animationstart.animation),"TransitionEvent"in window||delete as.transitionend.transition);function Nl(e){if(Eo[e])return Eo[e];if(!as[e])return e;var t=as[e],l;for(l in t)if(t.hasOwnProperty(l)&&l in qu)return Eo[e]=t[l];return e}var Bu=Nl("animationend"),Uu=Nl("animationiteration"),$u=Nl("animationstart"),s0=Nl("transitionrun"),n0=Nl("transitionstart"),r0=Nl("transitioncancel"),Pu=Nl("transitionend"),Fu=new Map,zo="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");zo.push("scrollEnd");function ra(e,t){Fu.set(e,t),gl(t,[e])}var vr=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Qt=[],ls=0,Do=0;function gr(){for(var e=ls,t=Do=ls=0;t<e;){var l=Qt[t];Qt[t++]=null;var s=Qt[t];Qt[t++]=null;var r=Qt[t];Qt[t++]=null;var i=Qt[t];if(Qt[t++]=null,s!==null&&r!==null){var f=s.pending;f===null?r.next=r:(r.next=f.next,f.next=r),s.pending=r}i!==0&&Gu(l,r,i)}}function yr(e,t,l,s){Qt[ls++]=e,Qt[ls++]=t,Qt[ls++]=l,Qt[ls++]=s,Do|=s,e.lanes|=s,e=e.alternate,e!==null&&(e.lanes|=s)}function Ro(e,t,l,s){return yr(e,t,l,s),jr(e)}function Sl(e,t){return yr(e,null,null,t),jr(e)}function Gu(e,t,l){e.lanes|=l;var s=e.alternate;s!==null&&(s.lanes|=l);for(var r=!1,i=e.return;i!==null;)i.childLanes|=l,s=i.alternate,s!==null&&(s.childLanes|=l),i.tag===22&&(e=i.stateNode,e===null||e._visibility&1||(r=!0)),e=i,i=i.return;return e.tag===3?(i=e.stateNode,r&&t!==null&&(r=31-At(l),e=i.hiddenUpdates,s=e[r],s===null?e[r]=[t]:s.push(t),t.lane=l|536870912),i):null}function jr(e){if(50<wn)throw wn=0,$c=null,Error(c(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var ss={};function i0(e,t,l,s){this.tag=e,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qt(e,t,l,s){return new i0(e,t,l,s)}function Lo(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Ma(e,t){var l=e.alternate;return l===null?(l=qt(e.tag,t,e.key,e.mode),l.elementType=e.elementType,l.type=e.type,l.stateNode=e.stateNode,l.alternate=e,e.alternate=l):(l.pendingProps=t,l.type=e.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=e.flags&65011712,l.childLanes=e.childLanes,l.lanes=e.lanes,l.child=e.child,l.memoizedProps=e.memoizedProps,l.memoizedState=e.memoizedState,l.updateQueue=e.updateQueue,t=e.dependencies,l.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},l.sibling=e.sibling,l.index=e.index,l.ref=e.ref,l.refCleanup=e.refCleanup,l}function Vu(e,t){e.flags&=65011714;var l=e.alternate;return l===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=l.childLanes,e.lanes=l.lanes,e.child=l.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=l.memoizedProps,e.memoizedState=l.memoizedState,e.updateQueue=l.updateQueue,e.type=l.type,t=l.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Nr(e,t,l,s,r,i){var f=0;if(s=e,typeof e=="function")Lo(e)&&(f=1);else if(typeof e=="string")f=mv(e,l,J.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case oe:return e=qt(31,l,t,r),e.elementType=oe,e.lanes=i,e;case v:return wl(l.children,r,i,t);case p:f=8,r|=24;break;case y:return e=qt(12,l,t,r|2),e.elementType=y,e.lanes=i,e;case Y:return e=qt(13,l,t,r),e.elementType=Y,e.lanes=i,e;case z:return e=qt(19,l,t,r),e.elementType=z,e.lanes=i,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case O:f=10;break e;case _:f=9;break e;case q:f=11;break e;case L:f=14;break e;case te:f=16,s=null;break e}f=29,l=Error(c(130,e===null?"null":typeof e,"")),s=null}return t=qt(f,l,t,r),t.elementType=e,t.type=s,t.lanes=i,t}function wl(e,t,l,s){return e=qt(7,e,s,t),e.lanes=l,e}function Oo(e,t,l){return e=qt(6,e,null,t),e.lanes=l,e}function Yu(e){var t=qt(18,null,null,0);return t.stateNode=e,t}function Io(e,t,l){return t=qt(4,e.children!==null?e.children:[],e.key,t),t.lanes=l,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Qu=new WeakMap;function Xt(e,t){if(typeof e=="object"&&e!==null){var l=Qu.get(e);return l!==void 0?l:(t={value:e,source:t,stack:_t(t)},Qu.set(e,t),t)}return{value:e,source:t,stack:_t(t)}}var ns=[],rs=0,Sr=null,an=0,Zt=[],Kt=0,Ya=null,xa=1,fa="";function ka(e,t){ns[rs++]=an,ns[rs++]=Sr,Sr=e,an=t}function Xu(e,t,l){Zt[Kt++]=xa,Zt[Kt++]=fa,Zt[Kt++]=Ya,Ya=e;var s=xa;e=fa;var r=32-At(s)-1;s&=~(1<<r),l+=1;var i=32-At(t)+r;if(30<i){var f=r-r%5;i=(s&(1<<f)-1).toString(32),s>>=f,r-=f,xa=1<<32-At(t)+r|l<<r|s,fa=i+e}else xa=1<<i|l<<r|s,fa=e}function _o(e){e.return!==null&&(ka(e,1),Xu(e,1,0))}function Ho(e){for(;e===Sr;)Sr=ns[--rs],ns[rs]=null,an=ns[--rs],ns[rs]=null;for(;e===Ya;)Ya=Zt[--Kt],Zt[Kt]=null,fa=Zt[--Kt],Zt[Kt]=null,xa=Zt[--Kt],Zt[Kt]=null}function Zu(e,t){Zt[Kt++]=xa,Zt[Kt++]=fa,Zt[Kt++]=Ya,xa=t.id,fa=t.overflow,Ya=e}var xt=null,Ge=null,Le=!1,Qa=null,Jt=!1,qo=Error(c(519));function Xa(e){var t=Error(c(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ln(Xt(t,e)),qo}function Ku(e){var t=e.stateNode,l=e.type,s=e.memoizedProps;switch(t[ot]=e,t[gt]=s,l){case"dialog":ze("cancel",t),ze("close",t);break;case"iframe":case"object":case"embed":ze("load",t);break;case"video":case"audio":for(l=0;l<An.length;l++)ze(An[l],t);break;case"source":ze("error",t);break;case"img":case"image":case"link":ze("error",t),ze("load",t);break;case"details":ze("toggle",t);break;case"input":ze("invalid",t),du(t,s.value,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name,!0);break;case"select":ze("invalid",t);break;case"textarea":ze("invalid",t),mu(t,s.value,s.defaultValue,s.children)}l=s.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||t.textContent===""+l||s.suppressHydrationWarning===!0||hf(t.textContent,l)?(s.popover!=null&&(ze("beforetoggle",t),ze("toggle",t)),s.onScroll!=null&&ze("scroll",t),s.onScrollEnd!=null&&ze("scrollend",t),s.onClick!=null&&(t.onclick=Aa),t=!0):t=!1,t||Xa(e,!0)}function Ju(e){for(xt=e.return;xt;)switch(xt.tag){case 5:case 31:case 13:Jt=!1;return;case 27:case 3:Jt=!0;return;default:xt=xt.return}}function is(e){if(e!==xt)return!1;if(!Le)return Ju(e),Le=!0,!1;var t=e.tag,l;if((l=t!==3&&t!==27)&&((l=t===5)&&(l=e.type,l=!(l!=="form"&&l!=="button")||ld(e.type,e.memoizedProps)),l=!l),l&&Ge&&Xa(e),Ju(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(c(317));Ge=wf(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(c(317));Ge=wf(e)}else t===27?(t=Ge,cl(e.type)?(e=od,od=null,Ge=e):Ge=t):Ge=xt?ea(e.stateNode.nextSibling):null;return!0}function Cl(){Ge=xt=null,Le=!1}function Bo(){var e=Qa;return e!==null&&(Lt===null?Lt=e:Lt.push.apply(Lt,e),Qa=null),e}function ln(e){Qa===null?Qa=[e]:Qa.push(e)}var Uo=N(null),Al=null,Ea=null;function Za(e,t,l){W(Uo,t._currentValue),t._currentValue=l}function za(e){e._currentValue=Uo.current,B(Uo)}function $o(e,t,l){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===l)break;e=e.return}}function Po(e,t,l,s){var r=e.child;for(r!==null&&(r.return=e);r!==null;){var i=r.dependencies;if(i!==null){var f=r.child;i=i.firstContext;e:for(;i!==null;){var T=i;i=r;for(var D=0;D<t.length;D++)if(T.context===t[D]){i.lanes|=l,T=i.alternate,T!==null&&(T.lanes|=l),$o(i.return,l,e),s||(f=null);break e}i=T.next}}else if(r.tag===18){if(f=r.return,f===null)throw Error(c(341));f.lanes|=l,i=f.alternate,i!==null&&(i.lanes|=l),$o(f,l,e),f=null}else f=r.child;if(f!==null)f.return=r;else for(f=r;f!==null;){if(f===e){f=null;break}if(r=f.sibling,r!==null){r.return=f.return,f=r;break}f=f.return}r=f}}function os(e,t,l,s){e=null;for(var r=t,i=!1;r!==null;){if(!i){if((r.flags&524288)!==0)i=!0;else if((r.flags&262144)!==0)break}if(r.tag===10){var f=r.alternate;if(f===null)throw Error(c(387));if(f=f.memoizedProps,f!==null){var T=r.type;Ht(r.pendingProps.value,f.value)||(e!==null?e.push(T):e=[T])}}else if(r===je.current){if(f=r.alternate,f===null)throw Error(c(387));f.memoizedState.memoizedState!==r.memoizedState.memoizedState&&(e!==null?e.push(zn):e=[zn])}r=r.return}e!==null&&Po(t,e,l,s),t.flags|=262144}function wr(e){for(e=e.firstContext;e!==null;){if(!Ht(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Tl(e){Al=e,Ea=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function ft(e){return Wu(Al,e)}function Cr(e,t){return Al===null&&Tl(e),Wu(e,t)}function Wu(e,t){var l=t._currentValue;if(t={context:t,memoizedValue:l,next:null},Ea===null){if(e===null)throw Error(c(308));Ea=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Ea=Ea.next=t;return l}var o0=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(l,s){e.push(s)}};this.abort=function(){t.aborted=!0,e.forEach(function(l){return l()})}},c0=n.unstable_scheduleCallback,d0=n.unstable_NormalPriority,at={$$typeof:O,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Fo(){return{controller:new o0,data:new Map,refCount:0}}function sn(e){e.refCount--,e.refCount===0&&c0(d0,function(){e.controller.abort()})}var nn=null,Go=0,cs=0,ds=null;function u0(e,t){if(nn===null){var l=nn=[];Go=0,cs=Qc(),ds={status:"pending",value:void 0,then:function(s){l.push(s)}}}return Go++,t.then(em,em),t}function em(){if(--Go===0&&nn!==null){ds!==null&&(ds.status="fulfilled");var e=nn;nn=null,cs=0,ds=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function m0(e,t){var l=[],s={status:"pending",value:null,reason:null,then:function(r){l.push(r)}};return e.then(function(){s.status="fulfilled",s.value=t;for(var r=0;r<l.length;r++)(0,l[r])(t)},function(r){for(s.status="rejected",s.reason=r,r=0;r<l.length;r++)(0,l[r])(void 0)}),s}var tm=k.S;k.S=function(e,t){Hx=wt(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&u0(e,t),tm!==null&&tm(e,t)};var Ml=N(null);function Vo(){var e=Ml.current;return e!==null?e:Pe.pooledCache}function Ar(e,t){t===null?W(Ml,Ml.current):W(Ml,t.pool)}function am(){var e=Vo();return e===null?null:{parent:at._currentValue,pool:e}}var us=Error(c(460)),Yo=Error(c(474)),Tr=Error(c(542)),Mr={then:function(){}};function lm(e){return e=e.status,e==="fulfilled"||e==="rejected"}function sm(e,t,l){switch(l=e[l],l===void 0?e.push(t):l!==t&&(t.then(Aa,Aa),t=l),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,rm(e),e;default:if(typeof t.status=="string")t.then(Aa,Aa);else{if(e=Pe,e!==null&&100<e.shellSuspendCounter)throw Error(c(482));e=t,e.status="pending",e.then(function(s){if(t.status==="pending"){var r=t;r.status="fulfilled",r.value=s}},function(s){if(t.status==="pending"){var r=t;r.status="rejected",r.reason=s}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,rm(e),e}throw El=t,us}}function kl(e){try{var t=e._init;return t(e._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(El=l,us):l}}var El=null;function nm(){if(El===null)throw Error(c(459));var e=El;return El=null,e}function rm(e){if(e===us||e===Tr)throw Error(c(483))}var ms=null,rn=0;function kr(e){var t=rn;return rn+=1,ms===null&&(ms=[]),sm(ms,e,t)}function on(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function Er(e,t){throw t.$$typeof===E?Error(c(525)):(e=Object.prototype.toString.call(t),Error(c(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function im(e){function t($,I){if(e){var F=$.deletions;F===null?($.deletions=[I],$.flags|=16):F.push(I)}}function l($,I){if(!e)return null;for(;I!==null;)t($,I),I=I.sibling;return null}function s($){for(var I=new Map;$!==null;)$.key!==null?I.set($.key,$):I.set($.index,$),$=$.sibling;return I}function r($,I){return $=Ma($,I),$.index=0,$.sibling=null,$}function i($,I,F){return $.index=F,e?(F=$.alternate,F!==null?(F=F.index,F<I?($.flags|=67108866,I):F):($.flags|=67108866,I)):($.flags|=1048576,I)}function f($){return e&&$.alternate===null&&($.flags|=67108866),$}function T($,I,F,ae){return I===null||I.tag!==6?(I=Oo(F,$.mode,ae),I.return=$,I):(I=r(I,F),I.return=$,I)}function D($,I,F,ae){var ge=F.type;return ge===v?ee($,I,F.props.children,ae,F.key):I!==null&&(I.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===te&&kl(ge)===I.type)?(I=r(I,F.props),on(I,F),I.return=$,I):(I=Nr(F.type,F.key,F.props,null,$.mode,ae),on(I,F),I.return=$,I)}function G($,I,F,ae){return I===null||I.tag!==4||I.stateNode.containerInfo!==F.containerInfo||I.stateNode.implementation!==F.implementation?(I=Io(F,$.mode,ae),I.return=$,I):(I=r(I,F.children||[]),I.return=$,I)}function ee($,I,F,ae,ge){return I===null||I.tag!==7?(I=wl(F,$.mode,ae,ge),I.return=$,I):(I=r(I,F),I.return=$,I)}function le($,I,F){if(typeof I=="string"&&I!==""||typeof I=="number"||typeof I=="bigint")return I=Oo(""+I,$.mode,F),I.return=$,I;if(typeof I=="object"&&I!==null){switch(I.$$typeof){case C:return F=Nr(I.type,I.key,I.props,null,$.mode,F),on(F,I),F.return=$,F;case S:return I=Io(I,$.mode,F),I.return=$,I;case te:return I=kl(I),le($,I,F)}if(R(I)||M(I))return I=wl(I,$.mode,F,null),I.return=$,I;if(typeof I.then=="function")return le($,kr(I),F);if(I.$$typeof===O)return le($,Cr($,I),F);Er($,I)}return null}function Q($,I,F,ae){var ge=I!==null?I.key:null;if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return ge!==null?null:T($,I,""+F,ae);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case C:return F.key===ge?D($,I,F,ae):null;case S:return F.key===ge?G($,I,F,ae):null;case te:return F=kl(F),Q($,I,F,ae)}if(R(F)||M(F))return ge!==null?null:ee($,I,F,ae,null);if(typeof F.then=="function")return Q($,I,kr(F),ae);if(F.$$typeof===O)return Q($,I,Cr($,F),ae);Er($,F)}return null}function Z($,I,F,ae,ge){if(typeof ae=="string"&&ae!==""||typeof ae=="number"||typeof ae=="bigint")return $=$.get(F)||null,T(I,$,""+ae,ge);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case C:return $=$.get(ae.key===null?F:ae.key)||null,D(I,$,ae,ge);case S:return $=$.get(ae.key===null?F:ae.key)||null,G(I,$,ae,ge);case te:return ae=kl(ae),Z($,I,F,ae,ge)}if(R(ae)||M(ae))return $=$.get(F)||null,ee(I,$,ae,ge,null);if(typeof ae.then=="function")return Z($,I,F,kr(ae),ge);if(ae.$$typeof===O)return Z($,I,F,Cr(I,ae),ge);Er(I,ae)}return null}function he($,I,F,ae){for(var ge=null,Oe=null,pe=I,Me=I=0,Re=null;pe!==null&&Me<F.length;Me++){pe.index>Me?(Re=pe,pe=null):Re=pe.sibling;var Ie=Q($,pe,F[Me],ae);if(Ie===null){pe===null&&(pe=Re);break}e&&pe&&Ie.alternate===null&&t($,pe),I=i(Ie,I,Me),Oe===null?ge=Ie:Oe.sibling=Ie,Oe=Ie,pe=Re}if(Me===F.length)return l($,pe),Le&&ka($,Me),ge;if(pe===null){for(;Me<F.length;Me++)pe=le($,F[Me],ae),pe!==null&&(I=i(pe,I,Me),Oe===null?ge=pe:Oe.sibling=pe,Oe=pe);return Le&&ka($,Me),ge}for(pe=s(pe);Me<F.length;Me++)Re=Z(pe,$,Me,F[Me],ae),Re!==null&&(e&&Re.alternate!==null&&pe.delete(Re.key===null?Me:Re.key),I=i(Re,I,Me),Oe===null?ge=Re:Oe.sibling=Re,Oe=Re);return e&&pe.forEach(function(fl){return t($,fl)}),Le&&ka($,Me),ge}function Ne($,I,F,ae){if(F==null)throw Error(c(151));for(var ge=null,Oe=null,pe=I,Me=I=0,Re=null,Ie=F.next();pe!==null&&!Ie.done;Me++,Ie=F.next()){pe.index>Me?(Re=pe,pe=null):Re=pe.sibling;var fl=Q($,pe,Ie.value,ae);if(fl===null){pe===null&&(pe=Re);break}e&&pe&&fl.alternate===null&&t($,pe),I=i(fl,I,Me),Oe===null?ge=fl:Oe.sibling=fl,Oe=fl,pe=Re}if(Ie.done)return l($,pe),Le&&ka($,Me),ge;if(pe===null){for(;!Ie.done;Me++,Ie=F.next())Ie=le($,Ie.value,ae),Ie!==null&&(I=i(Ie,I,Me),Oe===null?ge=Ie:Oe.sibling=Ie,Oe=Ie);return Le&&ka($,Me),ge}for(pe=s(pe);!Ie.done;Me++,Ie=F.next())Ie=Z(pe,$,Me,Ie.value,ae),Ie!==null&&(e&&Ie.alternate!==null&&pe.delete(Ie.key===null?Me:Ie.key),I=i(Ie,I,Me),Oe===null?ge=Ie:Oe.sibling=Ie,Oe=Ie);return e&&pe.forEach(function(Sv){return t($,Sv)}),Le&&ka($,Me),ge}function $e($,I,F,ae){if(typeof F=="object"&&F!==null&&F.type===v&&F.key===null&&(F=F.props.children),typeof F=="object"&&F!==null){switch(F.$$typeof){case C:e:{for(var ge=F.key;I!==null;){if(I.key===ge){if(ge=F.type,ge===v){if(I.tag===7){l($,I.sibling),ae=r(I,F.props.children),ae.return=$,$=ae;break e}}else if(I.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===te&&kl(ge)===I.type){l($,I.sibling),ae=r(I,F.props),on(ae,F),ae.return=$,$=ae;break e}l($,I);break}else t($,I);I=I.sibling}F.type===v?(ae=wl(F.props.children,$.mode,ae,F.key),ae.return=$,$=ae):(ae=Nr(F.type,F.key,F.props,null,$.mode,ae),on(ae,F),ae.return=$,$=ae)}return f($);case S:e:{for(ge=F.key;I!==null;){if(I.key===ge)if(I.tag===4&&I.stateNode.containerInfo===F.containerInfo&&I.stateNode.implementation===F.implementation){l($,I.sibling),ae=r(I,F.children||[]),ae.return=$,$=ae;break e}else{l($,I);break}else t($,I);I=I.sibling}ae=Io(F,$.mode,ae),ae.return=$,$=ae}return f($);case te:return F=kl(F),$e($,I,F,ae)}if(R(F))return he($,I,F,ae);if(M(F)){if(ge=M(F),typeof ge!="function")throw Error(c(150));return F=ge.call(F),Ne($,I,F,ae)}if(typeof F.then=="function")return $e($,I,kr(F),ae);if(F.$$typeof===O)return $e($,I,Cr($,F),ae);Er($,F)}return typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint"?(F=""+F,I!==null&&I.tag===6?(l($,I.sibling),ae=r(I,F),ae.return=$,$=ae):(l($,I),ae=Oo(F,$.mode,ae),ae.return=$,$=ae),f($)):l($,I)}return function($,I,F,ae){try{rn=0;var ge=$e($,I,F,ae);return ms=null,ge}catch(pe){if(pe===us||pe===Tr)throw pe;var Oe=qt(29,pe,null,$.mode);return Oe.lanes=ae,Oe.return=$,Oe}}}var zl=im(!0),om=im(!1),Ka=!1;function Qo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Xo(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Ja(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Wa(e,t,l){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,(_e&2)!==0){var r=s.pending;return r===null?t.next=t:(t.next=r.next,r.next=t),s.pending=t,t=jr(e),Gu(e,null,l),t}return yr(e,s,t,l),jr(e)}function cn(e,t,l){if(t=t.updateQueue,t!==null&&(t=t.shared,(l&4194048)!==0)){var s=t.lanes;s&=e.pendingLanes,l|=s,t.lanes=l,sr(e,l)}}function Zo(e,t){var l=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,l===s)){var r=null,i=null;if(l=l.firstBaseUpdate,l!==null){do{var f={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};i===null?r=i=f:i=i.next=f,l=l.next}while(l!==null);i===null?r=i=t:i=i.next=t}else r=i=t;l={baseState:s.baseState,firstBaseUpdate:r,lastBaseUpdate:i,shared:s.shared,callbacks:s.callbacks},e.updateQueue=l;return}e=l.lastBaseUpdate,e===null?l.firstBaseUpdate=t:e.next=t,l.lastBaseUpdate=t}var Ko=!1;function dn(){if(Ko){var e=ds;if(e!==null)throw e}}function un(e,t,l,s){Ko=!1;var r=e.updateQueue;Ka=!1;var i=r.firstBaseUpdate,f=r.lastBaseUpdate,T=r.shared.pending;if(T!==null){r.shared.pending=null;var D=T,G=D.next;D.next=null,f===null?i=G:f.next=G,f=D;var ee=e.alternate;ee!==null&&(ee=ee.updateQueue,T=ee.lastBaseUpdate,T!==f&&(T===null?ee.firstBaseUpdate=G:T.next=G,ee.lastBaseUpdate=D))}if(i!==null){var le=r.baseState;f=0,ee=G=D=null,T=i;do{var Q=T.lane&-536870913,Z=Q!==T.lane;if(Z?(De&Q)===Q:(s&Q)===Q){Q!==0&&Q===cs&&(Ko=!0),ee!==null&&(ee=ee.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});e:{var he=e,Ne=T;Q=t;var $e=l;switch(Ne.tag){case 1:if(he=Ne.payload,typeof he=="function"){le=he.call($e,le,Q);break e}le=he;break e;case 3:he.flags=he.flags&-65537|128;case 0:if(he=Ne.payload,Q=typeof he=="function"?he.call($e,le,Q):he,Q==null)break e;le=A({},le,Q);break e;case 2:Ka=!0}}Q=T.callback,Q!==null&&(e.flags|=64,Z&&(e.flags|=8192),Z=r.callbacks,Z===null?r.callbacks=[Q]:Z.push(Q))}else Z={lane:Q,tag:T.tag,payload:T.payload,callback:T.callback,next:null},ee===null?(G=ee=Z,D=le):ee=ee.next=Z,f|=Q;if(T=T.next,T===null){if(T=r.shared.pending,T===null)break;Z=T,T=Z.next,Z.next=null,r.lastBaseUpdate=Z,r.shared.pending=null}}while(!0);ee===null&&(D=le),r.baseState=D,r.firstBaseUpdate=G,r.lastBaseUpdate=ee,i===null&&(r.shared.lanes=0),sl|=f,e.lanes=f,e.memoizedState=le}}function cm(e,t){if(typeof e!="function")throw Error(c(191,e));e.call(t)}function dm(e,t){var l=e.callbacks;if(l!==null)for(e.callbacks=null,e=0;e<l.length;e++)cm(l[e],t)}var xs=N(null),zr=N(0);function um(e,t){e=Ba,W(zr,e),W(xs,t),Ba=e|t.baseLanes}function Jo(){W(zr,Ba),W(xs,xs.current)}function Wo(){Ba=zr.current,B(xs),B(zr)}var Bt=N(null),Wt=null;function el(e){var t=e.alternate;W(et,et.current&1),W(Bt,e),Wt===null&&(t===null||xs.current!==null||t.memoizedState!==null)&&(Wt=e)}function ec(e){W(et,et.current),W(Bt,e),Wt===null&&(Wt=e)}function mm(e){e.tag===22?(W(et,et.current),W(Bt,e),Wt===null&&(Wt=e)):tl()}function tl(){W(et,et.current),W(Bt,Bt.current)}function Ut(e){B(Bt),Wt===e&&(Wt=null),B(et)}var et=N(0);function Dr(e){for(var t=e;t!==null;){if(t.tag===13){var l=t.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||rd(l)||id(l)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Da=0,Te=null,Be=null,lt=null,Rr=!1,fs=!1,Dl=!1,Lr=0,mn=0,hs=null,x0=0;function Ke(){throw Error(c(321))}function tc(e,t){if(t===null)return!1;for(var l=0;l<t.length&&l<e.length;l++)if(!Ht(e[l],t[l]))return!1;return!0}function ac(e,t,l,s,r,i){return Da=i,Te=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,k.H=e===null||e.memoizedState===null?Xm:bc,Dl=!1,i=l(s,r),Dl=!1,fs&&(i=fm(t,l,s,r)),xm(e),i}function xm(e){k.H=hn;var t=Be!==null&&Be.next!==null;if(Da=0,lt=Be=Te=null,Rr=!1,mn=0,hs=null,t)throw Error(c(300));e===null||st||(e=e.dependencies,e!==null&&wr(e)&&(st=!0))}function fm(e,t,l,s){Te=e;var r=0;do{if(fs&&(hs=null),mn=0,fs=!1,25<=r)throw Error(c(301));if(r+=1,lt=Be=null,e.updateQueue!=null){var i=e.updateQueue;i.lastEffect=null,i.events=null,i.stores=null,i.memoCache!=null&&(i.memoCache.index=0)}k.H=Zm,i=t(l,s)}while(fs);return i}function f0(){var e=k.H,t=e.useState()[0];return t=typeof t.then=="function"?xn(t):t,e=e.useState()[0],(Be!==null?Be.memoizedState:null)!==e&&(Te.flags|=1024),t}function lc(){var e=Lr!==0;return Lr=0,e}function sc(e,t,l){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~l}function nc(e){if(Rr){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}Rr=!1}Da=0,lt=Be=Te=null,fs=!1,mn=Lr=0,hs=null}function Mt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return lt===null?Te.memoizedState=lt=e:lt=lt.next=e,lt}function tt(){if(Be===null){var e=Te.alternate;e=e!==null?e.memoizedState:null}else e=Be.next;var t=lt===null?Te.memoizedState:lt.next;if(t!==null)lt=t,Be=e;else{if(e===null)throw Te.alternate===null?Error(c(467)):Error(c(310));Be=e,e={memoizedState:Be.memoizedState,baseState:Be.baseState,baseQueue:Be.baseQueue,queue:Be.queue,next:null},lt===null?Te.memoizedState=lt=e:lt=lt.next=e}return lt}function Or(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function xn(e){var t=mn;return mn+=1,hs===null&&(hs=[]),e=sm(hs,e,t),t=Te,(lt===null?t.memoizedState:lt.next)===null&&(t=t.alternate,k.H=t===null||t.memoizedState===null?Xm:bc),e}function Ir(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return xn(e);if(e.$$typeof===O)return ft(e)}throw Error(c(438,String(e)))}function rc(e){var t=null,l=Te.updateQueue;if(l!==null&&(t=l.memoCache),t==null){var s=Te.alternate;s!==null&&(s=s.updateQueue,s!==null&&(s=s.memoCache,s!=null&&(t={data:s.data.map(function(r){return r.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),l===null&&(l=Or(),Te.updateQueue=l),l.memoCache=t,l=t.data[t.index],l===void 0)for(l=t.data[t.index]=Array(e),s=0;s<e;s++)l[s]=H;return t.index++,l}function Ra(e,t){return typeof t=="function"?t(e):t}function _r(e){var t=tt();return ic(t,Be,e)}function ic(e,t,l){var s=e.queue;if(s===null)throw Error(c(311));s.lastRenderedReducer=l;var r=e.baseQueue,i=s.pending;if(i!==null){if(r!==null){var f=r.next;r.next=i.next,i.next=f}t.baseQueue=r=i,s.pending=null}if(i=e.baseState,r===null)e.memoizedState=i;else{t=r.next;var T=f=null,D=null,G=t,ee=!1;do{var le=G.lane&-536870913;if(le!==G.lane?(De&le)===le:(Da&le)===le){var Q=G.revertLane;if(Q===0)D!==null&&(D=D.next={lane:0,revertLane:0,gesture:null,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null}),le===cs&&(ee=!0);else if((Da&Q)===Q){G=G.next,Q===cs&&(ee=!0);continue}else le={lane:0,revertLane:G.revertLane,gesture:null,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},D===null?(T=D=le,f=i):D=D.next=le,Te.lanes|=Q,sl|=Q;le=G.action,Dl&&l(i,le),i=G.hasEagerState?G.eagerState:l(i,le)}else Q={lane:le,revertLane:G.revertLane,gesture:G.gesture,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},D===null?(T=D=Q,f=i):D=D.next=Q,Te.lanes|=le,sl|=le;G=G.next}while(G!==null&&G!==t);if(D===null?f=i:D.next=T,!Ht(i,e.memoizedState)&&(st=!0,ee&&(l=ds,l!==null)))throw l;e.memoizedState=i,e.baseState=f,e.baseQueue=D,s.lastRenderedState=i}return r===null&&(s.lanes=0),[e.memoizedState,s.dispatch]}function oc(e){var t=tt(),l=t.queue;if(l===null)throw Error(c(311));l.lastRenderedReducer=e;var s=l.dispatch,r=l.pending,i=t.memoizedState;if(r!==null){l.pending=null;var f=r=r.next;do i=e(i,f.action),f=f.next;while(f!==r);Ht(i,t.memoizedState)||(st=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),l.lastRenderedState=i}return[i,s]}function hm(e,t,l){var s=Te,r=tt(),i=Le;if(i){if(l===void 0)throw Error(c(407));l=l()}else l=t();var f=!Ht((Be||r).memoizedState,l);if(f&&(r.memoizedState=l,st=!0),r=r.queue,uc(vm.bind(null,s,r,e),[e]),r.getSnapshot!==t||f||lt!==null&&lt.memoizedState.tag&1){if(s.flags|=2048,ps(9,{destroy:void 0},bm.bind(null,s,r,l,t),null),Pe===null)throw Error(c(349));i||(Da&127)!==0||pm(s,t,l)}return l}function pm(e,t,l){e.flags|=16384,e={getSnapshot:t,value:l},t=Te.updateQueue,t===null?(t=Or(),Te.updateQueue=t,t.stores=[e]):(l=t.stores,l===null?t.stores=[e]:l.push(e))}function bm(e,t,l,s){t.value=l,t.getSnapshot=s,gm(t)&&ym(e)}function vm(e,t,l){return l(function(){gm(t)&&ym(e)})}function gm(e){var t=e.getSnapshot;e=e.value;try{var l=t();return!Ht(e,l)}catch{return!0}}function ym(e){var t=Sl(e,2);t!==null&&Ot(t,e,2)}function cc(e){var t=Mt();if(typeof e=="function"){var l=e;if(e=l(),Dl){ua(!0);try{l()}finally{ua(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ra,lastRenderedState:e},t}function jm(e,t,l,s){return e.baseState=l,ic(e,Be,typeof s=="function"?s:Ra)}function h0(e,t,l,s,r){if(Br(e))throw Error(c(485));if(e=t.action,e!==null){var i={payload:r,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(f){i.listeners.push(f)}};k.T!==null?l(!0):i.isTransition=!1,s(i),l=t.pending,l===null?(i.next=t.pending=i,Nm(t,i)):(i.next=l.next,t.pending=l.next=i)}}function Nm(e,t){var l=t.action,s=t.payload,r=e.state;if(t.isTransition){var i=k.T,f={};k.T=f;try{var T=l(r,s),D=k.S;D!==null&&D(f,T),Sm(e,t,T)}catch(G){dc(e,t,G)}finally{i!==null&&f.types!==null&&(i.types=f.types),k.T=i}}else try{i=l(r,s),Sm(e,t,i)}catch(G){dc(e,t,G)}}function Sm(e,t,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(s){wm(e,t,s)},function(s){return dc(e,t,s)}):wm(e,t,l)}function wm(e,t,l){t.status="fulfilled",t.value=l,Cm(t),e.state=l,t=e.pending,t!==null&&(l=t.next,l===t?e.pending=null:(l=l.next,t.next=l,Nm(e,l)))}function dc(e,t,l){var s=e.pending;if(e.pending=null,s!==null){s=s.next;do t.status="rejected",t.reason=l,Cm(t),t=t.next;while(t!==s)}e.action=null}function Cm(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Am(e,t){return t}function Tm(e,t){if(Le){var l=Pe.formState;if(l!==null){e:{var s=Te;if(Le){if(Ge){t:{for(var r=Ge,i=Jt;r.nodeType!==8;){if(!i){r=null;break t}if(r=ea(r.nextSibling),r===null){r=null;break t}}i=r.data,r=i==="F!"||i==="F"?r:null}if(r){Ge=ea(r.nextSibling),s=r.data==="F!";break e}}Xa(s)}s=!1}s&&(t=l[0])}}return l=Mt(),l.memoizedState=l.baseState=t,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Am,lastRenderedState:t},l.queue=s,l=Vm.bind(null,Te,s),s.dispatch=l,s=cc(!1),i=pc.bind(null,Te,!1,s.queue),s=Mt(),r={state:t,dispatch:null,action:e,pending:null},s.queue=r,l=h0.bind(null,Te,r,i,l),r.dispatch=l,s.memoizedState=e,[t,l,!1]}function Mm(e){var t=tt();return km(t,Be,e)}function km(e,t,l){if(t=ic(e,t,Am)[0],e=_r(Ra)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var s=xn(t)}catch(f){throw f===us?Tr:f}else s=t;t=tt();var r=t.queue,i=r.dispatch;return l!==t.memoizedState&&(Te.flags|=2048,ps(9,{destroy:void 0},p0.bind(null,r,l),null)),[s,i,e]}function p0(e,t){e.action=t}function Em(e){var t=tt(),l=Be;if(l!==null)return km(t,l,e);tt(),t=t.memoizedState,l=tt();var s=l.queue.dispatch;return l.memoizedState=e,[t,s,!1]}function ps(e,t,l,s){return e={tag:e,create:l,deps:s,inst:t,next:null},t=Te.updateQueue,t===null&&(t=Or(),Te.updateQueue=t),l=t.lastEffect,l===null?t.lastEffect=e.next=e:(s=l.next,l.next=e,e.next=s,t.lastEffect=e),e}function zm(){return tt().memoizedState}function Hr(e,t,l,s){var r=Mt();Te.flags|=e,r.memoizedState=ps(1|t,{destroy:void 0},l,s===void 0?null:s)}function qr(e,t,l,s){var r=tt();s=s===void 0?null:s;var i=r.memoizedState.inst;Be!==null&&s!==null&&tc(s,Be.memoizedState.deps)?r.memoizedState=ps(t,i,l,s):(Te.flags|=e,r.memoizedState=ps(1|t,i,l,s))}function Dm(e,t){Hr(8390656,8,e,t)}function uc(e,t){qr(2048,8,e,t)}function b0(e){Te.flags|=4;var t=Te.updateQueue;if(t===null)t=Or(),Te.updateQueue=t,t.events=[e];else{var l=t.events;l===null?t.events=[e]:l.push(e)}}function Rm(e){var t=tt().memoizedState;return b0({ref:t,nextImpl:e}),function(){if((_e&2)!==0)throw Error(c(440));return t.impl.apply(void 0,arguments)}}function Lm(e,t){return qr(4,2,e,t)}function Om(e,t){return qr(4,4,e,t)}function Im(e,t){if(typeof t=="function"){e=e();var l=t(e);return function(){typeof l=="function"?l():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function _m(e,t,l){l=l!=null?l.concat([e]):null,qr(4,4,Im.bind(null,t,e),l)}function mc(){}function Hm(e,t){var l=tt();t=t===void 0?null:t;var s=l.memoizedState;return t!==null&&tc(t,s[1])?s[0]:(l.memoizedState=[e,t],e)}function qm(e,t){var l=tt();t=t===void 0?null:t;var s=l.memoizedState;if(t!==null&&tc(t,s[1]))return s[0];if(s=e(),Dl){ua(!0);try{e()}finally{ua(!1)}}return l.memoizedState=[s,t],s}function xc(e,t,l){return l===void 0||(Da&1073741824)!==0&&(De&261930)===0?e.memoizedState=t:(e.memoizedState=l,e=Bx(),Te.lanes|=e,sl|=e,l)}function Bm(e,t,l,s){return Ht(l,t)?l:xs.current!==null?(e=xc(e,l,s),Ht(e,t)||(st=!0),e):(Da&42)===0||(Da&1073741824)!==0&&(De&261930)===0?(st=!0,e.memoizedState=l):(e=Bx(),Te.lanes|=e,sl|=e,t)}function Um(e,t,l,s,r){var i=K.p;K.p=i!==0&&8>i?i:8;var f=k.T,T={};k.T=T,pc(e,!1,t,l);try{var D=r(),G=k.S;if(G!==null&&G(T,D),D!==null&&typeof D=="object"&&typeof D.then=="function"){var ee=m0(D,s);fn(e,t,ee,Ft(e))}else fn(e,t,s,Ft(e))}catch(le){fn(e,t,{then:function(){},status:"rejected",reason:le},Ft())}finally{K.p=i,f!==null&&T.types!==null&&(f.types=T.types),k.T=f}}function v0(){}function fc(e,t,l,s){if(e.tag!==5)throw Error(c(476));var r=$m(e).queue;Um(e,r,t,ne,l===null?v0:function(){return Pm(e),l(s)})}function $m(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:ne,baseState:ne,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ra,lastRenderedState:ne},next:null};var l={};return t.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ra,lastRenderedState:l},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Pm(e){var t=$m(e);t.next===null&&(t=e.alternate.memoizedState),fn(e,t.next.queue,{},Ft())}function hc(){return ft(zn)}function Fm(){return tt().memoizedState}function Gm(){return tt().memoizedState}function g0(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var l=Ft();e=Ja(l);var s=Wa(t,e,l);s!==null&&(Ot(s,t,l),cn(s,t,l)),t={cache:Fo()},e.payload=t;return}t=t.return}}function y0(e,t,l){var s=Ft();l={lane:s,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Br(e)?Ym(t,l):(l=Ro(e,t,l,s),l!==null&&(Ot(l,e,s),Qm(l,t,s)))}function Vm(e,t,l){var s=Ft();fn(e,t,l,s)}function fn(e,t,l,s){var r={lane:s,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(Br(e))Ym(t,r);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var f=t.lastRenderedState,T=i(f,l);if(r.hasEagerState=!0,r.eagerState=T,Ht(T,f))return yr(e,t,r,0),Pe===null&&gr(),!1}catch{}if(l=Ro(e,t,r,s),l!==null)return Ot(l,e,s),Qm(l,t,s),!0}return!1}function pc(e,t,l,s){if(s={lane:2,revertLane:Qc(),gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null},Br(e)){if(t)throw Error(c(479))}else t=Ro(e,l,s,2),t!==null&&Ot(t,e,2)}function Br(e){var t=e.alternate;return e===Te||t!==null&&t===Te}function Ym(e,t){fs=Rr=!0;var l=e.pending;l===null?t.next=t:(t.next=l.next,l.next=t),e.pending=t}function Qm(e,t,l){if((l&4194048)!==0){var s=t.lanes;s&=e.pendingLanes,l|=s,t.lanes=l,sr(e,l)}}var hn={readContext:ft,use:Ir,useCallback:Ke,useContext:Ke,useEffect:Ke,useImperativeHandle:Ke,useLayoutEffect:Ke,useInsertionEffect:Ke,useMemo:Ke,useReducer:Ke,useRef:Ke,useState:Ke,useDebugValue:Ke,useDeferredValue:Ke,useTransition:Ke,useSyncExternalStore:Ke,useId:Ke,useHostTransitionStatus:Ke,useFormState:Ke,useActionState:Ke,useOptimistic:Ke,useMemoCache:Ke,useCacheRefresh:Ke};hn.useEffectEvent=Ke;var Xm={readContext:ft,use:Ir,useCallback:function(e,t){return Mt().memoizedState=[e,t===void 0?null:t],e},useContext:ft,useEffect:Dm,useImperativeHandle:function(e,t,l){l=l!=null?l.concat([e]):null,Hr(4194308,4,Im.bind(null,t,e),l)},useLayoutEffect:function(e,t){return Hr(4194308,4,e,t)},useInsertionEffect:function(e,t){Hr(4,2,e,t)},useMemo:function(e,t){var l=Mt();t=t===void 0?null:t;var s=e();if(Dl){ua(!0);try{e()}finally{ua(!1)}}return l.memoizedState=[s,t],s},useReducer:function(e,t,l){var s=Mt();if(l!==void 0){var r=l(t);if(Dl){ua(!0);try{l(t)}finally{ua(!1)}}}else r=t;return s.memoizedState=s.baseState=r,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:r},s.queue=e,e=e.dispatch=y0.bind(null,Te,e),[s.memoizedState,e]},useRef:function(e){var t=Mt();return e={current:e},t.memoizedState=e},useState:function(e){e=cc(e);var t=e.queue,l=Vm.bind(null,Te,t);return t.dispatch=l,[e.memoizedState,l]},useDebugValue:mc,useDeferredValue:function(e,t){var l=Mt();return xc(l,e,t)},useTransition:function(){var e=cc(!1);return e=Um.bind(null,Te,e.queue,!0,!1),Mt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,l){var s=Te,r=Mt();if(Le){if(l===void 0)throw Error(c(407));l=l()}else{if(l=t(),Pe===null)throw Error(c(349));(De&127)!==0||pm(s,t,l)}r.memoizedState=l;var i={value:l,getSnapshot:t};return r.queue=i,Dm(vm.bind(null,s,i,e),[e]),s.flags|=2048,ps(9,{destroy:void 0},bm.bind(null,s,i,l,t),null),l},useId:function(){var e=Mt(),t=Pe.identifierPrefix;if(Le){var l=fa,s=xa;l=(s&~(1<<32-At(s)-1)).toString(32)+l,t="_"+t+"R_"+l,l=Lr++,0<l&&(t+="H"+l.toString(32)),t+="_"}else l=x0++,t="_"+t+"r_"+l.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:hc,useFormState:Tm,useActionState:Tm,useOptimistic:function(e){var t=Mt();t.memoizedState=t.baseState=e;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=l,t=pc.bind(null,Te,!0,l),l.dispatch=t,[e,t]},useMemoCache:rc,useCacheRefresh:function(){return Mt().memoizedState=g0.bind(null,Te)},useEffectEvent:function(e){var t=Mt(),l={impl:e};return t.memoizedState=l,function(){if((_e&2)!==0)throw Error(c(440));return l.impl.apply(void 0,arguments)}}},bc={readContext:ft,use:Ir,useCallback:Hm,useContext:ft,useEffect:uc,useImperativeHandle:_m,useInsertionEffect:Lm,useLayoutEffect:Om,useMemo:qm,useReducer:_r,useRef:zm,useState:function(){return _r(Ra)},useDebugValue:mc,useDeferredValue:function(e,t){var l=tt();return Bm(l,Be.memoizedState,e,t)},useTransition:function(){var e=_r(Ra)[0],t=tt().memoizedState;return[typeof e=="boolean"?e:xn(e),t]},useSyncExternalStore:hm,useId:Fm,useHostTransitionStatus:hc,useFormState:Mm,useActionState:Mm,useOptimistic:function(e,t){var l=tt();return jm(l,Be,e,t)},useMemoCache:rc,useCacheRefresh:Gm};bc.useEffectEvent=Rm;var Zm={readContext:ft,use:Ir,useCallback:Hm,useContext:ft,useEffect:uc,useImperativeHandle:_m,useInsertionEffect:Lm,useLayoutEffect:Om,useMemo:qm,useReducer:oc,useRef:zm,useState:function(){return oc(Ra)},useDebugValue:mc,useDeferredValue:function(e,t){var l=tt();return Be===null?xc(l,e,t):Bm(l,Be.memoizedState,e,t)},useTransition:function(){var e=oc(Ra)[0],t=tt().memoizedState;return[typeof e=="boolean"?e:xn(e),t]},useSyncExternalStore:hm,useId:Fm,useHostTransitionStatus:hc,useFormState:Em,useActionState:Em,useOptimistic:function(e,t){var l=tt();return Be!==null?jm(l,Be,e,t):(l.baseState=e,[e,l.queue.dispatch])},useMemoCache:rc,useCacheRefresh:Gm};Zm.useEffectEvent=Rm;function vc(e,t,l,s){t=e.memoizedState,l=l(s,t),l=l==null?t:A({},t,l),e.memoizedState=l,e.lanes===0&&(e.updateQueue.baseState=l)}var gc={enqueueSetState:function(e,t,l){e=e._reactInternals;var s=Ft(),r=Ja(s);r.payload=t,l!=null&&(r.callback=l),t=Wa(e,r,s),t!==null&&(Ot(t,e,s),cn(t,e,s))},enqueueReplaceState:function(e,t,l){e=e._reactInternals;var s=Ft(),r=Ja(s);r.tag=1,r.payload=t,l!=null&&(r.callback=l),t=Wa(e,r,s),t!==null&&(Ot(t,e,s),cn(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var l=Ft(),s=Ja(l);s.tag=2,t!=null&&(s.callback=t),t=Wa(e,s,l),t!==null&&(Ot(t,e,l),cn(t,e,l))}};function Km(e,t,l,s,r,i,f){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,i,f):t.prototype&&t.prototype.isPureReactComponent?!en(l,s)||!en(r,i):!0}function Jm(e,t,l,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(l,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(l,s),t.state!==e&&gc.enqueueReplaceState(t,t.state,null)}function Rl(e,t){var l=t;if("ref"in t){l={};for(var s in t)s!=="ref"&&(l[s]=t[s])}if(e=e.defaultProps){l===t&&(l=A({},l));for(var r in e)l[r]===void 0&&(l[r]=e[r])}return l}function Wm(e){vr(e)}function ex(e){console.error(e)}function tx(e){vr(e)}function Ur(e,t){try{var l=e.onUncaughtError;l(t.value,{componentStack:t.stack})}catch(s){setTimeout(function(){throw s})}}function ax(e,t,l){try{var s=e.onCaughtError;s(l.value,{componentStack:l.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function yc(e,t,l){return l=Ja(l),l.tag=3,l.payload={element:null},l.callback=function(){Ur(e,t)},l}function lx(e){return e=Ja(e),e.tag=3,e}function sx(e,t,l,s){var r=l.type.getDerivedStateFromError;if(typeof r=="function"){var i=s.value;e.payload=function(){return r(i)},e.callback=function(){ax(t,l,s)}}var f=l.stateNode;f!==null&&typeof f.componentDidCatch=="function"&&(e.callback=function(){ax(t,l,s),typeof r!="function"&&(nl===null?nl=new Set([this]):nl.add(this));var T=s.stack;this.componentDidCatch(s.value,{componentStack:T!==null?T:""})})}function j0(e,t,l,s,r){if(l.flags|=32768,s!==null&&typeof s=="object"&&typeof s.then=="function"){if(t=l.alternate,t!==null&&os(t,l,r,!0),l=Bt.current,l!==null){switch(l.tag){case 31:case 13:return Wt===null?Wr():l.alternate===null&&Je===0&&(Je=3),l.flags&=-257,l.flags|=65536,l.lanes=r,s===Mr?l.flags|=16384:(t=l.updateQueue,t===null?l.updateQueue=new Set([s]):t.add(s),Gc(e,s,r)),!1;case 22:return l.flags|=65536,s===Mr?l.flags|=16384:(t=l.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([s])},l.updateQueue=t):(l=t.retryQueue,l===null?t.retryQueue=new Set([s]):l.add(s)),Gc(e,s,r)),!1}throw Error(c(435,l.tag))}return Gc(e,s,r),Wr(),!1}if(Le)return t=Bt.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=r,s!==qo&&(e=Error(c(422),{cause:s}),ln(Xt(e,l)))):(s!==qo&&(t=Error(c(423),{cause:s}),ln(Xt(t,l))),e=e.current.alternate,e.flags|=65536,r&=-r,e.lanes|=r,s=Xt(s,l),r=yc(e.stateNode,s,r),Zo(e,r),Je!==4&&(Je=2)),!1;var i=Error(c(520),{cause:s});if(i=Xt(i,l),Sn===null?Sn=[i]:Sn.push(i),Je!==4&&(Je=2),t===null)return!0;s=Xt(s,l),l=t;do{switch(l.tag){case 3:return l.flags|=65536,e=r&-r,l.lanes|=e,e=yc(l.stateNode,s,e),Zo(l,e),!1;case 1:if(t=l.type,i=l.stateNode,(l.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||i!==null&&typeof i.componentDidCatch=="function"&&(nl===null||!nl.has(i))))return l.flags|=65536,r&=-r,l.lanes|=r,r=lx(r),sx(r,e,l,s),Zo(l,r),!1}l=l.return}while(l!==null);return!1}var jc=Error(c(461)),st=!1;function ht(e,t,l,s){t.child=e===null?om(t,null,l,s):zl(t,e.child,l,s)}function nx(e,t,l,s,r){l=l.render;var i=t.ref;if("ref"in s){var f={};for(var T in s)T!=="ref"&&(f[T]=s[T])}else f=s;return Tl(t),s=ac(e,t,l,f,i,r),T=lc(),e!==null&&!st?(sc(e,t,r),La(e,t,r)):(Le&&T&&_o(t),t.flags|=1,ht(e,t,s,r),t.child)}function rx(e,t,l,s,r){if(e===null){var i=l.type;return typeof i=="function"&&!Lo(i)&&i.defaultProps===void 0&&l.compare===null?(t.tag=15,t.type=i,ix(e,t,i,s,r)):(e=Nr(l.type,null,s,t,t.mode,r),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!kc(e,r)){var f=i.memoizedProps;if(l=l.compare,l=l!==null?l:en,l(f,s)&&e.ref===t.ref)return La(e,t,r)}return t.flags|=1,e=Ma(i,s),e.ref=t.ref,e.return=t,t.child=e}function ix(e,t,l,s,r){if(e!==null){var i=e.memoizedProps;if(en(i,s)&&e.ref===t.ref)if(st=!1,t.pendingProps=s=i,kc(e,r))(e.flags&131072)!==0&&(st=!0);else return t.lanes=e.lanes,La(e,t,r)}return Nc(e,t,l,s,r)}function ox(e,t,l,s){var r=s.children,i=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.mode==="hidden"){if((t.flags&128)!==0){if(i=i!==null?i.baseLanes|l:l,e!==null){for(s=t.child=e.child,r=0;s!==null;)r=r|s.lanes|s.childLanes,s=s.sibling;s=r&~i}else s=0,t.child=null;return cx(e,t,i,l,s)}if((l&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&Ar(t,i!==null?i.cachePool:null),i!==null?um(t,i):Jo(),mm(t);else return s=t.lanes=536870912,cx(e,t,i!==null?i.baseLanes|l:l,l,s)}else i!==null?(Ar(t,i.cachePool),um(t,i),tl(),t.memoizedState=null):(e!==null&&Ar(t,null),Jo(),tl());return ht(e,t,r,l),t.child}function pn(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function cx(e,t,l,s,r){var i=Vo();return i=i===null?null:{parent:at._currentValue,pool:i},t.memoizedState={baseLanes:l,cachePool:i},e!==null&&Ar(t,null),Jo(),mm(t),e!==null&&os(e,t,s,!0),t.childLanes=r,null}function $r(e,t){return t=Fr({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function dx(e,t,l){return zl(t,e.child,null,l),e=$r(t,t.pendingProps),e.flags|=2,Ut(t),t.memoizedState=null,e}function N0(e,t,l){var s=t.pendingProps,r=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(Le){if(s.mode==="hidden")return e=$r(t,s),t.lanes=536870912,pn(null,e);if(ec(t),(e=Ge)?(e=Sf(e,Jt),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Ya!==null?{id:xa,overflow:fa}:null,retryLane:536870912,hydrationErrors:null},l=Yu(e),l.return=t,t.child=l,xt=t,Ge=null)):e=null,e===null)throw Xa(t);return t.lanes=536870912,null}return $r(t,s)}var i=e.memoizedState;if(i!==null){var f=i.dehydrated;if(ec(t),r)if(t.flags&256)t.flags&=-257,t=dx(e,t,l);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(c(558));else if(st||os(e,t,l,!1),r=(l&e.childLanes)!==0,st||r){if(s=Pe,s!==null&&(f=nr(s,l),f!==0&&f!==i.retryLane))throw i.retryLane=f,Sl(e,f),Ot(s,e,f),jc;Wr(),t=dx(e,t,l)}else e=i.treeContext,Ge=ea(f.nextSibling),xt=t,Le=!0,Qa=null,Jt=!1,e!==null&&Zu(t,e),t=$r(t,s),t.flags|=4096;return t}return e=Ma(e.child,{mode:s.mode,children:s.children}),e.ref=t.ref,t.child=e,e.return=t,e}function Pr(e,t){var l=t.ref;if(l===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(c(284));(e===null||e.ref!==l)&&(t.flags|=4194816)}}function Nc(e,t,l,s,r){return Tl(t),l=ac(e,t,l,s,void 0,r),s=lc(),e!==null&&!st?(sc(e,t,r),La(e,t,r)):(Le&&s&&_o(t),t.flags|=1,ht(e,t,l,r),t.child)}function ux(e,t,l,s,r,i){return Tl(t),t.updateQueue=null,l=fm(t,s,l,r),xm(e),s=lc(),e!==null&&!st?(sc(e,t,i),La(e,t,i)):(Le&&s&&_o(t),t.flags|=1,ht(e,t,l,i),t.child)}function mx(e,t,l,s,r){if(Tl(t),t.stateNode===null){var i=ss,f=l.contextType;typeof f=="object"&&f!==null&&(i=ft(f)),i=new l(s,i),t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=gc,t.stateNode=i,i._reactInternals=t,i=t.stateNode,i.props=s,i.state=t.memoizedState,i.refs={},Qo(t),f=l.contextType,i.context=typeof f=="object"&&f!==null?ft(f):ss,i.state=t.memoizedState,f=l.getDerivedStateFromProps,typeof f=="function"&&(vc(t,l,f,s),i.state=t.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(f=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),f!==i.state&&gc.enqueueReplaceState(i,i.state,null),un(t,s,i,r),dn(),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308),s=!0}else if(e===null){i=t.stateNode;var T=t.memoizedProps,D=Rl(l,T);i.props=D;var G=i.context,ee=l.contextType;f=ss,typeof ee=="object"&&ee!==null&&(f=ft(ee));var le=l.getDerivedStateFromProps;ee=typeof le=="function"||typeof i.getSnapshotBeforeUpdate=="function",T=t.pendingProps!==T,ee||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(T||G!==f)&&Jm(t,i,s,f),Ka=!1;var Q=t.memoizedState;i.state=Q,un(t,s,i,r),dn(),G=t.memoizedState,T||Q!==G||Ka?(typeof le=="function"&&(vc(t,l,le,s),G=t.memoizedState),(D=Ka||Km(t,l,D,s,Q,G,f))?(ee||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(t.flags|=4194308)):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=G),i.props=s,i.state=G,i.context=f,s=D):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{i=t.stateNode,Xo(e,t),f=t.memoizedProps,ee=Rl(l,f),i.props=ee,le=t.pendingProps,Q=i.context,G=l.contextType,D=ss,typeof G=="object"&&G!==null&&(D=ft(G)),T=l.getDerivedStateFromProps,(G=typeof T=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(f!==le||Q!==D)&&Jm(t,i,s,D),Ka=!1,Q=t.memoizedState,i.state=Q,un(t,s,i,r),dn();var Z=t.memoizedState;f!==le||Q!==Z||Ka||e!==null&&e.dependencies!==null&&wr(e.dependencies)?(typeof T=="function"&&(vc(t,l,T,s),Z=t.memoizedState),(ee=Ka||Km(t,l,ee,s,Q,Z,D)||e!==null&&e.dependencies!==null&&wr(e.dependencies))?(G||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(s,Z,D),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(s,Z,D)),typeof i.componentDidUpdate=="function"&&(t.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof i.componentDidUpdate!="function"||f===e.memoizedProps&&Q===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||f===e.memoizedProps&&Q===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=Z),i.props=s,i.state=Z,i.context=D,s=ee):(typeof i.componentDidUpdate!="function"||f===e.memoizedProps&&Q===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||f===e.memoizedProps&&Q===e.memoizedState||(t.flags|=1024),s=!1)}return i=s,Pr(e,t),s=(t.flags&128)!==0,i||s?(i=t.stateNode,l=s&&typeof l.getDerivedStateFromError!="function"?null:i.render(),t.flags|=1,e!==null&&s?(t.child=zl(t,e.child,null,r),t.child=zl(t,null,l,r)):ht(e,t,l,r),t.memoizedState=i.state,e=t.child):e=La(e,t,r),e}function xx(e,t,l,s){return Cl(),t.flags|=256,ht(e,t,l,s),t.child}var Sc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function wc(e){return{baseLanes:e,cachePool:am()}}function Cc(e,t,l){return e=e!==null?e.childLanes&~l:0,t&&(e|=Pt),e}function fx(e,t,l){var s=t.pendingProps,r=!1,i=(t.flags&128)!==0,f;if((f=i)||(f=e!==null&&e.memoizedState===null?!1:(et.current&2)!==0),f&&(r=!0,t.flags&=-129),f=(t.flags&32)!==0,t.flags&=-33,e===null){if(Le){if(r?el(t):tl(),(e=Ge)?(e=Sf(e,Jt),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Ya!==null?{id:xa,overflow:fa}:null,retryLane:536870912,hydrationErrors:null},l=Yu(e),l.return=t,t.child=l,xt=t,Ge=null)):e=null,e===null)throw Xa(t);return id(e)?t.lanes=32:t.lanes=536870912,null}var T=s.children;return s=s.fallback,r?(tl(),r=t.mode,T=Fr({mode:"hidden",children:T},r),s=wl(s,r,l,null),T.return=t,s.return=t,T.sibling=s,t.child=T,s=t.child,s.memoizedState=wc(l),s.childLanes=Cc(e,f,l),t.memoizedState=Sc,pn(null,s)):(el(t),Ac(t,T))}var D=e.memoizedState;if(D!==null&&(T=D.dehydrated,T!==null)){if(i)t.flags&256?(el(t),t.flags&=-257,t=Tc(e,t,l)):t.memoizedState!==null?(tl(),t.child=e.child,t.flags|=128,t=null):(tl(),T=s.fallback,r=t.mode,s=Fr({mode:"visible",children:s.children},r),T=wl(T,r,l,null),T.flags|=2,s.return=t,T.return=t,s.sibling=T,t.child=s,zl(t,e.child,null,l),s=t.child,s.memoizedState=wc(l),s.childLanes=Cc(e,f,l),t.memoizedState=Sc,t=pn(null,s));else if(el(t),id(T)){if(f=T.nextSibling&&T.nextSibling.dataset,f)var G=f.dgst;f=G,s=Error(c(419)),s.stack="",s.digest=f,ln({value:s,source:null,stack:null}),t=Tc(e,t,l)}else if(st||os(e,t,l,!1),f=(l&e.childLanes)!==0,st||f){if(f=Pe,f!==null&&(s=nr(f,l),s!==0&&s!==D.retryLane))throw D.retryLane=s,Sl(e,s),Ot(f,e,s),jc;rd(T)||Wr(),t=Tc(e,t,l)}else rd(T)?(t.flags|=192,t.child=e.child,t=null):(e=D.treeContext,Ge=ea(T.nextSibling),xt=t,Le=!0,Qa=null,Jt=!1,e!==null&&Zu(t,e),t=Ac(t,s.children),t.flags|=4096);return t}return r?(tl(),T=s.fallback,r=t.mode,D=e.child,G=D.sibling,s=Ma(D,{mode:"hidden",children:s.children}),s.subtreeFlags=D.subtreeFlags&65011712,G!==null?T=Ma(G,T):(T=wl(T,r,l,null),T.flags|=2),T.return=t,s.return=t,s.sibling=T,t.child=s,pn(null,s),s=t.child,T=e.child.memoizedState,T===null?T=wc(l):(r=T.cachePool,r!==null?(D=at._currentValue,r=r.parent!==D?{parent:D,pool:D}:r):r=am(),T={baseLanes:T.baseLanes|l,cachePool:r}),s.memoizedState=T,s.childLanes=Cc(e,f,l),t.memoizedState=Sc,pn(e.child,s)):(el(t),l=e.child,e=l.sibling,l=Ma(l,{mode:"visible",children:s.children}),l.return=t,l.sibling=null,e!==null&&(f=t.deletions,f===null?(t.deletions=[e],t.flags|=16):f.push(e)),t.child=l,t.memoizedState=null,l)}function Ac(e,t){return t=Fr({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function Fr(e,t){return e=qt(22,e,null,t),e.lanes=0,e}function Tc(e,t,l){return zl(t,e.child,null,l),e=Ac(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function hx(e,t,l){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),$o(e.return,t,l)}function Mc(e,t,l,s,r,i){var f=e.memoizedState;f===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:l,tailMode:r,treeForkCount:i}:(f.isBackwards=t,f.rendering=null,f.renderingStartTime=0,f.last=s,f.tail=l,f.tailMode=r,f.treeForkCount=i)}function px(e,t,l){var s=t.pendingProps,r=s.revealOrder,i=s.tail;s=s.children;var f=et.current,T=(f&2)!==0;if(T?(f=f&1|2,t.flags|=128):f&=1,W(et,f),ht(e,t,s,l),s=Le?an:0,!T&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&hx(e,l,t);else if(e.tag===19)hx(e,l,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(r){case"forwards":for(l=t.child,r=null;l!==null;)e=l.alternate,e!==null&&Dr(e)===null&&(r=l),l=l.sibling;l=r,l===null?(r=t.child,t.child=null):(r=l.sibling,l.sibling=null),Mc(t,!1,r,l,i,s);break;case"backwards":case"unstable_legacy-backwards":for(l=null,r=t.child,t.child=null;r!==null;){if(e=r.alternate,e!==null&&Dr(e)===null){t.child=r;break}e=r.sibling,r.sibling=l,l=r,r=e}Mc(t,!0,l,null,i,s);break;case"together":Mc(t,!1,null,null,void 0,s);break;default:t.memoizedState=null}return t.child}function La(e,t,l){if(e!==null&&(t.dependencies=e.dependencies),sl|=t.lanes,(l&t.childLanes)===0)if(e!==null){if(os(e,t,l,!1),(l&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(c(153));if(t.child!==null){for(e=t.child,l=Ma(e,e.pendingProps),t.child=l,l.return=t;e.sibling!==null;)e=e.sibling,l=l.sibling=Ma(e,e.pendingProps),l.return=t;l.sibling=null}return t.child}function kc(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&wr(e)))}function S0(e,t,l){switch(t.tag){case 3:we(t,t.stateNode.containerInfo),Za(t,at,e.memoizedState.cache),Cl();break;case 27:case 5:it(t);break;case 4:we(t,t.stateNode.containerInfo);break;case 10:Za(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,ec(t),null;break;case 13:var s=t.memoizedState;if(s!==null)return s.dehydrated!==null?(el(t),t.flags|=128,null):(l&t.child.childLanes)!==0?fx(e,t,l):(el(t),e=La(e,t,l),e!==null?e.sibling:null);el(t);break;case 19:var r=(e.flags&128)!==0;if(s=(l&t.childLanes)!==0,s||(os(e,t,l,!1),s=(l&t.childLanes)!==0),r){if(s)return px(e,t,l);t.flags|=128}if(r=t.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),W(et,et.current),s)break;return null;case 22:return t.lanes=0,ox(e,t,l,t.pendingProps);case 24:Za(t,at,e.memoizedState.cache)}return La(e,t,l)}function bx(e,t,l){if(e!==null)if(e.memoizedProps!==t.pendingProps)st=!0;else{if(!kc(e,l)&&(t.flags&128)===0)return st=!1,S0(e,t,l);st=(e.flags&131072)!==0}else st=!1,Le&&(t.flags&1048576)!==0&&Xu(t,an,t.index);switch(t.lanes=0,t.tag){case 16:e:{var s=t.pendingProps;if(e=kl(t.elementType),t.type=e,typeof e=="function")Lo(e)?(s=Rl(e,s),t.tag=1,t=mx(null,t,e,s,l)):(t.tag=0,t=Nc(null,t,e,s,l));else{if(e!=null){var r=e.$$typeof;if(r===q){t.tag=11,t=nx(null,t,e,s,l);break e}else if(r===L){t.tag=14,t=rx(null,t,e,s,l);break e}}throw t=V(e)||e,Error(c(306,t,""))}}return t;case 0:return Nc(e,t,t.type,t.pendingProps,l);case 1:return s=t.type,r=Rl(s,t.pendingProps),mx(e,t,s,r,l);case 3:e:{if(we(t,t.stateNode.containerInfo),e===null)throw Error(c(387));s=t.pendingProps;var i=t.memoizedState;r=i.element,Xo(e,t),un(t,s,null,l);var f=t.memoizedState;if(s=f.cache,Za(t,at,s),s!==i.cache&&Po(t,[at],l,!0),dn(),s=f.element,i.isDehydrated)if(i={element:s,isDehydrated:!1,cache:f.cache},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){t=xx(e,t,s,l);break e}else if(s!==r){r=Xt(Error(c(424)),t),ln(r),t=xx(e,t,s,l);break e}else for(e=t.stateNode.containerInfo,e.nodeType===9?e=e.body:e=e.nodeName==="HTML"?e.ownerDocument.body:e,Ge=ea(e.firstChild),xt=t,Le=!0,Qa=null,Jt=!0,l=om(t,null,s,l),t.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(Cl(),s===r){t=La(e,t,l);break e}ht(e,t,s,l)}t=t.child}return t;case 26:return Pr(e,t),e===null?(l=kf(t.type,null,t.pendingProps,null))?t.memoizedState=l:Le||(l=t.type,e=t.pendingProps,s=ri(be.current).createElement(l),s[ot]=t,s[gt]=e,pt(s,l,e),ut(s),t.stateNode=s):t.memoizedState=kf(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return it(t),e===null&&Le&&(s=t.stateNode=Af(t.type,t.pendingProps,be.current),xt=t,Jt=!0,r=Ge,cl(t.type)?(od=r,Ge=ea(s.firstChild)):Ge=r),ht(e,t,t.pendingProps.children,l),Pr(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Le&&((r=s=Ge)&&(s=W0(s,t.type,t.pendingProps,Jt),s!==null?(t.stateNode=s,xt=t,Ge=ea(s.firstChild),Jt=!1,r=!0):r=!1),r||Xa(t)),it(t),r=t.type,i=t.pendingProps,f=e!==null?e.memoizedProps:null,s=i.children,ld(r,i)?s=null:f!==null&&ld(r,f)&&(t.flags|=32),t.memoizedState!==null&&(r=ac(e,t,f0,null,null,l),zn._currentValue=r),Pr(e,t),ht(e,t,s,l),t.child;case 6:return e===null&&Le&&((e=l=Ge)&&(l=ev(l,t.pendingProps,Jt),l!==null?(t.stateNode=l,xt=t,Ge=null,e=!0):e=!1),e||Xa(t)),null;case 13:return fx(e,t,l);case 4:return we(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=zl(t,null,s,l):ht(e,t,s,l),t.child;case 11:return nx(e,t,t.type,t.pendingProps,l);case 7:return ht(e,t,t.pendingProps,l),t.child;case 8:return ht(e,t,t.pendingProps.children,l),t.child;case 12:return ht(e,t,t.pendingProps.children,l),t.child;case 10:return s=t.pendingProps,Za(t,t.type,s.value),ht(e,t,s.children,l),t.child;case 9:return r=t.type._context,s=t.pendingProps.children,Tl(t),r=ft(r),s=s(r),t.flags|=1,ht(e,t,s,l),t.child;case 14:return rx(e,t,t.type,t.pendingProps,l);case 15:return ix(e,t,t.type,t.pendingProps,l);case 19:return px(e,t,l);case 31:return N0(e,t,l);case 22:return ox(e,t,l,t.pendingProps);case 24:return Tl(t),s=ft(at),e===null?(r=Vo(),r===null&&(r=Pe,i=Fo(),r.pooledCache=i,i.refCount++,i!==null&&(r.pooledCacheLanes|=l),r=i),t.memoizedState={parent:s,cache:r},Qo(t),Za(t,at,r)):((e.lanes&l)!==0&&(Xo(e,t),un(t,null,null,l),dn()),r=e.memoizedState,i=t.memoizedState,r.parent!==s?(r={parent:s,cache:s},t.memoizedState=r,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=r),Za(t,at,s)):(s=i.cache,Za(t,at,s),s!==r.cache&&Po(t,[at],l,!0))),ht(e,t,t.pendingProps.children,l),t.child;case 29:throw t.pendingProps}throw Error(c(156,t.tag))}function Oa(e){e.flags|=4}function Ec(e,t,l,s,r){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(r&335544128)===r)if(e.stateNode.complete)e.flags|=8192;else if(Fx())e.flags|=8192;else throw El=Mr,Yo}else e.flags&=-16777217}function vx(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Lf(t))if(Fx())e.flags|=8192;else throw El=Mr,Yo}function Gr(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?ar():536870912,e.lanes|=t,ys|=t)}function bn(e,t){if(!Le)switch(e.tailMode){case"hidden":t=e.tail;for(var l=null;t!==null;)t.alternate!==null&&(l=t),t=t.sibling;l===null?e.tail=null:l.sibling=null;break;case"collapsed":l=e.tail;for(var s=null;l!==null;)l.alternate!==null&&(s=l),l=l.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function Ve(e){var t=e.alternate!==null&&e.alternate.child===e.child,l=0,s=0;if(t)for(var r=e.child;r!==null;)l|=r.lanes|r.childLanes,s|=r.subtreeFlags&65011712,s|=r.flags&65011712,r.return=e,r=r.sibling;else for(r=e.child;r!==null;)l|=r.lanes|r.childLanes,s|=r.subtreeFlags,s|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=s,e.childLanes=l,t}function w0(e,t,l){var s=t.pendingProps;switch(Ho(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ve(t),null;case 1:return Ve(t),null;case 3:return l=t.stateNode,s=null,e!==null&&(s=e.memoizedState.cache),t.memoizedState.cache!==s&&(t.flags|=2048),za(at),Ae(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(e===null||e.child===null)&&(is(t)?Oa(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Bo())),Ve(t),null;case 26:var r=t.type,i=t.memoizedState;return e===null?(Oa(t),i!==null?(Ve(t),vx(t,i)):(Ve(t),Ec(t,r,null,s,l))):i?i!==e.memoizedState?(Oa(t),Ve(t),vx(t,i)):(Ve(t),t.flags&=-16777217):(e=e.memoizedProps,e!==s&&Oa(t),Ve(t),Ec(t,r,e,s,l)),null;case 27:if(Ze(t),l=be.current,r=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==s&&Oa(t);else{if(!s){if(t.stateNode===null)throw Error(c(166));return Ve(t),null}e=J.current,is(t)?Ku(t):(e=Af(r,s,l),t.stateNode=e,Oa(t))}return Ve(t),null;case 5:if(Ze(t),r=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==s&&Oa(t);else{if(!s){if(t.stateNode===null)throw Error(c(166));return Ve(t),null}if(i=J.current,is(t))Ku(t);else{var f=ri(be.current);switch(i){case 1:i=f.createElementNS("http://www.w3.org/2000/svg",r);break;case 2:i=f.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;default:switch(r){case"svg":i=f.createElementNS("http://www.w3.org/2000/svg",r);break;case"math":i=f.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;case"script":i=f.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i=typeof s.is=="string"?f.createElement("select",{is:s.is}):f.createElement("select"),s.multiple?i.multiple=!0:s.size&&(i.size=s.size);break;default:i=typeof s.is=="string"?f.createElement(r,{is:s.is}):f.createElement(r)}}i[ot]=t,i[gt]=s;e:for(f=t.child;f!==null;){if(f.tag===5||f.tag===6)i.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}t.stateNode=i;e:switch(pt(i,r,s),r){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&Oa(t)}}return Ve(t),Ec(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,l),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==s&&Oa(t);else{if(typeof s!="string"&&t.stateNode===null)throw Error(c(166));if(e=be.current,is(t)){if(e=t.stateNode,l=t.memoizedProps,s=null,r=xt,r!==null)switch(r.tag){case 27:case 5:s=r.memoizedProps}e[ot]=t,e=!!(e.nodeValue===l||s!==null&&s.suppressHydrationWarning===!0||hf(e.nodeValue,l)),e||Xa(t,!0)}else e=ri(e).createTextNode(s),e[ot]=t,t.stateNode=e}return Ve(t),null;case 31:if(l=t.memoizedState,e===null||e.memoizedState!==null){if(s=is(t),l!==null){if(e===null){if(!s)throw Error(c(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(c(557));e[ot]=t}else Cl(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Ve(t),e=!1}else l=Bo(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=l),e=!0;if(!e)return t.flags&256?(Ut(t),t):(Ut(t),null);if((t.flags&128)!==0)throw Error(c(558))}return Ve(t),null;case 13:if(s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(r=is(t),s!==null&&s.dehydrated!==null){if(e===null){if(!r)throw Error(c(318));if(r=t.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(c(317));r[ot]=t}else Cl(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Ve(t),r=!1}else r=Bo(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=r),r=!0;if(!r)return t.flags&256?(Ut(t),t):(Ut(t),null)}return Ut(t),(t.flags&128)!==0?(t.lanes=l,t):(l=s!==null,e=e!==null&&e.memoizedState!==null,l&&(s=t.child,r=null,s.alternate!==null&&s.alternate.memoizedState!==null&&s.alternate.memoizedState.cachePool!==null&&(r=s.alternate.memoizedState.cachePool.pool),i=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(i=s.memoizedState.cachePool.pool),i!==r&&(s.flags|=2048)),l!==e&&l&&(t.child.flags|=8192),Gr(t,t.updateQueue),Ve(t),null);case 4:return Ae(),e===null&&Jc(t.stateNode.containerInfo),Ve(t),null;case 10:return za(t.type),Ve(t),null;case 19:if(B(et),s=t.memoizedState,s===null)return Ve(t),null;if(r=(t.flags&128)!==0,i=s.rendering,i===null)if(r)bn(s,!1);else{if(Je!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(i=Dr(e),i!==null){for(t.flags|=128,bn(s,!1),e=i.updateQueue,t.updateQueue=e,Gr(t,e),t.subtreeFlags=0,e=l,l=t.child;l!==null;)Vu(l,e),l=l.sibling;return W(et,et.current&1|2),Le&&ka(t,s.treeForkCount),t.child}e=e.sibling}s.tail!==null&&wt()>Zr&&(t.flags|=128,r=!0,bn(s,!1),t.lanes=4194304)}else{if(!r)if(e=Dr(i),e!==null){if(t.flags|=128,r=!0,e=e.updateQueue,t.updateQueue=e,Gr(t,e),bn(s,!0),s.tail===null&&s.tailMode==="hidden"&&!i.alternate&&!Le)return Ve(t),null}else 2*wt()-s.renderingStartTime>Zr&&l!==536870912&&(t.flags|=128,r=!0,bn(s,!1),t.lanes=4194304);s.isBackwards?(i.sibling=t.child,t.child=i):(e=s.last,e!==null?e.sibling=i:t.child=i,s.last=i)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=wt(),e.sibling=null,l=et.current,W(et,r?l&1|2:l&1),Le&&ka(t,s.treeForkCount),e):(Ve(t),null);case 22:case 23:return Ut(t),Wo(),s=t.memoizedState!==null,e!==null?e.memoizedState!==null!==s&&(t.flags|=8192):s&&(t.flags|=8192),s?(l&536870912)!==0&&(t.flags&128)===0&&(Ve(t),t.subtreeFlags&6&&(t.flags|=8192)):Ve(t),l=t.updateQueue,l!==null&&Gr(t,l.retryQueue),l=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(l=e.memoizedState.cachePool.pool),s=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),s!==l&&(t.flags|=2048),e!==null&&B(Ml),null;case 24:return l=null,e!==null&&(l=e.memoizedState.cache),t.memoizedState.cache!==l&&(t.flags|=2048),za(at),Ve(t),null;case 25:return null;case 30:return null}throw Error(c(156,t.tag))}function C0(e,t){switch(Ho(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return za(at),Ae(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return Ze(t),null;case 31:if(t.memoizedState!==null){if(Ut(t),t.alternate===null)throw Error(c(340));Cl()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(Ut(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(c(340));Cl()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return B(et),null;case 4:return Ae(),null;case 10:return za(t.type),null;case 22:case 23:return Ut(t),Wo(),e!==null&&B(Ml),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return za(at),null;case 25:return null;default:return null}}function gx(e,t){switch(Ho(t),t.tag){case 3:za(at),Ae();break;case 26:case 27:case 5:Ze(t);break;case 4:Ae();break;case 31:t.memoizedState!==null&&Ut(t);break;case 13:Ut(t);break;case 19:B(et);break;case 10:za(t.type);break;case 22:case 23:Ut(t),Wo(),e!==null&&B(Ml);break;case 24:za(at)}}function vn(e,t){try{var l=t.updateQueue,s=l!==null?l.lastEffect:null;if(s!==null){var r=s.next;l=r;do{if((l.tag&e)===e){s=void 0;var i=l.create,f=l.inst;s=i(),f.destroy=s}l=l.next}while(l!==r)}}catch(T){qe(t,t.return,T)}}function al(e,t,l){try{var s=t.updateQueue,r=s!==null?s.lastEffect:null;if(r!==null){var i=r.next;s=i;do{if((s.tag&e)===e){var f=s.inst,T=f.destroy;if(T!==void 0){f.destroy=void 0,r=t;var D=l,G=T;try{G()}catch(ee){qe(r,D,ee)}}}s=s.next}while(s!==i)}}catch(ee){qe(t,t.return,ee)}}function yx(e){var t=e.updateQueue;if(t!==null){var l=e.stateNode;try{dm(t,l)}catch(s){qe(e,e.return,s)}}}function jx(e,t,l){l.props=Rl(e.type,e.memoizedProps),l.state=e.memoizedState;try{l.componentWillUnmount()}catch(s){qe(e,t,s)}}function gn(e,t){try{var l=e.ref;if(l!==null){switch(e.tag){case 26:case 27:case 5:var s=e.stateNode;break;case 30:s=e.stateNode;break;default:s=e.stateNode}typeof l=="function"?e.refCleanup=l(s):l.current=s}}catch(r){qe(e,t,r)}}function ha(e,t){var l=e.ref,s=e.refCleanup;if(l!==null)if(typeof s=="function")try{s()}catch(r){qe(e,t,r)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(r){qe(e,t,r)}else l.current=null}function Nx(e){var t=e.type,l=e.memoizedProps,s=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":l.autoFocus&&s.focus();break e;case"img":l.src?s.src=l.src:l.srcSet&&(s.srcset=l.srcSet)}}catch(r){qe(e,e.return,r)}}function zc(e,t,l){try{var s=e.stateNode;Y0(s,e.type,l,t),s[gt]=t}catch(r){qe(e,e.return,r)}}function Sx(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&cl(e.type)||e.tag===4}function Dc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Sx(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&cl(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Rc(e,t,l){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(e,t):(t=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,t.appendChild(e),l=l._reactRootContainer,l!=null||t.onclick!==null||(t.onclick=Aa));else if(s!==4&&(s===27&&cl(e.type)&&(l=e.stateNode,t=null),e=e.child,e!==null))for(Rc(e,t,l),e=e.sibling;e!==null;)Rc(e,t,l),e=e.sibling}function Vr(e,t,l){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?l.insertBefore(e,t):l.appendChild(e);else if(s!==4&&(s===27&&cl(e.type)&&(l=e.stateNode),e=e.child,e!==null))for(Vr(e,t,l),e=e.sibling;e!==null;)Vr(e,t,l),e=e.sibling}function wx(e){var t=e.stateNode,l=e.memoizedProps;try{for(var s=e.type,r=t.attributes;r.length;)t.removeAttributeNode(r[0]);pt(t,s,l),t[ot]=e,t[gt]=l}catch(i){qe(e,e.return,i)}}var Ia=!1,nt=!1,Lc=!1,Cx=typeof WeakSet=="function"?WeakSet:Set,mt=null;function A0(e,t){if(e=e.containerInfo,td=xi,e=_u(e),To(e)){if("selectionStart"in e)var l={start:e.selectionStart,end:e.selectionEnd};else e:{l=(l=e.ownerDocument)&&l.defaultView||window;var s=l.getSelection&&l.getSelection();if(s&&s.rangeCount!==0){l=s.anchorNode;var r=s.anchorOffset,i=s.focusNode;s=s.focusOffset;try{l.nodeType,i.nodeType}catch{l=null;break e}var f=0,T=-1,D=-1,G=0,ee=0,le=e,Q=null;t:for(;;){for(var Z;le!==l||r!==0&&le.nodeType!==3||(T=f+r),le!==i||s!==0&&le.nodeType!==3||(D=f+s),le.nodeType===3&&(f+=le.nodeValue.length),(Z=le.firstChild)!==null;)Q=le,le=Z;for(;;){if(le===e)break t;if(Q===l&&++G===r&&(T=f),Q===i&&++ee===s&&(D=f),(Z=le.nextSibling)!==null)break;le=Q,Q=le.parentNode}le=Z}l=T===-1||D===-1?null:{start:T,end:D}}else l=null}l=l||{start:0,end:0}}else l=null;for(ad={focusedElem:e,selectionRange:l},xi=!1,mt=t;mt!==null;)if(t=mt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,mt=e;else for(;mt!==null;){switch(t=mt,i=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(l=0;l<e.length;l++)r=e[l],r.ref.impl=r.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&i!==null){e=void 0,l=t,r=i.memoizedProps,i=i.memoizedState,s=l.stateNode;try{var he=Rl(l.type,r);e=s.getSnapshotBeforeUpdate(he,i),s.__reactInternalSnapshotBeforeUpdate=e}catch(Ne){qe(l,l.return,Ne)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,l=e.nodeType,l===9)nd(e);else if(l===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":nd(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(c(163))}if(e=t.sibling,e!==null){e.return=t.return,mt=e;break}mt=t.return}}function Ax(e,t,l){var s=l.flags;switch(l.tag){case 0:case 11:case 15:Ha(e,l),s&4&&vn(5,l);break;case 1:if(Ha(e,l),s&4)if(e=l.stateNode,t===null)try{e.componentDidMount()}catch(f){qe(l,l.return,f)}else{var r=Rl(l.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(r,t,e.__reactInternalSnapshotBeforeUpdate)}catch(f){qe(l,l.return,f)}}s&64&&yx(l),s&512&&gn(l,l.return);break;case 3:if(Ha(e,l),s&64&&(e=l.updateQueue,e!==null)){if(t=null,l.child!==null)switch(l.child.tag){case 27:case 5:t=l.child.stateNode;break;case 1:t=l.child.stateNode}try{dm(e,t)}catch(f){qe(l,l.return,f)}}break;case 27:t===null&&s&4&&wx(l);case 26:case 5:Ha(e,l),t===null&&s&4&&Nx(l),s&512&&gn(l,l.return);break;case 12:Ha(e,l);break;case 31:Ha(e,l),s&4&&kx(e,l);break;case 13:Ha(e,l),s&4&&Ex(e,l),s&64&&(e=l.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(l=O0.bind(null,l),tv(e,l))));break;case 22:if(s=l.memoizedState!==null||Ia,!s){t=t!==null&&t.memoizedState!==null||nt,r=Ia;var i=nt;Ia=s,(nt=t)&&!i?qa(e,l,(l.subtreeFlags&8772)!==0):Ha(e,l),Ia=r,nt=i}break;case 30:break;default:Ha(e,l)}}function Tx(e){var t=e.alternate;t!==null&&(e.alternate=null,Tx(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Tt(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Ye=null,zt=!1;function _a(e,t,l){for(l=l.child;l!==null;)Mx(e,t,l),l=l.sibling}function Mx(e,t,l){if(Ct&&typeof Ct.onCommitFiberUnmount=="function")try{Ct.onCommitFiberUnmount(pl,l)}catch{}switch(l.tag){case 26:nt||ha(l,t),_a(e,t,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:nt||ha(l,t);var s=Ye,r=zt;cl(l.type)&&(Ye=l.stateNode,zt=!1),_a(e,t,l),Mn(l.stateNode),Ye=s,zt=r;break;case 5:nt||ha(l,t);case 6:if(s=Ye,r=zt,Ye=null,_a(e,t,l),Ye=s,zt=r,Ye!==null)if(zt)try{(Ye.nodeType===9?Ye.body:Ye.nodeName==="HTML"?Ye.ownerDocument.body:Ye).removeChild(l.stateNode)}catch(i){qe(l,t,i)}else try{Ye.removeChild(l.stateNode)}catch(i){qe(l,t,i)}break;case 18:Ye!==null&&(zt?(e=Ye,jf(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,l.stateNode),Ms(e)):jf(Ye,l.stateNode));break;case 4:s=Ye,r=zt,Ye=l.stateNode.containerInfo,zt=!0,_a(e,t,l),Ye=s,zt=r;break;case 0:case 11:case 14:case 15:al(2,l,t),nt||al(4,l,t),_a(e,t,l);break;case 1:nt||(ha(l,t),s=l.stateNode,typeof s.componentWillUnmount=="function"&&jx(l,t,s)),_a(e,t,l);break;case 21:_a(e,t,l);break;case 22:nt=(s=nt)||l.memoizedState!==null,_a(e,t,l),nt=s;break;default:_a(e,t,l)}}function kx(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Ms(e)}catch(l){qe(t,t.return,l)}}}function Ex(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Ms(e)}catch(l){qe(t,t.return,l)}}function T0(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Cx),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Cx),t;default:throw Error(c(435,e.tag))}}function Yr(e,t){var l=T0(e);t.forEach(function(s){if(!l.has(s)){l.add(s);var r=I0.bind(null,e,s);s.then(r,r)}})}function Dt(e,t){var l=t.deletions;if(l!==null)for(var s=0;s<l.length;s++){var r=l[s],i=e,f=t,T=f;e:for(;T!==null;){switch(T.tag){case 27:if(cl(T.type)){Ye=T.stateNode,zt=!1;break e}break;case 5:Ye=T.stateNode,zt=!1;break e;case 3:case 4:Ye=T.stateNode.containerInfo,zt=!0;break e}T=T.return}if(Ye===null)throw Error(c(160));Mx(i,f,r),Ye=null,zt=!1,i=r.alternate,i!==null&&(i.return=null),r.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)zx(t,e),t=t.sibling}var ia=null;function zx(e,t){var l=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Dt(t,e),Rt(e),s&4&&(al(3,e,e.return),vn(3,e),al(5,e,e.return));break;case 1:Dt(t,e),Rt(e),s&512&&(nt||l===null||ha(l,l.return)),s&64&&Ia&&(e=e.updateQueue,e!==null&&(s=e.callbacks,s!==null&&(l=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=l===null?s:l.concat(s))));break;case 26:var r=ia;if(Dt(t,e),Rt(e),s&512&&(nt||l===null||ha(l,l.return)),s&4){var i=l!==null?l.memoizedState:null;if(s=e.memoizedState,l===null)if(s===null)if(e.stateNode===null){e:{s=e.type,l=e.memoizedProps,r=r.ownerDocument||r;t:switch(s){case"title":i=r.getElementsByTagName("title")[0],(!i||i[ue]||i[ot]||i.namespaceURI==="http://www.w3.org/2000/svg"||i.hasAttribute("itemprop"))&&(i=r.createElement(s),r.head.insertBefore(i,r.querySelector("head > title"))),pt(i,s,l),i[ot]=e,ut(i),s=i;break e;case"link":var f=Df("link","href",r).get(s+(l.href||""));if(f){for(var T=0;T<f.length;T++)if(i=f[T],i.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&i.getAttribute("rel")===(l.rel==null?null:l.rel)&&i.getAttribute("title")===(l.title==null?null:l.title)&&i.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){f.splice(T,1);break t}}i=r.createElement(s),pt(i,s,l),r.head.appendChild(i);break;case"meta":if(f=Df("meta","content",r).get(s+(l.content||""))){for(T=0;T<f.length;T++)if(i=f[T],i.getAttribute("content")===(l.content==null?null:""+l.content)&&i.getAttribute("name")===(l.name==null?null:l.name)&&i.getAttribute("property")===(l.property==null?null:l.property)&&i.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&i.getAttribute("charset")===(l.charSet==null?null:l.charSet)){f.splice(T,1);break t}}i=r.createElement(s),pt(i,s,l),r.head.appendChild(i);break;default:throw Error(c(468,s))}i[ot]=e,ut(i),s=i}e.stateNode=s}else Rf(r,e.type,e.stateNode);else e.stateNode=zf(r,s,e.memoizedProps);else i!==s?(i===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):i.count--,s===null?Rf(r,e.type,e.stateNode):zf(r,s,e.memoizedProps)):s===null&&e.stateNode!==null&&zc(e,e.memoizedProps,l.memoizedProps)}break;case 27:Dt(t,e),Rt(e),s&512&&(nt||l===null||ha(l,l.return)),l!==null&&s&4&&zc(e,e.memoizedProps,l.memoizedProps);break;case 5:if(Dt(t,e),Rt(e),s&512&&(nt||l===null||ha(l,l.return)),e.flags&32){r=e.stateNode;try{Kl(r,"")}catch(he){qe(e,e.return,he)}}s&4&&e.stateNode!=null&&(r=e.memoizedProps,zc(e,r,l!==null?l.memoizedProps:r)),s&1024&&(Lc=!0);break;case 6:if(Dt(t,e),Rt(e),s&4){if(e.stateNode===null)throw Error(c(162));s=e.memoizedProps,l=e.stateNode;try{l.nodeValue=s}catch(he){qe(e,e.return,he)}}break;case 3:if(ci=null,r=ia,ia=ii(t.containerInfo),Dt(t,e),ia=r,Rt(e),s&4&&l!==null&&l.memoizedState.isDehydrated)try{Ms(t.containerInfo)}catch(he){qe(e,e.return,he)}Lc&&(Lc=!1,Dx(e));break;case 4:s=ia,ia=ii(e.stateNode.containerInfo),Dt(t,e),Rt(e),ia=s;break;case 12:Dt(t,e),Rt(e);break;case 31:Dt(t,e),Rt(e),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,Yr(e,s)));break;case 13:Dt(t,e),Rt(e),e.child.flags&8192&&e.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(Xr=wt()),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,Yr(e,s)));break;case 22:r=e.memoizedState!==null;var D=l!==null&&l.memoizedState!==null,G=Ia,ee=nt;if(Ia=G||r,nt=ee||D,Dt(t,e),nt=ee,Ia=G,Rt(e),s&8192)e:for(t=e.stateNode,t._visibility=r?t._visibility&-2:t._visibility|1,r&&(l===null||D||Ia||nt||Ll(e)),l=null,t=e;;){if(t.tag===5||t.tag===26){if(l===null){D=l=t;try{if(i=D.stateNode,r)f=i.style,typeof f.setProperty=="function"?f.setProperty("display","none","important"):f.display="none";else{T=D.stateNode;var le=D.memoizedProps.style,Q=le!=null&&le.hasOwnProperty("display")?le.display:null;T.style.display=Q==null||typeof Q=="boolean"?"":(""+Q).trim()}}catch(he){qe(D,D.return,he)}}}else if(t.tag===6){if(l===null){D=t;try{D.stateNode.nodeValue=r?"":D.memoizedProps}catch(he){qe(D,D.return,he)}}}else if(t.tag===18){if(l===null){D=t;try{var Z=D.stateNode;r?Nf(Z,!0):Nf(D.stateNode,!1)}catch(he){qe(D,D.return,he)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;l===t&&(l=null),t=t.return}l===t&&(l=null),t.sibling.return=t.return,t=t.sibling}s&4&&(s=e.updateQueue,s!==null&&(l=s.retryQueue,l!==null&&(s.retryQueue=null,Yr(e,l))));break;case 19:Dt(t,e),Rt(e),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,Yr(e,s)));break;case 30:break;case 21:break;default:Dt(t,e),Rt(e)}}function Rt(e){var t=e.flags;if(t&2){try{for(var l,s=e.return;s!==null;){if(Sx(s)){l=s;break}s=s.return}if(l==null)throw Error(c(160));switch(l.tag){case 27:var r=l.stateNode,i=Dc(e);Vr(e,i,r);break;case 5:var f=l.stateNode;l.flags&32&&(Kl(f,""),l.flags&=-33);var T=Dc(e);Vr(e,T,f);break;case 3:case 4:var D=l.stateNode.containerInfo,G=Dc(e);Rc(e,G,D);break;default:throw Error(c(161))}}catch(ee){qe(e,e.return,ee)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Dx(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;Dx(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function Ha(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)Ax(e,t.alternate,t),t=t.sibling}function Ll(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:al(4,t,t.return),Ll(t);break;case 1:ha(t,t.return);var l=t.stateNode;typeof l.componentWillUnmount=="function"&&jx(t,t.return,l),Ll(t);break;case 27:Mn(t.stateNode);case 26:case 5:ha(t,t.return),Ll(t);break;case 22:t.memoizedState===null&&Ll(t);break;case 30:Ll(t);break;default:Ll(t)}e=e.sibling}}function qa(e,t,l){for(l=l&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var s=t.alternate,r=e,i=t,f=i.flags;switch(i.tag){case 0:case 11:case 15:qa(r,i,l),vn(4,i);break;case 1:if(qa(r,i,l),s=i,r=s.stateNode,typeof r.componentDidMount=="function")try{r.componentDidMount()}catch(G){qe(s,s.return,G)}if(s=i,r=s.updateQueue,r!==null){var T=s.stateNode;try{var D=r.shared.hiddenCallbacks;if(D!==null)for(r.shared.hiddenCallbacks=null,r=0;r<D.length;r++)cm(D[r],T)}catch(G){qe(s,s.return,G)}}l&&f&64&&yx(i),gn(i,i.return);break;case 27:wx(i);case 26:case 5:qa(r,i,l),l&&s===null&&f&4&&Nx(i),gn(i,i.return);break;case 12:qa(r,i,l);break;case 31:qa(r,i,l),l&&f&4&&kx(r,i);break;case 13:qa(r,i,l),l&&f&4&&Ex(r,i);break;case 22:i.memoizedState===null&&qa(r,i,l),gn(i,i.return);break;case 30:break;default:qa(r,i,l)}t=t.sibling}}function Oc(e,t){var l=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(l=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==l&&(e!=null&&e.refCount++,l!=null&&sn(l))}function Ic(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&sn(e))}function oa(e,t,l,s){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Rx(e,t,l,s),t=t.sibling}function Rx(e,t,l,s){var r=t.flags;switch(t.tag){case 0:case 11:case 15:oa(e,t,l,s),r&2048&&vn(9,t);break;case 1:oa(e,t,l,s);break;case 3:oa(e,t,l,s),r&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&sn(e)));break;case 12:if(r&2048){oa(e,t,l,s),e=t.stateNode;try{var i=t.memoizedProps,f=i.id,T=i.onPostCommit;typeof T=="function"&&T(f,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(D){qe(t,t.return,D)}}else oa(e,t,l,s);break;case 31:oa(e,t,l,s);break;case 13:oa(e,t,l,s);break;case 23:break;case 22:i=t.stateNode,f=t.alternate,t.memoizedState!==null?i._visibility&2?oa(e,t,l,s):yn(e,t):i._visibility&2?oa(e,t,l,s):(i._visibility|=2,bs(e,t,l,s,(t.subtreeFlags&10256)!==0||!1)),r&2048&&Oc(f,t);break;case 24:oa(e,t,l,s),r&2048&&Ic(t.alternate,t);break;default:oa(e,t,l,s)}}function bs(e,t,l,s,r){for(r=r&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var i=e,f=t,T=l,D=s,G=f.flags;switch(f.tag){case 0:case 11:case 15:bs(i,f,T,D,r),vn(8,f);break;case 23:break;case 22:var ee=f.stateNode;f.memoizedState!==null?ee._visibility&2?bs(i,f,T,D,r):yn(i,f):(ee._visibility|=2,bs(i,f,T,D,r)),r&&G&2048&&Oc(f.alternate,f);break;case 24:bs(i,f,T,D,r),r&&G&2048&&Ic(f.alternate,f);break;default:bs(i,f,T,D,r)}t=t.sibling}}function yn(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var l=e,s=t,r=s.flags;switch(s.tag){case 22:yn(l,s),r&2048&&Oc(s.alternate,s);break;case 24:yn(l,s),r&2048&&Ic(s.alternate,s);break;default:yn(l,s)}t=t.sibling}}var jn=8192;function vs(e,t,l){if(e.subtreeFlags&jn)for(e=e.child;e!==null;)Lx(e,t,l),e=e.sibling}function Lx(e,t,l){switch(e.tag){case 26:vs(e,t,l),e.flags&jn&&e.memoizedState!==null&&xv(l,ia,e.memoizedState,e.memoizedProps);break;case 5:vs(e,t,l);break;case 3:case 4:var s=ia;ia=ii(e.stateNode.containerInfo),vs(e,t,l),ia=s;break;case 22:e.memoizedState===null&&(s=e.alternate,s!==null&&s.memoizedState!==null?(s=jn,jn=16777216,vs(e,t,l),jn=s):vs(e,t,l));break;default:vs(e,t,l)}}function Ox(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Nn(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var l=0;l<t.length;l++){var s=t[l];mt=s,_x(s,e)}Ox(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Ix(e),e=e.sibling}function Ix(e){switch(e.tag){case 0:case 11:case 15:Nn(e),e.flags&2048&&al(9,e,e.return);break;case 3:Nn(e);break;case 12:Nn(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Qr(e)):Nn(e);break;default:Nn(e)}}function Qr(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var l=0;l<t.length;l++){var s=t[l];mt=s,_x(s,e)}Ox(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:al(8,t,t.return),Qr(t);break;case 22:l=t.stateNode,l._visibility&2&&(l._visibility&=-3,Qr(t));break;default:Qr(t)}e=e.sibling}}function _x(e,t){for(;mt!==null;){var l=mt;switch(l.tag){case 0:case 11:case 15:al(8,l,t);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var s=l.memoizedState.cachePool.pool;s!=null&&s.refCount++}break;case 24:sn(l.memoizedState.cache)}if(s=l.child,s!==null)s.return=l,mt=s;else e:for(l=e;mt!==null;){s=mt;var r=s.sibling,i=s.return;if(Tx(s),s===l){mt=null;break e}if(r!==null){r.return=i,mt=r;break e}mt=i}}}var M0={getCacheForType:function(e){var t=ft(at),l=t.data.get(e);return l===void 0&&(l=e(),t.data.set(e,l)),l},cacheSignal:function(){return ft(at).controller.signal}},k0=typeof WeakMap=="function"?WeakMap:Map,_e=0,Pe=null,Ee=null,De=0,He=0,$t=null,ll=!1,gs=!1,_c=!1,Ba=0,Je=0,sl=0,Ol=0,Hc=0,Pt=0,ys=0,Sn=null,Lt=null,qc=!1,Xr=0,Hx=0,Zr=1/0,Kr=null,nl=null,ct=0,rl=null,js=null,Ua=0,Bc=0,Uc=null,qx=null,wn=0,$c=null;function Ft(){return(_e&2)!==0&&De!==0?De&-De:k.T!==null?Qc():rr()}function Bx(){if(Pt===0)if((De&536870912)===0||Le){var e=Fl;Fl<<=1,(Fl&3932160)===0&&(Fl=262144),Pt=e}else Pt=536870912;return e=Bt.current,e!==null&&(e.flags|=32),Pt}function Ot(e,t,l){(e===Pe&&(He===2||He===9)||e.cancelPendingCommit!==null)&&(Ns(e,0),il(e,De,Pt,!1)),vl(e,l),((_e&2)===0||e!==Pe)&&(e===Pe&&((_e&2)===0&&(Ol|=l),Je===4&&il(e,De,Pt,!1)),pa(e))}function Ux(e,t,l){if((_e&6)!==0)throw Error(c(327));var s=!l&&(t&127)===0&&(t&e.expiredLanes)===0||bl(e,t),r=s?D0(e,t):Fc(e,t,!0),i=s;do{if(r===0){gs&&!s&&il(e,t,0,!1);break}else{if(l=e.current.alternate,i&&!E0(l)){r=Fc(e,t,!1),i=!1;continue}if(r===2){if(i=t,e.errorRecoveryDisabledLanes&i)var f=0;else f=e.pendingLanes&-536870913,f=f!==0?f:f&536870912?536870912:0;if(f!==0){t=f;e:{var T=e;r=Sn;var D=T.current.memoizedState.isDehydrated;if(D&&(Ns(T,f).flags|=256),f=Fc(T,f,!1),f!==2){if(_c&&!D){T.errorRecoveryDisabledLanes|=i,Ol|=i,r=4;break e}i=Lt,Lt=r,i!==null&&(Lt===null?Lt=i:Lt.push.apply(Lt,i))}r=f}if(i=!1,r!==2)continue}}if(r===1){Ns(e,0),il(e,t,0,!0);break}e:{switch(s=e,i=r,i){case 0:case 1:throw Error(c(345));case 4:if((t&4194048)!==t)break;case 6:il(s,t,Pt,!ll);break e;case 2:Lt=null;break;case 3:case 5:break;default:throw Error(c(329))}if((t&62914560)===t&&(r=Xr+300-wt(),10<r)){if(il(s,t,Pt,!ll),Vl(s,0,!0)!==0)break e;Ua=t,s.timeoutHandle=gf($x.bind(null,s,l,Lt,Kr,qc,t,Pt,Ol,ys,ll,i,"Throttled",-0,0),r);break e}$x(s,l,Lt,Kr,qc,t,Pt,Ol,ys,ll,i,null,-0,0)}}break}while(!0);pa(e)}function $x(e,t,l,s,r,i,f,T,D,G,ee,le,Q,Z){if(e.timeoutHandle=-1,le=t.subtreeFlags,le&8192||(le&16785408)===16785408){le={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Aa},Lx(t,i,le);var he=(i&62914560)===i?Xr-wt():(i&4194048)===i?Hx-wt():0;if(he=fv(le,he),he!==null){Ua=i,e.cancelPendingCommit=he(Zx.bind(null,e,t,i,l,s,r,f,T,D,ee,le,null,Q,Z)),il(e,i,f,!G);return}}Zx(e,t,i,l,s,r,f,T,D)}function E0(e){for(var t=e;;){var l=t.tag;if((l===0||l===11||l===15)&&t.flags&16384&&(l=t.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var s=0;s<l.length;s++){var r=l[s],i=r.getSnapshot;r=r.value;try{if(!Ht(i(),r))return!1}catch{return!1}}if(l=t.child,t.subtreeFlags&16384&&l!==null)l.return=t,t=l;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function il(e,t,l,s){t&=~Hc,t&=~Ol,e.suspendedLanes|=t,e.pingedLanes&=~t,s&&(e.warmLanes|=t),s=e.expirationTimes;for(var r=t;0<r;){var i=31-At(r),f=1<<i;s[i]=-1,r&=~f}l!==0&&lr(e,l,t)}function Jr(){return(_e&6)===0?(Cn(0),!1):!0}function Pc(){if(Ee!==null){if(He===0)var e=Ee.return;else e=Ee,Ea=Al=null,nc(e),ms=null,rn=0,e=Ee;for(;e!==null;)gx(e.alternate,e),e=e.return;Ee=null}}function Ns(e,t){var l=e.timeoutHandle;l!==-1&&(e.timeoutHandle=-1,Z0(l)),l=e.cancelPendingCommit,l!==null&&(e.cancelPendingCommit=null,l()),Ua=0,Pc(),Pe=e,Ee=l=Ma(e.current,null),De=t,He=0,$t=null,ll=!1,gs=bl(e,t),_c=!1,ys=Pt=Hc=Ol=sl=Je=0,Lt=Sn=null,qc=!1,(t&8)!==0&&(t|=t&32);var s=e.entangledLanes;if(s!==0)for(e=e.entanglements,s&=t;0<s;){var r=31-At(s),i=1<<r;t|=e[r],s&=~i}return Ba=t,gr(),l}function Px(e,t){Te=null,k.H=hn,t===us||t===Tr?(t=nm(),He=3):t===Yo?(t=nm(),He=4):He=t===jc?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,$t=t,Ee===null&&(Je=1,Ur(e,Xt(t,e.current)))}function Fx(){var e=Bt.current;return e===null?!0:(De&4194048)===De?Wt===null:(De&62914560)===De||(De&536870912)!==0?e===Wt:!1}function Gx(){var e=k.H;return k.H=hn,e===null?hn:e}function Vx(){var e=k.A;return k.A=M0,e}function Wr(){Je=4,ll||(De&4194048)!==De&&Bt.current!==null||(gs=!0),(sl&134217727)===0&&(Ol&134217727)===0||Pe===null||il(Pe,De,Pt,!1)}function Fc(e,t,l){var s=_e;_e|=2;var r=Gx(),i=Vx();(Pe!==e||De!==t)&&(Kr=null,Ns(e,t)),t=!1;var f=Je;e:do try{if(He!==0&&Ee!==null){var T=Ee,D=$t;switch(He){case 8:Pc(),f=6;break e;case 3:case 2:case 9:case 6:Bt.current===null&&(t=!0);var G=He;if(He=0,$t=null,Ss(e,T,D,G),l&&gs){f=0;break e}break;default:G=He,He=0,$t=null,Ss(e,T,D,G)}}z0(),f=Je;break}catch(ee){Px(e,ee)}while(!0);return t&&e.shellSuspendCounter++,Ea=Al=null,_e=s,k.H=r,k.A=i,Ee===null&&(Pe=null,De=0,gr()),f}function z0(){for(;Ee!==null;)Yx(Ee)}function D0(e,t){var l=_e;_e|=2;var s=Gx(),r=Vx();Pe!==e||De!==t?(Kr=null,Zr=wt()+500,Ns(e,t)):gs=bl(e,t);e:do try{if(He!==0&&Ee!==null){t=Ee;var i=$t;t:switch(He){case 1:He=0,$t=null,Ss(e,t,i,1);break;case 2:case 9:if(lm(i)){He=0,$t=null,Qx(t);break}t=function(){He!==2&&He!==9||Pe!==e||(He=7),pa(e)},i.then(t,t);break e;case 3:He=7;break e;case 4:He=5;break e;case 7:lm(i)?(He=0,$t=null,Qx(t)):(He=0,$t=null,Ss(e,t,i,7));break;case 5:var f=null;switch(Ee.tag){case 26:f=Ee.memoizedState;case 5:case 27:var T=Ee;if(f?Lf(f):T.stateNode.complete){He=0,$t=null;var D=T.sibling;if(D!==null)Ee=D;else{var G=T.return;G!==null?(Ee=G,ei(G)):Ee=null}break t}}He=0,$t=null,Ss(e,t,i,5);break;case 6:He=0,$t=null,Ss(e,t,i,6);break;case 8:Pc(),Je=6;break e;default:throw Error(c(462))}}R0();break}catch(ee){Px(e,ee)}while(!0);return Ea=Al=null,k.H=s,k.A=r,_e=l,Ee!==null?0:(Pe=null,De=0,gr(),Je)}function R0(){for(;Ee!==null&&!Ji();)Yx(Ee)}function Yx(e){var t=bx(e.alternate,e,Ba);e.memoizedProps=e.pendingProps,t===null?ei(e):Ee=t}function Qx(e){var t=e,l=t.alternate;switch(t.tag){case 15:case 0:t=ux(l,t,t.pendingProps,t.type,void 0,De);break;case 11:t=ux(l,t,t.pendingProps,t.type.render,t.ref,De);break;case 5:nc(t);default:gx(l,t),t=Ee=Vu(t,Ba),t=bx(l,t,Ba)}e.memoizedProps=e.pendingProps,t===null?ei(e):Ee=t}function Ss(e,t,l,s){Ea=Al=null,nc(t),ms=null,rn=0;var r=t.return;try{if(j0(e,r,t,l,De)){Je=1,Ur(e,Xt(l,e.current)),Ee=null;return}}catch(i){if(r!==null)throw Ee=r,i;Je=1,Ur(e,Xt(l,e.current)),Ee=null;return}t.flags&32768?(Le||s===1?e=!0:gs||(De&536870912)!==0?e=!1:(ll=e=!0,(s===2||s===9||s===3||s===6)&&(s=Bt.current,s!==null&&s.tag===13&&(s.flags|=16384))),Xx(t,e)):ei(t)}function ei(e){var t=e;do{if((t.flags&32768)!==0){Xx(t,ll);return}e=t.return;var l=w0(t.alternate,t,Ba);if(l!==null){Ee=l;return}if(t=t.sibling,t!==null){Ee=t;return}Ee=t=e}while(t!==null);Je===0&&(Je=5)}function Xx(e,t){do{var l=C0(e.alternate,e);if(l!==null){l.flags&=32767,Ee=l;return}if(l=e.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!t&&(e=e.sibling,e!==null)){Ee=e;return}Ee=e=l}while(e!==null);Je=6,Ee=null}function Zx(e,t,l,s,r,i,f,T,D){e.cancelPendingCommit=null;do ti();while(ct!==0);if((_e&6)!==0)throw Error(c(327));if(t!==null){if(t===e.current)throw Error(c(177));if(i=t.lanes|t.childLanes,i|=Do,io(e,l,i,f,T,D),e===Pe&&(Ee=Pe=null,De=0),js=t,rl=e,Ua=l,Bc=i,Uc=r,qx=s,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,_0($l,function(){return tf(),null})):(e.callbackNode=null,e.callbackPriority=0),s=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||s){s=k.T,k.T=null,r=K.p,K.p=2,f=_e,_e|=4;try{A0(e,t,l)}finally{_e=f,K.p=r,k.T=s}}ct=1,Kx(),Jx(),Wx()}}function Kx(){if(ct===1){ct=0;var e=rl,t=js,l=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||l){l=k.T,k.T=null;var s=K.p;K.p=2;var r=_e;_e|=4;try{zx(t,e);var i=ad,f=_u(e.containerInfo),T=i.focusedElem,D=i.selectionRange;if(f!==T&&T&&T.ownerDocument&&Iu(T.ownerDocument.documentElement,T)){if(D!==null&&To(T)){var G=D.start,ee=D.end;if(ee===void 0&&(ee=G),"selectionStart"in T)T.selectionStart=G,T.selectionEnd=Math.min(ee,T.value.length);else{var le=T.ownerDocument||document,Q=le&&le.defaultView||window;if(Q.getSelection){var Z=Q.getSelection(),he=T.textContent.length,Ne=Math.min(D.start,he),$e=D.end===void 0?Ne:Math.min(D.end,he);!Z.extend&&Ne>$e&&(f=$e,$e=Ne,Ne=f);var $=Ou(T,Ne),I=Ou(T,$e);if($&&I&&(Z.rangeCount!==1||Z.anchorNode!==$.node||Z.anchorOffset!==$.offset||Z.focusNode!==I.node||Z.focusOffset!==I.offset)){var F=le.createRange();F.setStart($.node,$.offset),Z.removeAllRanges(),Ne>$e?(Z.addRange(F),Z.extend(I.node,I.offset)):(F.setEnd(I.node,I.offset),Z.addRange(F))}}}}for(le=[],Z=T;Z=Z.parentNode;)Z.nodeType===1&&le.push({element:Z,left:Z.scrollLeft,top:Z.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<le.length;T++){var ae=le[T];ae.element.scrollLeft=ae.left,ae.element.scrollTop=ae.top}}xi=!!td,ad=td=null}finally{_e=r,K.p=s,k.T=l}}e.current=t,ct=2}}function Jx(){if(ct===2){ct=0;var e=rl,t=js,l=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||l){l=k.T,k.T=null;var s=K.p;K.p=2;var r=_e;_e|=4;try{Ax(e,t.alternate,t)}finally{_e=r,K.p=s,k.T=l}}ct=3}}function Wx(){if(ct===4||ct===3){ct=0,Jn();var e=rl,t=js,l=Ua,s=qx;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?ct=5:(ct=0,js=rl=null,ef(e,e.pendingLanes));var r=e.pendingLanes;if(r===0&&(nl=null),Fs(l),t=t.stateNode,Ct&&typeof Ct.onCommitFiberRoot=="function")try{Ct.onCommitFiberRoot(pl,t,void 0,(t.current.flags&128)===128)}catch{}if(s!==null){t=k.T,r=K.p,K.p=2,k.T=null;try{for(var i=e.onRecoverableError,f=0;f<s.length;f++){var T=s[f];i(T.value,{componentStack:T.stack})}}finally{k.T=t,K.p=r}}(Ua&3)!==0&&ti(),pa(e),r=e.pendingLanes,(l&261930)!==0&&(r&42)!==0?e===$c?wn++:(wn=0,$c=e):wn=0,Cn(0)}}function ef(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,sn(t)))}function ti(){return Kx(),Jx(),Wx(),tf()}function tf(){if(ct!==5)return!1;var e=rl,t=Bc;Bc=0;var l=Fs(Ua),s=k.T,r=K.p;try{K.p=32>l?32:l,k.T=null,l=Uc,Uc=null;var i=rl,f=Ua;if(ct=0,js=rl=null,Ua=0,(_e&6)!==0)throw Error(c(331));var T=_e;if(_e|=4,Ix(i.current),Rx(i,i.current,f,l),_e=T,Cn(0,!1),Ct&&typeof Ct.onPostCommitFiberRoot=="function")try{Ct.onPostCommitFiberRoot(pl,i)}catch{}return!0}finally{K.p=r,k.T=s,ef(e,t)}}function af(e,t,l){t=Xt(l,t),t=yc(e.stateNode,t,2),e=Wa(e,t,2),e!==null&&(vl(e,2),pa(e))}function qe(e,t,l){if(e.tag===3)af(e,e,l);else for(;t!==null;){if(t.tag===3){af(t,e,l);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(nl===null||!nl.has(s))){e=Xt(l,e),l=lx(2),s=Wa(t,l,2),s!==null&&(sx(l,s,t,e),vl(s,2),pa(s));break}}t=t.return}}function Gc(e,t,l){var s=e.pingCache;if(s===null){s=e.pingCache=new k0;var r=new Set;s.set(t,r)}else r=s.get(t),r===void 0&&(r=new Set,s.set(t,r));r.has(l)||(_c=!0,r.add(l),e=L0.bind(null,e,t,l),t.then(e,e))}function L0(e,t,l){var s=e.pingCache;s!==null&&s.delete(t),e.pingedLanes|=e.suspendedLanes&l,e.warmLanes&=~l,Pe===e&&(De&l)===l&&(Je===4||Je===3&&(De&62914560)===De&&300>wt()-Xr?(_e&2)===0&&Ns(e,0):Hc|=l,ys===De&&(ys=0)),pa(e)}function lf(e,t){t===0&&(t=ar()),e=Sl(e,t),e!==null&&(vl(e,t),pa(e))}function O0(e){var t=e.memoizedState,l=0;t!==null&&(l=t.retryLane),lf(e,l)}function I0(e,t){var l=0;switch(e.tag){case 31:case 13:var s=e.stateNode,r=e.memoizedState;r!==null&&(l=r.retryLane);break;case 19:s=e.stateNode;break;case 22:s=e.stateNode._retryCache;break;default:throw Error(c(314))}s!==null&&s.delete(t),lf(e,l)}function _0(e,t){return kt(e,t)}var ai=null,ws=null,Vc=!1,li=!1,Yc=!1,ol=0;function pa(e){e!==ws&&e.next===null&&(ws===null?ai=ws=e:ws=ws.next=e),li=!0,Vc||(Vc=!0,q0())}function Cn(e,t){if(!Yc&&li){Yc=!0;do for(var l=!1,s=ai;s!==null;){if(e!==0){var r=s.pendingLanes;if(r===0)var i=0;else{var f=s.suspendedLanes,T=s.pingedLanes;i=(1<<31-At(42|e)+1)-1,i&=r&~(f&~T),i=i&201326741?i&201326741|1:i?i|2:0}i!==0&&(l=!0,of(s,i))}else i=De,i=Vl(s,s===Pe?i:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),(i&3)===0||bl(s,i)||(l=!0,of(s,i));s=s.next}while(l);Yc=!1}}function H0(){sf()}function sf(){li=Vc=!1;var e=0;ol!==0&&X0()&&(e=ol);for(var t=wt(),l=null,s=ai;s!==null;){var r=s.next,i=nf(s,t);i===0?(s.next=null,l===null?ai=r:l.next=r,r===null&&(ws=l)):(l=s,(e!==0||(i&3)!==0)&&(li=!0)),s=r}ct!==0&&ct!==5||Cn(e),ol!==0&&(ol=0)}function nf(e,t){for(var l=e.suspendedLanes,s=e.pingedLanes,r=e.expirationTimes,i=e.pendingLanes&-62914561;0<i;){var f=31-At(i),T=1<<f,D=r[f];D===-1?((T&l)===0||(T&s)!==0)&&(r[f]=ro(T,t)):D<=t&&(e.expiredLanes|=T),i&=~T}if(t=Pe,l=De,l=Vl(e,e===t?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),s=e.callbackNode,l===0||e===t&&(He===2||He===9)||e.cancelPendingCommit!==null)return s!==null&&s!==null&&Sa(s),e.callbackNode=null,e.callbackPriority=0;if((l&3)===0||bl(e,l)){if(t=l&-l,t===e.callbackPriority)return t;switch(s!==null&&Sa(s),Fs(l)){case 2:case 8:l=er;break;case 32:l=$l;break;case 268435456:l=tr;break;default:l=$l}return s=rf.bind(null,e),l=kt(l,s),e.callbackPriority=t,e.callbackNode=l,t}return s!==null&&s!==null&&Sa(s),e.callbackPriority=2,e.callbackNode=null,2}function rf(e,t){if(ct!==0&&ct!==5)return e.callbackNode=null,e.callbackPriority=0,null;var l=e.callbackNode;if(ti()&&e.callbackNode!==l)return null;var s=De;return s=Vl(e,e===Pe?s:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),s===0?null:(Ux(e,s,t),nf(e,wt()),e.callbackNode!=null&&e.callbackNode===l?rf.bind(null,e):null)}function of(e,t){if(ti())return null;Ux(e,t,!0)}function q0(){K0(function(){(_e&6)!==0?kt(Wn,H0):sf()})}function Qc(){if(ol===0){var e=cs;e===0&&(e=Pl,Pl<<=1,(Pl&261888)===0&&(Pl=256)),ol=e}return ol}function cf(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:ur(""+e)}function df(e,t){var l=t.ownerDocument.createElement("input");return l.name=t.name,l.value=t.value,e.id&&l.setAttribute("form",e.id),t.parentNode.insertBefore(l,t),e=new FormData(e),l.parentNode.removeChild(l),e}function B0(e,t,l,s,r){if(t==="submit"&&l&&l.stateNode===r){var i=cf((r[gt]||null).action),f=s.submitter;f&&(t=(t=f[gt]||null)?cf(t.formAction):f.getAttribute("formAction"),t!==null&&(i=t,f=null));var T=new hr("action","action",null,s,r);e.push({event:T,listeners:[{instance:null,listener:function(){if(s.defaultPrevented){if(ol!==0){var D=f?df(r,f):new FormData(r);fc(l,{pending:!0,data:D,method:r.method,action:i},null,D)}}else typeof i=="function"&&(T.preventDefault(),D=f?df(r,f):new FormData(r),fc(l,{pending:!0,data:D,method:r.method,action:i},i,D))},currentTarget:r}]})}}for(var Xc=0;Xc<zo.length;Xc++){var Zc=zo[Xc],U0=Zc.toLowerCase(),$0=Zc[0].toUpperCase()+Zc.slice(1);ra(U0,"on"+$0)}ra(Bu,"onAnimationEnd"),ra(Uu,"onAnimationIteration"),ra($u,"onAnimationStart"),ra("dblclick","onDoubleClick"),ra("focusin","onFocus"),ra("focusout","onBlur"),ra(s0,"onTransitionRun"),ra(n0,"onTransitionStart"),ra(r0,"onTransitionCancel"),ra(Pu,"onTransitionEnd"),Xl("onMouseEnter",["mouseout","mouseover"]),Xl("onMouseLeave",["mouseout","mouseover"]),Xl("onPointerEnter",["pointerout","pointerover"]),Xl("onPointerLeave",["pointerout","pointerover"]),gl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),gl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),gl("onBeforeInput",["compositionend","keypress","textInput","paste"]),gl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),gl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),gl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var An="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),P0=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(An));function uf(e,t){t=(t&4)!==0;for(var l=0;l<e.length;l++){var s=e[l],r=s.event;s=s.listeners;e:{var i=void 0;if(t)for(var f=s.length-1;0<=f;f--){var T=s[f],D=T.instance,G=T.currentTarget;if(T=T.listener,D!==i&&r.isPropagationStopped())break e;i=T,r.currentTarget=G;try{i(r)}catch(ee){vr(ee)}r.currentTarget=null,i=D}else for(f=0;f<s.length;f++){if(T=s[f],D=T.instance,G=T.currentTarget,T=T.listener,D!==i&&r.isPropagationStopped())break e;i=T,r.currentTarget=G;try{i(r)}catch(ee){vr(ee)}r.currentTarget=null,i=D}}}}function ze(e,t){var l=t[Gs];l===void 0&&(l=t[Gs]=new Set);var s=e+"__bubble";l.has(s)||(mf(t,e,2,!1),l.add(s))}function Kc(e,t,l){var s=0;t&&(s|=4),mf(l,e,s,t)}var si="_reactListening"+Math.random().toString(36).slice(2);function Jc(e){if(!e[si]){e[si]=!0,su.forEach(function(l){l!=="selectionchange"&&(P0.has(l)||Kc(l,!1,e),Kc(l,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[si]||(t[si]=!0,Kc("selectionchange",!1,t))}}function mf(e,t,l,s){switch(Uf(t)){case 2:var r=bv;break;case 8:r=vv;break;default:r=xd}l=r.bind(null,t,l,e),r=void 0,!vo||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(r=!0),s?r!==void 0?e.addEventListener(t,l,{capture:!0,passive:r}):e.addEventListener(t,l,!0):r!==void 0?e.addEventListener(t,l,{passive:r}):e.addEventListener(t,l,!1)}function Wc(e,t,l,s,r){var i=s;if((t&1)===0&&(t&2)===0&&s!==null)e:for(;;){if(s===null)return;var f=s.tag;if(f===3||f===4){var T=s.stateNode.containerInfo;if(T===r)break;if(f===4)for(f=s.return;f!==null;){var D=f.tag;if((D===3||D===4)&&f.stateNode.containerInfo===r)return;f=f.return}for(;T!==null;){if(f=na(T),f===null)return;if(D=f.tag,D===5||D===6||D===26||D===27){s=i=f;continue e}T=T.parentNode}}s=s.return}pu(function(){var G=i,ee=po(l),le=[];e:{var Q=Fu.get(e);if(Q!==void 0){var Z=hr,he=e;switch(e){case"keypress":if(xr(l)===0)break e;case"keydown":case"keyup":Z=Ib;break;case"focusin":he="focus",Z=No;break;case"focusout":he="blur",Z=No;break;case"beforeblur":case"afterblur":Z=No;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Z=gu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Z=wb;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Z=qb;break;case Bu:case Uu:case $u:Z=Tb;break;case Pu:Z=Ub;break;case"scroll":case"scrollend":Z=Nb;break;case"wheel":Z=Pb;break;case"copy":case"cut":case"paste":Z=kb;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Z=ju;break;case"toggle":case"beforetoggle":Z=Gb}var Ne=(t&4)!==0,$e=!Ne&&(e==="scroll"||e==="scrollend"),$=Ne?Q!==null?Q+"Capture":null:Q;Ne=[];for(var I=G,F;I!==null;){var ae=I;if(F=ae.stateNode,ae=ae.tag,ae!==5&&ae!==26&&ae!==27||F===null||$===null||(ae=Ys(I,$),ae!=null&&Ne.push(Tn(I,ae,F))),$e)break;I=I.return}0<Ne.length&&(Q=new Z(Q,he,null,l,ee),le.push({event:Q,listeners:Ne}))}}if((t&7)===0){e:{if(Q=e==="mouseover"||e==="pointerover",Z=e==="mouseout"||e==="pointerout",Q&&l!==ho&&(he=l.relatedTarget||l.fromElement)&&(na(he)||he[Ga]))break e;if((Z||Q)&&(Q=ee.window===ee?ee:(Q=ee.ownerDocument)?Q.defaultView||Q.parentWindow:window,Z?(he=l.relatedTarget||l.toElement,Z=G,he=he?na(he):null,he!==null&&($e=m(he),Ne=he.tag,he!==$e||Ne!==5&&Ne!==27&&Ne!==6)&&(he=null)):(Z=null,he=G),Z!==he)){if(Ne=gu,ae="onMouseLeave",$="onMouseEnter",I="mouse",(e==="pointerout"||e==="pointerover")&&(Ne=ju,ae="onPointerLeave",$="onPointerEnter",I="pointer"),$e=Z==null?Q:Vs(Z),F=he==null?Q:Vs(he),Q=new Ne(ae,I+"leave",Z,l,ee),Q.target=$e,Q.relatedTarget=F,ae=null,na(ee)===G&&(Ne=new Ne($,I+"enter",he,l,ee),Ne.target=F,Ne.relatedTarget=$e,ae=Ne),$e=ae,Z&&he)t:{for(Ne=F0,$=Z,I=he,F=0,ae=$;ae;ae=Ne(ae))F++;ae=0;for(var ge=I;ge;ge=Ne(ge))ae++;for(;0<F-ae;)$=Ne($),F--;for(;0<ae-F;)I=Ne(I),ae--;for(;F--;){if($===I||I!==null&&$===I.alternate){Ne=$;break t}$=Ne($),I=Ne(I)}Ne=null}else Ne=null;Z!==null&&xf(le,Q,Z,Ne,!1),he!==null&&$e!==null&&xf(le,$e,he,Ne,!0)}}e:{if(Q=G?Vs(G):window,Z=Q.nodeName&&Q.nodeName.toLowerCase(),Z==="select"||Z==="input"&&Q.type==="file")var Oe=ku;else if(Tu(Q))if(Eu)Oe=t0;else{Oe=Wb;var pe=Jb}else Z=Q.nodeName,!Z||Z.toLowerCase()!=="input"||Q.type!=="checkbox"&&Q.type!=="radio"?G&&fo(G.elementType)&&(Oe=ku):Oe=e0;if(Oe&&(Oe=Oe(e,G))){Mu(le,Oe,l,ee);break e}pe&&pe(e,Q,G),e==="focusout"&&G&&Q.type==="number"&&G.memoizedProps.value!=null&&xo(Q,"number",Q.value)}switch(pe=G?Vs(G):window,e){case"focusin":(Tu(pe)||pe.contentEditable==="true")&&(ts=pe,Mo=G,tn=null);break;case"focusout":tn=Mo=ts=null;break;case"mousedown":ko=!0;break;case"contextmenu":case"mouseup":case"dragend":ko=!1,Hu(le,l,ee);break;case"selectionchange":if(l0)break;case"keydown":case"keyup":Hu(le,l,ee)}var Me;if(wo)e:{switch(e){case"compositionstart":var Re="onCompositionStart";break e;case"compositionend":Re="onCompositionEnd";break e;case"compositionupdate":Re="onCompositionUpdate";break e}Re=void 0}else es?Cu(e,l)&&(Re="onCompositionEnd"):e==="keydown"&&l.keyCode===229&&(Re="onCompositionStart");Re&&(Nu&&l.locale!=="ko"&&(es||Re!=="onCompositionStart"?Re==="onCompositionEnd"&&es&&(Me=bu()):(Va=ee,go="value"in Va?Va.value:Va.textContent,es=!0)),pe=ni(G,Re),0<pe.length&&(Re=new yu(Re,e,null,l,ee),le.push({event:Re,listeners:pe}),Me?Re.data=Me:(Me=Au(l),Me!==null&&(Re.data=Me)))),(Me=Yb?Qb(e,l):Xb(e,l))&&(Re=ni(G,"onBeforeInput"),0<Re.length&&(pe=new yu("onBeforeInput","beforeinput",null,l,ee),le.push({event:pe,listeners:Re}),pe.data=Me)),B0(le,e,G,l,ee)}uf(le,t)})}function Tn(e,t,l){return{instance:e,listener:t,currentTarget:l}}function ni(e,t){for(var l=t+"Capture",s=[];e!==null;){var r=e,i=r.stateNode;if(r=r.tag,r!==5&&r!==26&&r!==27||i===null||(r=Ys(e,l),r!=null&&s.unshift(Tn(e,r,i)),r=Ys(e,t),r!=null&&s.push(Tn(e,r,i))),e.tag===3)return s;e=e.return}return[]}function F0(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function xf(e,t,l,s,r){for(var i=t._reactName,f=[];l!==null&&l!==s;){var T=l,D=T.alternate,G=T.stateNode;if(T=T.tag,D!==null&&D===s)break;T!==5&&T!==26&&T!==27||G===null||(D=G,r?(G=Ys(l,i),G!=null&&f.unshift(Tn(l,G,D))):r||(G=Ys(l,i),G!=null&&f.push(Tn(l,G,D)))),l=l.return}f.length!==0&&e.push({event:t,listeners:f})}var G0=/\r\n?/g,V0=/\u0000|\uFFFD/g;function ff(e){return(typeof e=="string"?e:""+e).replace(G0,`
`).replace(V0,"")}function hf(e,t){return t=ff(t),ff(e)===t}function Ue(e,t,l,s,r,i){switch(l){case"children":typeof s=="string"?t==="body"||t==="textarea"&&s===""||Kl(e,s):(typeof s=="number"||typeof s=="bigint")&&t!=="body"&&Kl(e,""+s);break;case"className":cr(e,"class",s);break;case"tabIndex":cr(e,"tabindex",s);break;case"dir":case"role":case"viewBox":case"width":case"height":cr(e,l,s);break;case"style":fu(e,s,i);break;case"data":if(t!=="object"){cr(e,"data",s);break}case"src":case"href":if(s===""&&(t!=="a"||l!=="href")){e.removeAttribute(l);break}if(s==null||typeof s=="function"||typeof s=="symbol"||typeof s=="boolean"){e.removeAttribute(l);break}s=ur(""+s),e.setAttribute(l,s);break;case"action":case"formAction":if(typeof s=="function"){e.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof i=="function"&&(l==="formAction"?(t!=="input"&&Ue(e,t,"name",r.name,r,null),Ue(e,t,"formEncType",r.formEncType,r,null),Ue(e,t,"formMethod",r.formMethod,r,null),Ue(e,t,"formTarget",r.formTarget,r,null)):(Ue(e,t,"encType",r.encType,r,null),Ue(e,t,"method",r.method,r,null),Ue(e,t,"target",r.target,r,null)));if(s==null||typeof s=="symbol"||typeof s=="boolean"){e.removeAttribute(l);break}s=ur(""+s),e.setAttribute(l,s);break;case"onClick":s!=null&&(e.onclick=Aa);break;case"onScroll":s!=null&&ze("scroll",e);break;case"onScrollEnd":s!=null&&ze("scrollend",e);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(c(61));if(l=s.__html,l!=null){if(r.children!=null)throw Error(c(60));e.innerHTML=l}}break;case"multiple":e.multiple=s&&typeof s!="function"&&typeof s!="symbol";break;case"muted":e.muted=s&&typeof s!="function"&&typeof s!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(s==null||typeof s=="function"||typeof s=="boolean"||typeof s=="symbol"){e.removeAttribute("xlink:href");break}l=ur(""+s),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":s!=null&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(l,""+s):e.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":s&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(l,""):e.removeAttribute(l);break;case"capture":case"download":s===!0?e.setAttribute(l,""):s!==!1&&s!=null&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(l,s):e.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":s!=null&&typeof s!="function"&&typeof s!="symbol"&&!isNaN(s)&&1<=s?e.setAttribute(l,s):e.removeAttribute(l);break;case"rowSpan":case"start":s==null||typeof s=="function"||typeof s=="symbol"||isNaN(s)?e.removeAttribute(l):e.setAttribute(l,s);break;case"popover":ze("beforetoggle",e),ze("toggle",e),or(e,"popover",s);break;case"xlinkActuate":Ca(e,"http://www.w3.org/1999/xlink","xlink:actuate",s);break;case"xlinkArcrole":Ca(e,"http://www.w3.org/1999/xlink","xlink:arcrole",s);break;case"xlinkRole":Ca(e,"http://www.w3.org/1999/xlink","xlink:role",s);break;case"xlinkShow":Ca(e,"http://www.w3.org/1999/xlink","xlink:show",s);break;case"xlinkTitle":Ca(e,"http://www.w3.org/1999/xlink","xlink:title",s);break;case"xlinkType":Ca(e,"http://www.w3.org/1999/xlink","xlink:type",s);break;case"xmlBase":Ca(e,"http://www.w3.org/XML/1998/namespace","xml:base",s);break;case"xmlLang":Ca(e,"http://www.w3.org/XML/1998/namespace","xml:lang",s);break;case"xmlSpace":Ca(e,"http://www.w3.org/XML/1998/namespace","xml:space",s);break;case"is":or(e,"is",s);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=yb.get(l)||l,or(e,l,s))}}function ed(e,t,l,s,r,i){switch(l){case"style":fu(e,s,i);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(c(61));if(l=s.__html,l!=null){if(r.children!=null)throw Error(c(60));e.innerHTML=l}}break;case"children":typeof s=="string"?Kl(e,s):(typeof s=="number"||typeof s=="bigint")&&Kl(e,""+s);break;case"onScroll":s!=null&&ze("scroll",e);break;case"onScrollEnd":s!=null&&ze("scrollend",e);break;case"onClick":s!=null&&(e.onclick=Aa);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!nu.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(r=l.endsWith("Capture"),t=l.slice(2,r?l.length-7:void 0),i=e[gt]||null,i=i!=null?i[l]:null,typeof i=="function"&&e.removeEventListener(t,i,r),typeof s=="function")){typeof i!="function"&&i!==null&&(l in e?e[l]=null:e.hasAttribute(l)&&e.removeAttribute(l)),e.addEventListener(t,s,r);break e}l in e?e[l]=s:s===!0?e.setAttribute(l,""):or(e,l,s)}}}function pt(e,t,l){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ze("error",e),ze("load",e);var s=!1,r=!1,i;for(i in l)if(l.hasOwnProperty(i)){var f=l[i];if(f!=null)switch(i){case"src":s=!0;break;case"srcSet":r=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(c(137,t));default:Ue(e,t,i,f,l,null)}}r&&Ue(e,t,"srcSet",l.srcSet,l,null),s&&Ue(e,t,"src",l.src,l,null);return;case"input":ze("invalid",e);var T=i=f=r=null,D=null,G=null;for(s in l)if(l.hasOwnProperty(s)){var ee=l[s];if(ee!=null)switch(s){case"name":r=ee;break;case"type":f=ee;break;case"checked":D=ee;break;case"defaultChecked":G=ee;break;case"value":i=ee;break;case"defaultValue":T=ee;break;case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(c(137,t));break;default:Ue(e,t,s,ee,l,null)}}du(e,i,T,D,G,f,r,!1);return;case"select":ze("invalid",e),s=f=i=null;for(r in l)if(l.hasOwnProperty(r)&&(T=l[r],T!=null))switch(r){case"value":i=T;break;case"defaultValue":f=T;break;case"multiple":s=T;default:Ue(e,t,r,T,l,null)}t=i,l=f,e.multiple=!!s,t!=null?Zl(e,!!s,t,!1):l!=null&&Zl(e,!!s,l,!0);return;case"textarea":ze("invalid",e),i=r=s=null;for(f in l)if(l.hasOwnProperty(f)&&(T=l[f],T!=null))switch(f){case"value":s=T;break;case"defaultValue":r=T;break;case"children":i=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(c(91));break;default:Ue(e,t,f,T,l,null)}mu(e,s,r,i);return;case"option":for(D in l)l.hasOwnProperty(D)&&(s=l[D],s!=null)&&(D==="selected"?e.selected=s&&typeof s!="function"&&typeof s!="symbol":Ue(e,t,D,s,l,null));return;case"dialog":ze("beforetoggle",e),ze("toggle",e),ze("cancel",e),ze("close",e);break;case"iframe":case"object":ze("load",e);break;case"video":case"audio":for(s=0;s<An.length;s++)ze(An[s],e);break;case"image":ze("error",e),ze("load",e);break;case"details":ze("toggle",e);break;case"embed":case"source":case"link":ze("error",e),ze("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(G in l)if(l.hasOwnProperty(G)&&(s=l[G],s!=null))switch(G){case"children":case"dangerouslySetInnerHTML":throw Error(c(137,t));default:Ue(e,t,G,s,l,null)}return;default:if(fo(t)){for(ee in l)l.hasOwnProperty(ee)&&(s=l[ee],s!==void 0&&ed(e,t,ee,s,l,void 0));return}}for(T in l)l.hasOwnProperty(T)&&(s=l[T],s!=null&&Ue(e,t,T,s,l,null))}function Y0(e,t,l,s){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var r=null,i=null,f=null,T=null,D=null,G=null,ee=null;for(Z in l){var le=l[Z];if(l.hasOwnProperty(Z)&&le!=null)switch(Z){case"checked":break;case"value":break;case"defaultValue":D=le;default:s.hasOwnProperty(Z)||Ue(e,t,Z,null,s,le)}}for(var Q in s){var Z=s[Q];if(le=l[Q],s.hasOwnProperty(Q)&&(Z!=null||le!=null))switch(Q){case"type":i=Z;break;case"name":r=Z;break;case"checked":G=Z;break;case"defaultChecked":ee=Z;break;case"value":f=Z;break;case"defaultValue":T=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(c(137,t));break;default:Z!==le&&Ue(e,t,Q,Z,s,le)}}mo(e,f,T,D,G,ee,i,r);return;case"select":Z=f=T=Q=null;for(i in l)if(D=l[i],l.hasOwnProperty(i)&&D!=null)switch(i){case"value":break;case"multiple":Z=D;default:s.hasOwnProperty(i)||Ue(e,t,i,null,s,D)}for(r in s)if(i=s[r],D=l[r],s.hasOwnProperty(r)&&(i!=null||D!=null))switch(r){case"value":Q=i;break;case"defaultValue":T=i;break;case"multiple":f=i;default:i!==D&&Ue(e,t,r,i,s,D)}t=T,l=f,s=Z,Q!=null?Zl(e,!!l,Q,!1):!!s!=!!l&&(t!=null?Zl(e,!!l,t,!0):Zl(e,!!l,l?[]:"",!1));return;case"textarea":Z=Q=null;for(T in l)if(r=l[T],l.hasOwnProperty(T)&&r!=null&&!s.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:Ue(e,t,T,null,s,r)}for(f in s)if(r=s[f],i=l[f],s.hasOwnProperty(f)&&(r!=null||i!=null))switch(f){case"value":Q=r;break;case"defaultValue":Z=r;break;case"children":break;case"dangerouslySetInnerHTML":if(r!=null)throw Error(c(91));break;default:r!==i&&Ue(e,t,f,r,s,i)}uu(e,Q,Z);return;case"option":for(var he in l)Q=l[he],l.hasOwnProperty(he)&&Q!=null&&!s.hasOwnProperty(he)&&(he==="selected"?e.selected=!1:Ue(e,t,he,null,s,Q));for(D in s)Q=s[D],Z=l[D],s.hasOwnProperty(D)&&Q!==Z&&(Q!=null||Z!=null)&&(D==="selected"?e.selected=Q&&typeof Q!="function"&&typeof Q!="symbol":Ue(e,t,D,Q,s,Z));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ne in l)Q=l[Ne],l.hasOwnProperty(Ne)&&Q!=null&&!s.hasOwnProperty(Ne)&&Ue(e,t,Ne,null,s,Q);for(G in s)if(Q=s[G],Z=l[G],s.hasOwnProperty(G)&&Q!==Z&&(Q!=null||Z!=null))switch(G){case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(c(137,t));break;default:Ue(e,t,G,Q,s,Z)}return;default:if(fo(t)){for(var $e in l)Q=l[$e],l.hasOwnProperty($e)&&Q!==void 0&&!s.hasOwnProperty($e)&&ed(e,t,$e,void 0,s,Q);for(ee in s)Q=s[ee],Z=l[ee],!s.hasOwnProperty(ee)||Q===Z||Q===void 0&&Z===void 0||ed(e,t,ee,Q,s,Z);return}}for(var $ in l)Q=l[$],l.hasOwnProperty($)&&Q!=null&&!s.hasOwnProperty($)&&Ue(e,t,$,null,s,Q);for(le in s)Q=s[le],Z=l[le],!s.hasOwnProperty(le)||Q===Z||Q==null&&Z==null||Ue(e,t,le,Q,s,Z)}function pf(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Q0(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,l=performance.getEntriesByType("resource"),s=0;s<l.length;s++){var r=l[s],i=r.transferSize,f=r.initiatorType,T=r.duration;if(i&&T&&pf(f)){for(f=0,T=r.responseEnd,s+=1;s<l.length;s++){var D=l[s],G=D.startTime;if(G>T)break;var ee=D.transferSize,le=D.initiatorType;ee&&pf(le)&&(D=D.responseEnd,f+=ee*(D<T?1:(T-G)/(D-G)))}if(--s,t+=8*(i+f)/(r.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var td=null,ad=null;function ri(e){return e.nodeType===9?e:e.ownerDocument}function bf(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function vf(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function ld(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var sd=null;function X0(){var e=window.event;return e&&e.type==="popstate"?e===sd?!1:(sd=e,!0):(sd=null,!1)}var gf=typeof setTimeout=="function"?setTimeout:void 0,Z0=typeof clearTimeout=="function"?clearTimeout:void 0,yf=typeof Promise=="function"?Promise:void 0,K0=typeof queueMicrotask=="function"?queueMicrotask:typeof yf<"u"?function(e){return yf.resolve(null).then(e).catch(J0)}:gf;function J0(e){setTimeout(function(){throw e})}function cl(e){return e==="head"}function jf(e,t){var l=t,s=0;do{var r=l.nextSibling;if(e.removeChild(l),r&&r.nodeType===8)if(l=r.data,l==="/$"||l==="/&"){if(s===0){e.removeChild(r),Ms(t);return}s--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")s++;else if(l==="html")Mn(e.ownerDocument.documentElement);else if(l==="head"){l=e.ownerDocument.head,Mn(l);for(var i=l.firstChild;i;){var f=i.nextSibling,T=i.nodeName;i[ue]||T==="SCRIPT"||T==="STYLE"||T==="LINK"&&i.rel.toLowerCase()==="stylesheet"||l.removeChild(i),i=f}}else l==="body"&&Mn(e.ownerDocument.body);l=r}while(l);Ms(t)}function Nf(e,t){var l=e;e=0;do{var s=l.nextSibling;if(l.nodeType===1?t?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(t?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),s&&s.nodeType===8)if(l=s.data,l==="/$"){if(e===0)break;e--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||e++;l=s}while(l)}function nd(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var l=t;switch(t=t.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":nd(l),Tt(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}e.removeChild(l)}}function W0(e,t,l,s){for(;e.nodeType===1;){var r=l;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!s&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(s){if(!e[ue])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(i=e.getAttribute("rel"),i==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(i!==r.rel||e.getAttribute("href")!==(r.href==null||r.href===""?null:r.href)||e.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin)||e.getAttribute("title")!==(r.title==null?null:r.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(i=e.getAttribute("src"),(i!==(r.src==null?null:r.src)||e.getAttribute("type")!==(r.type==null?null:r.type)||e.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin))&&i&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var i=r.name==null?null:""+r.name;if(r.type==="hidden"&&e.getAttribute("name")===i)return e}else return e;if(e=ea(e.nextSibling),e===null)break}return null}function ev(e,t,l){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!l||(e=ea(e.nextSibling),e===null))return null;return e}function Sf(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=ea(e.nextSibling),e===null))return null;return e}function rd(e){return e.data==="$?"||e.data==="$~"}function id(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function tv(e,t){var l=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||l.readyState!=="loading")t();else{var s=function(){t(),l.removeEventListener("DOMContentLoaded",s)};l.addEventListener("DOMContentLoaded",s),e._reactRetry=s}}function ea(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var od=null;function wf(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var l=e.data;if(l==="/$"||l==="/&"){if(t===0)return ea(e.nextSibling);t--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||t++}e=e.nextSibling}return null}function Cf(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var l=e.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(t===0)return e;t--}else l!=="/$"&&l!=="/&"||t++}e=e.previousSibling}return null}function Af(e,t,l){switch(t=ri(l),e){case"html":if(e=t.documentElement,!e)throw Error(c(452));return e;case"head":if(e=t.head,!e)throw Error(c(453));return e;case"body":if(e=t.body,!e)throw Error(c(454));return e;default:throw Error(c(451))}}function Mn(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Tt(e)}var ta=new Map,Tf=new Set;function ii(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var $a=K.d;K.d={f:av,r:lv,D:sv,C:nv,L:rv,m:iv,X:cv,S:ov,M:dv};function av(){var e=$a.f(),t=Jr();return e||t}function lv(e){var t=Yl(e);t!==null&&t.tag===5&&t.type==="form"?Pm(t):$a.r(e)}var Cs=typeof document>"u"?null:document;function Mf(e,t,l){var s=Cs;if(s&&typeof t=="string"&&t){var r=Yt(t);r='link[rel="'+e+'"][href="'+r+'"]',typeof l=="string"&&(r+='[crossorigin="'+l+'"]'),Tf.has(r)||(Tf.add(r),e={rel:e,crossOrigin:l,href:t},s.querySelector(r)===null&&(t=s.createElement("link"),pt(t,"link",e),ut(t),s.head.appendChild(t)))}}function sv(e){$a.D(e),Mf("dns-prefetch",e,null)}function nv(e,t){$a.C(e,t),Mf("preconnect",e,t)}function rv(e,t,l){$a.L(e,t,l);var s=Cs;if(s&&e&&t){var r='link[rel="preload"][as="'+Yt(t)+'"]';t==="image"&&l&&l.imageSrcSet?(r+='[imagesrcset="'+Yt(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(r+='[imagesizes="'+Yt(l.imageSizes)+'"]')):r+='[href="'+Yt(e)+'"]';var i=r;switch(t){case"style":i=As(e);break;case"script":i=Ts(e)}ta.has(i)||(e=A({rel:"preload",href:t==="image"&&l&&l.imageSrcSet?void 0:e,as:t},l),ta.set(i,e),s.querySelector(r)!==null||t==="style"&&s.querySelector(kn(i))||t==="script"&&s.querySelector(En(i))||(t=s.createElement("link"),pt(t,"link",e),ut(t),s.head.appendChild(t)))}}function iv(e,t){$a.m(e,t);var l=Cs;if(l&&e){var s=t&&typeof t.as=="string"?t.as:"script",r='link[rel="modulepreload"][as="'+Yt(s)+'"][href="'+Yt(e)+'"]',i=r;switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":i=Ts(e)}if(!ta.has(i)&&(e=A({rel:"modulepreload",href:e},t),ta.set(i,e),l.querySelector(r)===null)){switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(En(i)))return}s=l.createElement("link"),pt(s,"link",e),ut(s),l.head.appendChild(s)}}}function ov(e,t,l){$a.S(e,t,l);var s=Cs;if(s&&e){var r=Ql(s).hoistableStyles,i=As(e);t=t||"default";var f=r.get(i);if(!f){var T={loading:0,preload:null};if(f=s.querySelector(kn(i)))T.loading=5;else{e=A({rel:"stylesheet",href:e,"data-precedence":t},l),(l=ta.get(i))&&cd(e,l);var D=f=s.createElement("link");ut(D),pt(D,"link",e),D._p=new Promise(function(G,ee){D.onload=G,D.onerror=ee}),D.addEventListener("load",function(){T.loading|=1}),D.addEventListener("error",function(){T.loading|=2}),T.loading|=4,oi(f,t,s)}f={type:"stylesheet",instance:f,count:1,state:T},r.set(i,f)}}}function cv(e,t){$a.X(e,t);var l=Cs;if(l&&e){var s=Ql(l).hoistableScripts,r=Ts(e),i=s.get(r);i||(i=l.querySelector(En(r)),i||(e=A({src:e,async:!0},t),(t=ta.get(r))&&dd(e,t),i=l.createElement("script"),ut(i),pt(i,"link",e),l.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},s.set(r,i))}}function dv(e,t){$a.M(e,t);var l=Cs;if(l&&e){var s=Ql(l).hoistableScripts,r=Ts(e),i=s.get(r);i||(i=l.querySelector(En(r)),i||(e=A({src:e,async:!0,type:"module"},t),(t=ta.get(r))&&dd(e,t),i=l.createElement("script"),ut(i),pt(i,"link",e),l.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},s.set(r,i))}}function kf(e,t,l,s){var r=(r=be.current)?ii(r):null;if(!r)throw Error(c(446));switch(e){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(t=As(l.href),l=Ql(r).hoistableStyles,s=l.get(t),s||(s={type:"style",instance:null,count:0,state:null},l.set(t,s)),s):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){e=As(l.href);var i=Ql(r).hoistableStyles,f=i.get(e);if(f||(r=r.ownerDocument||r,f={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},i.set(e,f),(i=r.querySelector(kn(e)))&&!i._p&&(f.instance=i,f.state.loading=5),ta.has(e)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},ta.set(e,l),i||uv(r,e,l,f.state))),t&&s===null)throw Error(c(528,""));return f}if(t&&s!==null)throw Error(c(529,""));return null;case"script":return t=l.async,l=l.src,typeof l=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=Ts(l),l=Ql(r).hoistableScripts,s=l.get(t),s||(s={type:"script",instance:null,count:0,state:null},l.set(t,s)),s):{type:"void",instance:null,count:0,state:null};default:throw Error(c(444,e))}}function As(e){return'href="'+Yt(e)+'"'}function kn(e){return'link[rel="stylesheet"]['+e+"]"}function Ef(e){return A({},e,{"data-precedence":e.precedence,precedence:null})}function uv(e,t,l,s){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?s.loading=1:(t=e.createElement("link"),s.preload=t,t.addEventListener("load",function(){return s.loading|=1}),t.addEventListener("error",function(){return s.loading|=2}),pt(t,"link",l),ut(t),e.head.appendChild(t))}function Ts(e){return'[src="'+Yt(e)+'"]'}function En(e){return"script[async]"+e}function zf(e,t,l){if(t.count++,t.instance===null)switch(t.type){case"style":var s=e.querySelector('style[data-href~="'+Yt(l.href)+'"]');if(s)return t.instance=s,ut(s),s;var r=A({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return s=(e.ownerDocument||e).createElement("style"),ut(s),pt(s,"style",r),oi(s,l.precedence,e),t.instance=s;case"stylesheet":r=As(l.href);var i=e.querySelector(kn(r));if(i)return t.state.loading|=4,t.instance=i,ut(i),i;s=Ef(l),(r=ta.get(r))&&cd(s,r),i=(e.ownerDocument||e).createElement("link"),ut(i);var f=i;return f._p=new Promise(function(T,D){f.onload=T,f.onerror=D}),pt(i,"link",s),t.state.loading|=4,oi(i,l.precedence,e),t.instance=i;case"script":return i=Ts(l.src),(r=e.querySelector(En(i)))?(t.instance=r,ut(r),r):(s=l,(r=ta.get(i))&&(s=A({},l),dd(s,r)),e=e.ownerDocument||e,r=e.createElement("script"),ut(r),pt(r,"link",s),e.head.appendChild(r),t.instance=r);case"void":return null;default:throw Error(c(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(s=t.instance,t.state.loading|=4,oi(s,l.precedence,e));return t.instance}function oi(e,t,l){for(var s=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),r=s.length?s[s.length-1]:null,i=r,f=0;f<s.length;f++){var T=s[f];if(T.dataset.precedence===t)i=T;else if(i!==r)break}i?i.parentNode.insertBefore(e,i.nextSibling):(t=l.nodeType===9?l.head:l,t.insertBefore(e,t.firstChild))}function cd(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function dd(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var ci=null;function Df(e,t,l){if(ci===null){var s=new Map,r=ci=new Map;r.set(l,s)}else r=ci,s=r.get(l),s||(s=new Map,r.set(l,s));if(s.has(e))return s;for(s.set(e,null),l=l.getElementsByTagName(e),r=0;r<l.length;r++){var i=l[r];if(!(i[ue]||i[ot]||e==="link"&&i.getAttribute("rel")==="stylesheet")&&i.namespaceURI!=="http://www.w3.org/2000/svg"){var f=i.getAttribute(t)||"";f=e+f;var T=s.get(f);T?T.push(i):s.set(f,[i])}}return s}function Rf(e,t,l){e=e.ownerDocument||e,e.head.insertBefore(l,t==="title"?e.querySelector("head > title"):null)}function mv(e,t,l){if(l===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;return t.rel==="stylesheet"?(e=t.disabled,typeof t.precedence=="string"&&e==null):!0;case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function Lf(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function xv(e,t,l,s){if(l.type==="stylesheet"&&(typeof s.media!="string"||matchMedia(s.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var r=As(s.href),i=t.querySelector(kn(r));if(i){t=i._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=di.bind(e),t.then(e,e)),l.state.loading|=4,l.instance=i,ut(i);return}i=t.ownerDocument||t,s=Ef(s),(r=ta.get(r))&&cd(s,r),i=i.createElement("link"),ut(i);var f=i;f._p=new Promise(function(T,D){f.onload=T,f.onerror=D}),pt(i,"link",s),l.instance=i}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(l,t),(t=l.state.preload)&&(l.state.loading&3)===0&&(e.count++,l=di.bind(e),t.addEventListener("load",l),t.addEventListener("error",l))}}var ud=0;function fv(e,t){return e.stylesheets&&e.count===0&&mi(e,e.stylesheets),0<e.count||0<e.imgCount?function(l){var s=setTimeout(function(){if(e.stylesheets&&mi(e,e.stylesheets),e.unsuspend){var i=e.unsuspend;e.unsuspend=null,i()}},6e4+t);0<e.imgBytes&&ud===0&&(ud=62500*Q0());var r=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&mi(e,e.stylesheets),e.unsuspend)){var i=e.unsuspend;e.unsuspend=null,i()}},(e.imgBytes>ud?50:800)+t);return e.unsuspend=l,function(){e.unsuspend=null,clearTimeout(s),clearTimeout(r)}}:null}function di(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)mi(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var ui=null;function mi(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,ui=new Map,t.forEach(hv,e),ui=null,di.call(e))}function hv(e,t){if(!(t.state.loading&4)){var l=ui.get(e);if(l)var s=l.get(null);else{l=new Map,ui.set(e,l);for(var r=e.querySelectorAll("link[data-precedence],style[data-precedence]"),i=0;i<r.length;i++){var f=r[i];(f.nodeName==="LINK"||f.getAttribute("media")!=="not all")&&(l.set(f.dataset.precedence,f),s=f)}s&&l.set(null,s)}r=t.instance,f=r.getAttribute("data-precedence"),i=l.get(f)||s,i===s&&l.set(null,r),l.set(f,r),this.count++,s=di.bind(this),r.addEventListener("load",s),r.addEventListener("error",s),i?i.parentNode.insertBefore(r,i.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(r,e.firstChild)),t.state.loading|=4}}var zn={$$typeof:O,Provider:null,Consumer:null,_currentValue:ne,_currentValue2:ne,_threadCount:0};function pv(e,t,l,s,r,i,f,T,D){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=$s(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$s(0),this.hiddenUpdates=$s(null),this.identifierPrefix=s,this.onUncaughtError=r,this.onCaughtError=i,this.onRecoverableError=f,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=D,this.incompleteTransitions=new Map}function Of(e,t,l,s,r,i,f,T,D,G,ee,le){return e=new pv(e,t,l,f,D,G,ee,le,T),t=1,i===!0&&(t|=24),i=qt(3,null,null,t),e.current=i,i.stateNode=e,t=Fo(),t.refCount++,e.pooledCache=t,t.refCount++,i.memoizedState={element:s,isDehydrated:l,cache:t},Qo(i),e}function If(e){return e?(e=ss,e):ss}function _f(e,t,l,s,r,i){r=If(r),s.context===null?s.context=r:s.pendingContext=r,s=Ja(t),s.payload={element:l},i=i===void 0?null:i,i!==null&&(s.callback=i),l=Wa(e,s,t),l!==null&&(Ot(l,e,t),cn(l,e,t))}function Hf(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var l=e.retryLane;e.retryLane=l!==0&&l<t?l:t}}function md(e,t){Hf(e,t),(e=e.alternate)&&Hf(e,t)}function qf(e){if(e.tag===13||e.tag===31){var t=Sl(e,67108864);t!==null&&Ot(t,e,67108864),md(e,67108864)}}function Bf(e){if(e.tag===13||e.tag===31){var t=Ft();t=Ps(t);var l=Sl(e,t);l!==null&&Ot(l,e,t),md(e,t)}}var xi=!0;function bv(e,t,l,s){var r=k.T;k.T=null;var i=K.p;try{K.p=2,xd(e,t,l,s)}finally{K.p=i,k.T=r}}function vv(e,t,l,s){var r=k.T;k.T=null;var i=K.p;try{K.p=8,xd(e,t,l,s)}finally{K.p=i,k.T=r}}function xd(e,t,l,s){if(xi){var r=fd(s);if(r===null)Wc(e,t,s,fi,l),$f(e,s);else if(yv(r,e,t,l,s))s.stopPropagation();else if($f(e,s),t&4&&-1<gv.indexOf(e)){for(;r!==null;){var i=Yl(r);if(i!==null)switch(i.tag){case 3:if(i=i.stateNode,i.current.memoizedState.isDehydrated){var f=wa(i.pendingLanes);if(f!==0){var T=i;for(T.pendingLanes|=2,T.entangledLanes|=2;f;){var D=1<<31-At(f);T.entanglements[1]|=D,f&=~D}pa(i),(_e&6)===0&&(Zr=wt()+500,Cn(0))}}break;case 31:case 13:T=Sl(i,2),T!==null&&Ot(T,i,2),Jr(),md(i,2)}if(i=fd(s),i===null&&Wc(e,t,s,fi,l),i===r)break;r=i}r!==null&&s.stopPropagation()}else Wc(e,t,s,null,l)}}function fd(e){return e=po(e),hd(e)}var fi=null;function hd(e){if(fi=null,e=na(e),e!==null){var t=m(e);if(t===null)e=null;else{var l=t.tag;if(l===13){if(e=b(t),e!==null)return e;e=null}else if(l===31){if(e=x(t),e!==null)return e;e=null}else if(l===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return fi=e,null}function Uf(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Wi()){case Wn:return 2;case er:return 8;case $l:case eo:return 32;case tr:return 268435456;default:return 32}default:return 32}}var pd=!1,dl=null,ul=null,ml=null,Dn=new Map,Rn=new Map,xl=[],gv="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function $f(e,t){switch(e){case"focusin":case"focusout":dl=null;break;case"dragenter":case"dragleave":ul=null;break;case"mouseover":case"mouseout":ml=null;break;case"pointerover":case"pointerout":Dn.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rn.delete(t.pointerId)}}function Ln(e,t,l,s,r,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:l,eventSystemFlags:s,nativeEvent:i,targetContainers:[r]},t!==null&&(t=Yl(t),t!==null&&qf(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,r!==null&&t.indexOf(r)===-1&&t.push(r),e)}function yv(e,t,l,s,r){switch(t){case"focusin":return dl=Ln(dl,e,t,l,s,r),!0;case"dragenter":return ul=Ln(ul,e,t,l,s,r),!0;case"mouseover":return ml=Ln(ml,e,t,l,s,r),!0;case"pointerover":var i=r.pointerId;return Dn.set(i,Ln(Dn.get(i)||null,e,t,l,s,r)),!0;case"gotpointercapture":return i=r.pointerId,Rn.set(i,Ln(Rn.get(i)||null,e,t,l,s,r)),!0}return!1}function Pf(e){var t=na(e.target);if(t!==null){var l=m(t);if(l!==null){if(t=l.tag,t===13){if(t=b(l),t!==null){e.blockedOn=t,ir(e.priority,function(){Bf(l)});return}}else if(t===31){if(t=x(l),t!==null){e.blockedOn=t,ir(e.priority,function(){Bf(l)});return}}else if(t===3&&l.stateNode.current.memoizedState.isDehydrated){e.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}e.blockedOn=null}function hi(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var l=fd(e.nativeEvent);if(l===null){l=e.nativeEvent;var s=new l.constructor(l.type,l);ho=s,l.target.dispatchEvent(s),ho=null}else return t=Yl(l),t!==null&&qf(t),e.blockedOn=l,!1;t.shift()}return!0}function Ff(e,t,l){hi(e)&&l.delete(t)}function jv(){pd=!1,dl!==null&&hi(dl)&&(dl=null),ul!==null&&hi(ul)&&(ul=null),ml!==null&&hi(ml)&&(ml=null),Dn.forEach(Ff),Rn.forEach(Ff)}function pi(e,t){e.blockedOn===t&&(e.blockedOn=null,pd||(pd=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,jv)))}var bi=null;function Gf(e){bi!==e&&(bi=e,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){bi===e&&(bi=null);for(var t=0;t<e.length;t+=3){var l=e[t],s=e[t+1],r=e[t+2];if(typeof s!="function"){if(hd(s||l)===null)continue;break}var i=Yl(l);i!==null&&(e.splice(t,3),t-=3,fc(i,{pending:!0,data:r,method:l.method,action:s},s,r))}}))}function Ms(e){function t(D){return pi(D,e)}dl!==null&&pi(dl,e),ul!==null&&pi(ul,e),ml!==null&&pi(ml,e),Dn.forEach(t),Rn.forEach(t);for(var l=0;l<xl.length;l++){var s=xl[l];s.blockedOn===e&&(s.blockedOn=null)}for(;0<xl.length&&(l=xl[0],l.blockedOn===null);)Pf(l),l.blockedOn===null&&xl.shift();if(l=(e.ownerDocument||e).$$reactFormReplay,l!=null)for(s=0;s<l.length;s+=3){var r=l[s],i=l[s+1],f=r[gt]||null;if(typeof i=="function")f||Gf(l);else if(f){var T=null;if(i&&i.hasAttribute("formAction")){if(r=i,f=i[gt]||null)T=f.formAction;else if(hd(r)!==null)continue}else T=f.action;typeof T=="function"?l[s+1]=T:(l.splice(s,3),s-=3),Gf(l)}}}function Vf(){function e(i){i.canIntercept&&i.info==="react-transition"&&i.intercept({handler:function(){return new Promise(function(f){return r=f})},focusReset:"manual",scroll:"manual"})}function t(){r!==null&&(r(),r=null),s||setTimeout(l,20)}function l(){if(!s&&!navigation.transition){var i=navigation.currentEntry;i&&i.url!=null&&navigation.navigate(i.url,{state:i.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var s=!1,r=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(l,100),function(){s=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),r!==null&&(r(),r=null)}}}function bd(e){this._internalRoot=e}vi.prototype.render=bd.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(c(409));var l=t.current,s=Ft();_f(l,s,e,t,null,null)},vi.prototype.unmount=bd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;_f(e.current,2,null,e,null,null),Jr(),t[Ga]=null}};function vi(e){this._internalRoot=e}vi.prototype.unstable_scheduleHydration=function(e){if(e){var t=rr();e={blockedOn:null,target:e,priority:t};for(var l=0;l<xl.length&&t!==0&&t<xl[l].priority;l++);xl.splice(l,0,e),l===0&&Pf(e)}};var Yf=o.version;if(Yf!=="19.2.4")throw Error(c(527,Yf,"19.2.4"));K.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(c(188)):(e=Object.keys(e).join(","),Error(c(268,e)));return e=d(t),e=e!==null?w(e):null,e=e===null?null:e.stateNode,e};var Nv={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:k,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var gi=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!gi.isDisabled&&gi.supportsFiber)try{pl=gi.inject(Nv),Ct=gi}catch{}}return In.createRoot=function(e,t){if(!h(e))throw Error(c(299));var l=!1,s="",r=Wm,i=ex,f=tx;return t!=null&&(t.unstable_strictMode===!0&&(l=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onUncaughtError!==void 0&&(r=t.onUncaughtError),t.onCaughtError!==void 0&&(i=t.onCaughtError),t.onRecoverableError!==void 0&&(f=t.onRecoverableError)),t=Of(e,1,!1,null,null,l,s,null,r,i,f,Vf),e[Ga]=t.current,Jc(e),new bd(t)},In.hydrateRoot=function(e,t,l){if(!h(e))throw Error(c(299));var s=!1,r="",i=Wm,f=ex,T=tx,D=null;return l!=null&&(l.unstable_strictMode===!0&&(s=!0),l.identifierPrefix!==void 0&&(r=l.identifierPrefix),l.onUncaughtError!==void 0&&(i=l.onUncaughtError),l.onCaughtError!==void 0&&(f=l.onCaughtError),l.onRecoverableError!==void 0&&(T=l.onRecoverableError),l.formState!==void 0&&(D=l.formState)),t=Of(e,1,!0,t,l??null,s,r,D,i,f,T,Vf),t.context=If(null),l=t.current,s=Ft(),s=Ps(s),r=Ja(s),r.callback=null,Wa(l,r,s),l=s,t.current.lanes=l,vl(t,l),pa(t),e[Ga]=t.current,Jc(e),new vi(t)},In.version="19.2.4",In}var lh;function Dv(){if(lh)return gd.exports;lh=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(o){console.error(o)}}return n(),gd.exports=zv(),gd.exports}var Rv=Dv(),j=Pd();var sh="popstate";function Lv(n={}){function o(c,h){let{pathname:m,search:b,hash:x}=c.location;return _d("",{pathname:m,search:b,hash:x},h.state&&h.state.usr||null,h.state&&h.state.key||"default")}function u(c,h){return typeof h=="string"?h:Fn(h)}return Iv(o,u,null,n)}function Xe(n,o){if(n===!1||n===null||typeof n>"u")throw new Error(o)}function ca(n,o){if(!n){typeof console<"u"&&console.warn(o);try{throw new Error(o)}catch{}}}function Ov(){return Math.random().toString(36).substring(2,10)}function nh(n,o){return{usr:n.state,key:n.key,idx:o}}function _d(n,o,u=null,c){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof o=="string"?qs(o):o,state:u,key:o&&o.key||c||Ov()}}function Fn({pathname:n="/",search:o="",hash:u=""}){return o&&o!=="?"&&(n+=o.charAt(0)==="?"?o:"?"+o),u&&u!=="#"&&(n+=u.charAt(0)==="#"?u:"#"+u),n}function qs(n){let o={};if(n){let u=n.indexOf("#");u>=0&&(o.hash=n.substring(u),n=n.substring(0,u));let c=n.indexOf("?");c>=0&&(o.search=n.substring(c),n=n.substring(0,c)),n&&(o.pathname=n)}return o}function Iv(n,o,u,c={}){let{window:h=document.defaultView,v5Compat:m=!1}=c,b=h.history,x="POP",g=null,d=w();d==null&&(d=0,b.replaceState({...b.state,idx:d},""));function w(){return(b.state||{idx:null}).idx}function A(){x="POP";let p=w(),y=p==null?null:p-d;d=p,g&&g({action:x,location:v.location,delta:y})}function E(p,y){x="PUSH";let _=_d(v.location,p,y);d=w()+1;let O=nh(_,d),q=v.createHref(_);try{b.pushState(O,"",q)}catch(Y){if(Y instanceof DOMException&&Y.name==="DataCloneError")throw Y;h.location.assign(q)}m&&g&&g({action:x,location:v.location,delta:1})}function C(p,y){x="REPLACE";let _=_d(v.location,p,y);d=w();let O=nh(_,d),q=v.createHref(_);b.replaceState(O,"",q),m&&g&&g({action:x,location:v.location,delta:0})}function S(p){return _v(p)}let v={get action(){return x},get location(){return n(h,b)},listen(p){if(g)throw new Error("A history only accepts one active listener");return h.addEventListener(sh,A),g=p,()=>{h.removeEventListener(sh,A),g=null}},createHref(p){return o(h,p)},createURL:S,encodeLocation(p){let y=S(p);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:E,replace:C,go(p){return b.go(p)}};return v}function _v(n,o=!1){let u="http://localhost";typeof window<"u"&&(u=window.location.origin!=="null"?window.location.origin:window.location.href),Xe(u,"No window.location.(origin|href) available to create URL");let c=typeof n=="string"?n:Fn(n);return c=c.replace(/ $/,"%20"),!o&&c.startsWith("//")&&(c=u+c),new URL(c,u)}function Kh(n,o,u="/"){return Hv(n,o,u,!1)}function Hv(n,o,u,c){let h=typeof o=="string"?qs(o):o,m=Fa(h.pathname||"/",u);if(m==null)return null;let b=Jh(n);qv(b);let x=null;for(let g=0;x==null&&g<b.length;++g){let d=Zv(m);x=Qv(b[g],d,c)}return x}function Jh(n,o=[],u=[],c="",h=!1){let m=(b,x,g=h,d)=>{let w={relativePath:d===void 0?b.path||"":d,caseSensitive:b.caseSensitive===!0,childrenIndex:x,route:b};if(w.relativePath.startsWith("/")){if(!w.relativePath.startsWith(c)&&g)return;Xe(w.relativePath.startsWith(c),`Absolute route path "${w.relativePath}" nested under path "${c}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),w.relativePath=w.relativePath.slice(c.length)}let A=Pa([c,w.relativePath]),E=u.concat(w);b.children&&b.children.length>0&&(Xe(b.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${A}".`),Jh(b.children,o,E,A,g)),!(b.path==null&&!b.index)&&o.push({path:A,score:Vv(A,b.index),routesMeta:E})};return n.forEach((b,x)=>{if(b.path===""||!b.path?.includes("?"))m(b,x);else for(let g of Wh(b.path))m(b,x,!0,g)}),o}function Wh(n){let o=n.split("/");if(o.length===0)return[];let[u,...c]=o,h=u.endsWith("?"),m=u.replace(/\?$/,"");if(c.length===0)return h?[m,""]:[m];let b=Wh(c.join("/")),x=[];return x.push(...b.map(g=>g===""?m:[m,g].join("/"))),h&&x.push(...b),x.map(g=>n.startsWith("/")&&g===""?"/":g)}function qv(n){n.sort((o,u)=>o.score!==u.score?u.score-o.score:Yv(o.routesMeta.map(c=>c.childrenIndex),u.routesMeta.map(c=>c.childrenIndex)))}var Bv=/^:[\w-]+$/,Uv=3,$v=2,Pv=1,Fv=10,Gv=-2,rh=n=>n==="*";function Vv(n,o){let u=n.split("/"),c=u.length;return u.some(rh)&&(c+=Gv),o&&(c+=$v),u.filter(h=>!rh(h)).reduce((h,m)=>h+(Bv.test(m)?Uv:m===""?Pv:Fv),c)}function Yv(n,o){return n.length===o.length&&n.slice(0,-1).every((c,h)=>c===o[h])?n[n.length-1]-o[o.length-1]:0}function Qv(n,o,u=!1){let{routesMeta:c}=n,h={},m="/",b=[];for(let x=0;x<c.length;++x){let g=c[x],d=x===c.length-1,w=m==="/"?o:o.slice(m.length)||"/",A=qi({path:g.relativePath,caseSensitive:g.caseSensitive,end:d},w),E=g.route;if(!A&&d&&u&&!c[c.length-1].route.index&&(A=qi({path:g.relativePath,caseSensitive:g.caseSensitive,end:!1},w)),!A)return null;Object.assign(h,A.params),b.push({params:h,pathname:Pa([m,A.pathname]),pathnameBase:eg(Pa([m,A.pathnameBase])),route:E}),A.pathnameBase!=="/"&&(m=Pa([m,A.pathnameBase]))}return b}function qi(n,o){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[u,c]=Xv(n.path,n.caseSensitive,n.end),h=o.match(u);if(!h)return null;let m=h[0],b=m.replace(/(.)\/+$/,"$1"),x=h.slice(1);return{params:c.reduce((d,{paramName:w,isOptional:A},E)=>{if(w==="*"){let S=x[E]||"";b=m.slice(0,m.length-S.length).replace(/(.)\/+$/,"$1")}const C=x[E];return A&&!C?d[w]=void 0:d[w]=(C||"").replace(/%2F/g,"/"),d},{}),pathname:m,pathnameBase:b,pattern:n}}function Xv(n,o=!1,u=!0){ca(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let c=[],h="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(b,x,g)=>(c.push({paramName:x,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(c.push({paramName:"*"}),h+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):u?h+="\\/*$":n!==""&&n!=="/"&&(h+="(?:(?=\\/|$))"),[new RegExp(h,o?void 0:"i"),c]}function Zv(n){try{return n.split("/").map(o=>decodeURIComponent(o).replace(/\//g,"%2F")).join("/")}catch(o){return ca(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${o}).`),n}}function Fa(n,o){if(o==="/")return n;if(!n.toLowerCase().startsWith(o.toLowerCase()))return null;let u=o.endsWith("/")?o.length-1:o.length,c=n.charAt(u);return c&&c!=="/"?null:n.slice(u)||"/"}var Kv=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function Jv(n,o="/"){let{pathname:u,search:c="",hash:h=""}=typeof n=="string"?qs(n):n,m;return u?(u=u.replace(/\/\/+/g,"/"),u.startsWith("/")?m=ih(u.substring(1),"/"):m=ih(u,o)):m=o,{pathname:m,search:tg(c),hash:ag(h)}}function ih(n,o){let u=o.replace(/\/+$/,"").split("/");return n.split("/").forEach(h=>{h===".."?u.length>1&&u.pop():h!=="."&&u.push(h)}),u.length>1?u.join("/"):"/"}function wd(n,o,u,c){return`Cannot include a '${n}' character in a manually specified \`to.${o}\` field [${JSON.stringify(c)}].  Please separate it out to the \`to.${u}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Wv(n){return n.filter((o,u)=>u===0||o.route.path&&o.route.path.length>0)}function Fd(n){let o=Wv(n);return o.map((u,c)=>c===o.length-1?u.pathname:u.pathnameBase)}function Gd(n,o,u,c=!1){let h;typeof n=="string"?h=qs(n):(h={...n},Xe(!h.pathname||!h.pathname.includes("?"),wd("?","pathname","search",h)),Xe(!h.pathname||!h.pathname.includes("#"),wd("#","pathname","hash",h)),Xe(!h.search||!h.search.includes("#"),wd("#","search","hash",h)));let m=n===""||h.pathname==="",b=m?"/":h.pathname,x;if(b==null)x=u;else{let A=o.length-1;if(!c&&b.startsWith("..")){let E=b.split("/");for(;E[0]==="..";)E.shift(),A-=1;h.pathname=E.join("/")}x=A>=0?o[A]:"/"}let g=Jv(h,x),d=b&&b!=="/"&&b.endsWith("/"),w=(m||b===".")&&u.endsWith("/");return!g.pathname.endsWith("/")&&(d||w)&&(g.pathname+="/"),g}var Pa=n=>n.join("/").replace(/\/\/+/g,"/"),eg=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),tg=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,ag=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n,lg=class{constructor(n,o,u,c=!1){this.status=n,this.statusText=o||"",this.internal=c,u instanceof Error?(this.data=u.toString(),this.error=u):this.data=u}};function sg(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}function ng(n){return n.map(o=>o.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var ep=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function tp(n,o){let u=n;if(typeof u!="string"||!Kv.test(u))return{absoluteURL:void 0,isExternal:!1,to:u};let c=u,h=!1;if(ep)try{let m=new URL(window.location.href),b=u.startsWith("//")?new URL(m.protocol+u):new URL(u),x=Fa(b.pathname,o);b.origin===m.origin&&x!=null?u=x+b.search+b.hash:h=!0}catch{ca(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:c,isExternal:h,to:u}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var ap=["POST","PUT","PATCH","DELETE"];new Set(ap);var rg=["GET",...ap];new Set(rg);var Bs=j.createContext(null);Bs.displayName="DataRouter";var Yi=j.createContext(null);Yi.displayName="DataRouterState";var ig=j.createContext(!1),lp=j.createContext({isTransitioning:!1});lp.displayName="ViewTransition";var og=j.createContext(new Map);og.displayName="Fetchers";var cg=j.createContext(null);cg.displayName="Await";var Gt=j.createContext(null);Gt.displayName="Navigation";var Yn=j.createContext(null);Yn.displayName="Location";var da=j.createContext({outlet:null,matches:[],isDataRoute:!1});da.displayName="Route";var Vd=j.createContext(null);Vd.displayName="RouteError";var sp="REACT_ROUTER_ERROR",dg="REDIRECT",ug="ROUTE_ERROR_RESPONSE";function mg(n){if(n.startsWith(`${sp}:${dg}:{`))try{let o=JSON.parse(n.slice(28));if(typeof o=="object"&&o&&typeof o.status=="number"&&typeof o.statusText=="string"&&typeof o.location=="string"&&typeof o.reloadDocument=="boolean"&&typeof o.replace=="boolean")return o}catch{}}function xg(n){if(n.startsWith(`${sp}:${ug}:{`))try{let o=JSON.parse(n.slice(40));if(typeof o=="object"&&o&&typeof o.status=="number"&&typeof o.statusText=="string")return new lg(o.status,o.statusText,o.data)}catch{}}function fg(n,{relative:o}={}){Xe(Us(),"useHref() may be used only in the context of a <Router> component.");let{basename:u,navigator:c}=j.useContext(Gt),{hash:h,pathname:m,search:b}=Qn(n,{relative:o}),x=m;return u!=="/"&&(x=m==="/"?u:Pa([u,m])),c.createHref({pathname:x,search:b,hash:h})}function Us(){return j.useContext(Yn)!=null}function la(){return Xe(Us(),"useLocation() may be used only in the context of a <Router> component."),j.useContext(Yn).location}var np="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function rp(n){j.useContext(Gt).static||j.useLayoutEffect(n)}function ql(){let{isDataRoute:n}=j.useContext(da);return n?kg():hg()}function hg(){Xe(Us(),"useNavigate() may be used only in the context of a <Router> component.");let n=j.useContext(Bs),{basename:o,navigator:u}=j.useContext(Gt),{matches:c}=j.useContext(da),{pathname:h}=la(),m=JSON.stringify(Fd(c)),b=j.useRef(!1);return rp(()=>{b.current=!0}),j.useCallback((g,d={})=>{if(ca(b.current,np),!b.current)return;if(typeof g=="number"){u.go(g);return}let w=Gd(g,JSON.parse(m),h,d.relative==="path");n==null&&o!=="/"&&(w.pathname=w.pathname==="/"?o:Pa([o,w.pathname])),(d.replace?u.replace:u.push)(w,d.state,d)},[o,u,m,h,n])}var pg=j.createContext(null);function bg(n){let o=j.useContext(da).outlet;return j.useMemo(()=>o&&j.createElement(pg.Provider,{value:n},o),[o,n])}function Qn(n,{relative:o}={}){let{matches:u}=j.useContext(da),{pathname:c}=la(),h=JSON.stringify(Fd(u));return j.useMemo(()=>Gd(n,JSON.parse(h),c,o==="path"),[n,h,c,o])}function vg(n,o){return ip(n,o)}function ip(n,o,u,c,h){Xe(Us(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:m}=j.useContext(Gt),{matches:b}=j.useContext(da),x=b[b.length-1],g=x?x.params:{},d=x?x.pathname:"/",w=x?x.pathnameBase:"/",A=x&&x.route;{let _=A&&A.path||"";cp(d,!A||_.endsWith("*")||_.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${_}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${_}"> to <Route path="${_==="/"?"*":`${_}/*`}">.`)}let E=la(),C;if(o){let _=typeof o=="string"?qs(o):o;Xe(w==="/"||_.pathname?.startsWith(w),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${w}" but pathname "${_.pathname}" was given in the \`location\` prop.`),C=_}else C=E;let S=C.pathname||"/",v=S;if(w!=="/"){let _=w.replace(/^\//,"").split("/");v="/"+S.replace(/^\//,"").split("/").slice(_.length).join("/")}let p=Kh(n,{pathname:v});ca(A||p!=null,`No routes matched location "${C.pathname}${C.search}${C.hash}" `),ca(p==null||p[p.length-1].route.element!==void 0||p[p.length-1].route.Component!==void 0||p[p.length-1].route.lazy!==void 0,`Matched leaf route at location "${C.pathname}${C.search}${C.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let y=Sg(p&&p.map(_=>Object.assign({},_,{params:Object.assign({},g,_.params),pathname:Pa([w,m.encodeLocation?m.encodeLocation(_.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?w:Pa([w,m.encodeLocation?m.encodeLocation(_.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:_.pathnameBase])})),b,u,c,h);return o&&y?j.createElement(Yn.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...C},navigationType:"POP"}},y):y}function gg(){let n=Mg(),o=sg(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),u=n instanceof Error?n.stack:null,c="rgba(200,200,200, 0.5)",h={padding:"0.5rem",backgroundColor:c},m={padding:"2px 4px",backgroundColor:c},b=null;return console.error("Error handled by React Router default ErrorBoundary:",n),b=j.createElement(j.Fragment,null,j.createElement("p",null," Hey developer "),j.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",j.createElement("code",{style:m},"ErrorBoundary")," or"," ",j.createElement("code",{style:m},"errorElement")," prop on your route.")),j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},o),u?j.createElement("pre",{style:h},u):null,b)}var yg=j.createElement(gg,null),op=class extends j.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,o){return o.location!==n.location||o.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:o.error,location:o.location,revalidation:n.revalidation||o.revalidation}}componentDidCatch(n,o){this.props.onError?this.props.onError(n,o):console.error("React Router caught the following error during render",n)}render(){let n=this.state.error;if(this.context&&typeof n=="object"&&n&&"digest"in n&&typeof n.digest=="string"){const u=xg(n.digest);u&&(n=u)}let o=n!==void 0?j.createElement(da.Provider,{value:this.props.routeContext},j.createElement(Vd.Provider,{value:n,children:this.props.component})):this.props.children;return this.context?j.createElement(jg,{error:n},o):o}};op.contextType=ig;var Cd=new WeakMap;function jg({children:n,error:o}){let{basename:u}=j.useContext(Gt);if(typeof o=="object"&&o&&"digest"in o&&typeof o.digest=="string"){let c=mg(o.digest);if(c){let h=Cd.get(o);if(h)throw h;let m=tp(c.location,u);if(ep&&!Cd.get(o))if(m.isExternal||c.reloadDocument)window.location.href=m.absoluteURL||m.to;else{const b=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(m.to,{replace:c.replace}));throw Cd.set(o,b),b}return j.createElement("meta",{httpEquiv:"refresh",content:`0;url=${m.absoluteURL||m.to}`})}}return n}function Ng({routeContext:n,match:o,children:u}){let c=j.useContext(Bs);return c&&c.static&&c.staticContext&&(o.route.errorElement||o.route.ErrorBoundary)&&(c.staticContext._deepestRenderedBoundaryId=o.route.id),j.createElement(da.Provider,{value:n},u)}function Sg(n,o=[],u=null,c=null,h=null){if(n==null){if(!u)return null;if(u.errors)n=u.matches;else if(o.length===0&&!u.initialized&&u.matches.length>0)n=u.matches;else return null}let m=n,b=u?.errors;if(b!=null){let w=m.findIndex(A=>A.route.id&&b?.[A.route.id]!==void 0);Xe(w>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(b).join(",")}`),m=m.slice(0,Math.min(m.length,w+1))}let x=!1,g=-1;if(u)for(let w=0;w<m.length;w++){let A=m[w];if((A.route.HydrateFallback||A.route.hydrateFallbackElement)&&(g=w),A.route.id){let{loaderData:E,errors:C}=u,S=A.route.loader&&!E.hasOwnProperty(A.route.id)&&(!C||C[A.route.id]===void 0);if(A.route.lazy||S){x=!0,g>=0?m=m.slice(0,g+1):m=[m[0]];break}}}let d=u&&c?(w,A)=>{c(w,{location:u.location,params:u.matches?.[0]?.params??{},unstable_pattern:ng(u.matches),errorInfo:A})}:void 0;return m.reduceRight((w,A,E)=>{let C,S=!1,v=null,p=null;u&&(C=b&&A.route.id?b[A.route.id]:void 0,v=A.route.errorElement||yg,x&&(g<0&&E===0?(cp("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),S=!0,p=null):g===E&&(S=!0,p=A.route.hydrateFallbackElement||null)));let y=o.concat(m.slice(0,E+1)),_=()=>{let O;return C?O=v:S?O=p:A.route.Component?O=j.createElement(A.route.Component,null):A.route.element?O=A.route.element:O=w,j.createElement(Ng,{match:A,routeContext:{outlet:w,matches:y,isDataRoute:u!=null},children:O})};return u&&(A.route.ErrorBoundary||A.route.errorElement||E===0)?j.createElement(op,{location:u.location,revalidation:u.revalidation,component:v,error:C,children:_(),routeContext:{outlet:null,matches:y,isDataRoute:!0},onError:d}):_()},null)}function Yd(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function wg(n){let o=j.useContext(Bs);return Xe(o,Yd(n)),o}function Cg(n){let o=j.useContext(Yi);return Xe(o,Yd(n)),o}function Ag(n){let o=j.useContext(da);return Xe(o,Yd(n)),o}function Qd(n){let o=Ag(n),u=o.matches[o.matches.length-1];return Xe(u.route.id,`${n} can only be used on routes that contain a unique "id"`),u.route.id}function Tg(){return Qd("useRouteId")}function Mg(){let n=j.useContext(Vd),o=Cg("useRouteError"),u=Qd("useRouteError");return n!==void 0?n:o.errors?.[u]}function kg(){let{router:n}=wg("useNavigate"),o=Qd("useNavigate"),u=j.useRef(!1);return rp(()=>{u.current=!0}),j.useCallback(async(h,m={})=>{ca(u.current,np),u.current&&(typeof h=="number"?await n.navigate(h):await n.navigate(h,{fromRouteId:o,...m}))},[n,o])}var oh={};function cp(n,o,u){!o&&!oh[n]&&(oh[n]=!0,ca(!1,u))}j.memo(Eg);function Eg({routes:n,future:o,state:u,onError:c}){return ip(n,void 0,u,c,o)}function Hd({to:n,replace:o,state:u,relative:c}){Xe(Us(),"<Navigate> may be used only in the context of a <Router> component.");let{static:h}=j.useContext(Gt);ca(!h,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:m}=j.useContext(da),{pathname:b}=la(),x=ql(),g=Gd(n,Fd(m),b,c==="path"),d=JSON.stringify(g);return j.useEffect(()=>{x(JSON.parse(d),{replace:o,state:u,relative:c})},[x,d,c,o,u]),null}function dp(n){return bg(n.context)}function Qe(n){Xe(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function zg({basename:n="/",children:o=null,location:u,navigationType:c="POP",navigator:h,static:m=!1,unstable_useTransitions:b}){Xe(!Us(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let x=n.replace(/^\/*/,"/"),g=j.useMemo(()=>({basename:x,navigator:h,static:m,unstable_useTransitions:b,future:{}}),[x,h,m,b]);typeof u=="string"&&(u=qs(u));let{pathname:d="/",search:w="",hash:A="",state:E=null,key:C="default"}=u,S=j.useMemo(()=>{let v=Fa(d,x);return v==null?null:{location:{pathname:v,search:w,hash:A,state:E,key:C},navigationType:c}},[x,d,w,A,E,C,c]);return ca(S!=null,`<Router basename="${x}"> is not able to match the URL "${d}${w}${A}" because it does not start with the basename, so the <Router> won't render anything.`),S==null?null:j.createElement(Gt.Provider,{value:g},j.createElement(Yn.Provider,{children:o,value:S}))}function Dg({children:n,location:o}){return vg(qd(n),o)}function qd(n,o=[]){let u=[];return j.Children.forEach(n,(c,h)=>{if(!j.isValidElement(c))return;let m=[...o,h];if(c.type===j.Fragment){u.push.apply(u,qd(c.props.children,m));return}Xe(c.type===Qe,`[${typeof c.type=="string"?c.type:c.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Xe(!c.props.index||!c.props.children,"An index route cannot have child routes.");let b={id:c.props.id||m.join("-"),caseSensitive:c.props.caseSensitive,element:c.props.element,Component:c.props.Component,index:c.props.index,path:c.props.path,middleware:c.props.middleware,loader:c.props.loader,action:c.props.action,hydrateFallbackElement:c.props.hydrateFallbackElement,HydrateFallback:c.props.HydrateFallback,errorElement:c.props.errorElement,ErrorBoundary:c.props.ErrorBoundary,hasErrorBoundary:c.props.hasErrorBoundary===!0||c.props.ErrorBoundary!=null||c.props.errorElement!=null,shouldRevalidate:c.props.shouldRevalidate,handle:c.props.handle,lazy:c.props.lazy};c.props.children&&(b.children=qd(c.props.children,m)),u.push(b)}),u}var Li="get",Oi="application/x-www-form-urlencoded";function Qi(n){return typeof HTMLElement<"u"&&n instanceof HTMLElement}function Rg(n){return Qi(n)&&n.tagName.toLowerCase()==="button"}function Lg(n){return Qi(n)&&n.tagName.toLowerCase()==="form"}function Og(n){return Qi(n)&&n.tagName.toLowerCase()==="input"}function Ig(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function _g(n,o){return n.button===0&&(!o||o==="_self")&&!Ig(n)}var yi=null;function Hg(){if(yi===null)try{new FormData(document.createElement("form"),0),yi=!1}catch{yi=!0}return yi}var qg=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Ad(n){return n!=null&&!qg.has(n)?(ca(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Oi}"`),null):n}function Bg(n,o){let u,c,h,m,b;if(Lg(n)){let x=n.getAttribute("action");c=x?Fa(x,o):null,u=n.getAttribute("method")||Li,h=Ad(n.getAttribute("enctype"))||Oi,m=new FormData(n)}else if(Rg(n)||Og(n)&&(n.type==="submit"||n.type==="image")){let x=n.form;if(x==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let g=n.getAttribute("formaction")||x.getAttribute("action");if(c=g?Fa(g,o):null,u=n.getAttribute("formmethod")||x.getAttribute("method")||Li,h=Ad(n.getAttribute("formenctype"))||Ad(x.getAttribute("enctype"))||Oi,m=new FormData(x,n),!Hg()){let{name:d,type:w,value:A}=n;if(w==="image"){let E=d?`${d}.`:"";m.append(`${E}x`,"0"),m.append(`${E}y`,"0")}else d&&m.append(d,A)}}else{if(Qi(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');u=Li,c=null,h=Oi,b=n}return m&&h==="text/plain"&&(b=m,m=void 0),{action:c,method:u.toLowerCase(),encType:h,formData:m,body:b}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Xd(n,o){if(n===!1||n===null||typeof n>"u")throw new Error(o)}function Ug(n,o,u,c){let h=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return u?h.pathname.endsWith("/")?h.pathname=`${h.pathname}_.${c}`:h.pathname=`${h.pathname}.${c}`:h.pathname==="/"?h.pathname=`_root.${c}`:o&&Fa(h.pathname,o)==="/"?h.pathname=`${o.replace(/\/$/,"")}/_root.${c}`:h.pathname=`${h.pathname.replace(/\/$/,"")}.${c}`,h}async function $g(n,o){if(n.id in o)return o[n.id];try{let u=await import(n.module);return o[n.id]=u,u}catch(u){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(u),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Pg(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function Fg(n,o,u){let c=await Promise.all(n.map(async h=>{let m=o.routes[h.route.id];if(m){let b=await $g(m,u);return b.links?b.links():[]}return[]}));return Qg(c.flat(1).filter(Pg).filter(h=>h.rel==="stylesheet"||h.rel==="preload").map(h=>h.rel==="stylesheet"?{...h,rel:"prefetch",as:"style"}:{...h,rel:"prefetch"}))}function ch(n,o,u,c,h,m){let b=(g,d)=>u[d]?g.route.id!==u[d].route.id:!0,x=(g,d)=>u[d].pathname!==g.pathname||u[d].route.path?.endsWith("*")&&u[d].params["*"]!==g.params["*"];return m==="assets"?o.filter((g,d)=>b(g,d)||x(g,d)):m==="data"?o.filter((g,d)=>{let w=c.routes[g.route.id];if(!w||!w.hasLoader)return!1;if(b(g,d)||x(g,d))return!0;if(g.route.shouldRevalidate){let A=g.route.shouldRevalidate({currentUrl:new URL(h.pathname+h.search+h.hash,window.origin),currentParams:u[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:g.params,defaultShouldRevalidate:!0});if(typeof A=="boolean")return A}return!0}):[]}function Gg(n,o,{includeHydrateFallback:u}={}){return Vg(n.map(c=>{let h=o.routes[c.route.id];if(!h)return[];let m=[h.module];return h.clientActionModule&&(m=m.concat(h.clientActionModule)),h.clientLoaderModule&&(m=m.concat(h.clientLoaderModule)),u&&h.hydrateFallbackModule&&(m=m.concat(h.hydrateFallbackModule)),h.imports&&(m=m.concat(h.imports)),m}).flat(1))}function Vg(n){return[...new Set(n)]}function Yg(n){let o={},u=Object.keys(n).sort();for(let c of u)o[c]=n[c];return o}function Qg(n,o){let u=new Set;return new Set(o),n.reduce((c,h)=>{let m=JSON.stringify(Yg(h));return u.has(m)||(u.add(m),c.push({key:m,link:h})),c},[])}function up(){let n=j.useContext(Bs);return Xd(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function Xg(){let n=j.useContext(Yi);return Xd(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var Zd=j.createContext(void 0);Zd.displayName="FrameworkContext";function mp(){let n=j.useContext(Zd);return Xd(n,"You must render this element inside a <HydratedRouter> element"),n}function Zg(n,o){let u=j.useContext(Zd),[c,h]=j.useState(!1),[m,b]=j.useState(!1),{onFocus:x,onBlur:g,onMouseEnter:d,onMouseLeave:w,onTouchStart:A}=o,E=j.useRef(null);j.useEffect(()=>{if(n==="render"&&b(!0),n==="viewport"){let v=y=>{y.forEach(_=>{b(_.isIntersecting)})},p=new IntersectionObserver(v,{threshold:.5});return E.current&&p.observe(E.current),()=>{p.disconnect()}}},[n]),j.useEffect(()=>{if(c){let v=setTimeout(()=>{b(!0)},100);return()=>{clearTimeout(v)}}},[c]);let C=()=>{h(!0)},S=()=>{h(!1),b(!1)};return u?n!=="intent"?[m,E,{}]:[m,E,{onFocus:_n(x,C),onBlur:_n(g,S),onMouseEnter:_n(d,C),onMouseLeave:_n(w,S),onTouchStart:_n(A,C)}]:[!1,E,{}]}function _n(n,o){return u=>{n&&n(u),u.defaultPrevented||o(u)}}function Kg({page:n,...o}){let{router:u}=up(),c=j.useMemo(()=>Kh(u.routes,n,u.basename),[u.routes,n,u.basename]);return c?j.createElement(Wg,{page:n,matches:c,...o}):null}function Jg(n){let{manifest:o,routeModules:u}=mp(),[c,h]=j.useState([]);return j.useEffect(()=>{let m=!1;return Fg(n,o,u).then(b=>{m||h(b)}),()=>{m=!0}},[n,o,u]),c}function Wg({page:n,matches:o,...u}){let c=la(),{future:h,manifest:m,routeModules:b}=mp(),{basename:x}=up(),{loaderData:g,matches:d}=Xg(),w=j.useMemo(()=>ch(n,o,d,m,c,"data"),[n,o,d,m,c]),A=j.useMemo(()=>ch(n,o,d,m,c,"assets"),[n,o,d,m,c]),E=j.useMemo(()=>{if(n===c.pathname+c.search+c.hash)return[];let v=new Set,p=!1;if(o.forEach(_=>{let O=m.routes[_.route.id];!O||!O.hasLoader||(!w.some(q=>q.route.id===_.route.id)&&_.route.id in g&&b[_.route.id]?.shouldRevalidate||O.hasClientLoader?p=!0:v.add(_.route.id))}),v.size===0)return[];let y=Ug(n,x,h.unstable_trailingSlashAwareDataRequests,"data");return p&&v.size>0&&y.searchParams.set("_routes",o.filter(_=>v.has(_.route.id)).map(_=>_.route.id).join(",")),[y.pathname+y.search]},[x,h.unstable_trailingSlashAwareDataRequests,g,c,m,w,o,n,b]),C=j.useMemo(()=>Gg(A,m),[A,m]),S=Jg(A);return j.createElement(j.Fragment,null,E.map(v=>j.createElement("link",{key:v,rel:"prefetch",as:"fetch",href:v,...u})),C.map(v=>j.createElement("link",{key:v,rel:"modulepreload",href:v,...u})),S.map(({key:v,link:p})=>j.createElement("link",{key:v,nonce:u.nonce,...p,crossOrigin:p.crossOrigin??u.crossOrigin})))}function ey(...n){return o=>{n.forEach(u=>{typeof u=="function"?u(o):u!=null&&(u.current=o)})}}var ty=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{ty&&(window.__reactRouterVersion="7.13.0")}catch{}function ay({basename:n,children:o,unstable_useTransitions:u,window:c}){let h=j.useRef();h.current==null&&(h.current=Lv({window:c,v5Compat:!0}));let m=h.current,[b,x]=j.useState({action:m.action,location:m.location}),g=j.useCallback(d=>{u===!1?x(d):j.startTransition(()=>x(d))},[u]);return j.useLayoutEffect(()=>m.listen(g),[m,g]),j.createElement(zg,{basename:n,children:o,location:b.location,navigationType:b.action,navigator:m,unstable_useTransitions:u})}var xp=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,fp=j.forwardRef(function({onClick:o,discover:u="render",prefetch:c="none",relative:h,reloadDocument:m,replace:b,state:x,target:g,to:d,preventScrollReset:w,viewTransition:A,unstable_defaultShouldRevalidate:E,...C},S){let{basename:v,unstable_useTransitions:p}=j.useContext(Gt),y=typeof d=="string"&&xp.test(d),_=tp(d,v);d=_.to;let O=fg(d,{relative:h}),[q,Y,z]=Zg(c,C),L=ny(d,{replace:b,state:x,target:g,preventScrollReset:w,relative:h,viewTransition:A,unstable_defaultShouldRevalidate:E,unstable_useTransitions:p});function te(H){o&&o(H),H.defaultPrevented||L(H)}let oe=j.createElement("a",{...C,...z,href:_.absoluteURL||O,onClick:_.isExternal||m?o:te,ref:ey(S,Y),target:g,"data-discover":!y&&u==="render"?"true":void 0});return q&&!y?j.createElement(j.Fragment,null,oe,j.createElement(Kg,{page:O})):oe});fp.displayName="Link";var Xi=j.forwardRef(function({"aria-current":o="page",caseSensitive:u=!1,className:c="",end:h=!1,style:m,to:b,viewTransition:x,children:g,...d},w){let A=Qn(b,{relative:d.relative}),E=la(),C=j.useContext(Yi),{navigator:S,basename:v}=j.useContext(Gt),p=C!=null&&dy(A)&&x===!0,y=S.encodeLocation?S.encodeLocation(A).pathname:A.pathname,_=E.pathname,O=C&&C.navigation&&C.navigation.location?C.navigation.location.pathname:null;u||(_=_.toLowerCase(),O=O?O.toLowerCase():null,y=y.toLowerCase()),O&&v&&(O=Fa(O,v)||O);const q=y!=="/"&&y.endsWith("/")?y.length-1:y.length;let Y=_===y||!h&&_.startsWith(y)&&_.charAt(q)==="/",z=O!=null&&(O===y||!h&&O.startsWith(y)&&O.charAt(y.length)==="/"),L={isActive:Y,isPending:z,isTransitioning:p},te=Y?o:void 0,oe;typeof c=="function"?oe=c(L):oe=[c,Y?"active":null,z?"pending":null,p?"transitioning":null].filter(Boolean).join(" ");let H=typeof m=="function"?m(L):m;return j.createElement(fp,{...d,"aria-current":te,className:oe,ref:w,style:H,to:b,viewTransition:x},typeof g=="function"?g(L):g)});Xi.displayName="NavLink";var ly=j.forwardRef(({discover:n="render",fetcherKey:o,navigate:u,reloadDocument:c,replace:h,state:m,method:b=Li,action:x,onSubmit:g,relative:d,preventScrollReset:w,viewTransition:A,unstable_defaultShouldRevalidate:E,...C},S)=>{let{unstable_useTransitions:v}=j.useContext(Gt),p=oy(),y=cy(x,{relative:d}),_=b.toLowerCase()==="get"?"get":"post",O=typeof x=="string"&&xp.test(x),q=Y=>{if(g&&g(Y),Y.defaultPrevented)return;Y.preventDefault();let z=Y.nativeEvent.submitter,L=z?.getAttribute("formmethod")||b,te=()=>p(z||Y.currentTarget,{fetcherKey:o,method:L,navigate:u,replace:h,state:m,relative:d,preventScrollReset:w,viewTransition:A,unstable_defaultShouldRevalidate:E});v&&u!==!1?j.startTransition(()=>te()):te()};return j.createElement("form",{ref:S,method:_,action:y,onSubmit:c?g:q,...C,"data-discover":!O&&n==="render"?"true":void 0})});ly.displayName="Form";function sy(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function hp(n){let o=j.useContext(Bs);return Xe(o,sy(n)),o}function ny(n,{target:o,replace:u,state:c,preventScrollReset:h,relative:m,viewTransition:b,unstable_defaultShouldRevalidate:x,unstable_useTransitions:g}={}){let d=ql(),w=la(),A=Qn(n,{relative:m});return j.useCallback(E=>{if(_g(E,o)){E.preventDefault();let C=u!==void 0?u:Fn(w)===Fn(A),S=()=>d(n,{replace:C,state:c,preventScrollReset:h,relative:m,viewTransition:b,unstable_defaultShouldRevalidate:x});g?j.startTransition(()=>S()):S()}},[w,d,A,u,c,o,n,h,m,b,x,g])}var ry=0,iy=()=>`__${String(++ry)}__`;function oy(){let{router:n}=hp("useSubmit"),{basename:o}=j.useContext(Gt),u=Tg(),c=n.fetch,h=n.navigate;return j.useCallback(async(m,b={})=>{let{action:x,method:g,encType:d,formData:w,body:A}=Bg(m,o);if(b.navigate===!1){let E=b.fetcherKey||iy();await c(E,u,b.action||x,{unstable_defaultShouldRevalidate:b.unstable_defaultShouldRevalidate,preventScrollReset:b.preventScrollReset,formData:w,body:A,formMethod:b.method||g,formEncType:b.encType||d,flushSync:b.flushSync})}else await h(b.action||x,{unstable_defaultShouldRevalidate:b.unstable_defaultShouldRevalidate,preventScrollReset:b.preventScrollReset,formData:w,body:A,formMethod:b.method||g,formEncType:b.encType||d,replace:b.replace,state:b.state,fromRouteId:u,flushSync:b.flushSync,viewTransition:b.viewTransition})},[c,h,o,u])}function cy(n,{relative:o}={}){let{basename:u}=j.useContext(Gt),c=j.useContext(da);Xe(c,"useFormAction must be used inside a RouteContext");let[h]=c.matches.slice(-1),m={...Qn(n||".",{relative:o})},b=la();if(n==null){m.search=b.search;let x=new URLSearchParams(m.search),g=x.getAll("index");if(g.some(w=>w==="")){x.delete("index"),g.filter(A=>A).forEach(A=>x.append("index",A));let w=x.toString();m.search=w?`?${w}`:""}}return(!n||n===".")&&h.route.index&&(m.search=m.search?m.search.replace(/^\?/,"?index&"):"?index"),u!=="/"&&(m.pathname=m.pathname==="/"?u:Pa([u,m.pathname])),Fn(m)}function dy(n,{relative:o}={}){let u=j.useContext(lp);Xe(u!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:c}=hp("useViewTransitionState"),h=Qn(n,{relative:o});if(!u.isTransitioning)return!1;let m=Fa(u.currentLocation.pathname,c)||u.currentLocation.pathname,b=Fa(u.nextLocation.pathname,c)||u.nextLocation.pathname;return qi(h.pathname,b)!=null||qi(h.pathname,m)!=null}const uy="1tdEmFK8Ip9VsVQX2PA30_RwXvVkMmEYtBUAHtjoSFZY6cRR61Z_cR0Sg",Kd="cf_access_token",Jd="cf_token_expiry",Wd="cf_user_name";function Bi(){const n=localStorage.getItem(Jd);return n&&Date.now()>Number(n)?(Ii(),null):localStorage.getItem(Kd)}function dh(n,o=3500){localStorage.setItem(Kd,n),localStorage.setItem(Jd,String(Date.now()+o*1e3))}function Ii(){localStorage.removeItem(Kd),localStorage.removeItem(Jd),localStorage.removeItem(Wd)}function uh(){return!!Bi()}function mh(n){localStorage.setItem(Wd,n)}function my(){return localStorage.getItem(Wd)||""}let Bd=null;function xy(n){Bd=n}async function xe(n,o={},u=!0){const c=Bi();if(!c)throw new Error("Not authenticated. Please sign in.");const m=await(await fetch(`https://script.googleapis.com/v1/scripts/${uy}:run`,{method:"POST",headers:{Authorization:`Bearer ${c}`,"Content-Type":"application/json"},body:JSON.stringify({function:"apiRouter",devMode:!0,parameters:[{action:n,params:o,userName:my()}]})})).json();if(m.error){if(u&&(m.error.code===401||m.error.code===403||m.error.status==="UNAUTHENTICATED"||m.error.status==="PERMISSION_DENIED")&&Bd)try{return await Bd(),xe(n,o,!1)}catch{}if(m.error.details&&m.error.details.length>0){const b=m.error.details[0];throw new Error(b.errorMessage||"Script execution error")}throw new Error(m.error.message||"API error")}if(m.response&&m.response.result!==void 0){const b=m.response.result;if(b&&!b.success){const x=new Error(b.error||"Unknown error");throw x.code=b.code,x}return b?b.data:null}throw new Error("Unexpected response format")}const xh=()=>xe("auth:me"),Ui=()=>xe("data:load-all"),pp=()=>xe("members:list"),bp=n=>xe("member:create",n),vp=n=>xe("member:update",n),gp=n=>xe("member:delete",{memberId:n}),yp=()=>xe("banks:list"),jp=n=>xe("bank:create",n),fy=n=>xe("bank:update",n),Np=n=>xe("bank:delete",{accountId:n}),Sp=()=>xe("invaccounts:list"),wp=n=>xe("invacct:create",n),hy=n=>xe("invacct:update",n),Cp=n=>xe("invacct:delete",{accountId:n}),py=()=>xe("portfolios:list"),by=n=>xe("portfolio:create",n),vy=n=>xe("portfolio:update",n),gy=n=>xe("portfolio:delete",{portfolioId:n}),yy=n=>xe("mf:invest",n),jy=n=>xe("mf:redeem",n),Ny=n=>xe("mf:switch",n),Sy=(n,o)=>xe("mf:allocations-update",{portfolioId:n,allocations:o}),Ap=()=>xe("goals:list"),Tp=n=>xe("goal:create",n),wy=(n,o)=>xe("goal:update",{goalId:n,...o}),Mp=n=>xe("goal:delete",{goalId:n}),Cy=()=>xe("goal:mappings-list"),Ay=(n,o)=>xe("goal:mappings-update",{goalId:n,mappings:o}),kp=()=>xe("insurance:list"),Ep=n=>xe("insurance:create",n),Ty=n=>xe("insurance:update",n),zp=n=>xe("insurance:delete",{policyId:n}),Dp=()=>xe("liabilities:list"),Rp=n=>xe("liability:create",n),My=n=>xe("liability:update",n),Lp=n=>xe("liability:delete",{liabilityId:n}),Op=()=>xe("otherinv:list"),Ip=n=>xe("otherinv:create",n),ky=n=>xe("otherinv:update",n),_p=n=>xe("otherinv:delete",{investmentId:n}),Hp=()=>xe("stock-portfolios:list"),qp=n=>xe("stock-portfolio:create",n),Ey=n=>xe("stock-portfolio:update",n),Bp=n=>xe("stock-portfolio:delete",{portfolioId:n}),zy=n=>xe("stock:buy",n),Dy=n=>xe("stock:sell",n),Ry=()=>xe("mf-holdings:list"),Ly=()=>xe("mf-transactions:list"),Oy=()=>xe("stock-holdings:list-all"),Iy=()=>xe("stock-transactions:list-all"),Up=()=>xe("reminders:list"),$p=n=>xe("reminder:create",n),_y=n=>xe("reminder:update",n),Pp=n=>xe("reminder:delete",{reminderId:n}),Hy=()=>xe("healthcheck:status"),qy=n=>xe("healthcheck:save",n),By=()=>xe("healthcheck:get"),Uy=()=>xe("settings:list"),$y=n=>xe("settings:update",n),Py=()=>xe("market:data"),Fy=()=>xe("data:refresh-master");typeof window<"u"&&(window._cf={callAPI:xe,checkTriggers:()=>xe("test:triggers"),diagnose:()=>xe("test:diagnose")});const Gy="capital-friends",Vy=1,ga="cache";let Hn=null;function Zi(){return Hn||(Hn=new Promise((n,o)=>{const u=indexedDB.open(Gy,Vy);u.onupgradeneeded=c=>{const h=c.target.result;h.objectStoreNames.contains(ga)||h.createObjectStore(ga,{keyPath:"key"})},u.onsuccess=()=>n(u.result),u.onerror=()=>{console.warn("[idb] Failed to open database:",u.error),Hn=null,o(u.error)}}),Hn)}async function ba(n,o){try{const u=await Zi();return new Promise(c=>{const h=u.transaction(ga,"readwrite");h.objectStore(ga).put({key:n,data:o,updatedAt:Date.now()}),h.oncomplete=()=>c(),h.onerror=()=>c()})}catch{}}async function Yy(){try{const n=await Zi();return new Promise(o=>{const c=n.transaction(ga,"readonly").objectStore(ga).getAll();c.onsuccess=()=>{const h={};for(const m of c.result||[])h[m.key]=m.data;o(h)},c.onerror=()=>o({})})}catch{return{}}}async function Td(n){try{const o=await Zi();return new Promise(u=>{const c=o.transaction(ga,"readwrite"),h=c.objectStore(ga),m=Date.now();for(const[b,x]of Object.entries(n))h.put({key:b,data:x,updatedAt:m});c.oncomplete=()=>u(),c.onerror=()=>u()})}catch{}}async function Qy(){try{const n=await Zi();return new Promise(o=>{const u=n.transaction(ga,"readwrite");u.objectStore(ga).clear(),u.oncomplete=()=>o(),u.onerror=()=>o()})}catch{}}const Fp=j.createContext(null),Xy="868467315292-7hfrvkh8pq8f1e2l3v38m6qrupboa295.apps.googleusercontent.com",Zy=["https://www.googleapis.com/auth/spreadsheets","https://www.googleapis.com/auth/drive","https://www.googleapis.com/auth/gmail.send","https://www.googleapis.com/auth/script.scriptapp","openid","email","profile"].join(" "),eu="cf_user_profile";function fh(){try{const n=localStorage.getItem(eu);return n?JSON.parse(n):null}catch{return null}}function Ky(n){try{localStorage.setItem(eu,JSON.stringify(n))}catch{}}function hh(){localStorage.removeItem(eu)}function Jy({children:n}){const o=uh()?fh():null,[u,c]=j.useState(o),[h,m]=j.useState(!o),[b,x]=j.useState(null),g=j.useRef(null);function d(y){c(y),y?Ky(y):hh()}j.useEffect(()=>{const y=()=>{if(!window.google?.accounts?.oauth2){setTimeout(y,200);return}g.current=window.google.accounts.oauth2.initTokenClient({client_id:Xy,scope:Zy,callback:w}),xy(C),uh()?E():m(!1)};y()},[]);async function w(y){if(y.error){x(y.error_description||y.error),m(!1);return}try{m(!0),x(null),dh(y.access_token,y.expires_in);const _=await A(y.access_token);mh(_.name||"");const O=await xh();d({email:O.email||_.email,name:O.name||_.name,role:O.role,picture:_.picture||""})}catch(_){x(_.message),Ii(),d(null)}finally{m(!1)}}async function A(y){const _=await fetch("https://www.googleapis.com/oauth2/v3/userinfo",{headers:{Authorization:`Bearer ${y}`}});if(!_.ok)throw new Error("Failed to fetch user profile");return _.json()}async function E(){const y=!!fh();try{const _=Bi(),O=await A(_);mh(O.name||"");const q=await xh();d({email:q.email||O.email,name:q.name||O.name,role:q.role,picture:O.picture||""})}catch{Ii(),d(null)}finally{y||m(!1)}}function C(){return new Promise((y,_)=>{if(!g.current){_(new Error("Token client not initialized"));return}const O=g.current,q=O.callback;O.callback=Y=>{O.callback=q,Y.error?_(new Error(Y.error)):(dh(Y.access_token,Y.expires_in),y())},O.requestAccessToken({prompt:""})})}const S=j.useCallback(()=>{g.current&&(x(null),g.current.requestAccessToken())},[]),v=j.useCallback(()=>{const y=Bi();y&&window.google?.accounts?.oauth2&&window.google.accounts.oauth2.revoke(y),Ii(),hh(),Qy(),sessionStorage.removeItem("cf_health_check"),c(null)},[]),p={user:u,loading:h,error:b,isAuthenticated:!!u,isOwner:u?.role==="owner",signIn:S,signOut:v};return a.jsx(Fp.Provider,{value:p,children:n})}function Bl(){const n=j.useContext(Fp);if(!n)throw new Error("useAuth must be used within AuthProvider");return n}const Gp=j.createContext();function Wy({children:n}){const[o,u]=j.useState(()=>{const h=localStorage.getItem("cf-theme");return h||(window.matchMedia("(prefers-color-scheme: light)").matches?"light":"dark")});j.useEffect(()=>{localStorage.setItem("cf-theme",o),document.documentElement.setAttribute("data-theme",o)},[o]);const c=()=>u(h=>h==="dark"?"light":"dark");return a.jsx(Gp.Provider,{value:{theme:o,toggle:c},children:n})}function Vp(){return j.useContext(Gp)}const Yp=j.createContext(),_i="cf_health_check";function ej(){try{const n=sessionStorage.getItem(_i);return n!==null?JSON.parse(n):null}catch{return null}}function tj({children:n}){const{isAuthenticated:o}=Bl(),u=o?ej():null,[c,h]=j.useState(!0),[m,b]=j.useState(!1),[x,g]=j.useState(null),[d,w]=j.useState([]),[A,E]=j.useState([]),[C,S]=j.useState([]),[v,p]=j.useState([]),[y,_]=j.useState([]),[O,q]=j.useState([]),[Y,z]=j.useState([]),[L,te]=j.useState([]),[oe,H]=j.useState([]),[se,M]=j.useState([]),[ie,V]=j.useState([]),[R,k]=j.useState([]),[K,ne]=j.useState([]),[fe,ye]=j.useState([]),[N,B]=j.useState([]),[W,J]=j.useState({}),[de,be]=j.useState(u===!0?!0:null),je=j.useRef(!1),we=j.useCallback(P=>{P&&(P.members&&w(P.members),P.bankAccounts&&E(P.bankAccounts),P.investments&&S(P.investments),P.insurancePolicies&&p(P.insurancePolicies),P.liabilities&&_(P.liabilities),P.otherInvestments&&q(P.otherInvestments),P.stockPortfolios&&z(P.stockPortfolios),P.stockHoldings&&te(P.stockHoldings),P.stockTransactions&&H(P.stockTransactions),P.mfPortfolios&&M(P.mfPortfolios),P.mfHoldings&&V(P.mfHoldings),P.mfTransactions&&k(P.mfTransactions),P.goals&&ne(P.goals),P.reminders&&ye(P.reminders),P.goalPortfolioMappings&&B(P.goalPortfolioMappings),P.settings&&J(P.settings))},[]),Ae=j.useCallback(P=>{Td({members:P.members||[],bankAccounts:P.bankAccounts||[],investments:P.investments||[],insurancePolicies:P.insurancePolicies||[],liabilities:P.liabilities||[],otherInvestments:P.otherInvestments||[],stockPortfolios:P.stockPortfolios||[],stockHoldings:P.stockHoldings||[],stockTransactions:P.stockTransactions||[],mfPortfolios:P.mfPortfolios||[],mfHoldings:P.mfHoldings||[],mfTransactions:P.mfTransactions||[],goals:P.goals||[],reminders:P.reminders||[],goalPortfolioMappings:P.goalPortfolioMappings||[]})},[]),it=j.useCallback(async(P=!1)=>{try{P?b(!0):h(!0),g(null);const ue=await Ui();we(ue),Ae(ue)}catch(ue){g(ue.message)}finally{h(!1),b(!1)}},[we,Ae]),Ze=j.useCallback(async()=>{const P=await pp();w(P||[]),ba("members",P||[])},[]),St=j.useCallback(async()=>{const P=await yp();E(P||[]),ba("bankAccounts",P||[])},[]),re=j.useCallback(async()=>{const P=await Sp();S(P||[]),ba("investments",P||[])},[]),ve=j.useCallback(async()=>{const P=await kp();p(P||[]),ba("insurancePolicies",P||[])},[]),Fe=j.useCallback(async()=>{const P=await Dp();_(P||[]),ba("liabilities",P||[])},[]),vt=j.useCallback(async()=>{const P=await Op();q(P||[]),ba("otherInvestments",P||[])},[]),We=j.useCallback(async()=>{const[P,ue]=await Promise.all([Ap(),Cy()]);ne(P||[]),B(ue||[]),ba("goals",P||[]),ba("goalPortfolioMappings",ue||[])},[]),_t=j.useCallback(async()=>{const P=await Up();ye(P||[]),ba("reminders",P||[])},[]),dt=j.useCallback(async()=>{const[P,ue,Tt]=await Promise.all([py(),Ry(),Ly()]);M(P||[]),V(ue||[]),k(Tt||[]),Td({mfPortfolios:P||[],mfHoldings:ue||[],mfTransactions:Tt||[]})},[]),kt=j.useCallback(async()=>{const[P,ue,Tt]=await Promise.all([Hp(),Oy(),Iy()]);z(P||[]),te(ue||[]),H(Tt||[]),Td({stockPortfolios:P||[],stockHoldings:ue||[],stockTransactions:Tt||[]})},[]),Sa=j.useCallback(async()=>{const P=await Uy();J(P||{}),ba("settings",P||{})},[]),Ji=j.useCallback(async P=>{await $y(P),await Sa()},[Sa]),Jn=j.useCallback(async()=>{try{const ue=(await Hy())?.completed??!1;be(ue);try{sessionStorage.setItem(_i,JSON.stringify(ue))}catch{}}catch{be(!1);try{sessionStorage.setItem(_i,JSON.stringify(!1))}catch{}}},[]),wt=j.useCallback(async P=>{const ue=await qy(P);if(ue?.success){be(!0);try{sessionStorage.setItem(_i,JSON.stringify(!0))}catch{}}return ue},[]);j.useEffect(()=>{if(!o){h(!1);return}if(je.current)return;je.current=!0;async function P(){const ue=await Yy(),Tt=Object.keys(ue).length>0;Tt&&(we(ue),h(!1));try{Tt&&b(!0);const na=await Ui();we(na),Ae(na)}catch(na){Tt||g(na.message)}finally{h(!1),b(!1)}}P(),Sa().catch(()=>{}),u!==!0&&Jn().catch(()=>{})},[o,we,Ae,Sa,Jn]),j.useEffect(()=>{o||(je.current=!1)},[o]);const Wi=j.useCallback(async P=>{const ue=await bp(P);return await Ze(),ue},[Ze]),Wn=j.useCallback(async(P,ue)=>{await vp({memberId:P,...ue}),await Ze()},[Ze]),er=j.useCallback(async P=>{await gp(P),await Ze()},[Ze]),$l=j.useCallback(async P=>{const ue=await jp(P);return await St(),ue},[St]),eo=j.useCallback(async(P,ue)=>{await fy({accountId:P,...ue}),await St()},[St]),tr=j.useCallback(async P=>{await Np(P),await St()},[St]),to=j.useCallback(async P=>{const ue=await wp(P);return await re(),ue},[re]),ao=j.useCallback(async(P,ue)=>{await hy({accountId:P,...ue}),await re()},[re]),pl=j.useCallback(async P=>{await Cp(P),await re()},[re]),Ct=j.useCallback(async P=>{const ue=await Ep(P);return await ve(),ue},[ve]),ua=j.useCallback(async(P,ue)=>{await Ty({policyId:P,...ue}),await ve()},[ve]),At=j.useCallback(async P=>{await zp(P),await ve()},[ve]),lo=j.useCallback(async P=>{const ue=await Rp(P);return await Fe(),ue},[Fe]),so=j.useCallback(async(P,ue)=>{await My({liabilityId:P,...ue}),await Fe()},[Fe]),no=j.useCallback(async P=>{await Lp(P),await Fe()},[Fe]),Pl=j.useCallback(async P=>{const ue=await Ip(P);return await vt(),P.quickLoan&&await Fe(),ue},[vt,Fe]),Fl=j.useCallback(async(P,ue)=>{await ky({investmentId:P,...ue}),await vt()},[vt]),Gl=j.useCallback(async P=>{await _p(P),await vt()},[vt]),wa=j.useCallback(async P=>{const ue=await Tp(P);return await We(),ue},[We]),Vl=j.useCallback(async(P,ue)=>{await wy(P,ue),await We()},[We]),bl=j.useCallback(async P=>{await Mp(P),await We()},[We]),ro=j.useCallback(async P=>{const ue=await $p(P);return await _t(),ue},[_t]),ar=j.useCallback(async(P,ue)=>{await _y({reminderId:P,...ue}),await _t()},[_t]),$s=j.useCallback(async P=>{await Pp(P),await _t()},[_t]),vl=j.useCallback(async(P,ue)=>{await Ay(P,ue),await We()},[We]),io=j.useCallback(async P=>{const ue=await qp(P);return await kt(),ue},[kt]),lr=j.useCallback(async(P,ue)=>{await Ey({portfolioId:P,...ue}),await kt()},[kt]),sr=j.useCallback(async P=>{await Bp(P),await kt()},[kt]),nr=j.useCallback(async P=>{const ue=await zy(P);return await kt(),ue},[kt]),Ps=j.useCallback(async P=>{const ue=await Dy(P);return await kt(),ue},[kt]),Fs=j.useCallback(async P=>{const ue=await by(P);return await dt(),ue},[dt]),rr=j.useCallback(async(P,ue)=>{await vy({portfolioId:P,...ue}),await dt()},[dt]),ir=j.useCallback(async P=>{await gy(P),await dt()},[dt]),ma=j.useCallback(async(P,ue)=>{const Tt=await yy({...P,transactionType:ue});return await dt(),Tt},[dt]),ot=j.useCallback(async P=>{const ue=await jy(P);return await dt(),ue},[dt]),gt=j.useCallback(async P=>{const ue=await Ny(P);return await dt(),ue},[dt]),Ga=j.useCallback(async(P,ue)=>{await Sy(P,ue),await dt()},[dt]),Gs=d.filter(P=>P.status==="Active"),oo=A.filter(P=>P.status==="Active"),co=C.filter(P=>P.status==="Active");return a.jsx(Yp.Provider,{value:{loading:c,isRefreshing:m,error:x,refreshData:it,members:d,banks:A,investments:C,insurancePolicies:v,liabilityList:y,otherInvList:O,activeMembers:Gs,activeBanks:oo,activeInvestmentAccounts:co,addMember:Wi,updateMember:Wn,deleteMember:er,addBankAccount:$l,updateBankAccount:eo,deleteBankAccount:tr,addInvestmentAccount:to,updateInvestmentAccount:ao,deleteInvestmentAccount:pl,addInsurance:Ct,updateInsurance:ua,deleteInsurance:At,addLiability:lo,updateLiability:so,deleteLiability:no,addOtherInvestment:Pl,updateOtherInvestment:Fl,deleteOtherInvestment:Gl,goalList:K,addGoal:wa,updateGoal:Vl,deleteGoal:bl,reminderList:fe,addReminder:ro,updateReminder:ar,deleteReminder:$s,goalPortfolioMappings:N,updateGoalMappings:vl,stockPortfolios:Y,stockHoldings:L,stockTransactions:oe,addStockPortfolio:io,updateStockPortfolio:lr,deleteStockPortfolio:sr,buyStock:nr,sellStock:Ps,mfPortfolios:se,mfHoldings:ie,mfTransactions:R,addMFPortfolio:Fs,updateMFPortfolio:rr,deleteMFPortfolio:ir,investMF:ma,redeemMF:ot,switchMF:gt,updateHoldingAllocations:Ga,settings:W,updateSettings:Ji,refreshSettings:Sa,healthCheckCompleted:de,completeHealthCheck:wt},children:n})}function ke(){return j.useContext(Yp)}const Qp=j.createContext();function aj({children:n}){const{activeMembers:o}=ke(),[u,c]=j.useState("all"),h=o.find(m=>m.memberId===u)||null;return a.jsx(Qp.Provider,{value:{selectedMember:u,setSelectedMember:c,member:h,familyMembers:o},children:n})}function bt(){return j.useContext(Qp)}const Xp=(...n)=>n.filter((o,u,c)=>!!o&&o.trim()!==""&&c.indexOf(o)===u).join(" ").trim();const lj=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();const sj=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(o,u,c)=>c?c.toUpperCase():u.toLowerCase());const ph=n=>{const o=sj(n);return o.charAt(0).toUpperCase()+o.slice(1)};var nj={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const rj=n=>{for(const o in n)if(o.startsWith("aria-")||o==="role"||o==="title")return!0;return!1};const ij=j.forwardRef(({color:n="currentColor",size:o=24,strokeWidth:u=2,absoluteStrokeWidth:c,className:h="",children:m,iconNode:b,...x},g)=>j.createElement("svg",{ref:g,...nj,width:o,height:o,stroke:n,strokeWidth:c?Number(u)*24/Number(o):u,className:Xp("lucide",h),...!m&&!rj(x)&&{"aria-hidden":"true"},...x},[...b.map(([d,w])=>j.createElement(d,w)),...Array.isArray(m)?m:[m]]));const me=(n,o)=>{const u=j.forwardRef(({className:c,...h},m)=>j.createElement(ij,{ref:m,iconNode:o,className:Xp(`lucide-${lj(ph(n))}`,`lucide-${n}`,c),...h}));return u.displayName=ph(n),u};const oj=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],cj=me("arrow-down",oj);const dj=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],uj=me("arrow-right",dj);const mj=[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]],xj=me("arrow-up-down",mj);const fj=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M17 17H4a1 1 0 0 1-.74-1.673C4.59 13.956 6 12.499 6 8a6 6 0 0 1 .258-1.742",key:"178tsu"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M8.668 3.01A6 6 0 0 1 18 8c0 2.687.77 4.653 1.707 6.05",key:"1hqiys"}]],hj=me("bell-off",fj);const pj=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],Zp=me("bell",pj);const bj=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],$i=me("briefcase",bj);const vj=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],gj=me("building-2",vj);const yj=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],Os=me("chart-column",yj);const jj=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],bh=me("check",jj);const Nj=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Ul=me("chevron-down",Nj);const Sj=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],wj=me("chevron-left",Sj);const Cj=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],$n=me("chevron-right",Cj);const Aj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Tj=me("circle-alert",Aj);const Mj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 8v8",key:"napkw2"}],["path",{d:"m8 12 4 4 4-4",key:"k98ssh"}]],Kp=me("circle-arrow-down",Mj);const kj=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Ej=me("circle-check-big",kj);const zj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Xn=me("circle-check",zj);const Dj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Rj=me("circle-x",Dj);const Lj=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]],Jp=me("clipboard-check",Lj);const Oj=[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]],Ij=me("coffee",Oj);const _j=[["rect",{x:"2",y:"6",width:"20",height:"8",rx:"1",key:"1estib"}],["path",{d:"M17 14v7",key:"7m2elx"}],["path",{d:"M7 14v7",key:"1cm7wv"}],["path",{d:"M17 3v3",key:"1v4jwn"}],["path",{d:"M7 3v3",key:"7o6guu"}],["path",{d:"M10 14 2.3 6.3",key:"1023jk"}],["path",{d:"m14 6 7.7 7.7",key:"1s8pl2"}],["path",{d:"m8 6 8 8",key:"hl96qh"}]],Hj=me("construction",_j);const qj=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],Gn=me("credit-card",qj);const Bj=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],Uj=me("database",Bj);const $j=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],Pj=me("dollar-sign",$j);const Fj=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],Gj=me("ellipsis",Fj);const Vj=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Yj=me("eye",Vj);const Qj=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]],Xj=me("file-spreadsheet",Qj);const Zj=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],tu=me("file-text",Zj);const Kj=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],Jj=me("funnel",Kj);const Wj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],e1=me("globe",Wj);const t1=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],Pi=me("heart",t1);const a1=[["path",{d:"M6 3h12",key:"ggurg9"}],["path",{d:"M6 8h12",key:"6g4wlu"}],["path",{d:"m6 13 8.5 8",key:"u1kupk"}],["path",{d:"M6 13h3",key:"wdp6ag"}],["path",{d:"M9 13c6.667 0 6.667-10 0-10",key:"1nkvk2"}]],l1=me("indian-rupee",a1);const s1=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Wp=me("info",s1);const n1=[["path",{d:"M10 18v-7",key:"wt116b"}],["path",{d:"M11.12 2.198a2 2 0 0 1 1.76.006l7.866 3.847c.476.233.31.949-.22.949H3.474c-.53 0-.695-.716-.22-.949z",key:"1m329m"}],["path",{d:"M14 18v-7",key:"vav6t3"}],["path",{d:"M18 18v-7",key:"aexdmj"}],["path",{d:"M3 22h18",key:"8prr45"}],["path",{d:"M6 18v-7",key:"1ivflk"}]],Vn=me("landmark",n1);const r1=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],eb=me("layers",r1);const i1=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],tb=me("layout-dashboard",i1);const o1=[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]],Fi=me("link-2",o1);const c1=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],Gi=me("list",c1);const d1=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],u1=me("loader-circle",d1);const m1=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Md=me("lock",m1);const x1=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],f1=me("log-in",x1);const h1=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],ab=me("log-out",h1);const p1=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],lb=me("mail",p1);const b1=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],v1=me("menu",b1);const g1=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],sb=me("moon",g1);const y1=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],nb=me("package",y1);const j1=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"m16 15-3-3 3-3",key:"14y99z"}]],N1=me("panel-left-close",j1);const S1=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"m14 9 3 3-3 3",key:"8010ee"}]],w1=me("panel-left-open",S1);const C1=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],ya=me("pencil",C1);const A1=[["path",{d:"M11 17h3v2a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-3a3.16 3.16 0 0 0 2-2h1a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1h-1a5 5 0 0 0-2-4V3a4 4 0 0 0-3.2 1.6l-.3.4H11a6 6 0 0 0-6 6v1a5 5 0 0 0 2 4v3a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1z",key:"1piglc"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M2 8v1a2 2 0 0 0 2 2h1",key:"1env43"}]],T1=me("piggy-bank",A1);const M1=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],sa=me("plus",M1);const k1=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Is=me("refresh-cw",k1);const E1=[["path",{d:"m2 9 3-3 3 3",key:"1ltn5i"}],["path",{d:"M13 18H7a2 2 0 0 1-2-2V6",key:"1r6tfw"}],["path",{d:"m22 15-3 3-3-3",key:"4rnwn2"}],["path",{d:"M11 6h6a2 2 0 0 1 2 2v10",key:"2f72bc"}]],z1=me("repeat-2",E1);const D1=[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]],R1=me("repeat",D1);const L1=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],O1=me("save",L1);const I1=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],_1=me("search",I1);const H1=[["path",{d:"M14 17H5",key:"gfn3mx"}],["path",{d:"M19 7h-9",key:"6i9tg"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]],q1=me("settings-2",H1);const B1=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],rb=me("settings",B1);const U1=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Il=me("shield",U1);const $1=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],Ud=me("sun",$1);const P1=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Zn=me("target",P1);const F1=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],ib=me("trash-2",F1);const G1=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],Kn=me("trending-down",G1);const V1=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],Hl=me("trending-up",V1);const Y1=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Ki=me("triangle-alert",Y1);const Q1=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],vh=me("trophy",Q1);const X1=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Z1=me("user",X1);const K1=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],_s=me("users",K1);const J1=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],_l=me("wallet",J1);const W1=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],au=me("x",W1);const eN=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],$d=me("zap",eN),gh=[{label:"Dashboard",icon:tb,path:"/dashboard"},{label:"Family",icon:_s,path:"/family"},{label:"Accounts",icon:Gn,children:[{label:"Bank Accounts",icon:Vn,path:"/accounts/bank"},{label:"Investment A/c",icon:$i,path:"/accounts/investment"}]},{label:"Insurance",icon:Il,path:"/insurance"},{label:"Investments",icon:_l,children:[{label:"Mutual Funds",icon:_l,path:"/investments/mutual-funds"},{label:"Stocks",icon:Os,path:"/investments/stocks"},{label:"Other Investments",icon:nb,path:"/investments/other"}]},{label:"Liabilities",icon:Gn,path:"/liabilities"},{label:"Goals",icon:Zn,path:"/goals"},{label:"Reports",icon:tu,path:"/reports"},{label:"Settings",icon:rb,path:"/settings"}];function tN({open:n,onClose:o,collapsed:u,onToggleCollapse:c}){const h=la(),m=gh.filter(d=>d.children?.some(w=>h.pathname.startsWith(w.path))).map(d=>d.label),[b,x]=j.useState(new Set(m));function g(d){x(w=>{const A=new Set(w);return A.has(d)?A.delete(d):A.add(d),A})}return a.jsxs(a.Fragment,{children:[n&&a.jsx("div",{className:"fixed inset-0 bg-black/60 z-40 lg:hidden",onClick:o}),a.jsxs("aside",{className:`
        fixed top-0 left-0 z-50 h-full
        lg:relative lg:top-auto lg:left-auto lg:z-auto lg:h-auto
        ${u?"lg:w-[60px]":"lg:w-56"}
        w-56 bg-[var(--bg-sidebar)] border-r border-[var(--border)]
        flex flex-col transition-all duration-300
        lg:translate-x-0
        ${n?"translate-x-0":"-translate-x-full"}
      `,children:[a.jsxs("div",{className:"flex items-center justify-between px-3 h-12 border-b border-[var(--border)] shrink-0 lg:hidden",children:[a.jsx("p",{className:"text-xs font-bold text-[var(--text-muted)] uppercase tracking-wider",children:"Menu"}),a.jsx("button",{onClick:o,className:"p-1.5 rounded-md text-[var(--text-dim)] hover:text-[var(--text-primary)]",children:a.jsx(au,{size:16})})]}),a.jsx("nav",{className:"flex-1 py-2 overflow-y-auto overflow-x-hidden",children:gh.map(d=>d.children?a.jsx(aN,{item:d,isOpen:b.has(d.label),onToggle:()=>g(d.label),onNavigate:o,currentPath:h.pathname,collapsed:u},d.label):a.jsx(ob,{item:d,onNavigate:o,collapsed:u},d.path))}),a.jsx("div",{className:"hidden lg:block border-t border-[var(--border)] shrink-0",children:a.jsx("button",{onClick:c,className:`flex items-center gap-2 w-full px-3 py-2.5 text-[var(--text-dim)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-hover)] transition-colors text-xs font-medium ${u?"justify-center":""}`,title:u?"Expand sidebar":"Collapse sidebar",children:u?a.jsx(w1,{size:15}):a.jsxs(a.Fragment,{children:[a.jsx(N1,{size:15}),a.jsx("span",{children:"Collapse"})]})})})]})]})}function ob({item:n,onNavigate:o,nested:u,collapsed:c}){const{label:h,icon:m,path:b}=n;return a.jsx(Xi,{to:b,onClick:o,end:b==="/",className:({isActive:x})=>`group flex items-center gap-2.5 ${c?"justify-center px-2 py-2.5":u?"pl-11 pr-4 py-[7px]":"px-4 py-2.5"} text-[13px] font-medium transition-all ${c?"":"border-r-2"} ${x?`bg-[var(--sidebar-active-bg)] text-[var(--sidebar-active-text)] ${c?"border-l-2 border-[var(--sidebar-active-text)]":"border-[var(--sidebar-active-text)]"}`:`text-[var(--text-muted)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-hover)] ${c?"":"border-transparent"}`}`,title:c?h:void 0,children:({isActive:x})=>a.jsxs(a.Fragment,{children:[a.jsx(m,{size:c?18:u?14:17,strokeWidth:x?2.2:1.7}),!c&&a.jsx("span",{children:h})]})})}function aN({item:n,isOpen:o,onToggle:u,onNavigate:c,currentPath:h,collapsed:m}){const{label:b,icon:x,children:g}=n,d=g.some(w=>h.startsWith(w.path));return m?a.jsx(Xi,{to:g[0].path,onClick:c,className:`group flex items-center justify-center px-2 py-2.5 text-[13px] font-medium transition-all ${d?"bg-[var(--sidebar-active-bg)] text-[var(--sidebar-active-text)] border-l-2 border-[var(--sidebar-active-text)]":"text-[var(--text-muted)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-hover)]"}`,title:b,children:a.jsx(x,{size:18,strokeWidth:d?2.2:1.7})}):a.jsxs("div",{children:[a.jsxs("button",{onClick:u,className:`w-full group flex items-center gap-2.5 px-4 py-2.5 text-[13px] font-medium transition-all border-r-2 border-transparent ${d?"text-[var(--sidebar-active-text)]":"text-[var(--text-muted)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-hover)]"}`,children:[a.jsx(x,{size:17,strokeWidth:d?2.2:1.7}),a.jsx("span",{className:"flex-1 text-left",children:b}),a.jsx(Ul,{size:13,className:`text-[var(--text-dim)] transition-transform duration-200 ${o?"rotate-180":""}`})]}),o&&a.jsx("div",{className:"py-0.5",children:g.map(w=>a.jsx(ob,{item:w,onNavigate:c,nested:!0,collapsed:!1},w.path))})]})}function U(n){return n>=1e7?`${(n/1e7).toFixed(2)} Cr`:n>=1e5?`${(n/1e5).toFixed(2)} L`:n>=1e3?`${(n/1e3).toFixed(0)}K`:`${n.toLocaleString("en-IN")}`}const lN=[{schemeCode:"120503",fundName:"Parag Parikh Liquid Fund - Direct Growth",category:"Liquid",amc:"PPFAS"},{schemeCode:"118989",fundName:"HDFC Low Duration Fund - Direct Growth",category:"Low Duration",amc:"HDFC"},{schemeCode:"113177",fundName:"Nippon India Small Cap Fund - Direct Growth",category:"Small Cap",amc:"Nippon India"},{schemeCode:"122639",fundName:"Parag Parikh Flexi Cap Fund - Direct Growth",category:"Flexi Cap",amc:"PPFAS"},{schemeCode:"100104",fundName:"HDFC Mid Cap Opportunities Fund - Direct Growth",category:"Mid Cap",amc:"HDFC"},{schemeCode:"120716",fundName:"SBI Nifty 50 Index Fund - Direct Growth",category:"Large Cap",amc:"SBI"},{schemeCode:"120465",fundName:"Axis Focused 25 Fund - Direct Growth",category:"Focused",amc:"Axis"},{schemeCode:"119551",fundName:"HDFC Balanced Advantage Fund - Direct Growth",category:"Balanced Advantage",amc:"HDFC"},{schemeCode:"120587",fundName:"ICICI Prudential Equity & Debt Fund - Direct Growth",category:"Aggressive Hybrid",amc:"ICICI Prudential"},{schemeCode:"125494",fundName:"Kotak Debt Hybrid Fund - Direct Growth",category:"Conservative Hybrid",amc:"Kotak"},{schemeCode:"119598",fundName:"Mirae Asset Large Cap Fund - Direct Growth",category:"Large Cap",amc:"Mirae Asset"},{schemeCode:"120505",fundName:"Parag Parikh Tax Saver Fund - Direct Growth",category:"ELSS",amc:"PPFAS"},{schemeCode:"125497",fundName:"Kotak Emerging Equity Fund - Direct Growth",category:"Mid Cap",amc:"Kotak"},{schemeCode:"118834",fundName:"Axis Long Term Equity Fund - Direct Growth",category:"ELSS",amc:"Axis"},{schemeCode:"100119",fundName:"HDFC Top 100 Fund - Direct Growth",category:"Large Cap",amc:"HDFC"},{schemeCode:"120578",fundName:"SBI Small Cap Fund - Direct Growth",category:"Small Cap",amc:"SBI"},{schemeCode:"120847",fundName:"UTI Nifty 50 Index Fund - Direct Growth",category:"Large Cap",amc:"UTI"},{schemeCode:"119597",fundName:"Mirae Asset Tax Saver Fund - Direct Growth",category:"ELSS",amc:"Mirae Asset"},{schemeCode:"135781",fundName:"Quant Small Cap Fund - Direct Growth",category:"Small Cap",amc:"Quant"},{schemeCode:"135782",fundName:"Quant Active Fund - Direct Growth",category:"Multi Cap",amc:"Quant"},{schemeCode:"120586",fundName:"ICICI Prudential Bluechip Fund - Direct Growth",category:"Large Cap",amc:"ICICI Prudential"},{schemeCode:"118701",fundName:"DSP Small Cap Fund - Direct Growth",category:"Small Cap",amc:"DSP"},{schemeCode:"112090",fundName:"Motilal Oswal Midcap Fund - Direct Growth",category:"Mid Cap",amc:"Motilal Oswal"},{schemeCode:"118825",fundName:"Axis Nifty 50 Index Fund - Direct Growth",category:"Large Cap",amc:"Axis"},{schemeCode:"119533",fundName:"HDFC Flexi Cap Fund - Direct Growth",category:"Flexi Cap",amc:"HDFC"}];function sN(n){if(!n||n.length<2)return[];const o=n.toLowerCase();return lN.filter(u=>u.fundName.toLowerCase().includes(o)||u.schemeCode.includes(o)||u.category.toLowerCase().includes(o)||u.amc.toLowerCase().includes(o)).slice(0,15)}const cb="cf_market_data",nN=300*1e3,yh=300*1e3;function rN(){try{const n=sessionStorage.getItem(cb);if(!n)return null;const o=JSON.parse(n);return Date.now()-o._ts>nN?null:o}catch{return null}}function iN(n){try{sessionStorage.setItem(cb,JSON.stringify({...n,_ts:Date.now()}))}catch{}}function oN(){const[n,o]=j.useState(()=>rN()),[u,c]=j.useState(null),h=j.useRef(null),[m,b]=j.useState(!1),[x,g]=j.useState(!1);j.useEffect(()=>{let A=!1;async function E(){try{const S=await Py();if(!A&&S){const v={...S,_ts:Date.now()};o(v),iN(v)}}catch{}}E();const C=setInterval(E,yh);return()=>{A=!0,clearInterval(C)}},[]),j.useEffect(()=>{let A=!1;async function E(){try{const S=await fetch("https://api.coingecko.com/api/v3/simple/price?ids=bitcoin&vs_currencies=inr&include_24hr_change=true");if(!A&&S.ok){const v=await S.json();v.bitcoin&&c({name:"BTC",price:v.bitcoin.inr,changePct:v.bitcoin.inr_24h_change||0,type:"crypto"})}}catch{}}E();const C=setInterval(E,yh);return()=>{A=!0,clearInterval(C)}},[]);const d=[];if(n?.indices&&d.push(...n.indices),n?.metals&&d.push(...n.metals),u&&d.push(u),j.useEffect(()=>{if(!h.current)return;const A=h.current,E=A.parentElement;b(A.scrollWidth>E.clientWidth)},[d.length]),d.length===0)return null;const w=d.length*3;return a.jsxs("div",{className:"bg-[var(--bg-card)]/80 backdrop-blur-sm border-b border-[var(--border-light)] overflow-hidden",onMouseEnter:()=>g(!0),onMouseLeave:()=>g(!1),onTouchStart:()=>g(!0),onTouchEnd:()=>g(!1),children:[a.jsx("div",{className:"overflow-hidden",children:a.jsxs("div",{ref:h,className:"flex items-stretch w-max",style:m?{animation:`ticker-scroll ${w}s linear infinite`,animationPlayState:x?"paused":"running"}:{margin:"0 auto"},children:[d.map((A,E)=>a.jsx(jh,{item:A},A.name+E)),m&&d.map((A,E)=>a.jsx(jh,{item:A},"dup-"+A.name+E))]})}),a.jsx("style",{children:`
        @keyframes ticker-scroll {
          0% { transform: translateX(0); }
          100% { transform: translateX(-50%); }
        }
      `})]})}function jh({item:n}){const o=n.changePct>=0,u=o?a.jsx(Hl,{size:10}):a.jsx(Kn,{size:10}),c=o?"text-emerald-400":"text-[var(--accent-rose)]",h=m=>m>=1e5?`${(m/1e5).toFixed(2)}L`:m>=1e3?`${m.toLocaleString("en-IN",{maximumFractionDigits:0})}`:`${m.toLocaleString("en-IN",{maximumFractionDigits:2})}`;return a.jsxs("div",{className:"flex items-center gap-1.5 px-3 py-1.5 border-r border-[var(--border-light)] last:border-0 shrink-0",children:[a.jsx("span",{className:"text-[10px] font-semibold text-[var(--text-dim)] uppercase whitespace-nowrap",children:n.name}),a.jsx("span",{className:"text-[11px] font-bold text-[var(--text-primary)] tabular-nums whitespace-nowrap",children:n.unit?`${h(n.price)}`:h(n.price)}),n.changePct!==void 0&&n.changePct!==null&&a.jsxs("span",{className:`flex items-center gap-0.5 text-[10px] font-bold tabular-nums ${c}`,children:[u,o?"+":"",n.changePct.toFixed(2),"%"]})]})}const cN="https://raw.githubusercontent.com/jagadeeshkmanne/capital-friends/main/logo.png",ji=["from-violet-500 to-indigo-500","from-rose-500 to-pink-500","from-blue-500 to-cyan-500","from-amber-500 to-orange-500","from-emerald-500 to-teal-500"],Nh=["bg-violet-500","bg-rose-500","bg-blue-500","bg-amber-500","bg-emerald-500"];function dN({onMenuClick:n}){const{theme:o,toggle:u}=Vp(),{selectedMember:c,setSelectedMember:h,familyMembers:m}=bt(),{mfPortfolios:b,mfHoldings:x,stockPortfolios:g,stockHoldings:d,otherInvList:w,liabilityList:A}=ke(),{user:E,signOut:C}=Bl(),[S,v]=j.useState(!1),[p,y]=j.useState(!1),_=j.useRef(null),O=j.useRef(null);j.useEffect(()=>{function L(te){_.current&&!_.current.contains(te.target)&&v(!1),O.current&&!O.current.contains(te.target)&&y(!1)}return(S||p)&&document.addEventListener("mousedown",L),()=>document.removeEventListener("mousedown",L)},[S,p]);const q=m.findIndex(L=>L.memberId===c),Y=q>=0?m[q]:null,z=j.useMemo(()=>{const L=(N,B)=>c==="all"?N:N.filter(W=>W[B]===c),te=L(b.filter(N=>N.status==="Active"),"ownerId"),oe=new Set(te.map(N=>N.portfolioId)),se=x.filter(N=>oe.has(N.portfolioId)&&N.units>0).reduce((N,B)=>N+B.currentValue,0),M=L(g.filter(N=>N.status==="Active"),"ownerId"),ie=new Set(M.map(N=>N.portfolioId)),R=d.filter(N=>ie.has(N.portfolioId)).reduce((N,B)=>N+B.currentValue,0),K=L(w.filter(N=>N.status==="Active"),"familyMemberId").reduce((N,B)=>N+B.currentValue,0),fe=L(A.filter(N=>N.status==="Active"),"familyMemberId").reduce((N,B)=>N+B.outstandingBalance,0),ye=se+R+K;return{netWorth:ye-fe,totalInv:ye,mfValue:se,stkValue:R,otherValue:K,totalLiab:fe}},[c,b,x,g,d,w,A]);return a.jsxs("header",{className:"sticky top-0 z-30 shrink-0",children:[a.jsx("div",{className:"bg-[var(--bg-header)]/95 backdrop-blur-sm border-b border-[var(--border)]",children:a.jsxs("div",{className:"flex items-center justify-between px-3 sm:px-4 h-14",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:n,className:"lg:hidden p-2 -ml-1.5 rounded-lg text-[var(--text-muted)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-hover)] transition-colors",children:a.jsx(v1,{size:20})}),a.jsx("img",{src:cN,alt:"Capital Friends",className:"h-10"})]}),a.jsxs("div",{className:"relative",ref:O,children:[a.jsxs("button",{onClick:()=>y(!p),className:"flex items-center gap-1.5 px-3 py-1 rounded-lg hover:bg-[var(--bg-hover)] transition-colors",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-[9px] font-bold text-[var(--text-muted)] uppercase tracking-wider leading-none",children:"Net Worth"}),a.jsx("p",{className:"text-sm font-bold text-[var(--text-primary)] tabular-nums leading-tight",children:U(z.netWorth)})]}),a.jsx(Wp,{size:12,className:`text-[var(--text-dim)] transition-transform ${p?"text-violet-400":""}`})]}),p&&a.jsx("div",{className:"absolute left-1/2 -translate-x-1/2 top-full mt-2 w-64 rounded-xl bg-[var(--bg-card)] border border-[var(--border)] shadow-xl shadow-black/20 overflow-hidden z-50 animate-in fade-in slide-in-from-top-2 duration-200",children:a.jsxs("div",{className:"px-4 py-3 space-y-1.5",children:[a.jsx("p",{className:"text-[10px] font-bold text-[var(--text-muted)] uppercase tracking-wider",children:"Breakdown"}),z.mfValue>0&&a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("span",{className:"flex items-center gap-1.5 text-xs text-[var(--text-dim)]",children:[a.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-violet-500"}),"Mutual Funds"]}),a.jsx("span",{className:"text-xs font-semibold text-[var(--text-secondary)] tabular-nums",children:U(z.mfValue)})]}),z.stkValue>0&&a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("span",{className:"flex items-center gap-1.5 text-xs text-[var(--text-dim)]",children:[a.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-blue-500"}),"Stocks"]}),a.jsx("span",{className:"text-xs font-semibold text-[var(--text-secondary)] tabular-nums",children:U(z.stkValue)})]}),z.otherValue>0&&a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("span",{className:"flex items-center gap-1.5 text-xs text-[var(--text-dim)]",children:[a.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-emerald-500"}),"Other Investments"]}),a.jsx("span",{className:"text-xs font-semibold text-[var(--text-secondary)] tabular-nums",children:U(z.otherValue)})]}),(z.mfValue>0)+(z.stkValue>0)+(z.otherValue>0)>1&&a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-xs font-semibold text-[var(--text-muted)]",children:"Total Investments"}),a.jsx("span",{className:"text-xs font-bold text-[var(--text-secondary)] tabular-nums",children:U(z.totalInv)})]}),z.totalLiab>0&&a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("span",{className:"flex items-center gap-1.5 text-xs text-[var(--text-dim)]",children:[a.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-rose-500"}),"Liabilities"]}),a.jsxs("span",{className:"text-xs font-semibold text-[var(--accent-rose)] tabular-nums",children:["",U(z.totalLiab)]})]}),a.jsx("div",{className:"border-t border-dashed border-[var(--border-light)] pt-1.5",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-xs font-bold text-[var(--text-primary)]",children:"= Net Worth"}),a.jsx("span",{className:"text-sm font-bold text-[var(--text-primary)] tabular-nums",children:U(z.netWorth)})]})})]})})]}),a.jsxs("div",{className:"flex items-center gap-1.5",children:[a.jsx("button",{onClick:u,className:"p-2 rounded-lg text-[var(--text-muted)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-hover)] transition-colors",title:`Switch to ${o==="dark"?"light":"dark"} mode`,children:o==="dark"?a.jsx(Ud,{size:18}):a.jsx(sb,{size:18})}),a.jsxs("div",{className:"relative",ref:_,children:[a.jsxs("button",{onClick:()=>v(!S),className:"flex items-center gap-1.5 pl-1 pr-2 py-1 rounded-full hover:bg-[var(--bg-hover)] transition-colors",children:[Y?a.jsx("div",{className:`w-8 h-8 rounded-full bg-gradient-to-br ${ji[q%ji.length]} flex items-center justify-center text-white text-xs font-bold shadow-sm`,children:Y.memberName.charAt(0)}):a.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-violet-500 to-indigo-500 flex items-center justify-center text-white shadow-sm",children:a.jsx(_s,{size:14})}),a.jsx(Ul,{size:14,className:`text-[var(--text-muted)] transition-transform ${S?"rotate-180":""}`})]}),S&&a.jsxs("div",{className:"absolute right-0 top-full mt-2 w-56 rounded-xl bg-[var(--bg-card)] border border-[var(--border)] shadow-xl shadow-black/20 overflow-hidden animate-in fade-in slide-in-from-top-2 duration-200 z-50",children:[a.jsx("div",{className:"px-4 py-2.5 border-b border-[var(--border-light)]",children:a.jsx("p",{className:"text-[11px] font-semibold uppercase tracking-wider text-[var(--text-muted)]",children:"Viewing as"})}),a.jsxs("div",{className:"py-1.5",children:[a.jsxs("button",{onClick:()=>{h("all"),v(!1)},className:`w-full flex items-center gap-3 px-4 py-2.5 text-left transition-colors ${c==="all"?"bg-violet-500/10":"hover:bg-[var(--bg-hover)]"}`,children:[a.jsx("div",{className:"w-9 h-9 rounded-full bg-gradient-to-br from-violet-500 to-indigo-500 flex items-center justify-center text-white shadow-sm shrink-0",children:a.jsx(_s,{size:15})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:`text-sm font-semibold truncate ${c==="all"?"text-violet-400":"text-[var(--text-primary)]"}`,children:"Everyone"}),a.jsx("p",{className:"text-[11px] text-[var(--text-muted)]",children:"All family members"})]}),c==="all"&&a.jsx(bh,{size:16,className:"text-violet-400 shrink-0"})]}),m.length>0&&a.jsx("div",{className:"mx-4 my-1 border-t border-[var(--border-light)]"}),m.map((L,te)=>{const oe=c===L.memberId;return a.jsxs("button",{onClick:()=>{h(L.memberId),v(!1)},className:`w-full flex items-center gap-3 px-4 py-2.5 text-left transition-colors ${oe?`${Nh[te%Nh.length]}/10`:"hover:bg-[var(--bg-hover)]"}`,children:[a.jsx("div",{className:`w-9 h-9 rounded-full bg-gradient-to-br ${ji[te%ji.length]} flex items-center justify-center text-white text-sm font-bold shadow-sm shrink-0`,children:L.memberName.charAt(0)}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-semibold truncate text-[var(--text-primary)]",children:L.memberName}),a.jsx("p",{className:"text-[11px] text-[var(--text-muted)]",children:L.relationship||"Family member"})]}),oe&&a.jsx(bh,{size:16,className:"text-emerald-400 shrink-0"})]},L.memberId)})]}),a.jsxs("div",{className:"border-t border-[var(--border-light)] py-1.5",children:[E&&a.jsx("div",{className:"px-4 py-1.5",children:a.jsx("p",{className:"text-[11px] text-[var(--text-muted)] truncate",children:E.email})}),a.jsxs("button",{onClick:()=>{C(),v(!1)},className:"w-full flex items-center gap-3 px-4 py-2.5 text-left text-rose-400 hover:bg-rose-500/10 transition-colors",children:[a.jsx(ab,{size:16}),a.jsx("span",{className:"text-sm font-medium",children:"Sign out"})]})]})]})]})]})]})}),a.jsx(oN,{})]})}function Sh(n){return n>=20?"bg-rose-500/20 text-[var(--accent-rose)]":n>=10?"bg-orange-500/20 text-[var(--accent-orange)]":n>=5?"bg-amber-500/20 text-[var(--accent-amber)]":"bg-slate-500/20 text-[var(--text-muted)]"}function db(){const{mfHoldings:n,mfPortfolios:o}=ke(),u=j.useMemo(()=>o.filter(h=>h.status!=="Inactive").map(h=>{const m=n.filter(g=>g.portfolioId===h.portfolioId&&g.units>0),b=m.reduce((g,d)=>g+d.currentValue,0),x=m.filter(g=>g.athNav>0&&g.belowATHPct>=1).sort((g,d)=>d.belowATHPct-g.belowATHPct).map(g=>({...g,currentPct:b>0?g.currentValue/b*100:0}));return{...h,totalValue:b,opportunities:x}}).filter(h=>h.opportunities.length>0),[o,n]);return u.reduce((h,m)=>h+m.opportunities.length,0)===0?a.jsxs("div",{className:"py-8 text-center",children:[a.jsx("p",{className:"text-sm text-[var(--text-muted)]",children:"No buy opportunities right now"}),a.jsx("p",{className:"text-xs text-[var(--text-dim)] mt-1",children:"All funds are near their all-time highs"})]}):a.jsxs("div",{className:"space-y-4",children:[a.jsx("p",{className:"text-xs text-[var(--text-dim)] px-1",children:"Funds below their All-Time High NAV. Higher discount = better opportunity."}),u.map((h,m)=>a.jsxs("div",{className:"border border-[var(--border-light)] border-l-2 border-l-emerald-500/50 rounded-lg overflow-hidden",children:[a.jsxs("div",{className:"flex items-center gap-2 px-3 py-2.5 bg-[var(--bg-inset)]",children:[a.jsx("span",{className:"text-xs font-bold text-emerald-400 bg-emerald-500/15 w-5 h-5 rounded flex items-center justify-center",children:m+1}),a.jsx("p",{className:"text-sm font-bold text-[var(--text-primary)]",children:h.portfolioName}),a.jsx("span",{className:"text-xs text-[var(--text-muted)]",children:h.ownerName}),a.jsxs("span",{className:"text-xs font-bold px-1.5 py-0.5 rounded-full bg-emerald-500/15 text-emerald-400",children:[h.opportunities.length," funds"]})]}),a.jsx("div",{className:"hidden sm:block overflow-x-auto",children:a.jsxs("table",{className:"w-full text-sm",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b border-[var(--border-light)] bg-[var(--bg-inset)]",children:[a.jsx("th",{className:"text-left py-1.5 px-2 text-xs text-[var(--text-muted)] font-semibold uppercase",children:"Fund"}),a.jsx("th",{className:"text-right py-1.5 px-2 text-xs text-[var(--text-muted)] font-semibold uppercase",children:"ATH NAV"}),a.jsx("th",{className:"text-right py-1.5 px-2 text-xs text-[var(--text-muted)] font-semibold uppercase",children:"Current"}),a.jsx("th",{className:"text-right py-1.5 px-2 text-xs text-[var(--text-muted)] font-semibold uppercase",children:"Below ATH"}),a.jsx("th",{className:"text-right py-1.5 px-2 text-xs text-[var(--text-muted)] font-semibold uppercase",children:"Alloc"}),a.jsx("th",{className:"text-right py-1.5 px-2 text-xs text-[var(--text-muted)] font-semibold uppercase",children:"Value"})]})}),a.jsx("tbody",{children:h.opportunities.map(b=>a.jsxs("tr",{className:"border-b border-[var(--border-light)] last:border-0",children:[a.jsx("td",{className:"py-2 px-2 text-[var(--text-secondary)] max-w-[200px] truncate",children:b.fundName}),a.jsxs("td",{className:"py-2 px-2 text-right text-[var(--text-dim)] tabular-nums",children:["",b.athNav.toFixed(2)]}),a.jsxs("td",{className:"py-2 px-2 text-right text-[var(--text-muted)] tabular-nums",children:["",b.currentNav.toFixed(2)]}),a.jsx("td",{className:"py-2 px-2 text-right",children:a.jsxs("span",{className:`inline-block text-xs font-semibold px-1.5 py-0.5 rounded-full ${Sh(b.belowATHPct)}`,children:["",b.belowATHPct.toFixed(1),"%"]})}),a.jsxs("td",{className:"py-2 px-2 text-right text-[var(--text-muted)] tabular-nums",children:[b.currentPct.toFixed(1),"% / ",b.targetAllocationPct.toFixed(1),"%"]}),a.jsx("td",{className:"py-2 px-2 text-right text-[var(--text-primary)] font-semibold tabular-nums",children:U(b.currentValue)})]},b.holdingId))})]})}),a.jsx("div",{className:"sm:hidden divide-y divide-[var(--border-light)]",children:h.opportunities.map(b=>a.jsxs("div",{className:"px-3 py-2.5",children:[a.jsxs("div",{className:"flex items-start justify-between mb-1",children:[a.jsx("p",{className:"text-xs text-[var(--text-primary)] leading-tight flex-1 mr-2",children:b.fundName}),a.jsxs("span",{className:`shrink-0 text-xs font-semibold px-1.5 py-0.5 rounded-full ${Sh(b.belowATHPct)}`,children:["",b.belowATHPct.toFixed(1),"%"]})]}),a.jsxs("div",{className:"flex items-center gap-3 text-xs text-[var(--text-dim)]",children:[a.jsxs("span",{children:["ATH ",b.athNav.toFixed(2),"  ",b.currentNav.toFixed(2)]}),a.jsxs("span",{children:["Alloc: ",b.currentPct.toFixed(1),"%"]}),a.jsx("span",{className:"font-semibold text-[var(--text-primary)]",children:U(b.currentValue)})]})]},b.holdingId))})]},h.portfolioId))]})}function rt({open:n,onClose:o,title:u,children:c,wide:h}){const m=j.useRef(null);return j.useEffect(()=>(n?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[n]),j.useEffect(()=>{function b(x){x.key==="Escape"&&o()}return n&&window.addEventListener("keydown",b),()=>window.removeEventListener("keydown",b)},[n,o]),n?a.jsxs("div",{ref:m,className:"fixed inset-0 z-50 flex items-start justify-center pt-[5vh] sm:pt-[10vh] px-4",onClick:b=>{b.target===m.current&&o()},children:[a.jsx("div",{className:"fixed inset-0 bg-black/60"}),a.jsxs("div",{className:`relative bg-[var(--bg-card)] border border-[var(--border)] rounded-xl shadow-2xl w-full ${h?"max-w-2xl":"max-w-lg"} max-h-[80vh] flex flex-col animate-fade-in`,children:[a.jsxs("div",{className:"flex items-center justify-between px-5 py-4 border-b border-[var(--border-light)] shrink-0",children:[a.jsx("h2",{className:"text-sm font-bold text-[var(--text-primary)]",children:u}),a.jsx("button",{onClick:o,className:"p-1.5 rounded-lg text-[var(--text-dim)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-hover)] transition-colors",children:a.jsx(au,{size:16})})]}),a.jsx("div",{className:"flex-1 overflow-y-auto px-5 py-4",children:c})]})]}):null}function X({label:n,required:o,error:u,children:c}){return a.jsxs("div",{children:[a.jsxs("label",{className:"block text-xs font-semibold text-[var(--text-muted)] mb-1.5",children:[n,o&&a.jsx("span",{className:"text-rose-500 ml-0.5",children:"*"})]}),c,u&&a.jsx("p",{className:"text-xs text-rose-500 mt-1",children:u})]})}function ce({value:n,onChange:o,placeholder:u,type:c="text",...h}){return a.jsx("input",{type:c,value:n,onChange:m=>o(m.target.value),placeholder:u,className:"w-full px-3 py-2 text-sm bg-[var(--bg-input)] border border-[var(--border-input)] rounded-lg text-[var(--text-primary)] placeholder:text-[var(--text-dim)] focus:outline-none focus:border-[var(--sidebar-active-text)] focus:ring-1 focus:ring-[var(--sidebar-active-text)] transition-colors",...h})}function Se({value:n,onChange:o,options:u,placeholder:c}){return a.jsxs("select",{value:n,onChange:h=>o(h.target.value),className:"w-full px-3 py-2 text-sm bg-[var(--bg-input)] border border-[var(--border-input)] rounded-lg text-[var(--text-primary)] focus:outline-none focus:border-[var(--sidebar-active-text)] focus:ring-1 focus:ring-[var(--sidebar-active-text)] transition-colors",children:[c&&a.jsx("option",{value:"",children:c}),u.map(h=>a.jsx("option",{value:h.value,children:h.label},h.value))]})}function Hs({value:n,onChange:o,placeholder:u,rows:c=3}){return a.jsx("textarea",{value:n,onChange:h=>o(h.target.value),placeholder:u,rows:c,className:"w-full px-3 py-2 text-sm bg-[var(--bg-input)] border border-[var(--border-input)] rounded-lg text-[var(--text-primary)] placeholder:text-[var(--text-dim)] focus:outline-none focus:border-[var(--sidebar-active-text)] focus:ring-1 focus:ring-[var(--sidebar-active-text)] transition-colors resize-none"})}function uN({checked:n,onChange:o,label:u}){return a.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:n,onChange:c=>o(c.target.checked),className:"w-4 h-4 rounded border-[var(--border-input)] bg-[var(--bg-input)] text-violet-500 focus:ring-violet-500"}),a.jsx("span",{className:"text-sm text-[var(--text-secondary)]",children:u})]})}function Nt({onCancel:n,onSubmit:o,submitLabel:u="Save",loading:c}){return a.jsxs("div",{className:"flex items-center justify-end gap-2 pt-4 mt-4 border-t border-[var(--border-light)]",children:[a.jsx("button",{onClick:n,className:"px-4 py-2 text-xs font-semibold text-[var(--text-muted)] hover:text-[var(--text-primary)] rounded-lg hover:bg-[var(--bg-hover)] transition-colors",children:"Cancel"}),a.jsx("button",{onClick:o,disabled:c,className:"px-5 py-2 text-xs font-semibold text-white bg-violet-600 hover:bg-violet-500 rounded-lg transition-colors disabled:opacity-50",children:c?"Saving...":u})]})}function ja({onClick:n,label:o="Deactivate"}){return a.jsx("button",{onClick:n,className:"px-4 py-2 text-xs font-semibold text-rose-400 hover:text-rose-300 hover:bg-rose-500/10 rounded-lg transition-colors",children:o})}const wh=[{key:"sip",label:"Adjust SIP",icon:R1,color:"text-blue-400",dimColor:"text-blue-400/60 hover:text-blue-400",activeBg:"bg-blue-500/20 border border-blue-500/40"},{key:"lumpsum",label:"Lumpsum",icon:l1,color:"text-emerald-400",dimColor:"text-emerald-400/60 hover:text-emerald-400",activeBg:"bg-emerald-500/20 border border-emerald-500/40"},{key:"buysell",label:"Buy / Sell",icon:xj,color:"text-amber-400",dimColor:"text-amber-400/60 hover:text-amber-400",activeBg:"bg-amber-500/20 border border-amber-500/40"}];function Ls(n){return n>=1e5?`${(n/1e5).toFixed(1)}L`:n>=1e3?`${(n/1e3).toFixed(0)}K`:`${Math.round(n)}`}function mN({portfolio:n,holdings:o,totalValue:u}){const c=n.sipTarget||0;if(c<=0)return a.jsx("p",{className:"text-xs text-[var(--text-dim)] py-2",children:"No SIP target set"});const h=o.filter(d=>d.targetAllocationPct>0).map(d=>{const w=u>0?d.currentValue/u*100:0,E=d.targetAllocationPct/100*u-d.currentValue,C=d.targetAllocationPct/100*c;return{...d,currentPct:w,gap:E,normalSIP:C}}),b=h.filter(d=>d.gap>0).reduce((d,w)=>d+w.gap,0),x=h.map(d=>({...d,suggestedSIP:d.gap>0&&b>0?d.gap/b*c:0}));return x.some(d=>Math.abs(d.suggestedSIP-d.normalSIP)>10)?a.jsxs("div",{className:"space-y-2",children:[a.jsx("p",{className:"text-xs text-[var(--text-dim)] px-1",children:"Overweight funds get 0 SIP. All SIP goes to underweight funds to rebalance over time."}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full text-sm",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b border-[var(--border-light)]",children:[a.jsx("th",{className:"text-left py-1.5 px-2 text-xs text-[var(--text-muted)] font-semibold uppercase",children:"Fund"}),a.jsx("th",{className:"text-right py-1.5 px-2 text-xs text-[var(--text-muted)] font-semibold uppercase",children:"Allocation"}),a.jsx("th",{className:"text-right py-1.5 px-2 text-xs text-[var(--text-muted)] font-semibold uppercase",children:"Normal SIP"}),a.jsx("th",{className:"text-right py-1.5 px-2 text-xs text-[var(--text-muted)] font-semibold uppercase",children:"Rebalance SIP"})]})}),a.jsx("tbody",{children:x.map(d=>{const w=d.gap<=0;return a.jsxs("tr",{className:`border-b border-[var(--border-light)] last:border-0 ${w?"opacity-60":""}`,children:[a.jsx("td",{className:"py-2 px-2 text-[var(--text-secondary)] max-w-[180px] truncate",children:d.fundName}),a.jsxs("td",{className:"py-2 px-2 text-right tabular-nums",children:[a.jsxs("span",{className:w?"text-amber-400":"text-[var(--text-dim)]",children:[d.currentPct.toFixed(1),"%"]}),a.jsxs("span",{className:"text-[var(--text-dim)]",children:[" / ",d.targetAllocationPct.toFixed(1),"%"]})]}),a.jsx("td",{className:"py-2 px-2 text-right text-[var(--text-muted)] tabular-nums",children:Ls(d.normalSIP)}),a.jsx("td",{className:"py-2 px-2 text-right font-semibold tabular-nums",children:w?a.jsx("span",{className:"text-amber-400/70",children:"0"}):a.jsx("span",{className:"text-blue-400",children:Ls(d.suggestedSIP)})})]},d.holdingId)})}),a.jsx("tfoot",{children:a.jsxs("tr",{className:"border-t border-[var(--border)]",children:[a.jsx("td",{className:"py-1.5 px-2 text-xs font-bold text-[var(--text-primary)]",colSpan:2,children:"Total"}),a.jsx("td",{className:"py-1.5 px-2 text-right text-xs font-bold text-[var(--text-primary)] tabular-nums",children:Ls(c)}),a.jsx("td",{className:"py-1.5 px-2 text-right text-xs font-bold text-blue-400 tabular-nums",children:Ls(c)})]})})]})})]}):a.jsx("p",{className:"text-xs text-[var(--text-dim)] py-2",children:"SIPs are balanced"})}function xN({portfolio:n,holdings:o,totalValue:u}){const[c,h]=j.useState("");(n.rebalanceThreshold||.05)*100;const m=Number(c)||n.lumpsumTarget||0,b=o.map(g=>{const d=u>0?g.currentValue/u*100:0;return{...g,currentPct:d}}),x=j.useMemo(()=>{if(m<=0)return[];const g=u+m,d=b.map(A=>{const E=A.targetAllocationPct/100*g,C=Math.max(0,E-A.currentValue),S=g>0?(A.currentValue+C)/g*100:0;return{...A,invest:C,newPct:S}}).filter(A=>A.invest>0),w=d.reduce((A,E)=>A+E.invest,0);if(w>0&&Math.abs(w-m)>1){const A=m/w;return d.map(E=>({...E,invest:E.invest*A,newPct:u+m>0?(E.currentValue+E.invest*A)/(u+m)*100:0}))}return d},[b,m,u]);return a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-end gap-3",children:[a.jsx("div",{className:"flex-1 max-w-[200px]",children:a.jsx(X,{label:"Amount ()",children:a.jsx(ce,{type:"number",value:c,onChange:h,placeholder:n.lumpsumTarget?`Default: ${U(n.lumpsumTarget)}`:"Enter amount..."})})}),n.lumpsumTarget>0&&!c&&a.jsx("p",{className:"text-xs text-[var(--text-dim)] pb-2.5",children:"Using target"})]}),m>0&&x.length>0?a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full text-sm",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b border-[var(--border-light)]",children:[a.jsx("th",{className:"text-left py-1.5 px-2 text-xs text-[var(--text-muted)] font-semibold uppercase",children:"Fund"}),a.jsx("th",{className:"text-right py-1.5 px-2 text-xs text-[var(--text-muted)] font-semibold uppercase",children:"Drift"}),a.jsx("th",{className:"text-right py-1.5 px-2 text-xs text-[var(--text-muted)] font-semibold uppercase",children:"Invest"})]})}),a.jsx("tbody",{children:x.map(g=>a.jsxs("tr",{className:"border-b border-[var(--border-light)] last:border-0",children:[a.jsx("td",{className:"py-2 px-2 text-[var(--text-secondary)] max-w-[180px] truncate",children:g.fundName}),a.jsxs("td",{className:"py-2 px-2 text-right text-[var(--text-dim)] tabular-nums",children:[g.currentPct.toFixed(1),"%  ",g.newPct.toFixed(1),"%"]}),a.jsx("td",{className:"py-2 px-2 text-right font-semibold text-emerald-400 tabular-nums",children:Ls(g.invest)})]},g.holdingId))}),a.jsx("tfoot",{children:a.jsxs("tr",{className:"border-t border-[var(--border)]",children:[a.jsx("td",{className:"py-1.5 px-2 text-xs font-bold text-[var(--text-primary)]",colSpan:2,children:"Total"}),a.jsx("td",{className:"py-1.5 px-2 text-right text-xs font-bold text-emerald-400 tabular-nums",children:U(m)})]})})]})}):m>0?a.jsx("p",{className:"text-xs text-[var(--text-dim)] py-2 text-center",children:"Balanced  distributes proportionally"}):null]})}function fN({portfolio:n,holdings:o,totalValue:u}){const c=(n.rebalanceThreshold||.05)*100,h=o.map(m=>{const b=u>0?m.currentValue/u*100:0,x=Math.abs(b-m.targetAllocationPct)>c,g=m.targetAllocationPct/100*u,d=x?g-m.currentValue:0;return{...m,currentPct:b,amount:d}}).filter(m=>Math.abs(m.amount)>=500);return h.length===0?a.jsx("p",{className:"text-xs text-[var(--text-dim)] py-2",children:"Portfolio is balanced"}):a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full text-sm",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b border-[var(--border-light)]",children:[a.jsx("th",{className:"text-left py-1.5 px-2 text-xs text-[var(--text-muted)] font-semibold uppercase",children:"Fund"}),a.jsx("th",{className:"text-right py-1.5 px-2 text-xs text-[var(--text-muted)] font-semibold uppercase",children:"Drift"}),a.jsx("th",{className:"text-right py-1.5 px-2 text-xs text-[var(--text-muted)] font-semibold uppercase",children:"Action"})]})}),a.jsx("tbody",{children:h.map(m=>{const b=m.amount>0;return a.jsxs("tr",{className:"border-b border-[var(--border-light)] last:border-0",children:[a.jsx("td",{className:"py-2 px-2 text-[var(--text-secondary)] max-w-[180px] truncate",children:m.fundName}),a.jsxs("td",{className:"py-2 px-2 text-right text-[var(--text-dim)] tabular-nums",children:[m.currentPct.toFixed(1),"%  ",m.targetAllocationPct.toFixed(1),"%"]}),a.jsx("td",{className:"py-2 px-2 text-right",children:a.jsxs("span",{className:`text-xs font-semibold px-2 py-0.5 rounded-full ${b?"bg-emerald-500/20 text-emerald-400":"bg-rose-500/20 text-[var(--accent-rose)]"}`,children:[b?"Buy":"Sell"," ",Ls(Math.abs(m.amount))]})})]},m.holdingId)})})]})})}function ub(){const{mfHoldings:n,mfPortfolios:o}=ke(),[u,c]=j.useState("sip"),h=j.useMemo(()=>o.filter(m=>m.status!=="Inactive").map(m=>{const b=n.filter(w=>w.portfolioId===m.portfolioId&&w.units>0),x=b.reduce((w,A)=>w+A.currentValue,0),g=(m.rebalanceThreshold||.05)*100,d=b.filter(w=>{const A=x>0?w.currentValue/x*100:0;return Math.abs(A-w.targetAllocationPct)>g}).length;return{...m,holdings:b,totalValue:x,driftedCount:d}}).filter(m=>m.driftedCount>0),[o,n]);return h.length===0?a.jsxs("div",{className:"py-8 text-center",children:[a.jsx("p",{className:"text-sm text-[var(--text-muted)]",children:"All portfolios are balanced"}),a.jsx("p",{className:"text-xs text-[var(--text-dim)] mt-1",children:"No funds exceed their rebalance threshold"})]}):(wh.find(m=>m.key===u),a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"flex bg-[var(--bg-inset)] rounded-lg p-0.5",children:wh.map(({key:m,label:b,icon:x,color:g,dimColor:d,activeBg:w})=>a.jsxs("button",{onClick:()=>c(m),className:`flex-1 flex items-center justify-center gap-1.5 py-2 rounded-md text-xs font-semibold transition-colors ${u===m?`${w} ${g} shadow-sm`:d}`,children:[a.jsx(x,{size:13})," ",b]},m))}),h.map((m,b)=>a.jsxs("div",{className:"border border-[var(--border-light)] border-l-2 border-l-violet-500/50 rounded-lg overflow-hidden",children:[a.jsxs("div",{className:"flex items-center justify-between px-3 py-2.5 bg-[var(--bg-inset)]",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-xs font-bold text-violet-400 bg-violet-500/15 w-5 h-5 rounded flex items-center justify-center",children:b+1}),a.jsx("p",{className:"text-sm font-bold text-[var(--text-primary)]",children:m.portfolioName}),a.jsx("span",{className:"text-xs text-[var(--text-muted)]",children:m.ownerName}),a.jsxs("span",{className:"text-xs font-bold px-1.5 py-0.5 rounded-full bg-amber-500/15 text-amber-400",children:[m.driftedCount," drifted"]})]}),a.jsxs("div",{className:"flex items-center gap-3 text-xs text-[var(--text-muted)]",children:[a.jsx("span",{className:"font-semibold text-[var(--text-secondary)]",children:U(m.totalValue)}),a.jsxs("span",{children:["Threshold: ",((m.rebalanceThreshold||.05)*100).toFixed(0),"%"]}),m.sipTarget>0&&a.jsxs("span",{children:["SIP: ",U(m.sipTarget),"/mo"]})]})]}),a.jsxs("div",{className:"px-3 py-2",children:[u==="sip"&&a.jsx(mN,{portfolio:m,holdings:m.holdings,totalValue:m.totalValue}),u==="lumpsum"&&a.jsx(xN,{portfolio:m,holdings:m.holdings,totalValue:m.totalValue}),u==="buysell"&&a.jsx(fN,{portfolio:m,holdings:m.holdings,totalValue:m.totalValue})]})]},m.portfolioId))]}))}function hN(){const{mfHoldings:n,mfPortfolios:o}=ke(),[u,c]=j.useState(!1),[h,m]=j.useState("ath"),{buyOppCount:b,rebalanceCount:x}=j.useMemo(()=>{let w=0,A=0;return o.filter(E=>E.status!=="Inactive").forEach(E=>{const C=n.filter(p=>p.portfolioId===E.portfolioId&&p.units>0),S=C.reduce((p,y)=>p+y.currentValue,0),v=(E.rebalanceThreshold||.05)*100;C.forEach(p=>{p.athNav>0&&p.belowATHPct>=1&&w++;const y=S>0?p.currentValue/S*100:0;Math.abs(y-p.targetAllocationPct)>v&&A++})}),{buyOppCount:w,rebalanceCount:A}},[o,n]),g=b>0,d=x>0;return!g&&!d?null:a.jsxs("div",{className:"mb-4",children:[a.jsxs("div",{className:"w-full flex items-center gap-0 bg-[var(--bg-card)] rounded-xl border border-[var(--border)] animate-glow-mixed",children:[a.jsxs("div",{className:"flex items-center gap-0 flex-1 min-w-0 overflow-x-auto no-scrollbar",children:[g&&a.jsxs("button",{onClick:()=>{u&&h==="ath"?c(!1):(m("ath"),c(!0))},className:`flex items-center gap-1.5 px-4 py-2.5 text-xs font-medium whitespace-nowrap transition-colors hover:bg-[var(--bg-hover)] rounded-l-xl ${u&&h==="ath"?"bg-[var(--bg-hover)]":""}`,children:[a.jsx(Kn,{size:13,className:"text-emerald-400 shrink-0"}),a.jsx("span",{className:"text-[var(--text-muted)]",children:"Buy Opp."}),a.jsx("span",{className:"text-xs font-bold px-1.5 py-0.5 rounded-full bg-emerald-500/15 text-emerald-400",children:b})]}),g&&d&&a.jsx("span",{className:"w-px h-4 bg-[var(--border)] shrink-0"}),d&&a.jsxs("button",{onClick:()=>{u&&h==="rebal"?c(!1):(m("rebal"),c(!0))},className:`flex items-center gap-1.5 px-4 py-2.5 text-xs font-medium whitespace-nowrap transition-colors hover:bg-[var(--bg-hover)] ${g?"":"rounded-l-xl"} ${u&&h==="rebal"?"bg-[var(--bg-hover)]":""}`,children:[a.jsx(Is,{size:13,className:"text-[var(--accent-violet)] shrink-0"}),a.jsx("span",{className:"text-[var(--text-muted)]",children:"Rebalance"}),a.jsx("span",{className:"text-xs font-bold px-1.5 py-0.5 rounded-full bg-violet-500/15 text-[var(--accent-violet)]",children:x})]})]}),a.jsx("button",{onClick:()=>c(!u),className:"px-3 py-2.5 hover:bg-[var(--bg-hover)] rounded-r-xl transition-colors",children:a.jsx(Ul,{size:14,className:`text-[var(--text-dim)] shrink-0 transition-transform ${u?"rotate-180":""}`})})]}),u&&a.jsxs("div",{className:"mt-2 bg-[var(--bg-card)] rounded-xl border border-[var(--border)] overflow-hidden",children:[h==="ath"&&g&&a.jsx("div",{className:"p-3",children:a.jsx(db,{})}),h==="rebal"&&d&&a.jsx("div",{className:"p-3",children:a.jsx(ub,{})})]})]})}const pN=[{label:"Home",icon:tb,path:"/dashboard"},{label:"Accounts",icon:Gn,path:"/accounts/bank"},{label:"Invest",icon:_l,path:"/investments/mutual-funds"},{label:"Goals",icon:Zn,path:"/goals"},{label:"More",icon:Gj,path:"/more"}];function bN(){return a.jsx("nav",{className:"lg:hidden fixed bottom-0 left-0 right-0 z-40 bg-[var(--bg-sidebar)] border-t border-[var(--border)] safe-bottom",children:a.jsx("div",{className:"flex items-center justify-around h-[56px]",children:pN.map(({label:n,icon:o,path:u})=>a.jsx(Xi,{to:u,end:u==="/dashboard",className:({isActive:c})=>`relative flex flex-col items-center justify-center gap-0.5 w-full h-full text-xs font-medium transition-colors ${c?"text-[var(--sidebar-active-text)]":"text-[var(--text-dim)]"}`,children:({isActive:c})=>a.jsxs(a.Fragment,{children:[c&&a.jsx("span",{className:"absolute top-0 w-10 h-[2.5px] bg-[var(--sidebar-active-text)] rounded-b-full"}),a.jsx("div",{className:`flex items-center justify-center w-9 h-9 rounded-xl transition-colors ${c?"bg-[var(--sidebar-active-bg)]":""}`,children:a.jsx(o,{size:19,strokeWidth:c?2.2:1.5})}),a.jsx("span",{className:c?"font-semibold":"",children:n})]})},u))})})}const vN="/logo-small.png",kd=[{key:"auth",label:"Signing in"},{key:"data",label:"Loading your data"},{key:"health",label:"Checking health status"},{key:"ready",label:"Almost ready"}];function Pn({phase:n="auth"}){const[o,u]=j.useState("");j.useEffect(()=>{const h=setInterval(()=>{u(m=>m.length>=3?"":m+".")},500);return()=>clearInterval(h)},[]);const c=kd.findIndex(h=>h.key===n);return a.jsx("div",{className:"flex h-dvh items-center justify-center bg-[var(--bg-base)]",children:a.jsxs("div",{className:"flex flex-col items-center gap-8",children:[a.jsx("img",{src:vN,alt:"Capital Friends",className:"h-16 w-16 animate-pulse"}),a.jsxs("div",{className:"flex flex-col items-center gap-4 min-w-[220px]",children:[kd.map((h,m)=>{const b=m===c,x=m<c;return a.jsxs("div",{className:"flex items-center gap-3 w-full",children:[a.jsx("div",{className:`flex-shrink-0 w-5 h-5 rounded-full flex items-center justify-center text-xs font-medium transition-all duration-300 ${x?"bg-green-500 text-white":b?"bg-violet-500 text-white animate-pulse":"bg-[var(--border)] text-[var(--text-muted)]"}`,children:x?"":m+1}),a.jsxs("span",{className:`text-sm transition-all duration-300 ${x?"text-green-400":b?"text-[var(--text-primary)] font-medium":"text-[var(--text-muted)]"}`,children:[h.label,b?o:""]})]},h.key)}),a.jsx("div",{className:"w-full h-1 rounded-full bg-[var(--border)] overflow-hidden mt-2",children:a.jsx("div",{className:"h-full rounded-full bg-gradient-to-r from-violet-500 to-cyan-500 transition-all duration-500 ease-out",style:{width:`${(c+1)/kd.length*100}%`}})})]})]})})}const gN=["/investments"];function yN(){const[n,o]=j.useState(!1),[u,c]=j.useState(!1),{pathname:h}=la(),m=!gN.some(g=>h.startsWith(g)),{loading:b,error:x}=ke();return b?a.jsx(Pn,{}):x?a.jsx("div",{className:"flex h-dvh items-center justify-center bg-[var(--bg-base)]",children:a.jsxs("div",{className:"flex flex-col items-center gap-4 text-center px-6",children:[a.jsx("img",{src:"/logo-small.png",alt:"Capital Friends",className:"h-16 w-16 opacity-50"}),a.jsx("p",{className:"text-rose-400 text-sm font-medium",children:x}),a.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 text-sm font-medium rounded-lg bg-violet-600 hover:bg-violet-500 text-white transition-colors",children:"Retry"})]})}):a.jsxs("div",{className:"flex flex-col h-dvh bg-[var(--bg-base)] overflow-hidden",children:[a.jsx(dN,{onMenuClick:()=>o(!0)}),a.jsxs("div",{className:"flex flex-1 min-h-0 overflow-hidden",children:[a.jsx(tN,{open:n,onClose:()=>o(!1),collapsed:u,onToggleCollapse:()=>c(!u)}),a.jsx("main",{className:"flex-1 overflow-y-auto overscroll-contain pb-20 lg:pb-0",children:a.jsxs("div",{className:"px-3 sm:px-4 py-3 sm:py-4 w-full",children:[m&&a.jsx(hN,{}),a.jsx(dp,{})]})})]}),a.jsx(bN,{})]})}function jN(){const{isAuthenticated:n,loading:o}=Bl(),{healthCheckCompleted:u,loading:c}=ke(),h=la();return o&&!n?a.jsx(Pn,{phase:"auth"}):!n&&!o?a.jsx(Hd,{to:"/",replace:!0}):c?a.jsx(Pn,{phase:"data"}):u===null?a.jsx(Pn,{phase:"health"}):u===!1&&h.pathname!=="/health-check"?a.jsx(Hd,{to:"/health-check",replace:!0}):a.jsx(dp,{})}const Ch="https://raw.githubusercontent.com/jagadeeshkmanne/capital-friends/main/logo.png";function mb(){const{isAuthenticated:n,loading:o,error:u,signIn:c}=Bl(),h=ql(),[m,b]=j.useState(0),[x,g]=j.useState(!1),d=j.useRef(null),w=j.useCallback(()=>{d.current&&clearInterval(d.current),d.current=setInterval(()=>{g(S=>(S||b(v=>(v+1)%4),S))},5e3)},[]);j.useEffect(()=>(w(),()=>{d.current&&clearInterval(d.current)}),[w]);function A(S){b(S),w()}if(j.useEffect(()=>{n&&h("/dashboard",{replace:!0})},[n,h]),o)return a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-[#080d1a]",children:a.jsx("img",{src:"/logo-small.png",alt:"",className:"h-16 w-16 animate-pulse"})});const E=[{id:"ath",label:"ATH Tracking",icon:a.jsx(Hl,{size:18}),color:"emerald",tagline:"Spot Buying Opportunities",desc:"See how far each mutual fund is from its All-Time High NAV. When a quality fund dips 10-20% below ATH, it's your signal to invest more  via SIP increase or lumpsum.",mock:a.jsx(SN,{})},{id:"rebalance",label:"Rebalancing",icon:a.jsx(Is,{size:18}),color:"violet",tagline:"Know Exactly What to Buy or Sell",desc:"Set target allocation for each fund. When your portfolio drifts, Capital Friends tells you exactly how much to adjust  via SIP changes, lumpsum top-ups, or buy/sell actions.",mock:a.jsx(wN,{})},{id:"goals",label:"Goal Linking",icon:a.jsx(Zn,{size:18}),color:"cyan",tagline:"Link Portfolios to Goals",desc:"Create goals like retirement, child education, or emergency fund. Link MF portfolios with allocation percentages. Goal progress updates automatically as NAVs change daily.",mock:a.jsx(CN,{})},{id:"dashboard",label:"Family View",icon:a.jsx(_s,{size:18}),color:"amber",tagline:"Everyone's Wealth, One Dashboard",desc:"Switch between family members in one click. See combined or individual net worth, investments, insurance, loans  everything your family owns, in one place.",mock:a.jsx(NN,{})}],C=E[m];return a.jsxs("div",{className:"min-h-screen bg-[#080d1a] text-slate-200",children:[a.jsx("header",{className:"sticky top-0 z-50 bg-[#0a0f1f]/95 backdrop-blur-sm border-b border-white/[0.06]",children:a.jsxs("div",{className:"flex items-center justify-between px-3 sm:px-4 h-14",children:[a.jsx("img",{src:Ch,alt:"Capital Friends",className:"h-12"}),a.jsxs("button",{onClick:c,className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-gradient-to-r from-violet-600 to-cyan-600 text-white text-sm font-semibold hover:from-violet-500 hover:to-cyan-500 transition-all cursor-pointer",children:[a.jsx(Th,{s:14})," Sign In"]})]})}),a.jsxs("section",{className:"relative px-5 sm:px-8 lg:px-16 pt-10 sm:pt-14 pb-8 sm:pb-10 overflow-hidden",children:[a.jsx("div",{className:"absolute top-0 left-1/4 w-[600px] h-[400px] bg-violet-600/8 rounded-full blur-[120px] pointer-events-none"}),a.jsx("div",{className:"absolute top-20 right-1/4 w-[400px] h-[300px] bg-cyan-600/6 rounded-full blur-[100px] pointer-events-none"}),a.jsxs("div",{className:"relative text-center",children:[a.jsx("span",{className:"inline-block text-xs font-bold uppercase tracking-[0.2em] text-violet-400 bg-violet-500/10 border border-violet-500/20 rounded-full px-4 py-1.5 mb-5",children:"Always Free  100% Private  Your Google Sheet"}),a.jsxs("h1",{className:"text-3xl sm:text-4xl lg:text-5xl font-extrabold leading-[1.1] tracking-tight text-white",children:["One dashboard for your family's"," ",a.jsx("span",{className:"bg-gradient-to-r from-violet-400 to-cyan-400 bg-clip-text text-transparent",children:"entire wealth"})]}),a.jsxs("p",{className:"mt-5 text-base sm:text-lg text-slate-400 leading-relaxed max-w-2xl mx-auto",children:["Mutual funds, stocks, FDs, gold, insurance, loans  track everything for every family member. Manual entry means ",a.jsx("strong",{className:"text-white",children:"no bank credentials, no privacy risk"}),"."]}),u&&a.jsx("p",{className:"mt-5 text-sm text-rose-400",children:u})]})]}),a.jsxs("section",{className:"bg-gradient-to-b from-[#0d0a1a] to-[#0a0e1c] border-y border-white/[0.06] px-5 sm:px-8 lg:px-16 py-10 sm:py-14",children:[a.jsxs("div",{className:"text-center mb-10",children:[a.jsxs("h2",{className:"text-2xl sm:text-3xl lg:text-4xl font-extrabold text-white inline-flex items-center gap-3 flex-wrap justify-center",children:[a.jsx(Ki,{size:28,className:"text-amber-400 shrink-0"}),a.jsxs("span",{children:["What happens if something happens to ",a.jsx("span",{className:"text-amber-400",children:"you"}),"?"]})]}),a.jsxs("p",{className:"mt-4 text-lg text-slate-400 leading-relaxed",children:["Your family should know about every investment, every policy, every loan. Not someday. ",a.jsx("strong",{className:"text-white",children:"Right now."})]})]}),a.jsxs("div",{className:"grid sm:grid-cols-2 gap-4",children:[a.jsx(Ah,{icon:a.jsx(Yj,{size:20}),color:"rose",title:"Without Capital Friends",items:["Scattered investments across 10+ platforms","Family has no idea what you own or owe","Insurance policies lost in email threads","Months of confusion, missed renewals, lost money"],bad:!0}),a.jsx(Ah,{icon:a.jsx(Il,{size:20}),color:"emerald",title:"With Capital Friends",items:["One sheet  every investment, policy, and loan","Family receives email reports with full portfolio details","Reminders for SIPs, renewals, EMI payments","Complete clarity, instantly  when it matters most"]})]}),a.jsxs("p",{className:"text-center mt-8 text-base text-slate-500",children:["Built for ",a.jsx("strong",{className:"text-white",children:"you"})," to manage your wealth  and for your ",a.jsx("strong",{className:"text-white",children:"family"})," to access it when they need to."]})]}),a.jsxs("section",{className:"bg-[#0a0e1c] border-y border-white/[0.06] px-5 sm:px-8 lg:px-16 py-14 sm:py-20",children:[a.jsxs("div",{className:"text-center mb-12",children:[a.jsx("h2",{className:"text-2xl sm:text-3xl lg:text-4xl font-extrabold text-white mb-2",children:"How it Works"}),a.jsx("p",{className:"text-base text-slate-500",children:"Set up in 2 minutes  no bank credentials, no downloads"})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 lg:gap-4",children:[a.jsx(Ni,{num:1,icon:a.jsx(f1,{size:24}),color:"violet",title:"Sign In with Google",desc:"Go to capitalfriends.in and sign in with your Google account. That's all  no registration form, no passwords."}),a.jsx(Ni,{num:2,icon:a.jsx(Xj,{size:24}),color:"emerald",title:"App Creates Your Sheet",desc:"The app creates a private Google Sheet in your own Google Drive. This sheet stores all your financial data. Only you can see it  not even the developer."}),a.jsx(Ni,{num:3,icon:a.jsx(Jp,{size:24}),color:"cyan",title:"Financial Health Check",desc:"Answer 7 simple yes/no questions about your financial health. Get your score and personalized recommendations instantly."}),a.jsx(Ni,{num:4,icon:a.jsx(Hl,{size:24}),color:"amber",title:"Start Tracking",desc:"Add family members, portfolios, goals, insurance, and loans. The app connects to AMFI for live mutual fund prices automatically."})]}),a.jsxs("p",{className:"text-center mt-10 text-sm text-slate-600",children:["Your sheet is named ",a.jsx("strong",{className:"text-slate-400",children:"Capital Friends - Your Name"})," and lives in your Google Drive. The web app is just a beautiful dashboard to view and manage it."]})]}),a.jsxs("section",{id:"features",className:"bg-[#0b1022] border-y border-white/[0.06] px-5 sm:px-8 lg:px-16 py-14 sm:py-20",onMouseEnter:()=>g(!0),onMouseLeave:()=>{g(!1),w()},children:[a.jsxs("div",{className:"text-center mb-10",children:[a.jsx("h2",{className:"text-2xl sm:text-3xl lg:text-4xl font-extrabold text-white mb-2",children:"Features That Set Us Apart"}),a.jsx("p",{className:"text-base text-slate-500",children:"Things you won't find on other portfolio trackers"})]}),a.jsx("div",{className:"flex justify-center gap-2 sm:gap-3 mb-10 flex-wrap",children:E.map((S,v)=>{const p=v===m,y={emerald:"border-emerald-500",violet:"border-violet-500",cyan:"border-cyan-500",amber:"border-amber-500"},_={emerald:"text-emerald-400",violet:"text-violet-400",cyan:"text-cyan-400",amber:"text-amber-400"};return a.jsxs("button",{onClick:()=>A(v),className:`relative flex items-center gap-2 px-5 py-2.5 rounded-full border text-sm font-semibold transition-all cursor-pointer ${p?`${y[S.color]} bg-white/[0.05] ${_[S.color]}`:"border-white/[0.08] text-slate-500 hover:border-white/[0.15] hover:text-slate-300"}`,children:[a.jsx("span",{className:"shrink-0",children:S.icon}),S.label,p&&a.jsx("div",{className:"absolute bottom-0 left-4 right-4 h-0.5 bg-white/[0.06] rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full rounded-full bg-current",style:{animation:"featureProgress 5s linear",animationPlayState:x?"paused":"running"}})})]},S.id)})}),a.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center gap-8 lg:gap-12",children:[a.jsxs("div",{className:"lg:flex-1 min-h-[280px]",children:[a.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white",children:C.tagline}),a.jsx("p",{className:"mt-3 text-base text-slate-400 leading-relaxed",children:C.desc}),C.id==="ath"&&a.jsxs("div",{className:"mt-6 space-y-5",children:[a.jsx(jt,{c:"emerald",t:"ATH tracking only for funds in your portfolios"}),a.jsx(jt,{c:"emerald",t:"Color-coded signals: watch, consider, buy, strong buy"}),a.jsx(jt,{c:"emerald",t:"Increase SIP or invest lumpsum when funds dip"}),a.jsx(jt,{c:"emerald",t:"Daily NAV updates from AMFI data"})]}),C.id==="rebalance"&&a.jsxs("div",{className:"mt-6 space-y-5",children:[a.jsx(jt,{c:"violet",t:"Adjust monthly SIP to rebalance gradually"}),a.jsx(jt,{c:"violet",t:"Lumpsum top-up for quick rebalance"}),a.jsx(jt,{c:"violet",t:"Buy/Sell amounts to match target"}),a.jsx(jt,{c:"violet",t:"Configurable threshold per portfolio"})]}),C.id==="goals"&&a.jsxs("div",{className:"mt-6 space-y-5",children:[a.jsx(jt,{c:"cyan",t:"Link multiple MF portfolios to each goal"}),a.jsx(jt,{c:"cyan",t:"Built-in SIP + lumpsum calculator with inflation"}),a.jsx(jt,{c:"cyan",t:"Auto-status: On Track, Needs Attention, Achieved"}),a.jsx(jt,{c:"cyan",t:"Withdrawal planning for retirement goals"})]}),C.id==="dashboard"&&a.jsxs("div",{className:"mt-6 space-y-5",children:[a.jsx(jt,{c:"amber",t:"One-click switch between family members"}),a.jsx(jt,{c:"amber",t:"Combined net worth across everyone"}),a.jsx(jt,{c:"amber",t:"MF, stocks, FD, gold, PPF, NPS, insurance"}),a.jsx(jt,{c:"amber",t:"Email reports sent to family automatically"})]})]}),a.jsx("div",{className:"lg:flex-1 min-w-0 min-h-[380px] flex flex-col justify-center",children:C.mock})]}),a.jsx("style",{children:`
          @keyframes featureProgress {
            from { width: 0% }
            to { width: 100% }
          }
        `})]}),a.jsxs("section",{className:"bg-[#0a0e1c] border-y border-white/[0.06] px-5 sm:px-8 lg:px-16 py-14 sm:py-20",children:[a.jsxs("div",{className:"text-center mb-10",children:[a.jsx("h2",{className:"text-2xl sm:text-3xl lg:text-4xl font-extrabold text-white mb-2",children:"Everything You Need"}),a.jsx("p",{className:"text-base text-slate-500",children:"One dashboard for your entire financial life"})]}),a.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-4",children:[a.jsx(hl,{icon:a.jsx(Os,{size:20}),c:"rose",t:"Stock Portfolios",d:"Buy/sell tracking, average cost, P&L with live NSE prices"}),a.jsx(hl,{icon:a.jsx(T1,{size:20}),c:"orange",t:"FD, Gold, PPF, NPS",d:"Track any investment type  all counted in net worth"}),a.jsx(hl,{icon:a.jsx(Il,{size:20}),c:"teal",t:"Insurance Tracker",d:"Life, health, term policies with premiums & renewal dates"}),a.jsx(hl,{icon:a.jsx(Gn,{size:20}),c:"red",t:"Liabilities",d:"Loans & EMIs. Net worth = total assets minus debts"}),a.jsx(hl,{icon:a.jsx(Zp,{size:20}),c:"yellow",t:"Smart Reminders",d:"SIP dates, renewals, EMI payments, maturity alerts"}),a.jsx(hl,{icon:a.jsx(_s,{size:20}),c:"pink",t:"Family Sharing",d:"Invite family with Google accounts  shared dashboard"}),a.jsx(hl,{icon:a.jsx(Is,{size:20}),c:"blue",t:"Daily Auto-Refresh",d:"NAVs and stock prices update automatically every day"}),a.jsx(hl,{icon:a.jsx(Md,{size:20}),c:"emerald",t:"Complete Privacy",d:"No servers, no database, no tracking  your Sheet only"})]})]}),a.jsxs("section",{className:"border-y border-white/[0.06]",children:[a.jsxs("div",{className:"bg-[#0b1022] px-5 sm:px-8 lg:px-16 py-10 sm:py-14 text-center",children:[a.jsxs("h2",{className:"text-2xl sm:text-3xl lg:text-4xl font-extrabold text-white inline-flex items-center gap-3",children:[a.jsx(Md,{size:28,className:"text-emerald-400 shrink-0"}),"Your Data Never Leaves Google"]}),a.jsxs("p",{className:"mt-3 text-base sm:text-lg text-slate-400 leading-relaxed",children:["No backend server. No database. No tracking. The web app is a static site. Your spreadsheet lives in ",a.jsx("strong",{className:"text-white",children:"your Google Drive"}),". We literally cannot access your financial data."]})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row",children:[a.jsx(Dd,{icon:a.jsx(Il,{size:20}),t:"Manual Entry Only",d:"No bank linking, no credentials shared. You type your data  no one else has access.",bg:"bg-[#0d1326]",c:"emerald"}),a.jsx(Dd,{icon:a.jsx(Md,{size:20}),t:"Your Google Sheet",d:"A private spreadsheet in your Drive. Share only with family you choose.",bg:"bg-[#0f1530]",c:"violet"}),a.jsx(Dd,{icon:a.jsx(Pi,{size:20}),t:"Always Free",d:"No premium tier, no hidden fees, no ads. Free today, free forever.",bg:"bg-[#111838]",c:"amber"})]})]}),a.jsxs("section",{className:"bg-gradient-to-t from-[#080d1a] to-[#0d1128] border-t border-white/[0.06] px-5 sm:px-8 lg:px-16 py-16 text-center",children:[a.jsx("h2",{className:"text-3xl sm:text-4xl font-extrabold text-white",children:"Start managing your family's wealth today"}),a.jsx("p",{className:"mt-3 text-base text-slate-500",children:"Always free. No credit card. No bank linking. Just your Google account."}),a.jsxs("button",{onClick:c,className:"mt-8 inline-flex items-center gap-2.5 px-8 py-3.5 bg-gradient-to-r from-violet-600 to-cyan-600 text-white font-bold text-base rounded-xl hover:from-violet-500 hover:to-cyan-500 shadow-lg shadow-violet-900/30 transition-all hover:scale-[1.02] cursor-pointer",children:[a.jsx(Th,{s:20})," Sign in with Google  It's Free"]}),u&&a.jsx("p",{className:"mt-3 text-sm text-rose-400",children:u})]}),a.jsxs("footer",{className:"border-t border-white/[0.04] px-5 sm:px-8 lg:px-16 py-5 flex items-center justify-between",children:[a.jsx("img",{src:Ch,alt:"",className:"h-5 opacity-30"}),a.jsx("p",{className:"text-xs text-slate-600",children:"Your data. Your Google Drive. Your control."})]})]})}function Ah({icon:n,title:o,items:u,bad:c}){const h=c?"border-rose-500/15":"border-emerald-500/15",m=c?"bg-rose-500/[0.04]":"bg-emerald-500/[0.04]",b=c?"bg-rose-500/10 text-rose-400":"bg-emerald-500/10 text-emerald-400",x=c?"text-rose-400":"text-emerald-400";return a.jsxs("div",{className:`rounded-2xl border ${h} ${m} p-6`,children:[a.jsxs("h3",{className:`text-lg font-bold ${x} mb-4 flex items-center gap-2.5`,children:[a.jsx("span",{className:`flex items-center justify-center w-8 h-8 rounded-lg ${b} shrink-0`,children:n}),o]}),a.jsx("ul",{className:"space-y-3",children:u.map((g,d)=>a.jsxs("li",{className:"flex items-start gap-2.5",children:[c?a.jsx("span",{className:"text-rose-500/60 mt-0.5 shrink-0",children:""}):a.jsx(Xn,{size:16,className:"text-emerald-500 mt-0.5 shrink-0"}),a.jsx("span",{className:"text-sm text-slate-300 leading-relaxed",children:g})]},d))})]})}function NN(){return a.jsxs("div",{className:"rounded-xl border border-white/[0.06] bg-[#0d1326] overflow-hidden shadow-2xl shadow-black/40",children:[a.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-white/[0.04] bg-[#0a0f1f]",children:[a.jsx("span",{className:"text-sm text-slate-400 font-medium",children:"Dashboard"}),a.jsx("div",{className:"flex gap-1.5",children:["Everyone","Jagadeesh","Priya","Arjun"].map((n,o)=>a.jsx("span",{className:`text-xs px-2.5 py-1 rounded-full font-medium ${o===0?"bg-violet-500/20 text-violet-300":"text-slate-600"}`,children:n},n))})]}),a.jsxs("div",{className:"grid grid-cols-3 divide-x divide-white/[0.04]",children:[a.jsx(Ed,{l:"Net Worth",v:"45.2L",lc:"text-violet-400",vc:"text-white"}),a.jsx(Ed,{l:"Invested",v:"38.7L",lc:"text-slate-500",vc:"text-slate-300"}),a.jsx(Ed,{l:"P&L",v:"+6.5L",lc:"text-slate-500",vc:"text-emerald-400",extra:"+16.8%"})]}),a.jsxs("div",{className:"border-t border-white/[0.04]",children:[a.jsx(zd,{n:"Axis Bluechip Fund",alloc:"30% / 25%",cur:"6.2L",pl:"+24.0%",ath:"5.2%",athC:"text-[#e67e00]",up:!0}),a.jsx(zd,{n:"Parag Parikh Flexi Cap",alloc:"35% / 40%",cur:"4.8L",pl:"+37.1%",ath:"At ATH",athC:"text-emerald-500",up:!0}),a.jsx(zd,{n:"SBI Small Cap Fund",alloc:"20% / 15%",cur:"1.8L",pl:"-10.0%",ath:"18.3%",athC:"text-[#d84315]",last:!0})]})]})}function SN(){const n=[{n:"HDFC Mid-Cap Opportunities",nav:"142.35",ath:"168.50",pct:"15.5%",color:"text-[#d84315]",signal:"Good Buy Signal",sigC:"text-[#d84315] bg-[#d84315]/15"},{n:"Axis Small Cap Fund",nav:"38.22",ath:"52.10",pct:"26.6%",color:"text-[#c62828]",signal:"Strong Buy",sigC:"text-[#c62828] bg-[#c62828]/15 font-bold"},{n:"Kotak Emerging Equity",nav:"89.10",ath:"92.40",pct:"3.6%",color:"text-[#b8860b]",signal:"Watch",sigC:"text-[#b8860b] bg-[#b8860b]/15"},{n:"Mirae Asset Large Cap",nav:"105.80",ath:"106.20",pct:"0.4%",color:"text-slate-500",signal:"Near ATH",sigC:"text-slate-500 bg-white/[0.04]"}];return a.jsxs("div",{className:"rounded-xl border border-white/[0.06] bg-[#0d1326] overflow-hidden shadow-2xl shadow-black/40",children:[a.jsxs("div",{className:"px-4 py-3 border-b border-white/[0.04] bg-[#0a0f1f] flex items-center justify-between",children:[a.jsx("span",{className:"text-sm font-semibold text-white",children:"Buy Opportunities"}),a.jsx("span",{className:"text-xs text-emerald-400 font-semibold bg-emerald-500/10 px-2.5 py-1 rounded-full",children:"2 signals"})]}),n.map((o,u)=>a.jsxs("div",{className:`flex items-center justify-between px-4 py-3 ${u<n.length-1?"border-b border-white/[0.03]":""}`,children:[a.jsxs("div",{className:"min-w-0 flex-1",children:[a.jsx("p",{className:"text-sm font-medium text-slate-300 truncate",children:o.n}),a.jsxs("p",{className:"text-xs text-slate-600 mt-0.5",children:["NAV ","",o.nav,"  ATH ","",o.ath]})]}),a.jsxs("div",{className:"text-right shrink-0 ml-3",children:[a.jsxs("p",{className:`text-base font-bold tabular-nums ${o.color}`,children:[a.jsx(cj,{size:13,className:"inline -mt-0.5"})," ",o.pct]}),a.jsx("span",{className:`text-[10px] font-semibold px-2 py-0.5 rounded ${o.sigC}`,children:o.signal})]})]},u))]})}function wN(){const[n,o]=j.useState(0),u=["SIP Adjust","Lumpsum","Buy / Sell"],c=["New SIP","Lumpsum Top-up","Action"],m=[[{n:"Axis Bluechip",val:"SIP 6,000",cur:"30%",tgt:"25%",action:"Stop SIP",actionC:"text-amber-400"},{n:"Parag Parikh Flexi",val:"SIP 7,000",cur:"35%",tgt:"40%",action:"12,000/mo",actionC:"text-emerald-400"},{n:"SBI Small Cap",val:"SIP 4,000",cur:"20%",tgt:"15%",action:"Stop SIP",actionC:"text-amber-400"},{n:"HDFC Large Cap",val:"SIP 3,000",cur:"15%",tgt:"20%",action:"8,000/mo",actionC:"text-emerald-400"}],[{n:"Axis Bluechip",val:"3,00,000",cur:"30%",tgt:"25%",action:"No action",actionC:"text-slate-600"},{n:"Parag Parikh Flexi",val:"3,50,000",cur:"35%",tgt:"40%",action:"Invest 55,000",actionC:"text-emerald-400"},{n:"SBI Small Cap",val:"2,00,000",cur:"20%",tgt:"15%",action:"No action",actionC:"text-slate-600"},{n:"HDFC Large Cap",val:"1,50,000",cur:"15%",tgt:"20%",action:"Invest 45,000",actionC:"text-emerald-400"}],[{n:"Axis Bluechip",val:"3,00,000",cur:"30%",tgt:"25%",action:"Sell 50,000",actionC:"text-rose-400"},{n:"Parag Parikh Flexi",val:"3,50,000",cur:"35%",tgt:"40%",action:"Buy 50,000",actionC:"text-emerald-400"},{n:"SBI Small Cap",val:"2,00,000",cur:"20%",tgt:"15%",action:"Sell 50,000",actionC:"text-rose-400"},{n:"HDFC Large Cap",val:"1,50,000",cur:"15%",tgt:"20%",action:"Buy 50,000",actionC:"text-emerald-400"}]][n];return a.jsxs("div",{className:"rounded-xl border border-white/[0.06] bg-[#0d1326] overflow-hidden shadow-2xl shadow-black/40",children:[a.jsxs("div",{className:"px-4 py-3 border-b border-white/[0.04] bg-[#0a0f1f] flex items-center justify-between",children:[a.jsx("span",{className:"text-sm font-semibold text-white",children:"Rebalance Portfolio"}),a.jsx("span",{className:"text-xs text-violet-400 font-semibold bg-violet-500/10 px-2.5 py-1 rounded-full",children:"4 off-target"})]}),a.jsx("div",{className:"flex border-b border-white/[0.04]",children:u.map((b,x)=>a.jsx("button",{onClick:()=>o(x),className:`flex-1 text-xs font-semibold py-2.5 text-center cursor-pointer transition-colors ${x===n?"text-violet-400 border-b-2 border-violet-400":"text-slate-600 hover:text-slate-400"}`,children:b},b))}),a.jsxs("div",{className:"flex items-center gap-3 px-4 py-2.5 border-b border-white/[0.04] bg-[#0a0f1f]/50 flex-wrap",children:[a.jsx("span",{className:"text-xs text-slate-500",children:"Portfolio Value"}),a.jsxs("span",{className:"text-sm text-white font-semibold tabular-nums",children:["","10,00,000"]}),n===0&&a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"text-xs text-slate-600",children:"|"}),a.jsx("span",{className:"text-xs text-slate-500",children:"Total SIP"}),a.jsxs("span",{className:"text-sm text-white font-semibold tabular-nums",children:["","20,000"]})]}),n===1&&a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"text-xs text-slate-600",children:"|"}),a.jsx("span",{className:"text-xs text-slate-500",children:"Lumpsum"}),a.jsx("input",{type:"text",readOnly:!0,value:"1,00,000",className:"bg-white/[0.04] border border-white/[0.08] rounded-md px-2 py-1 text-sm text-white font-semibold tabular-nums w-24 text-right cursor-default outline-none"})]})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"grid grid-cols-[1fr_50px_50px_1fr] gap-1 px-4 py-2.5 text-xs text-slate-600 font-semibold border-b border-white/[0.03]",children:[a.jsx("span",{children:"Fund / Value"}),a.jsx("span",{className:"text-center",children:"Current"}),a.jsx("span",{className:"text-center",children:"Target"}),a.jsx("span",{className:"text-right",children:c[n]})]}),m.map((b,x)=>a.jsxs("div",{className:`grid grid-cols-[1fr_50px_50px_1fr] gap-1 px-4 py-2.5 items-center ${x<m.length-1?"border-b border-white/[0.03]":""}`,children:[a.jsxs("div",{className:"min-w-0",children:[a.jsx("span",{className:"text-sm text-slate-300 truncate block",children:b.n}),a.jsxs("span",{className:"text-[10px] text-slate-600",children:["",b.val]})]}),a.jsx("span",{className:"text-sm text-center text-slate-400 tabular-nums",children:b.cur}),a.jsx("span",{className:"text-sm text-center text-slate-400 tabular-nums",children:b.tgt}),a.jsx("span",{className:`text-sm text-right font-semibold ${b.actionC}`,children:b.action})]},`${n}-${x}`))]})]})}function CN(){const n=[{n:"Retirement",tgt:"2Cr",cur:"28.5L",pct:14,sip:"45,000",yrs:"18 yrs",status:"On Track",sc:"text-blue-400 bg-blue-500/15",bc:"bg-blue-500"},{n:"Child Education",tgt:"50L",cur:"12.2L",pct:24,sip:"15,000",yrs:"12 yrs",status:"On Track",sc:"text-blue-400 bg-blue-500/15",bc:"bg-blue-500"},{n:"New Car",tgt:"15L",cur:"4.1L",pct:27,sip:"12,000",yrs:"3 yrs",status:"Needs Attention",sc:"text-amber-400 bg-amber-500/15",bc:"bg-amber-500"}];return a.jsxs("div",{className:"rounded-xl border border-white/[0.06] bg-[#0d1326] overflow-hidden shadow-2xl shadow-black/40",children:[a.jsxs("div",{className:"px-4 py-3 border-b border-white/[0.04] bg-[#0a0f1f] flex items-center justify-between",children:[a.jsx("span",{className:"text-sm font-semibold text-white",children:"Goals"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-xs text-slate-500",children:"2 On Track"}),a.jsx("span",{className:"text-xs text-amber-400",children:"1 Needs Attention"})]})]}),n.map((o,u)=>a.jsxs("div",{className:`px-4 py-3.5 ${u<n.length-1?"border-b border-white/[0.03]":""}`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sm font-semibold text-white",children:o.n}),a.jsx("span",{className:`text-[10px] font-semibold px-2 py-0.5 rounded-full ${o.sc}`,children:o.status})]}),a.jsxs("span",{className:"text-xs text-slate-500",children:["",o.sip,"/mo  ",o.yrs]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"flex-1 h-2.5 rounded-full bg-white/[0.06] overflow-hidden",children:a.jsx("div",{className:`h-full rounded-full ${o.bc}`,style:{width:`${o.pct}%`}})}),a.jsxs("span",{className:"text-sm font-semibold text-slate-300 tabular-nums w-10 text-right",children:[o.pct,"%"]})]}),a.jsxs("div",{className:"flex justify-between mt-1.5 text-xs text-slate-600",children:[a.jsxs("span",{children:["",o.cur," of ","",o.tgt]}),a.jsxs("span",{className:"flex items-center gap-1 text-slate-500",children:[a.jsx(Fi,{size:10})," 2 portfolios linked"]})]})]},u))]})}function Th({s:n=16}){return a.jsxs("svg",{viewBox:"0 0 24 24",width:n,height:n,className:"shrink-0",children:[a.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92a5.06 5.06 0 01-2.2 3.32v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.1z",fill:"#4285F4"}),a.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),a.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z",fill:"#FBBC05"}),a.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]})}function Ed({l:n,v:o,lc:u,vc:c,extra:h}){return a.jsxs("div",{className:"py-3.5 text-center",children:[a.jsx("p",{className:`text-xs font-semibold uppercase tracking-wider ${u}`,children:n}),a.jsxs("p",{className:`text-lg font-bold tabular-nums mt-0.5 ${c}`,children:[o,h&&a.jsx("span",{className:"text-sm ml-1 text-emerald-400",children:h})]})]})}function zd({n,alloc:o,cur:u,pl:c,ath:h,athC:m,up:b,last:x}){return a.jsxs("div",{className:`flex items-center justify-between px-4 py-3 ${x?"":"border-b border-white/[0.03]"}`,children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-slate-300",children:n}),a.jsxs("p",{className:"text-xs text-slate-600",children:["Alloc ",o,"  ",a.jsx("span",{className:m,children:h!=="At ATH"?`${h} below ATH`:h})]})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-sm font-semibold text-slate-200 tabular-nums",children:u}),a.jsx("p",{className:`text-sm font-semibold tabular-nums ${b?"text-emerald-400":"text-rose-400"}`,children:c})]})]})}function jt({c:n,t:o}){const u={violet:"text-violet-400",cyan:"text-cyan-400",amber:"text-amber-400",emerald:"text-emerald-400"};return a.jsxs("div",{className:"flex items-center gap-2.5",children:[a.jsx(Xn,{size:16,className:`${u[n]} shrink-0`}),a.jsx("span",{className:"text-sm text-slate-300",children:o})]})}function Ni({num:n,icon:o,color:u,title:c,desc:h}){const m={violet:["text-violet-400","bg-violet-500/10","border-violet-500/20","from-violet-500/20 to-violet-500/5"],emerald:["text-emerald-400","bg-emerald-500/10","border-emerald-500/20","from-emerald-500/20 to-emerald-500/5"],cyan:["text-cyan-400","bg-cyan-500/10","border-cyan-500/20","from-cyan-500/20 to-cyan-500/5"],amber:["text-amber-400","bg-amber-500/10","border-amber-500/20","from-amber-500/20 to-amber-500/5"]},[b,x,g,d]=m[u]||m.violet;return a.jsxs("div",{className:`relative rounded-2xl border ${g} bg-gradient-to-b ${d} p-6 text-center`,children:[a.jsx("span",{className:`inline-flex items-center justify-center w-12 h-12 rounded-xl ${x} ${b} mb-4`,children:o}),a.jsxs("span",{className:`absolute top-4 right-4 text-xs font-bold ${b} opacity-40`,children:["0",n]}),a.jsx("h3",{className:"text-base font-bold text-white mb-2",children:c}),a.jsx("p",{className:"text-sm text-slate-400 leading-relaxed",children:h})]})}function Dd({icon:n,t:o,d:u,bg:c,c:h}){const m={emerald:"text-emerald-400",violet:"text-violet-400",amber:"text-amber-400"};return a.jsxs("div",{className:`flex-1 ${c} px-5 sm:px-8 lg:px-10 py-6 sm:py-8 border-b sm:border-b-0 sm:border-r border-white/[0.04] last:border-0`,children:[a.jsxs("p",{className:"text-base font-bold text-white flex items-center gap-2",children:[a.jsx("span",{className:`${m[h]} shrink-0`,children:n}),o]}),a.jsx("p",{className:"text-sm text-slate-500 mt-1.5 leading-relaxed",children:u})]})}const Mh={violet:["text-violet-400","bg-violet-500/8","border-violet-500/10"],blue:["text-blue-400","bg-blue-500/8","border-blue-500/10"],emerald:["text-emerald-400","bg-emerald-500/8","border-emerald-500/10"],cyan:["text-cyan-400","bg-cyan-500/8","border-cyan-500/10"],rose:["text-rose-400","bg-rose-500/8","border-rose-500/10"],orange:["text-orange-400","bg-orange-500/8","border-orange-500/10"],teal:["text-teal-400","bg-teal-500/8","border-teal-500/10"],red:["text-red-400","bg-red-500/8","border-red-500/10"],yellow:["text-yellow-400","bg-yellow-500/8","border-yellow-500/10"],pink:["text-pink-400","bg-pink-500/8","border-pink-500/10"]};function hl({icon:n,c:o,t:u,d:c}){const[h,m,b]=Mh[o]||Mh.violet;return a.jsxs("div",{className:`rounded-xl border ${b} ${m} p-5`,children:[a.jsxs("p",{className:"text-base font-bold text-white flex items-center gap-2",children:[a.jsx("span",{className:`${h} shrink-0`,children:n}),u]}),a.jsx("p",{className:"text-sm text-slate-500 mt-1.5 leading-relaxed",children:c})]})}function AN(){const{isAuthenticated:n,loading:o}=Bl();return o?a.jsx(Pn,{}):n?a.jsx(Hd,{to:"/dashboard",replace:!0}):a.jsx(mb,{})}function Na({title:n="Loading",cards:o=4}){return a.jsxs("div",{className:"space-y-4 animate-pulse",children:[a.jsx("div",{className:"h-7 w-48 rounded-lg bg-[var(--bg-card)]"}),a.jsx("div",{className:`grid gap-3 ${o<=3?"grid-cols-2 sm:grid-cols-3":"grid-cols-2 sm:grid-cols-4"}`,children:Array.from({length:o}).map((u,c)=>a.jsxs("div",{className:"rounded-xl bg-[var(--bg-card)] border border-[var(--border)] p-4",children:[a.jsx("div",{className:"h-3 w-16 rounded bg-[var(--bg-inset)] mb-3"}),a.jsx("div",{className:"h-6 w-24 rounded bg-[var(--bg-inset)]"})]},c))}),a.jsxs("div",{className:"rounded-xl bg-[var(--bg-card)] border border-[var(--border)] overflow-hidden",children:[a.jsx("div",{className:"flex gap-4 px-4 py-3 border-b border-[var(--border-light)]",children:[120,80,60,80,60].map((u,c)=>a.jsx("div",{className:"h-3 rounded bg-[var(--bg-inset)]",style:{width:u}},c))}),Array.from({length:5}).map((u,c)=>a.jsx("div",{className:"flex gap-4 px-4 py-3.5 border-b border-[var(--border-light)] last:border-0",children:[140,70,50,70,50].map((h,m)=>a.jsx("div",{className:"h-3 rounded bg-[var(--bg-inset)] opacity-60",style:{width:h}},m))},c))]}),a.jsxs("p",{className:"text-xs text-[var(--text-dim)] text-center",children:[n,"..."]})]})}function xb(n){return n>=0?"text-emerald-400":"text-[var(--accent-rose)]"}function Vi(n){return n>=0?"+":""}function TN(){const n=ql(),{selectedMember:o}=bt(),{loading:u,mfPortfolios:c,mfHoldings:h,stockPortfolios:m,stockHoldings:b,otherInvList:x,liabilityList:g,banks:d,insurancePolicies:w,reminderList:A,goalList:E}=ke();if(u)return a.jsx(Na,{title:"Loading dashboard",cards:4});const C=j.useMemo(()=>{const p=(re,ve)=>o==="all"?re:re.filter(Fe=>Fe[ve]===o),y=p(c.filter(re=>re.status==="Active"),"ownerId"),_=new Set(y.map(re=>re.portfolioId)),O=h.filter(re=>_.has(re.portfolioId)&&re.units>0),q=O.reduce((re,ve)=>re+ve.investment,0),Y=O.reduce((re,ve)=>re+ve.currentValue,0),z=Y-q,L=y.map(re=>{const ve=O.filter(Fe=>Fe.portfolioId===re.portfolioId);return{name:re.portfolioName,value:ve.reduce((Fe,vt)=>Fe+vt.currentValue,0)}}).filter(re=>re.value>0),te=p(m.filter(re=>re.status==="Active"),"ownerId"),oe=new Set(te.map(re=>re.portfolioId)),H=b.filter(re=>oe.has(re.portfolioId)),se=H.reduce((re,ve)=>re+ve.totalInvestment,0),M=H.reduce((re,ve)=>re+ve.currentValue,0),ie=M-se,V=te.map(re=>{const ve=H.filter(Fe=>Fe.portfolioId===re.portfolioId);return{name:re.portfolioName,value:ve.reduce((Fe,vt)=>Fe+vt.currentValue,0)}}).filter(re=>re.value>0),R=p(x.filter(re=>re.status==="Active"),"familyMemberId"),k=R.reduce((re,ve)=>re+ve.investedAmount,0),K=R.reduce((re,ve)=>re+ve.currentValue,0),ne=K-k,fe=R.map(re=>({name:re.investmentName,type:re.investmentType,value:re.currentValue})),ye=p(g.filter(re=>re.status==="Active"),"familyMemberId"),N=ye.reduce((re,ve)=>re+ve.outstandingBalance,0),B=ye.reduce((re,ve)=>re+ve.emiAmount,0),W=ye.map(re=>({name:re.lenderName||re.liabilityType,type:re.liabilityType,balance:re.outstandingBalance,emi:re.emiAmount})),J=p(w.filter(re=>re.status==="Active"),"memberId"),de=J.filter(re=>re.policyType==="Term Life"||re.policyType==="Health").reduce((re,ve)=>re+ve.sumAssured,0),be=p(d.filter(re=>re.status==="Active"),"memberId"),je=Y+M+K,we=je-N,Ae=q+se+k,it=je-Ae;let Ze=0,St=0;return y.forEach(re=>{const ve=h.filter(We=>We.portfolioId===re.portfolioId&&We.units>0),Fe=ve.reduce((We,_t)=>We+_t.currentValue,0),vt=re.rebalanceThreshold||.05;ve.forEach(We=>{if(We.athNav>0&&We.belowATHPct>=5&&Ze++,We.targetAllocationPct>0&&Fe>0){const _t=We.currentValue/Fe*100;Math.abs(_t-We.targetAllocationPct)>vt*100&&St++}})}),{mfCurrentValue:Y,mfInvested:q,mfPL:z,mfCount:y.length,mfPortfolioDetails:L,stkCurrentValue:M,stkInvested:se,stkPL:ie,stkCount:te.length,stkPortfolioDetails:V,otherCurrentValue:K,otherInvested:k,otherPL:ne,otherCount:R.length,otherDetails:fe,totalLiabilities:N,totalEMI:B,liabilityCount:ye.length,liabilityDetails:W,totalCover:de,insuranceCount:J.length,bankCount:be.length,totalAssets:je,totalInvested:Ae,totalPL:it,netWorth:we,buyOppCount:Ze,rebalanceCount:St}},[o,c,h,m,b,x,g,d,w]),S=j.useMemo(()=>{const p=[],y=(H,se)=>o==="all"?H:H.filter(M=>M[se]===o),_=y(w.filter(H=>H.status==="Active"),"memberId");_.some(H=>H.policyType==="Term Life")||p.push({type:"critical",title:"Missing Term Life Insurance",badge:"Add Policy"});const q=_.filter(H=>H.policyType==="Health").reduce((H,se)=>H+se.sumAssured,0),Y=o==="all"&&y(w,"memberId").length||1;return q<5e5*Y&&q>0&&p.push({type:"warning",title:"Inadequate Health Insurance",badge:U(q)}),q===0&&p.push({type:"critical",title:"No Health Insurance",badge:"Add Policy"}),y(E.filter(H=>H.isActive!==!1&&H.goalType==="Emergency Fund"),"familyMemberId").forEach(H=>{const se=H.targetAmount>0?H.currentValue/H.targetAmount*100:0;se<100&&p.push({type:se>=75?"info":"warning",title:`Emergency Fund at ${se.toFixed(0)}%`,badge:U(H.targetAmount-H.currentValue)+" left"})}),y(E.filter(H=>H.isActive!==!1&&H.status==="Needs Attention"),"familyMemberId").forEach(H=>p.push({type:"warning",title:`${H.goalName} needs attention`,badge:H.priority})),y(A.filter(H=>H.isActive!==!1),"familyMemberId").filter(H=>new Date(H.dueDate)-new Date<0).forEach(H=>{const se=Math.ceil((new Date-new Date(H.dueDate))/864e5);p.push({type:"critical",title:H.title,badge:`${se}d overdue`})}),p.slice(0,5)},[o,w,E,A]),v=j.useMemo(()=>{const y=((O,q)=>o==="all"?O:O.filter(Y=>Y[q]===o))(A.filter(O=>O.isActive!==!1&&O.status!=="Completed"),"familyMemberId"),_=new Date;return y.map(O=>{const q=new Date(O.dueDate)-_,Y=Math.ceil(q/(1440*60*1e3)),z=new Date(O.dueDate).toLocaleDateString("en-IN",{day:"2-digit",month:"short"});return{...O,days:Y,dateStr:z}}).filter(O=>O.days>=0).sort((O,q)=>O.days-q.days).slice(0,5)},[o,A]);return a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"bg-[var(--bg-card)] rounded-xl border border-[var(--border)] p-4",children:[a.jsx("p",{className:"text-xs font-bold text-[var(--text-muted)] uppercase tracking-wider mb-1",children:"Net Worth"}),a.jsx("p",{className:"text-2xl font-bold text-[var(--text-primary)] tabular-nums",children:U(C.netWorth)}),a.jsxs("div",{className:"mt-3 space-y-0.5",children:[a.jsx("p",{className:"text-[10px] font-bold text-[var(--text-muted)] uppercase tracking-wider mb-0.5",children:"Investments"}),C.mfCurrentValue>0&&a.jsx(Si,{dot:"bg-violet-500",label:"Mutual Funds",value:U(C.mfCurrentValue),items:C.mfPortfolioDetails,renderItem:p=>a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-[11px] text-[var(--text-dim)] truncate mr-2",children:p.name}),a.jsx("span",{className:"text-[11px] text-[var(--text-dim)] tabular-nums shrink-0",children:U(p.value)})]},p.name)}),C.stkCurrentValue>0&&a.jsx(Si,{dot:"bg-blue-500",label:"Stocks",value:U(C.stkCurrentValue),items:C.stkPortfolioDetails,renderItem:p=>a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-[11px] text-[var(--text-dim)] truncate mr-2",children:p.name}),a.jsx("span",{className:"text-[11px] text-[var(--text-dim)] tabular-nums shrink-0",children:U(p.value)})]},p.name)}),C.otherCurrentValue>0&&a.jsx(Si,{dot:"bg-emerald-500",label:"Other Investments",value:U(C.otherCurrentValue),items:C.otherDetails,renderItem:p=>a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"min-w-0 mr-2",children:[a.jsx("span",{className:"text-[11px] text-[var(--text-dim)] truncate block",children:p.name}),a.jsx("span",{className:"text-[10px] text-[var(--text-dim)]/60",children:p.type})]}),a.jsx("span",{className:"text-[11px] text-[var(--text-dim)] tabular-nums shrink-0",children:U(p.value)})]},p.name)}),C.totalAssets>0&&(C.mfCurrentValue>0)+(C.stkCurrentValue>0)+(C.otherCurrentValue>0)>1&&a.jsxs("div",{className:"flex items-center justify-between pl-2 pt-0.5",children:[a.jsx("span",{className:"text-xs font-semibold text-[var(--text-muted)]",children:"Total"}),a.jsx("span",{className:"text-xs font-bold text-[var(--text-secondary)] tabular-nums",children:U(C.totalAssets)})]}),C.totalLiabilities>0&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"pt-1.5",children:a.jsx("p",{className:"text-[10px] font-bold text-[var(--text-muted)] uppercase tracking-wider mb-0.5",children:"Liabilities"})}),a.jsx(Si,{dot:"bg-rose-500",label:C.liabilityCount===1?C.liabilityDetails[0]?.type||"Loan":`${C.liabilityCount} Loans`,value:a.jsxs("span",{className:"text-[var(--accent-rose)]",children:["",U(C.totalLiabilities)]}),valueClass:"text-[var(--accent-rose)]",items:C.liabilityDetails,renderItem:p=>a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"min-w-0 mr-2",children:[a.jsx("span",{className:"text-[11px] text-[var(--text-dim)] truncate block",children:p.name}),p.emi>0&&a.jsxs("span",{className:"text-[10px] text-[var(--text-dim)]/60",children:["EMI ",U(p.emi),"/mo"]})]}),a.jsx("span",{className:"text-[11px] text-[var(--accent-rose)] tabular-nums shrink-0",children:U(p.balance)})]},p.name+p.type)}),C.totalEMI>0&&a.jsxs("div",{className:"flex items-center justify-between pl-2",children:[a.jsx("span",{className:"text-[11px] text-[var(--text-dim)]",children:"Total EMI"}),a.jsxs("span",{className:"text-[11px] text-[var(--text-dim)] tabular-nums",children:[U(C.totalEMI),"/mo"]})]})]}),a.jsxs("div",{className:"border-t border-dashed border-[var(--border-light)] pt-1.5 mt-1 flex items-center justify-between",children:[a.jsx("span",{className:"text-xs font-bold text-[var(--text-primary)]",children:"= Net Worth"}),a.jsx("span",{className:"text-sm font-bold text-[var(--text-primary)] tabular-nums",children:U(C.netWorth)})]})]}),C.totalInvested>0&&a.jsxs("div",{className:"mt-3 flex items-center gap-2 text-xs",children:[a.jsxs("span",{className:"text-[var(--text-dim)]",children:["Invested ",U(C.totalInvested)]}),a.jsx("span",{className:"text-[var(--text-dim)]",children:""}),a.jsxs("span",{className:`font-semibold ${xb(C.totalPL)}`,children:["P&L ",Vi(C.totalPL),U(Math.abs(C.totalPL))," (",Vi(C.totalPL),(C.totalPL/C.totalInvested*100).toFixed(1),"%)"]})]}),C.totalAssets>0&&a.jsxs("div",{className:"mt-3 h-2 rounded-full overflow-hidden bg-[var(--bg-inset)] flex",children:[C.mfCurrentValue>0&&a.jsx("div",{className:"bg-violet-500 h-full",style:{width:`${C.mfCurrentValue/C.totalAssets*100}%`}}),C.stkCurrentValue>0&&a.jsx("div",{className:"bg-blue-500 h-full",style:{width:`${C.stkCurrentValue/C.totalAssets*100}%`}}),C.otherCurrentValue>0&&a.jsx("div",{className:"bg-emerald-500 h-full",style:{width:`${C.otherCurrentValue/C.totalAssets*100}%`}})]}),C.totalAssets>0&&a.jsxs("div",{className:"flex items-center gap-3 mt-1.5 text-xs text-[var(--text-dim)]",children:[C.mfCurrentValue>0&&a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx("span",{className:"w-2 h-2 rounded-full bg-violet-500"}),"MF ",(C.mfCurrentValue/C.totalAssets*100).toFixed(0),"%"]}),C.stkCurrentValue>0&&a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx("span",{className:"w-2 h-2 rounded-full bg-blue-500"}),"Stocks ",(C.stkCurrentValue/C.totalAssets*100).toFixed(0),"%"]}),C.otherCurrentValue>0&&a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx("span",{className:"w-2 h-2 rounded-full bg-emerald-500"}),"Other ",(C.otherCurrentValue/C.totalAssets*100).toFixed(0),"%"]})]})]}),(C.buyOppCount>0||C.rebalanceCount>0)&&a.jsxs("div",{className:"flex gap-3",children:[C.buyOppCount>0&&a.jsxs("button",{onClick:()=>n("/investments/mutual-funds"),className:"flex-1 flex items-center gap-2.5 bg-[var(--bg-card)] rounded-xl border border-emerald-500/30 p-3 hover:bg-emerald-500/5 transition-colors",children:[a.jsx("span",{className:"w-8 h-8 rounded-lg bg-emerald-500/15 flex items-center justify-center text-emerald-400 shrink-0",children:a.jsx(Kn,{size:16})}),a.jsxs("div",{className:"min-w-0 text-left",children:[a.jsxs("p",{className:"text-sm font-semibold text-emerald-400",children:[C.buyOppCount," Buy ",C.buyOppCount===1?"Opportunity":"Opportunities"]}),a.jsx("p",{className:"text-xs text-[var(--text-dim)]",children:"Funds 5%+ below ATH"})]}),a.jsx($n,{size:14,className:"text-[var(--text-dim)] ml-auto shrink-0"})]}),C.rebalanceCount>0&&a.jsxs("button",{onClick:()=>n("/investments/mutual-funds"),className:"flex-1 flex items-center gap-2.5 bg-[var(--bg-card)] rounded-xl border border-violet-500/30 p-3 hover:bg-violet-500/5 transition-colors",children:[a.jsx("span",{className:"w-8 h-8 rounded-lg bg-violet-500/15 flex items-center justify-center text-violet-400 shrink-0",children:a.jsx(Is,{size:16})}),a.jsxs("div",{className:"min-w-0 text-left",children:[a.jsxs("p",{className:"text-sm font-semibold text-violet-400",children:[C.rebalanceCount," Rebalance ",C.rebalanceCount===1?"Alert":"Alerts"]}),a.jsx("p",{className:"text-xs text-[var(--text-dim)]",children:"Portfolios drifted from targets"})]}),a.jsx($n,{size:14,className:"text-[var(--text-dim)] ml-auto shrink-0"})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsx(wi,{icon:a.jsx(Hl,{size:16}),iconColor:"text-violet-400 bg-violet-500/15",label:"Mutual Funds",value:C.mfCurrentValue,invested:C.mfInvested,pl:C.mfPL,count:C.mfCount,countLabel:"portfolios",onClick:()=>n("/investments/mutual-funds")}),a.jsx(wi,{icon:a.jsx(Os,{size:16}),iconColor:"text-blue-400 bg-blue-500/15",label:"Stocks",value:C.stkCurrentValue,invested:C.stkInvested,pl:C.stkPL,count:C.stkCount,countLabel:"portfolios",onClick:()=>n("/investments/stocks")}),a.jsx(wi,{icon:a.jsx(gj,{size:16}),iconColor:"text-emerald-400 bg-emerald-500/15",label:"Other Investments",value:C.otherCurrentValue,invested:C.otherInvested,pl:C.otherPL,count:C.otherCount,countLabel:"investments",onClick:()=>n("/investments/other")}),a.jsx(wi,{icon:a.jsx(Vn,{size:16}),iconColor:"text-rose-400 bg-rose-500/15",label:"Liabilities",value:C.totalLiabilities,count:C.liabilityCount,countLabel:"active",emi:C.totalEMI,isLiability:!0,onClick:()=>n("/liabilities")})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsxs("div",{className:"flex-1 bg-[var(--bg-card)] rounded-xl border border-[var(--border)] px-4 py-3 cursor-pointer hover:bg-[var(--bg-hover)] transition-colors",onClick:()=>n("/accounts/bank"),children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("p",{className:"text-xs text-[var(--text-muted)] font-semibold",children:"Bank Accounts"}),a.jsx(_l,{size:14,className:"text-[var(--text-dim)]"})]}),a.jsx("p",{className:"text-lg font-bold text-[var(--text-primary)] mt-1",children:C.bankCount})]}),a.jsxs("div",{className:"flex-1 bg-[var(--bg-card)] rounded-xl border border-[var(--border)] px-4 py-3 cursor-pointer hover:bg-[var(--bg-hover)] transition-colors",onClick:()=>n("/insurance"),children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("p",{className:"text-xs text-[var(--text-muted)] font-semibold",children:"Insurance Cover"}),a.jsx(Tj,{size:14,className:"text-[var(--text-dim)]"})]}),a.jsx("p",{className:"text-lg font-bold text-[var(--text-primary)] mt-1",children:U(C.totalCover)}),a.jsxs("p",{className:"text-xs text-[var(--text-dim)]",children:[C.insuranceCount," policies"]})]})]}),S.length>0&&a.jsxs("div",{children:[a.jsx("div",{className:"flex items-center justify-between px-1 mb-2",children:a.jsx("h3",{className:"text-xs font-bold text-[var(--text-secondary)] uppercase tracking-wider",children:"Action Items"})}),a.jsx("div",{className:"bg-[var(--bg-card)] rounded-xl border border-[var(--border)] px-4 py-3",children:S.map(p=>{const y={critical:"bg-rose-500",warning:"bg-amber-500",info:"bg-blue-500"}[p.type],_={critical:"bg-rose-500/20 text-[var(--accent-rose)]",warning:"bg-amber-500/20 text-[var(--accent-amber)]",info:"bg-blue-500/20 text-[var(--accent-blue)]"}[p.type];return a.jsxs("div",{className:"flex items-center gap-3 py-2 border-b border-[var(--border-light)] last:border-0",children:[a.jsx("span",{className:`w-2 h-2 rounded-full shrink-0 ${y}`}),a.jsx("p",{className:"text-sm text-[var(--text-secondary)] flex-1 truncate",children:p.title}),a.jsx("span",{className:`text-xs font-semibold px-2 py-0.5 rounded-full shrink-0 ${_}`,children:p.badge})]},p.title)})})]}),v.length>0&&a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between px-1 mb-2",children:[a.jsx("h3",{className:"text-xs font-bold text-[var(--text-secondary)] uppercase tracking-wider",children:"Upcoming"}),a.jsxs("button",{onClick:()=>n("/reminders"),className:"text-xs text-indigo-400 font-semibold flex items-center gap-0.5 hover:text-indigo-300",children:["All",a.jsx($n,{size:10})]})]}),a.jsx("div",{className:"bg-[var(--bg-card)] rounded-xl border border-[var(--border)] px-4 py-3",children:v.map(p=>a.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-[var(--border-light)] last:border-0",children:[a.jsxs("div",{className:"min-w-0",children:[a.jsx("p",{className:"text-sm text-[var(--text-secondary)] truncate",children:p.title}),a.jsx("p",{className:"text-xs text-[var(--text-dim)] mt-0.5",children:p.dateStr})]}),a.jsxs("span",{className:`text-xs font-semibold px-2 py-0.5 rounded-full shrink-0 ${p.days<=15?"bg-rose-500/20 text-[var(--accent-rose)]":p.days<=30?"bg-amber-500/20 text-[var(--accent-amber)]":"bg-slate-500/20 text-[var(--text-muted)]"}`,children:[p.days,"d"]})]},p.reminderId))})]})]})}function Si({dot:n,label:o,value:u,items:c,renderItem:h}){const[m,b]=j.useState(!1),x=c&&c.length>1;return a.jsxs("div",{className:"pl-2",children:[a.jsxs("button",{onClick:x?()=>b(!m):void 0,className:`w-full flex items-center justify-between py-0.5 ${x?"cursor-pointer":""}`,children:[a.jsxs("span",{className:"flex items-center gap-1.5 text-xs text-[var(--text-dim)]",children:[a.jsx("span",{className:`w-1.5 h-1.5 rounded-full ${n}`}),o,x&&a.jsx(Ul,{size:10,className:`text-[var(--text-dim)] transition-transform duration-200 ${m?"rotate-180":""}`})]}),a.jsx("span",{className:"text-xs font-semibold text-[var(--text-secondary)] tabular-nums",children:u})]}),a.jsx("div",{className:"overflow-hidden transition-all duration-200 ease-in-out",style:{maxHeight:m?`${c.length*40}px`:"0px",opacity:m?1:0},children:a.jsx("div",{className:"pl-4 py-1 space-y-1 border-l border-[var(--border-light)] ml-0.5",children:c.map(h)})})]})}function wi({icon:n,iconColor:o,label:u,value:c,invested:h,pl:m,count:b,countLabel:x,emi:g,isLiability:d,onClick:w}){return a.jsxs("div",{onClick:w,className:"bg-[var(--bg-card)] rounded-xl border border-[var(--border)] p-3.5 cursor-pointer hover:bg-[var(--bg-hover)] transition-colors",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("span",{className:`w-7 h-7 rounded-lg flex items-center justify-center ${o}`,children:n}),a.jsx("p",{className:"text-xs font-semibold text-[var(--text-muted)]",children:u})]}),a.jsx("p",{className:"text-base font-bold text-[var(--text-primary)] tabular-nums",children:U(c)}),!d&&m!==void 0&&h>0&&a.jsxs("p",{className:`text-xs font-semibold tabular-nums mt-0.5 ${xb(m)}`,children:[Vi(m),U(Math.abs(m))," (",Vi(m),(m/h*100).toFixed(1),"%)"]}),d&&g>0&&a.jsxs("p",{className:"text-xs text-[var(--text-dim)] mt-0.5",children:["EMI: ",U(g),"/mo"]}),a.jsxs("p",{className:"text-xs text-[var(--text-dim)] mt-1",children:[b," ",x]})]})}function MN(){const n=la();return a.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-center",children:[a.jsx("div",{className:"w-16 h-16 bg-violet-500/15 rounded-2xl flex items-center justify-center mb-4",children:a.jsx(Hj,{size:32,className:"text-violet-400"})}),a.jsx("h3",{className:"text-xl font-semibold text-[var(--text-primary)] mb-2",children:"Coming Soon"}),a.jsx("p",{className:"text-[var(--text-muted)] text-sm max-w-sm",children:"This page is under construction. Navigate using the sidebar to explore available sections."}),a.jsx("p",{className:"text-xs text-[var(--text-dim)] mt-3 font-mono",children:n.pathname})]})}const kN=["Savings Account","Current Account","Fixed Deposit (FD)","Recurring Deposit (RD)","NRE Account","NRO Account","Minor Account"].map(n=>({value:n,label:n}));function EN({initial:n,onSave:o,onDelete:u,onCancel:c}){const{activeMembers:h}=ke(),m=!!n,[b,x]=j.useState({accountName:n?.accountName||"",memberId:n?.memberId||"",bankName:n?.bankName||"",accountNumber:n?.accountNumber||"",ifscCode:n?.ifscCode||"",branchName:n?.branchName||"",accountType:n?.accountType||"",status:n?.status||"Active"}),[g,d]=j.useState({});function w(S,v){x(p=>({...p,[S]:v})),d(p=>({...p,[S]:void 0}))}function A(){const S={};return b.accountName.trim()||(S.accountName="Required"),b.memberId||(S.memberId="Required"),b.bankName.trim()||(S.bankName="Required"),b.accountNumber.trim()||(S.accountNumber="Required"),b.ifscCode.trim()||(S.ifscCode="Required"),b.branchName.trim()||(S.branchName="Required"),b.accountType||(S.accountType="Required"),d(S),Object.keys(S).length===0}function E(){A()&&o({...b,ifscCode:b.ifscCode.toUpperCase()})}const C=h.map(S=>({value:S.memberId,label:`${S.memberName} (${S.relationship})`}));return a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsx(X,{label:"Account Name",required:!0,error:g.accountName,children:a.jsx(ce,{value:b.accountName,onChange:S=>w("accountName",S),placeholder:"e.g., HDFC Savings"})}),a.jsx(X,{label:"Family Member",required:!0,error:g.memberId,children:a.jsx(Se,{value:b.memberId,onChange:S=>w("memberId",S),options:C,placeholder:"Select member..."})})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsx(X,{label:"Bank Name",required:!0,error:g.bankName,children:a.jsx(ce,{value:b.bankName,onChange:S=>w("bankName",S),placeholder:"e.g., HDFC Bank"})}),a.jsx(X,{label:"Account Type",required:!0,error:g.accountType,children:a.jsx(Se,{value:b.accountType,onChange:S=>w("accountType",S),options:kN,placeholder:"Select type..."})})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsx(X,{label:"Account Number",required:!0,error:g.accountNumber,children:a.jsx(ce,{value:b.accountNumber,onChange:S=>w("accountNumber",S),placeholder:"e.g., 1234567890"})}),a.jsx(X,{label:"IFSC Code",required:!0,error:g.ifscCode,children:a.jsx(ce,{value:b.ifscCode,onChange:S=>w("ifscCode",S.toUpperCase()),placeholder:"e.g., HDFC0001234",maxLength:11})})]}),a.jsx(X,{label:"Branch Name",required:!0,error:g.branchName,children:a.jsx(ce,{value:b.branchName,onChange:S=>w("branchName",S),placeholder:"e.g., Hyderabad - Kondapur"})}),m&&a.jsx(X,{label:"Status",children:a.jsx(Se,{value:b.status,onChange:S=>w("status",S),options:[{value:"Active",label:"Active"},{value:"Inactive",label:"Inactive"}]})}),a.jsxs("div",{className:"flex items-center justify-between",children:[m&&u?a.jsx(ja,{onClick:u}):a.jsx("div",{}),a.jsx(Nt,{onCancel:c,onSubmit:E,submitLabel:m?"Update":"Add Account"})]})]})}const kh={"Savings Account":"bg-blue-500/15 text-[var(--accent-blue)]",Savings:"bg-blue-500/15 text-[var(--accent-blue)]",Salary:"bg-emerald-500/15 text-emerald-400","Current Account":"bg-violet-500/15 text-[var(--accent-violet)]","Fixed Deposit":"bg-amber-500/15 text-[var(--accent-amber)]","Fixed Deposit (FD)":"bg-amber-500/15 text-[var(--accent-amber)]"};function Eh(){const{selectedMember:n,member:o}=bt(),{loading:u,banks:c,addBankAccount:h,updateBankAccount:m,deleteBankAccount:b}=ke();if(u)return a.jsx(Na,{title:"Loading bank accounts",cards:3});const[x,g]=j.useState(null),d=j.useMemo(()=>{const S=c.filter(v=>v.status!=="Inactive");return n==="all"?S:S.filter(v=>v.memberId===n)},[c,n]),w=j.useMemo(()=>new Set(d.map(S=>S.bankName)).size,[d]),A=j.useMemo(()=>d.filter(S=>S.accountType==="Savings"||S.accountType==="Savings Account"||S.accountType==="Salary").length,[d]);function E(S){x?.edit?m(x.edit.accountId,S):h(S),g(null)}function C(){x?.edit&&confirm("Deactivate this bank account?")&&(b(x.edit.accountId),g(null))}return a.jsxs("div",{className:"space-y-4",children:[d.length===0?a.jsxs("div",{className:"bg-[var(--bg-card)] rounded-xl border border-[var(--border)] py-12 flex flex-col items-center gap-3",children:[a.jsx(Vn,{size:32,className:"text-[var(--text-dim)]"}),a.jsxs("p",{className:"text-sm text-[var(--text-muted)]",children:["No bank accounts",o?` for ${o.memberName}`:""]}),a.jsx("button",{onClick:()=>g("add"),className:"text-xs font-semibold text-violet-400 hover:text-violet-300",children:"Add your first bank account"})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[a.jsx(Rd,{label:"Total Accounts",value:d.length}),a.jsx(Rd,{label:"Banks",value:w}),a.jsx(Rd,{label:"Savings / Salary",value:A})]}),a.jsx("div",{className:"flex items-center justify-end px-1",children:a.jsxs("button",{onClick:()=>g("add"),className:"flex items-center gap-1.5 px-3 py-2 text-xs font-semibold text-violet-400 hover:text-violet-300 bg-[var(--bg-card)] border border-[var(--border)] rounded-lg transition-colors",children:[a.jsx(sa,{size:14})," Add Account"]})}),a.jsxs("div",{className:"bg-[var(--bg-card)] rounded-xl border border-[var(--border)] overflow-hidden",children:[a.jsx("div",{className:"hidden sm:block overflow-x-auto",children:a.jsxs("table",{className:"w-full text-sm min-w-[580px]",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b border-[var(--border-light)] bg-[var(--bg-inset)]",children:[a.jsx("th",{className:"text-left py-2.5 px-4 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Account"}),a.jsx("th",{className:"text-left py-2.5 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Bank"}),!o&&a.jsx("th",{className:"text-left py-2.5 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Member"}),a.jsx("th",{className:"text-left py-2.5 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Type"}),a.jsx("th",{className:"text-left py-2.5 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Account No."}),a.jsx("th",{className:"text-left py-2.5 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Branch"}),a.jsx("th",{className:"w-8 py-2.5 px-2"})]})}),a.jsx("tbody",{children:d.map(S=>a.jsxs("tr",{className:"border-b border-[var(--border-light)] last:border-0 hover:bg-[var(--bg-hover)] transition-colors group",children:[a.jsx("td",{className:"py-2.5 px-4",children:a.jsx("p",{className:"text-sm font-medium text-[var(--text-primary)]",children:S.accountName})}),a.jsx("td",{className:"py-2.5 px-3 text-xs text-[var(--text-secondary)]",children:S.bankName}),!o&&a.jsx("td",{className:"py-2.5 px-3 text-xs text-[var(--text-secondary)]",children:S.memberName}),a.jsx("td",{className:"py-2.5 px-3",children:a.jsx("span",{className:`text-xs font-semibold px-2 py-0.5 rounded-full ${kh[S.accountType]||"bg-slate-500/15 text-[var(--text-muted)]"}`,children:S.accountType})}),a.jsx("td",{className:"py-2.5 px-3 text-xs text-[var(--text-muted)] tabular-nums",children:S.accountNumber}),a.jsx("td",{className:"py-2.5 px-3 text-xs text-[var(--text-dim)]",children:S.branchName}),a.jsx("td",{className:"py-2.5 px-2",children:a.jsx("button",{onClick:()=>g({edit:S}),className:"opacity-0 group-hover:opacity-100 p-1 rounded text-[var(--text-dim)] hover:text-[var(--text-primary)] transition-all",children:a.jsx(ya,{size:12})})})]},S.accountId))})]})}),a.jsx("div",{className:"sm:hidden divide-y divide-[var(--border-light)]",children:d.map(S=>a.jsxs("div",{onClick:()=>g({edit:S}),className:"px-4 py-3.5 hover:bg-[var(--bg-hover)] transition-colors cursor-pointer",children:[a.jsxs("div",{className:"flex items-center justify-between mb-1",children:[a.jsx("p",{className:"text-sm font-medium text-[var(--text-primary)]",children:S.accountName}),a.jsx("span",{className:`text-xs font-semibold px-2 py-0.5 rounded-full ${kh[S.accountType]||"bg-slate-500/15 text-[var(--text-muted)]"}`,children:S.accountType})]}),a.jsxs("p",{className:"text-xs text-[var(--text-muted)]",children:[S.bankName,o?"":`  ${S.memberName}`]}),a.jsxs("div",{className:"flex items-center justify-between mt-1",children:[a.jsx("p",{className:"text-xs text-[var(--text-dim)] tabular-nums",children:S.accountNumber}),a.jsx("p",{className:"text-xs text-[var(--text-dim)]",children:S.branchName})]})]},S.accountId))})]})]}),a.jsx(rt,{open:!!x,onClose:()=>g(null),title:x?.edit?"Edit Bank Account":"Add Bank Account",children:a.jsx(EN,{initial:x?.edit||void 0,onSave:E,onDelete:x?.edit?C:void 0,onCancel:()=>g(null)})})]})}function Rd({label:n,value:o}){return a.jsxs("div",{className:"bg-[var(--bg-card)] rounded-xl border border-[var(--border)] px-4 py-3",children:[a.jsx("p",{className:"text-xs text-[var(--text-dim)] uppercase tracking-wider mb-1",children:n}),a.jsx("p",{className:"text-sm font-bold text-[var(--text-primary)] tabular-nums",children:o})]})}const zN=["Demat + Trading","Mutual Fund","Trading","Direct AMC","Broker"].map(n=>({value:n,label:n}));function DN({initial:n,onSave:o,onDelete:u,onCancel:c}){const{activeMembers:h,activeBanks:m}=ke(),b=!!n,[x,g]=j.useState({accountName:n?.accountName||"",memberId:n?.memberId||"",bankAccountId:n?.bankAccountId||"",accountType:n?.accountType||"",platformBroker:n?.platformBroker||"",accountClientId:n?.accountClientId||"",dematDpId:n?.dematDpId||"",registeredEmail:n?.registeredEmail||"",registeredPhone:n?.registeredPhone||"",status:n?.status||"Active"}),[d,w]=j.useState({});function A(y,_){g(O=>({...O,[y]:_})),w(O=>({...O,[y]:void 0}))}function E(y){g(_=>({..._,memberId:y,bankAccountId:""})),w(_=>({..._,memberId:void 0}))}function C(){const y={};return x.accountName.trim()||(y.accountName="Required"),x.memberId||(y.memberId="Required"),x.bankAccountId||(y.bankAccountId="Required"),x.accountType||(y.accountType="Required"),x.platformBroker.trim()||(y.platformBroker="Required"),x.accountClientId.trim()||(y.accountClientId="Required"),x.registeredEmail.trim()||(y.registeredEmail="Required"),x.registeredPhone.trim()||(y.registeredPhone="Required"),w(y),Object.keys(y).length===0}function S(){C()&&o(x)}const v=h.map(y=>({value:y.memberId,label:`${y.memberName} (${y.relationship})`})),p=j.useMemo(()=>x.memberId?m.filter(y=>y.memberId===x.memberId).map(y=>({value:y.accountId,label:`${y.accountName} - ${y.bankName}`})):[],[m,x.memberId]);return a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsx(X,{label:"Account Name",required:!0,error:d.accountName,children:a.jsx(ce,{value:x.accountName,onChange:y=>A("accountName",y),placeholder:"e.g., Zerodha Demat"})}),a.jsx(X,{label:"Family Member",required:!0,error:d.memberId,children:a.jsx(Se,{value:x.memberId,onChange:E,options:v,placeholder:"Select member..."})})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsx(X,{label:"Linked Bank Account",required:!0,error:d.bankAccountId,children:a.jsx(Se,{value:x.bankAccountId,onChange:y=>A("bankAccountId",y),options:p,placeholder:x.memberId?p.length?"Select bank account...":"No bank accounts for this member":"Select member first..."})}),a.jsx(X,{label:"Account Type",required:!0,error:d.accountType,children:a.jsx(Se,{value:x.accountType,onChange:y=>A("accountType",y),options:zN,placeholder:"Select type..."})})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsx(X,{label:"Platform / Broker",required:!0,error:d.platformBroker,children:a.jsx(ce,{value:x.platformBroker,onChange:y=>A("platformBroker",y),placeholder:"e.g., Zerodha, Groww"})}),a.jsx(X,{label:"Account / Client ID",required:!0,error:d.accountClientId,children:a.jsx(ce,{value:x.accountClientId,onChange:y=>A("accountClientId",y),placeholder:"e.g., ZR1234"})})]}),a.jsx(X,{label:"Demat DP ID",error:d.dematDpId,children:a.jsx(ce,{value:x.dematDpId,onChange:y=>A("dematDpId",y),placeholder:"16-digit DP ID (optional)",maxLength:16})}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsx(X,{label:"Registered Email",required:!0,error:d.registeredEmail,children:a.jsx(ce,{type:"email",value:x.registeredEmail,onChange:y=>A("registeredEmail",y),placeholder:"email@example.com"})}),a.jsx(X,{label:"Registered Phone",required:!0,error:d.registeredPhone,children:a.jsx(ce,{value:x.registeredPhone,onChange:y=>A("registeredPhone",y),placeholder:"9876543210"})})]}),b&&a.jsx(X,{label:"Status",children:a.jsx(Se,{value:x.status,onChange:y=>A("status",y),options:[{value:"Active",label:"Active"},{value:"Inactive",label:"Inactive"}]})}),a.jsxs("div",{className:"flex items-center justify-between",children:[b&&u?a.jsx(ja,{onClick:u}):a.jsx("div",{}),a.jsx(Nt,{onCancel:c,onSubmit:S,submitLabel:b?"Update":"Add Account"})]})]})}const zh={"Demat + Trading":"bg-violet-500/15 text-[var(--accent-violet)]","Mutual Fund":"bg-blue-500/15 text-[var(--accent-blue)]",Trading:"bg-orange-500/15 text-[var(--accent-orange)]",Demat:"bg-amber-500/15 text-[var(--accent-amber)]","Direct AMC":"bg-emerald-500/15 text-emerald-400",Broker:"bg-rose-500/15 text-[var(--accent-rose)]"};function RN(){const{selectedMember:n,member:o}=bt(),{loading:u,investments:c,addInvestmentAccount:h,updateInvestmentAccount:m,deleteInvestmentAccount:b}=ke();if(u)return a.jsx(Na,{title:"Loading investment accounts",cards:4});const[x,g]=j.useState(null),d=j.useMemo(()=>{const v=c.filter(p=>p.status!=="Inactive");return n==="all"?v:v.filter(p=>p.memberId===n)},[c,n]),w=j.useMemo(()=>new Set(d.map(v=>v.platformBroker)).size,[d]),A=d.filter(v=>v.accountType==="Demat + Trading"||v.accountType==="Demat"||v.accountType==="Trading").length,E=d.filter(v=>v.accountType==="Mutual Fund"||v.accountType==="Direct AMC").length;function C(v){x?.edit?m(x.edit.accountId,v):h(v),g(null)}function S(){x?.edit&&confirm("Deactivate this investment account?")&&(b(x.edit.accountId),g(null))}return a.jsxs("div",{className:"space-y-4",children:[d.length===0?a.jsxs("div",{className:"bg-[var(--bg-card)] rounded-xl border border-[var(--border)] py-12 flex flex-col items-center gap-3",children:[a.jsx($i,{size:32,className:"text-[var(--text-dim)]"}),a.jsxs("p",{className:"text-sm text-[var(--text-muted)]",children:["No investment accounts",o?` for ${o.memberName}`:""]}),a.jsx("button",{onClick:()=>g("add"),className:"text-xs font-semibold text-violet-400 hover:text-violet-300",children:"Add your first investment account"})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:[a.jsx(Ci,{label:"Total Accounts",value:d.length}),a.jsx(Ci,{label:"Platforms",value:w}),a.jsx(Ci,{label:"Demat / Trading",value:A}),a.jsx(Ci,{label:"Mutual Fund",value:E})]}),a.jsx("div",{className:"flex items-center justify-end px-1",children:a.jsxs("button",{onClick:()=>g("add"),className:"flex items-center gap-1.5 px-3 py-2 text-xs font-semibold text-violet-400 hover:text-violet-300 bg-[var(--bg-card)] border border-[var(--border)] rounded-lg transition-colors",children:[a.jsx(sa,{size:14})," Add Account"]})}),a.jsxs("div",{className:"bg-[var(--bg-card)] rounded-xl border border-[var(--border)] overflow-hidden",children:[a.jsx("div",{className:"hidden sm:block overflow-x-auto",children:a.jsxs("table",{className:"w-full text-sm min-w-[620px]",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b border-[var(--border-light)] bg-[var(--bg-inset)]",children:[a.jsx("th",{className:"text-left py-2.5 px-4 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Account"}),a.jsx("th",{className:"text-left py-2.5 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Platform"}),!o&&a.jsx("th",{className:"text-left py-2.5 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Member"}),a.jsx("th",{className:"text-left py-2.5 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Type"}),a.jsx("th",{className:"text-left py-2.5 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Client ID"}),a.jsx("th",{className:"text-left py-2.5 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Linked Bank"}),a.jsx("th",{className:"w-8 py-2.5 px-2"})]})}),a.jsx("tbody",{children:d.map(v=>a.jsxs("tr",{className:"border-b border-[var(--border-light)] last:border-0 hover:bg-[var(--bg-hover)] transition-colors group",children:[a.jsx("td",{className:"py-2.5 px-4",children:a.jsx("p",{className:"text-sm font-medium text-[var(--text-primary)]",children:v.accountName})}),a.jsx("td",{className:"py-2.5 px-3 text-xs text-[var(--text-secondary)]",children:v.platformBroker}),!o&&a.jsx("td",{className:"py-2.5 px-3 text-xs text-[var(--text-secondary)]",children:v.memberName}),a.jsx("td",{className:"py-2.5 px-3",children:a.jsx("span",{className:`text-xs font-semibold px-2 py-0.5 rounded-full ${zh[v.accountType]||"bg-slate-500/15 text-[var(--text-muted)]"}`,children:v.accountType})}),a.jsx("td",{className:"py-2.5 px-3 text-xs text-[var(--text-muted)] tabular-nums",children:v.accountClientId}),a.jsx("td",{className:"py-2.5 px-3 text-xs text-[var(--text-dim)]",children:v.bankAccountName}),a.jsx("td",{className:"py-2.5 px-2",children:a.jsx("button",{onClick:()=>g({edit:v}),className:"opacity-0 group-hover:opacity-100 p-1 rounded text-[var(--text-dim)] hover:text-[var(--text-primary)] transition-all",children:a.jsx(ya,{size:12})})})]},v.accountId))})]})}),a.jsx("div",{className:"sm:hidden divide-y divide-[var(--border-light)]",children:d.map(v=>a.jsxs("div",{onClick:()=>g({edit:v}),className:"px-4 py-3.5 hover:bg-[var(--bg-hover)] transition-colors cursor-pointer",children:[a.jsxs("div",{className:"flex items-center justify-between mb-1",children:[a.jsx("p",{className:"text-sm font-medium text-[var(--text-primary)]",children:v.accountName}),a.jsx("span",{className:`text-xs font-semibold px-2 py-0.5 rounded-full ${zh[v.accountType]||"bg-slate-500/15 text-[var(--text-muted)]"}`,children:v.accountType})]}),a.jsxs("p",{className:"text-xs text-[var(--text-muted)]",children:[v.platformBroker,o?"":`  ${v.memberName}`]}),a.jsxs("div",{className:"flex items-center justify-between mt-1",children:[a.jsxs("p",{className:"text-xs text-[var(--text-dim)]",children:["Client: ",v.accountClientId]}),a.jsx("p",{className:"text-xs text-[var(--text-dim)]",children:v.bankAccountName})]})]},v.accountId))})]})]}),a.jsx(rt,{open:!!x,onClose:()=>g(null),title:x?.edit?"Edit Investment Account":"Add Investment Account",wide:!0,children:a.jsx(DN,{initial:x?.edit||void 0,onSave:C,onDelete:x?.edit?S:void 0,onCancel:()=>g(null)})})]})}function Ci({label:n,value:o}){return a.jsxs("div",{className:"bg-[var(--bg-card)] rounded-xl border border-[var(--border)] px-4 py-3",children:[a.jsx("p",{className:"text-xs text-[var(--text-dim)] uppercase tracking-wider mb-1",children:n}),a.jsx("p",{className:"text-sm font-bold text-[var(--text-primary)] tabular-nums",children:o})]})}const LN=["Term Life","Health","Motor","Home Insurance","Travel","Personal Accident","Life Insurance","Others"].map(n=>({value:n,label:n})),ON=[{value:"Active",label:"Active"},{value:"Expired",label:"Expired"},{value:"Surrendered",label:"Surrendered"},{value:"Lapsed",label:"Lapsed"},{value:"Inactive",label:"Inactive"}];function IN({initial:n,onSave:o,onDelete:u,onCancel:c}){const{activeMembers:h}=ke(),m=!!n,[b,x]=j.useState({policyType:n?.policyType||"",company:n?.company||"",policyNumber:n?.policyNumber||"",policyName:n?.policyName||"",insuredMember:n?.insuredMember||"",memberId:n?.memberId||"",sumAssured:n?.sumAssured||"",nominee:n?.nominee||"",premium:n?.premium||"",premiumFrequency:n?.premiumFrequency||"Annual",status:n?.status||"Active",notes:n?.notes||""}),[g,d]=j.useState({});function w(v,p){x(y=>({...y,[v]:p})),d(y=>({...y,[v]:void 0}))}function A(v){const p=h.find(y=>y.memberId===v);x(y=>({...y,memberId:v,insuredMember:p?.memberName||""})),d(y=>({...y,memberId:void 0}))}function E(){const v={};return b.policyType||(v.policyType="Required"),b.company.trim()||(v.company="Required"),b.policyNumber.trim()||(v.policyNumber="Required"),b.policyName.trim()||(v.policyName="Required"),b.memberId||(v.memberId="Required"),(!b.sumAssured||Number(b.sumAssured)<=0)&&(v.sumAssured="Must be > 0"),d(v),Object.keys(v).length===0}function C(){E()&&o({...b,sumAssured:Number(b.sumAssured),premium:Number(b.premium)||0})}const S=h.map(v=>({value:v.memberId,label:`${v.memberName} (${v.relationship})`}));return a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsx(X,{label:"Policy Type",required:!0,error:g.policyType,children:a.jsx(Se,{value:b.policyType,onChange:v=>w("policyType",v),options:LN,placeholder:"Select type..."})}),a.jsx(X,{label:"Insurance Company",required:!0,error:g.company,children:a.jsx(ce,{value:b.company,onChange:v=>w("company",v),placeholder:"e.g., HDFC Life"})})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsx(X,{label:"Policy Number",required:!0,error:g.policyNumber,children:a.jsx(ce,{value:b.policyNumber,onChange:v=>w("policyNumber",v),placeholder:"e.g., HL-2024-78901"})}),a.jsx(X,{label:"Policy Name",required:!0,error:g.policyName,children:a.jsx(ce,{value:b.policyName,onChange:v=>w("policyName",v),placeholder:"e.g., Click 2 Protect Life"})})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsx(X,{label:"Insured Member",required:!0,error:g.memberId,children:a.jsx(Se,{value:b.memberId,onChange:A,options:S,placeholder:"Select member..."})}),a.jsx(X,{label:"Nominee",children:a.jsx(Se,{value:b.nominee,onChange:v=>w("nominee",v),options:S.map(v=>({...v,label:v.label.split(" (")[0]})),placeholder:"Select nominee (optional)..."})})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[a.jsx(X,{label:"Sum Assured ()",required:!0,error:g.sumAssured,children:a.jsx(ce,{type:"number",value:b.sumAssured,onChange:v=>w("sumAssured",v),placeholder:"e.g., 10000000"})}),a.jsx(X,{label:"Premium ()",children:a.jsx(ce,{type:"number",value:b.premium,onChange:v=>w("premium",v),placeholder:"e.g., 12500"})}),a.jsx(X,{label:"Premium Frequency",children:a.jsx(Se,{value:b.premiumFrequency,onChange:v=>w("premiumFrequency",v),options:[{value:"Annual",label:"Annual"},{value:"Monthly",label:"Monthly"},{value:"Quarterly",label:"Quarterly"}]})})]}),m&&a.jsx(X,{label:"Status",children:a.jsx(Se,{value:b.status,onChange:v=>w("status",v),options:ON})}),a.jsx(X,{label:"Notes",children:a.jsx(Hs,{value:b.notes,onChange:v=>w("notes",v),placeholder:"Additional information..."})}),a.jsxs("div",{className:"flex items-center justify-between",children:[m&&u?a.jsx(ja,{onClick:u}):a.jsx("div",{}),a.jsx(Nt,{onCancel:c,onSubmit:C,submitLabel:m?"Update":"Add Policy"})]})]})}const Dh={"Term Life":"bg-rose-500/15 text-[var(--accent-rose)]",Health:"bg-emerald-500/15 text-emerald-400",Motor:"bg-blue-500/15 text-[var(--accent-blue)]","Home Insurance":"bg-amber-500/15 text-[var(--accent-amber)]",Travel:"bg-violet-500/15 text-[var(--accent-violet)]","Life Insurance":"bg-rose-500/15 text-[var(--accent-rose)]","Personal Accident":"bg-orange-500/15 text-[var(--accent-orange)]"};function _N(){const{selectedMember:n,member:o}=bt(),{loading:u,insurancePolicies:c,addInsurance:h,updateInsurance:m,deleteInsurance:b}=ke();if(u)return a.jsx(Na,{title:"Loading insurance",cards:5});const[x,g]=j.useState(null),d=j.useMemo(()=>{const p=c.filter(y=>y.status!=="Inactive");return n==="all"?p:p.filter(y=>y.memberId===n)},[c,n]),w=d.reduce((p,y)=>p+(y.sumAssured||0),0),A=d.reduce((p,y)=>p+(y.premium||0),0),E=d.filter(p=>p.policyType==="Term Life"||p.policyType==="Life Insurance").reduce((p,y)=>p+(y.sumAssured||0),0),C=d.filter(p=>p.policyType==="Health").reduce((p,y)=>p+(y.sumAssured||0),0);function S(p){x?.edit?m(x.edit.policyId,p):h(p),g(null)}function v(){x?.edit&&confirm("Deactivate this insurance policy?")&&(b(x.edit.policyId),g(null))}return a.jsxs("div",{className:"space-y-4",children:[d.length===0?a.jsxs("div",{className:"bg-[var(--bg-card)] rounded-xl border border-[var(--border)] py-12 flex flex-col items-center gap-3",children:[a.jsx(Il,{size:32,className:"text-[var(--text-dim)]"}),a.jsxs("p",{className:"text-sm text-[var(--text-muted)]",children:["No insurance policies",o?` for ${o.memberName}`:""]}),a.jsx("button",{onClick:()=>g("add"),className:"text-xs font-semibold text-violet-400 hover:text-violet-300",children:"Add your first policy"})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-5 gap-3",children:[a.jsx(qn,{label:"Policies",value:d.length}),a.jsx(qn,{label:"Total Cover",value:U(w),bold:!0}),a.jsx(qn,{label:"Life Cover",value:U(E)}),a.jsx(qn,{label:"Health Cover",value:U(C)}),a.jsx(qn,{label:"Annual Premium",value:U(A)})]}),a.jsxs("div",{className:"bg-[var(--bg-card)] rounded-xl border border-[var(--border)] p-4",children:[a.jsx("p",{className:"text-xs font-bold text-[var(--text-secondary)] uppercase tracking-wider mb-3",children:"Coverage Adequacy"}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[a.jsx(Rh,{label:"Life Insurance",current:E,recommended:"10-15x annual income",tip:"Term life cover should be 10-15x your annual income to protect dependents",icon:"heart"}),a.jsx(Rh,{label:"Health Insurance",current:C,recommended:"50L - 1Cr family floater",tip:"Considering medical inflation, a 50L-1Cr family floater is recommended",icon:"shield"})]})]}),a.jsx("div",{className:"flex items-center justify-end px-1",children:a.jsxs("button",{onClick:()=>g("add"),className:"flex items-center gap-1.5 px-3 py-2 text-xs font-semibold text-violet-400 hover:text-violet-300 bg-[var(--bg-card)] border border-[var(--border)] rounded-lg transition-colors",children:[a.jsx(sa,{size:14})," Add Policy"]})}),a.jsxs("div",{className:"bg-[var(--bg-card)] rounded-xl border border-[var(--border)] overflow-hidden",children:[a.jsx("div",{className:"hidden sm:block overflow-x-auto",children:a.jsxs("table",{className:"w-full text-sm min-w-[700px]",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b border-[var(--border-light)] bg-[var(--bg-inset)]",children:[a.jsx("th",{className:"text-left py-2.5 px-4 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Policy"}),a.jsx("th",{className:"text-left py-2.5 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Type"}),a.jsx("th",{className:"text-left py-2.5 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Company"}),!o&&a.jsx("th",{className:"text-left py-2.5 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Insured"}),a.jsx("th",{className:"text-right py-2.5 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Sum Assured"}),a.jsx("th",{className:"text-right py-2.5 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Premium"}),a.jsx("th",{className:"w-8 py-2.5 px-2"})]})}),a.jsx("tbody",{children:d.map(p=>a.jsxs("tr",{className:"border-b border-[var(--border-light)] last:border-0 hover:bg-[var(--bg-hover)] transition-colors group",children:[a.jsxs("td",{className:"py-2.5 px-4",children:[a.jsx("p",{className:"text-sm font-medium text-[var(--text-primary)]",children:p.policyName}),a.jsx("p",{className:"text-xs text-[var(--text-dim)]",children:p.policyNumber})]}),a.jsx("td",{className:"py-2.5 px-3",children:a.jsx("span",{className:`text-xs font-semibold px-2 py-0.5 rounded-full ${Dh[p.policyType]||"bg-slate-500/15 text-[var(--text-muted)]"}`,children:p.policyType})}),a.jsx("td",{className:"py-2.5 px-3 text-xs text-[var(--text-secondary)]",children:p.company}),!o&&a.jsx("td",{className:"py-2.5 px-3 text-xs text-[var(--text-secondary)]",children:p.insuredMember}),a.jsx("td",{className:"py-2.5 px-3 text-right text-xs font-semibold text-[var(--text-primary)] tabular-nums",children:U(p.sumAssured)}),a.jsxs("td",{className:"py-2.5 px-3 text-right text-xs text-[var(--text-muted)] tabular-nums",children:[U(p.premium),"/",p.premiumFrequency==="Annual"?"yr":"mo"]}),a.jsx("td",{className:"py-2.5 px-2",children:a.jsx("button",{onClick:()=>g({edit:p}),className:"opacity-0 group-hover:opacity-100 p-1 rounded text-[var(--text-dim)] hover:text-[var(--text-primary)] transition-all",children:a.jsx(ya,{size:12})})})]},p.policyId))})]})}),a.jsx("div",{className:"sm:hidden divide-y divide-[var(--border-light)]",children:d.map(p=>a.jsxs("div",{onClick:()=>g({edit:p}),className:"px-4 py-3.5 hover:bg-[var(--bg-hover)] transition-colors cursor-pointer",children:[a.jsxs("div",{className:"flex items-center justify-between mb-1",children:[a.jsx("p",{className:"text-sm font-medium text-[var(--text-primary)] truncate mr-2",children:p.policyName}),a.jsx("span",{className:`text-xs font-semibold px-2 py-0.5 rounded-full shrink-0 ${Dh[p.policyType]||"bg-slate-500/15 text-[var(--text-muted)]"}`,children:p.policyType})]}),a.jsxs("p",{className:"text-xs text-[var(--text-muted)]",children:[p.company,o?"":`  ${p.insuredMember}`]}),a.jsxs("div",{className:"flex items-center justify-between mt-1.5",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-[var(--text-dim)]",children:"Cover"}),a.jsx("p",{className:"text-xs font-semibold text-[var(--text-primary)] tabular-nums",children:U(p.sumAssured)})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-xs text-[var(--text-dim)]",children:"Premium"}),a.jsxs("p",{className:"text-xs text-[var(--text-muted)] tabular-nums",children:[U(p.premium),"/",p.premiumFrequency==="Annual"?"yr":"mo"]})]})]})]},p.policyId))})]})]}),a.jsx(rt,{open:!!x,onClose:()=>g(null),title:x?.edit?"Edit Insurance Policy":"Add Insurance Policy",wide:!0,children:a.jsx(IN,{initial:x?.edit||void 0,onSave:S,onDelete:x?.edit?v:void 0,onCancel:()=>g(null)})})]})}function Rh({label:n,current:o,recommended:u,tip:c}){const h=o===0;return a.jsxs("div",{className:`rounded-lg border px-3 py-2.5 ${h?"border-rose-500/30 bg-rose-500/5":"border-[var(--border)] bg-[var(--bg-inset)]"}`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-1",children:[a.jsx("p",{className:"text-xs font-semibold text-[var(--text-primary)]",children:n}),h?a.jsx("span",{className:"text-xs font-bold text-[var(--accent-rose)]",children:"Not covered"}):a.jsx("span",{className:"text-xs font-semibold text-emerald-400",children:U(o)})]}),a.jsxs("p",{className:"text-xs text-[var(--text-dim)]",children:["Recommended: ",u]}),a.jsx("p",{className:"text-[10px] text-[var(--text-dim)] mt-0.5 italic",children:c})]})}function qn({label:n,value:o,bold:u}){return a.jsxs("div",{className:"bg-[var(--bg-card)] rounded-xl border border-[var(--border)] px-4 py-3",children:[a.jsx("p",{className:"text-xs text-[var(--text-dim)] uppercase tracking-wider mb-1",children:n}),a.jsx("p",{className:`text-sm tabular-nums ${u?"font-bold":"font-semibold"} text-[var(--text-primary)]`,children:o})]})}const HN=["Home Loan","Car Loan","Personal Loan","Education Loan","Gold Loan","Credit Card","Business Loan","Loan Against Property","Other"].map(n=>({value:n,label:n})),qN=[{value:"Active",label:"Active"},{value:"Closed",label:"Closed"},{value:"Inactive",label:"Inactive"}];function BN({initial:n,onSave:o,onDelete:u,onCancel:c}){const{activeMembers:h}=ke(),m=!!n,[b,x]=j.useState({liabilityType:n?.liabilityType||"",lenderName:n?.lenderName||"",familyMemberId:n?.familyMemberId||"",outstandingBalance:n?.outstandingBalance||"",emiAmount:n?.emiAmount||"",interestRate:n?.interestRate||"",status:n?.status||"Active",notes:n?.notes||""}),[g,d]=j.useState({});function w(S,v){x(p=>({...p,[S]:v})),d(p=>({...p,[S]:void 0}))}function A(){const S={};return b.liabilityType||(S.liabilityType="Required"),b.lenderName.trim()||(S.lenderName="Required"),(!b.outstandingBalance||Number(b.outstandingBalance)<=0)&&(S.outstandingBalance="Must be > 0"),d(S),Object.keys(S).length===0}function E(){A()&&o({...b,outstandingBalance:Number(b.outstandingBalance),emiAmount:Number(b.emiAmount)||0,interestRate:Number(b.interestRate)||0})}const C=h.map(S=>({value:S.memberId,label:`${S.memberName} (${S.relationship})`}));return a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsx(X,{label:"Liability Type",required:!0,error:g.liabilityType,children:a.jsx(Se,{value:b.liabilityType,onChange:S=>w("liabilityType",S),options:HN,placeholder:"Select type..."})}),a.jsx(X,{label:"Lender / Bank",required:!0,error:g.lenderName,children:a.jsx(ce,{value:b.lenderName,onChange:S=>w("lenderName",S),placeholder:"e.g., HDFC Bank"})})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsx(X,{label:"Family Member",children:a.jsx(Se,{value:b.familyMemberId,onChange:S=>w("familyMemberId",S),options:C,placeholder:"Select member (optional)..."})}),a.jsx(X,{label:"Outstanding Balance ()",required:!0,error:g.outstandingBalance,children:a.jsx(ce,{type:"number",value:b.outstandingBalance,onChange:S=>w("outstandingBalance",S),placeholder:"e.g., 3500000"})})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsx(X,{label:"EMI Amount ()",children:a.jsx(ce,{type:"number",value:b.emiAmount,onChange:S=>w("emiAmount",S),placeholder:"e.g., 32000"})}),a.jsx(X,{label:"Interest Rate (%)",children:a.jsx(ce,{type:"number",value:b.interestRate,onChange:S=>w("interestRate",S),placeholder:"e.g., 8.5",step:"0.01"})})]}),m&&a.jsx(X,{label:"Status",children:a.jsx(Se,{value:b.status,onChange:S=>w("status",S),options:qN})}),a.jsx(X,{label:"Notes",children:a.jsx(Hs,{value:b.notes,onChange:S=>w("notes",S),placeholder:"e.g., Flat in Kondapur"})}),a.jsxs("div",{className:"flex items-center justify-between",children:[m&&u?a.jsx(ja,{onClick:u}):a.jsx("div",{}),a.jsx(Nt,{onCancel:c,onSubmit:E,submitLabel:m?"Update":"Add Liability"})]})]})}const Lh={"Home Loan":"bg-blue-500/15 text-[var(--accent-blue)]","Car Loan":"bg-amber-500/15 text-[var(--accent-amber)]","Gold Loan":"bg-orange-500/15 text-[var(--accent-orange)]","Personal Loan":"bg-violet-500/15 text-[var(--accent-violet)]","Education Loan":"bg-emerald-500/15 text-emerald-400","Credit Card":"bg-rose-500/15 text-[var(--accent-rose)]"};function UN(){const{selectedMember:n,member:o}=bt(),{loading:u,liabilityList:c,addLiability:h,updateLiability:m,deleteLiability:b}=ke();if(u)return a.jsx(Na,{title:"Loading liabilities",cards:4});const[x,g]=j.useState(null),d=j.useMemo(()=>{const v=c.filter(p=>p.status!=="Inactive");return n==="all"?v:v.filter(p=>p.familyMemberId===n)},[c,n]),w=d.reduce((v,p)=>v+(p.outstandingBalance||0),0),A=d.reduce((v,p)=>v+(p.emiAmount||0),0),E=d.filter(v=>v.status==="Active").length;function C(v){x?.edit?m(x.edit.liabilityId,v):h(v),g(null)}function S(){x?.edit&&confirm("Deactivate this liability?")&&(b(x.edit.liabilityId),g(null))}return a.jsxs("div",{className:"space-y-4",children:[d.length===0?a.jsxs("div",{className:"bg-[var(--bg-card)] rounded-xl border border-[var(--border)] py-12 flex flex-col items-center gap-3",children:[a.jsx(Gn,{size:32,className:"text-[var(--text-dim)]"}),a.jsxs("p",{className:"text-sm text-[var(--text-muted)]",children:["No liabilities",o?` for ${o.memberName}`:""]}),a.jsx("button",{onClick:()=>g("add"),className:"text-xs font-semibold text-violet-400 hover:text-violet-300",children:"Add a liability"})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:[a.jsx(Ai,{label:"Liabilities",value:`${E} active`}),a.jsx(Ai,{label:"Outstanding",value:U(w),color:"rose",bold:!0}),a.jsx(Ai,{label:"Monthly EMI",value:U(A),color:"rose"}),a.jsx(Ai,{label:"Avg. Interest",value:d.length>0?`${(d.reduce((v,p)=>v+(p.interestRate||0),0)/d.length).toFixed(1)}%`:""})]}),a.jsx("div",{className:"flex items-center justify-end px-1",children:a.jsxs("button",{onClick:()=>g("add"),className:"flex items-center gap-1.5 px-3 py-2 text-xs font-semibold text-violet-400 hover:text-violet-300 bg-[var(--bg-card)] border border-[var(--border)] rounded-lg transition-colors",children:[a.jsx(sa,{size:14})," Add Liability"]})}),a.jsxs("div",{className:"bg-[var(--bg-card)] rounded-xl border border-[var(--border)] overflow-hidden",children:[a.jsx("div",{className:"hidden sm:block overflow-x-auto",children:a.jsxs("table",{className:"w-full text-sm min-w-[640px]",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b border-[var(--border-light)] bg-[var(--bg-inset)]",children:[a.jsx("th",{className:"text-left py-2.5 px-4 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Type"}),a.jsx("th",{className:"text-left py-2.5 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Lender"}),!o&&a.jsx("th",{className:"text-left py-2.5 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Member"}),a.jsx("th",{className:"text-right py-2.5 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Outstanding"}),a.jsx("th",{className:"text-right py-2.5 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"EMI"}),a.jsx("th",{className:"text-right py-2.5 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Interest"}),a.jsx("th",{className:"text-right py-2.5 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Remaining"}),a.jsx("th",{className:"w-8 py-2.5 px-2"})]})}),a.jsx("tbody",{children:d.map(v=>a.jsxs("tr",{className:"border-b border-[var(--border-light)] last:border-0 hover:bg-[var(--bg-hover)] transition-colors group",children:[a.jsxs("td",{className:"py-2.5 px-4",children:[a.jsx("span",{className:`text-xs font-semibold px-2 py-0.5 rounded-full ${Lh[v.liabilityType]||"bg-slate-500/15 text-[var(--text-muted)]"}`,children:v.liabilityType}),v.notes&&a.jsx("p",{className:"text-xs text-[var(--text-dim)] mt-1",children:v.notes})]}),a.jsx("td",{className:"py-2.5 px-3 text-sm font-medium text-[var(--text-primary)]",children:v.lenderName}),!o&&a.jsx("td",{className:"py-2.5 px-3 text-xs text-[var(--text-secondary)]",children:v.familyMemberName}),a.jsx("td",{className:"py-2.5 px-3 text-right text-xs font-semibold text-[var(--accent-rose)] tabular-nums",children:U(v.outstandingBalance)}),a.jsx("td",{className:"py-2.5 px-3 text-right text-xs text-[var(--text-muted)] tabular-nums",children:v.emiAmount?`${U(v.emiAmount)}/mo`:""}),a.jsx("td",{className:"py-2.5 px-3 text-right text-xs text-[var(--text-muted)] tabular-nums",children:v.interestRate?`${v.interestRate}%`:""}),a.jsx("td",{className:"py-2.5 px-3 text-right text-xs text-[var(--text-muted)] tabular-nums",children:v.emiAmount>0&&v.outstandingBalance>0?`${Math.ceil(v.outstandingBalance/v.emiAmount)} mo`:""}),a.jsx("td",{className:"py-2.5 px-2",children:a.jsx("button",{onClick:()=>g({edit:v}),className:"opacity-0 group-hover:opacity-100 p-1 rounded text-[var(--text-dim)] hover:text-[var(--text-primary)] transition-all",children:a.jsx(ya,{size:12})})})]},v.liabilityId))})]})}),a.jsx("div",{className:"sm:hidden divide-y divide-[var(--border-light)]",children:d.map(v=>a.jsxs("div",{onClick:()=>g({edit:v}),className:"px-4 py-3.5 hover:bg-[var(--bg-hover)] transition-colors cursor-pointer",children:[a.jsxs("div",{className:"flex items-center justify-between mb-1",children:[a.jsx("span",{className:`text-xs font-semibold px-2 py-0.5 rounded-full ${Lh[v.liabilityType]||"bg-slate-500/15 text-[var(--text-muted)]"}`,children:v.liabilityType}),a.jsx("p",{className:"text-xs font-semibold text-[var(--accent-rose)] tabular-nums",children:U(v.outstandingBalance)})]}),a.jsx("p",{className:"text-sm font-medium text-[var(--text-primary)]",children:v.lenderName}),a.jsxs("div",{className:"flex items-center justify-between mt-1",children:[a.jsxs("p",{className:"text-xs text-[var(--text-muted)]",children:[v.familyMemberName,v.notes?`  ${v.notes}`:""]}),a.jsxs("div",{className:"text-right",children:[v.emiAmount>0&&a.jsxs("p",{className:"text-xs text-[var(--text-dim)] tabular-nums",children:["EMI: ",U(v.emiAmount),"/mo"]}),v.emiAmount>0&&v.outstandingBalance>0&&a.jsxs("p",{className:"text-xs text-[var(--text-dim)] tabular-nums",children:[Math.ceil(v.outstandingBalance/v.emiAmount)," months left"]})]})]})]},v.liabilityId))})]})]}),a.jsx(rt,{open:!!x,onClose:()=>g(null),title:x?.edit?"Edit Liability":"Add Liability",children:a.jsx(BN,{initial:x?.edit||void 0,onSave:C,onDelete:x?.edit?S:void 0,onCancel:()=>g(null)})})]})}function Ai({label:n,value:o,color:u,bold:c}){const h=u==="rose"?"text-[var(--accent-rose)]":"text-[var(--text-primary)]";return a.jsxs("div",{className:"bg-[var(--bg-card)] rounded-xl border border-[var(--border)] px-4 py-3",children:[a.jsx("p",{className:"text-xs text-[var(--text-dim)] uppercase tracking-wider mb-1",children:n}),a.jsx("p",{className:`text-sm tabular-nums ${c?"font-bold":"font-semibold"} ${h}`,children:o})]})}const $N="cf_market_data",fb=[{value:"Fixed Deposit",category:"Debt"},{value:"PPF",category:"Debt"},{value:"EPF",category:"Debt"},{value:"NPS",category:"Debt"},{value:"Sovereign Gold Bond",category:"Gold"},{value:"Physical Gold",category:"Gold"},{value:"Digital Gold",category:"Gold"},{value:"Real Estate",category:"Property"},{value:"Bonds",category:"Debt"},{value:"Physical Silver",category:"Silver"},{value:"Digital Silver",category:"Silver"},{value:"Crypto",category:"Alternative"},{value:"Other",category:"Other"}],Oh={"Real Estate":"Home Loan","Physical Gold":"Gold Loan","Sovereign Gold Bond":"Gold Loan","Fixed Deposit":"Loan Against FD"},PN=fb.map(n=>({value:n.value,label:n.value})),FN=["Equity","Debt","Gold","Silver","Property","Alternative","Other"].map(n=>({value:n,label:n})),GN=[{value:"Active",label:"Active"},{value:"Sold",label:"Sold"},{value:"Matured",label:"Matured"},{value:"Inactive",label:"Inactive"}],Ih=[{value:"24K",label:"24K (99.9%)",factor:.999},{value:"22K",label:"22K (91.6%)",factor:.916},{value:"18K",label:"18K (75.0%)",factor:.75}],_h=[{value:"999",label:"999 Fine (99.9%)",factor:.999},{value:"925",label:"925 Sterling (92.5%)",factor:.925}];function Hi(n){return["Physical Gold","Digital Gold","Sovereign Gold Bond"].includes(n)}function VN(n){return["Physical Silver","Digital Silver"].includes(n)||n&&n.toLowerCase().includes("silver")}function Ld(n){return Hi(n)||VN(n)}function YN(n){try{const o=sessionStorage.getItem($N);if(!o)return null;const u=JSON.parse(o);if(!u.metals)return null;const c=n==="gold"?"Gold":"Silver",h=u.metals.find(m=>m.name.toLowerCase().includes(c.toLowerCase()));return h?h.price:null}catch{return null}}function QN({initial:n,onSave:o,onDelete:u,onCancel:c}){const{activeMembers:h,liabilityList:m}=ke(),b=!!n;function x(k){return fb.find(K=>K.value===k)?.category||"Other"}const g=n?.dynamicFields?typeof n.dynamicFields=="string"?JSON.parse(n.dynamicFields):n.dynamicFields:{},[d,w]=j.useState({investmentType:n?.investmentType||"",investmentCategory:n?.investmentCategory||"",investmentName:n?.investmentName||"",familyMemberId:n?.familyMemberId||"",investedAmount:n?.investedAmount||"",currentValue:n?.currentValue||"",linkedLiabilityId:n?.linkedLiabilityId||"",status:n?.status||"Active",notes:n?.notes||""}),[A,E]=j.useState(g.weightGrams||""),[C,S]=j.useState(g.purity||""),[v,p]=j.useState(null),[y,_]=j.useState(!1),[O,q]=j.useState({lenderName:"",outstandingBalance:"",emiAmount:"",interestRate:""});j.useEffect(()=>{if(!Ld(d.investmentType)||!A||Number(A)<=0){p(null);return}const k=Hi(d.investmentType)?"gold":"silver",K=YN(k);if(!K){p(null);return}const fe=(k==="gold"?Ih:_h).find(N=>N.value===C),ye=fe?fe.factor:1;p(Math.round(Number(A)*K*ye))},[d.investmentType,A,C]);const[Y,z]=j.useState({});function L(k,K){w(ne=>({...ne,[k]:K})),z(ne=>({...ne,[k]:void 0}))}function te(k){w(K=>({...K,investmentType:k,investmentCategory:x(k)})),z(K=>({...K,investmentType:void 0}))}function oe(k,K){q(ne=>({...ne,[k]:K}))}function H(){const k={};return d.investmentType||(k.investmentType="Required"),d.investmentName.trim()||(k.investmentName="Required"),(!d.currentValue||Number(d.currentValue)<0)&&(k.currentValue="Required"),y&&(O.lenderName.trim()||(k.qlLender="Required"),(!O.outstandingBalance||Number(O.outstandingBalance)<=0)&&(k.qlOutstanding="Must be > 0")),z(k),Object.keys(k).length===0}function se(){if(!H())return;const k={...d,investedAmount:Number(d.investedAmount)||0,currentValue:Number(d.currentValue)||0};Ld(d.investmentType)&&(k.dynamicFields=JSON.stringify({weightGrams:Number(A)||0,purity:C||""})),y&&O.lenderName&&(k.quickLoan={liabilityType:Oh[d.investmentType]||"Personal Loan",lenderName:O.lenderName,outstandingBalance:Number(O.outstandingBalance)||0,emiAmount:Number(O.emiAmount)||0,interestRate:Number(O.interestRate)||0}),o(k)}const M=m.filter(k=>k.status!=="Inactive"),ie=[{value:"",label:"None"},...M.map(k=>({value:k.liabilityId,label:`${k.liabilityType}  ${k.lenderName} (${U(k.outstandingBalance)})`}))],V=h.map(k=>({value:k.memberId,label:`${k.memberName} (${k.relationship})`})),R=Oh[d.investmentType];return a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsx(X,{label:"Investment Type",required:!0,error:Y.investmentType,children:a.jsx(Se,{value:d.investmentType,onChange:te,options:PN,placeholder:"Select type..."})}),a.jsx(X,{label:"Category",children:a.jsx(Se,{value:d.investmentCategory,onChange:k=>L("investmentCategory",k),options:FN,placeholder:"Auto-selected..."})})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsx(X,{label:"Investment Name",required:!0,error:Y.investmentName,children:a.jsx(ce,{value:d.investmentName,onChange:k=>L("investmentName",k),placeholder:"e.g., HDFC FD - 7.5%"})}),a.jsx(X,{label:"Family Member",children:a.jsx(Se,{value:d.familyMemberId,onChange:k=>L("familyMemberId",k),options:V,placeholder:"Select member (optional)..."})})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsx(X,{label:"Invested Amount",children:a.jsx(ce,{type:"number",value:d.investedAmount,onChange:k=>L("investedAmount",k),placeholder:"e.g., 500000"})}),a.jsx(X,{label:"Current Value",required:!0,error:Y.currentValue,children:a.jsx(ce,{type:"number",value:d.currentValue,onChange:k=>L("currentValue",k),placeholder:"e.g., 537500"})})]}),Ld(d.investmentType)&&a.jsxs("div",{className:"p-3 bg-[var(--bg-inset)] rounded-lg space-y-3",children:[a.jsxs("p",{className:"text-xs font-semibold text-[var(--text-muted)] uppercase tracking-wider",children:[Hi(d.investmentType)?"Gold":"Silver"," Details"]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[a.jsx(X,{label:"Weight (grams)",children:a.jsx(ce,{type:"number",value:A,onChange:E,placeholder:"e.g., 50"})}),a.jsx(X,{label:"Purity",children:a.jsx(Se,{value:C,onChange:S,options:(Hi(d.investmentType)?Ih:_h).map(k=>({value:k.value,label:k.label})),placeholder:"Select purity..."})})]}),v!==null&&a.jsxs("div",{className:"flex items-center justify-between bg-[var(--bg-card)] rounded-lg px-3 py-2 border border-[var(--border)]",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-[var(--text-dim)]",children:"Estimated market value"}),a.jsx("p",{className:"text-sm font-bold text-emerald-400 tabular-nums",children:U(v)})]}),a.jsx("button",{type:"button",onClick:()=>L("currentValue",String(v)),className:"text-xs font-semibold text-violet-400 hover:text-violet-300 px-3 py-1.5 rounded-lg bg-violet-500/10 border border-violet-500/20 transition-colors",children:"Use this value"})]})]}),a.jsxs("div",{className:"border-t border-[var(--border-light)] pt-4",children:[a.jsx(X,{label:"Linked Loan / Liability",children:a.jsx(Se,{value:d.linkedLiabilityId,onChange:k=>{L("linkedLiabilityId",k),k&&_(!1)},options:ie})}),!d.linkedLiabilityId&&!b&&a.jsx("div",{className:"mt-2",children:a.jsx("button",{type:"button",onClick:()=>_(!y),className:"text-xs font-semibold text-violet-400 hover:text-violet-300 transition-colors",children:y?" Cancel quick loan":`+ Create new loan${R?` (${R})`:""}`})}),y&&a.jsxs("div",{className:"mt-3 p-3 bg-[var(--bg-inset)] rounded-lg space-y-3",children:[a.jsx("p",{className:"text-xs font-semibold text-[var(--text-muted)] uppercase tracking-wider",children:"Quick Loan"}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[a.jsx(X,{label:"Lender",required:!0,error:Y.qlLender,children:a.jsx(ce,{value:O.lenderName,onChange:k=>oe("lenderName",k),placeholder:"e.g., HDFC Bank"})}),a.jsx(X,{label:"Outstanding Balance",required:!0,error:Y.qlOutstanding,children:a.jsx(ce,{type:"number",value:O.outstandingBalance,onChange:k=>oe("outstandingBalance",k),placeholder:"e.g., 3500000"})})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[a.jsx(X,{label:"EMI (monthly)",children:a.jsx(ce,{type:"number",value:O.emiAmount,onChange:k=>oe("emiAmount",k),placeholder:"e.g., 32000"})}),a.jsx(X,{label:"Interest Rate %",children:a.jsx(ce,{type:"number",value:O.interestRate,onChange:k=>oe("interestRate",k),placeholder:"e.g., 8.5"})})]})]})]}),b&&a.jsx(X,{label:"Status",children:a.jsx(Se,{value:d.status,onChange:k=>L("status",k),options:GN})}),a.jsx(X,{label:"Notes",children:a.jsx(Hs,{value:d.notes,onChange:k=>L("notes",k),placeholder:"Additional information..."})}),a.jsxs("div",{className:"flex items-center justify-between",children:[b&&u?a.jsx(ja,{onClick:u}):a.jsx("div",{}),a.jsx(Nt,{onCancel:c,onSubmit:se,submitLabel:b?"Update":"Add Investment"})]})]})}const Hh={Debt:"bg-blue-500/15 text-[var(--accent-blue)]",Gold:"bg-amber-500/15 text-[var(--accent-amber)]",Property:"bg-orange-500/15 text-[var(--accent-orange)]",Equity:"bg-emerald-500/15 text-emerald-400",Alternative:"bg-violet-500/15 text-[var(--accent-violet)]"};function XN(){const{selectedMember:n,member:o}=bt(),{loading:u,otherInvList:c,liabilityList:h,addOtherInvestment:m,updateOtherInvestment:b,deleteOtherInvestment:x}=ke();if(u)return a.jsx(Na,{title:"Loading investments",cards:5});const[g,d]=j.useState(null),w=j.useMemo(()=>{const q=c.filter(Y=>Y.status!=="Inactive");return n==="all"?q:q.filter(Y=>Y.familyMemberId===n)},[c,n]),A=w.reduce((q,Y)=>q+(Y.investedAmount||0),0),E=w.reduce((q,Y)=>q+(Y.currentValue||0),0),C=E-A,S=C>=0,v=A>0?C/A*100:0,p=j.useMemo(()=>{const q={};return h.forEach(Y=>{q[Y.liabilityId]=Y}),q},[h]),y=w.reduce((q,Y)=>{const z=Y.linkedLiabilityId?p[Y.linkedLiabilityId]:null;return q+(z?.outstandingBalance||0)},0);function _(q){g?.edit?b(g.edit.investmentId,q):m(q),d(null)}function O(){g?.edit&&confirm("Deactivate this investment?")&&(x(g.edit.investmentId),d(null))}return a.jsxs("div",{className:"space-y-4",children:[w.length===0?a.jsxs("div",{className:"bg-[var(--bg-card)] rounded-xl border border-[var(--border)] py-12 flex flex-col items-center gap-3",children:[a.jsx(nb,{size:32,className:"text-[var(--text-dim)]"}),a.jsxs("p",{className:"text-sm text-[var(--text-muted)]",children:["No other investments",o?` for ${o.memberName}`:""]}),a.jsx("button",{onClick:()=>d("add"),className:"text-xs font-semibold text-violet-400 hover:text-violet-300",children:"Add an investment"})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-5 gap-3",children:[a.jsx(Bn,{label:"Invested",value:U(A)}),a.jsx(Bn,{label:"Current Value",value:U(E),bold:!0}),a.jsx(Bn,{label:"P&L",value:`${S?"+":""}${U(Math.abs(C))}`,sub:`${S?"+":""}${v.toFixed(1)}%`,positive:S,bold:!0}),y>0&&a.jsx(Bn,{label:"Linked Loans",value:U(y),color:"rose"}),a.jsx(Bn,{label:"Holdings",value:w.length})]}),a.jsx("div",{className:"flex items-center justify-end px-1",children:a.jsxs("button",{onClick:()=>d("add"),className:"flex items-center gap-1.5 px-3 py-2 text-xs font-semibold text-violet-400 hover:text-violet-300 bg-[var(--bg-card)] border border-[var(--border)] rounded-lg transition-colors",children:[a.jsx(sa,{size:14})," Add Investment"]})}),a.jsxs("div",{className:"bg-[var(--bg-card)] rounded-xl border border-[var(--border)] overflow-hidden",children:[a.jsx("div",{className:"hidden sm:block overflow-x-auto",children:a.jsxs("table",{className:"w-full text-sm min-w-[720px]",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b border-[var(--border-light)] bg-[var(--bg-inset)]",children:[a.jsx("th",{className:"text-left py-2.5 px-4 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Investment"}),a.jsx("th",{className:"text-left py-2.5 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Category"}),!o&&a.jsx("th",{className:"text-left py-2.5 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Member"}),a.jsx("th",{className:"text-right py-2.5 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Invested"}),a.jsx("th",{className:"text-right py-2.5 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Current"}),a.jsx("th",{className:"text-right py-2.5 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"P&L"}),a.jsx("th",{className:"text-right py-2.5 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Linked Loan"}),a.jsx("th",{className:"w-8 py-2.5 px-2"})]})}),a.jsx("tbody",{children:w.map(q=>{const Y=(q.currentValue||0)-(q.investedAmount||0),z=Y>=0,L=q.linkedLiabilityId?p[q.linkedLiabilityId]:null;return a.jsxs("tr",{className:"border-b border-[var(--border-light)] last:border-0 hover:bg-[var(--bg-hover)] transition-colors group",children:[a.jsxs("td",{className:"py-2.5 px-4",children:[a.jsx("p",{className:"text-sm font-medium text-[var(--text-primary)]",children:q.investmentName}),a.jsx("p",{className:"text-xs text-[var(--text-dim)]",children:q.investmentType})]}),a.jsx("td",{className:"py-2.5 px-3",children:a.jsx("span",{className:`text-xs font-semibold px-2 py-0.5 rounded-full ${Hh[q.investmentCategory]||"bg-slate-500/15 text-[var(--text-muted)]"}`,children:q.investmentCategory})}),!o&&a.jsx("td",{className:"py-2.5 px-3 text-xs text-[var(--text-secondary)]",children:q.familyMemberName}),a.jsx("td",{className:"py-2.5 px-3 text-right text-xs text-[var(--text-muted)] tabular-nums",children:U(q.investedAmount)}),a.jsx("td",{className:"py-2.5 px-3 text-right text-xs font-semibold text-[var(--text-primary)] tabular-nums",children:U(q.currentValue)}),a.jsx("td",{className:"py-2.5 px-3 text-right",children:a.jsxs("span",{className:`text-xs font-semibold tabular-nums ${z?"text-emerald-400":"text-[var(--accent-rose)]"}`,children:[z?"+":"",U(Y)]})}),a.jsx("td",{className:"py-2.5 px-3 text-right",children:L?a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-semibold text-[var(--accent-rose)] tabular-nums",children:U(L.outstandingBalance)}),a.jsx("p",{className:"text-xs text-[var(--text-dim)]",children:L.liabilityType})]}):a.jsx("span",{className:"text-xs text-[var(--text-dim)]",children:""})}),a.jsx("td",{className:"py-2.5 px-2",children:a.jsx("button",{onClick:()=>d({edit:q}),className:"opacity-0 group-hover:opacity-100 p-1 rounded text-[var(--text-dim)] hover:text-[var(--text-primary)] transition-all",children:a.jsx(ya,{size:12})})})]},q.investmentId)})})]})}),a.jsx("div",{className:"sm:hidden divide-y divide-[var(--border-light)]",children:w.map(q=>{const Y=(q.currentValue||0)-(q.investedAmount||0),z=Y>=0,L=q.linkedLiabilityId?p[q.linkedLiabilityId]:null;return a.jsxs("div",{onClick:()=>d({edit:q}),className:"px-4 py-3.5 hover:bg-[var(--bg-hover)] transition-colors cursor-pointer",children:[a.jsxs("div",{className:"flex items-center justify-between mb-1",children:[a.jsx("p",{className:"text-sm font-medium text-[var(--text-primary)] truncate mr-2",children:q.investmentName}),a.jsx("span",{className:`text-xs font-semibold px-2 py-0.5 rounded-full shrink-0 ${Hh[q.investmentCategory]||"bg-slate-500/15 text-[var(--text-muted)]"}`,children:q.investmentCategory})]}),a.jsxs("p",{className:"text-xs text-[var(--text-muted)]",children:[q.familyMemberName,"  ",q.investmentType]}),a.jsxs("div",{className:"flex items-center justify-between mt-1.5",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-[var(--text-dim)]",children:"Invested"}),a.jsx("p",{className:"text-xs text-[var(--text-muted)] tabular-nums",children:U(q.investedAmount)})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-xs text-[var(--text-dim)]",children:"Current"}),a.jsx("p",{className:"text-xs font-semibold text-[var(--text-primary)] tabular-nums",children:U(q.currentValue)})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-xs text-[var(--text-dim)]",children:"P&L"}),a.jsxs("p",{className:`text-xs font-semibold tabular-nums ${z?"text-emerald-400":"text-[var(--accent-rose)]"}`,children:[z?"+":"",U(Y)]})]})]}),L&&a.jsxs("div",{className:"mt-1.5 flex items-center justify-between bg-rose-500/5 rounded px-2 py-1",children:[a.jsx("span",{className:"text-xs text-[var(--text-dim)]",children:L.liabilityType}),a.jsx("span",{className:"text-xs font-semibold text-[var(--accent-rose)] tabular-nums",children:U(L.outstandingBalance)})]})]},q.investmentId)})})]})]}),a.jsx(rt,{open:!!g,onClose:()=>d(null),title:g?.edit?"Edit Investment":"Add Investment",wide:!0,children:a.jsx(QN,{initial:g?.edit||void 0,onSave:_,onDelete:g?.edit?O:void 0,onCancel:()=>d(null)})})]})}function Bn({label:n,value:o,sub:u,positive:c,bold:h,color:m}){const b=m==="rose"?"text-[var(--accent-rose)]":c===void 0?"text-[var(--text-primary)]":c?"text-emerald-400":"text-[var(--accent-rose)]";return a.jsxs("div",{className:"bg-[var(--bg-card)] rounded-xl border border-[var(--border)] px-4 py-3",children:[a.jsx("p",{className:"text-xs text-[var(--text-dim)] uppercase tracking-wider mb-1",children:n}),a.jsx("p",{className:`text-sm tabular-nums ${h?"font-bold":"font-semibold"} ${b}`,children:o}),u&&a.jsx("p",{className:`text-xs font-semibold tabular-nums mt-0.5 ${c?"text-emerald-400":"text-[var(--accent-rose)]"}`,children:u})]})}function ZN({initial:n,onSave:o,onDelete:u,onCancel:c}){const{activeMembers:h,activeInvestmentAccounts:m}=ke(),b=!!n,[x,g]=j.useState({portfolioName:n?.portfolioName||"",investmentAccountId:n?.investmentAccountId||"",ownerId:n?.ownerId||"",initialInvestment:n?.initialInvestment||0,sipTarget:n?.sipTarget||"",lumpsumTarget:n?.lumpsumTarget||"",rebalanceThreshold:n?n.rebalanceThreshold*100:5}),[d,w]=j.useState({});function A(y,_){g(O=>({...O,[y]:_})),w(O=>({...O,[y]:void 0}))}function E(y){g(_=>({..._,ownerId:y,investmentAccountId:""})),w(_=>({..._,ownerId:void 0}))}const C=m.filter(y=>x.ownerId?y.memberId===x.ownerId:!0).filter(y=>y.accountType==="Mutual Fund"||y.accountType==="Direct AMC").map(y=>({value:y.accountId,label:`${y.accountName} - ${y.platformBroker}`})),S=h.map(y=>({value:y.memberId,label:`${y.memberName} (${y.relationship})`}));function v(){const y={};return x.portfolioName.trim()||(y.portfolioName="Required"),x.ownerId||(y.ownerId="Required"),x.investmentAccountId||(y.investmentAccountId="Required"),w(y),Object.keys(y).length===0}function p(){v()&&o({...x,initialInvestment:Number(x.initialInvestment)||0,sipTarget:Number(x.sipTarget)||0,lumpsumTarget:Number(x.lumpsumTarget)||0,rebalanceThreshold:Number(x.rebalanceThreshold)/100})}return a.jsxs("div",{className:"space-y-4",children:[a.jsx(X,{label:"Portfolio Name",required:!0,error:d.portfolioName,children:a.jsx(ce,{value:x.portfolioName,onChange:y=>A("portfolioName",y),placeholder:"e.g., Long Term Wealth"})}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsx(X,{label:"Owner",required:!0,error:d.ownerId,children:a.jsx(Se,{value:x.ownerId,onChange:E,options:S,placeholder:"Select member..."})}),a.jsx(X,{label:"Investment Account",required:!0,error:d.investmentAccountId,children:a.jsx(Se,{value:x.investmentAccountId,onChange:y=>A("investmentAccountId",y),options:C,placeholder:x.ownerId?C.length?"Select account...":"No MF accounts":"Select owner first..."})})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[a.jsx(X,{label:"SIP Target (/month)",children:a.jsx(ce,{type:"number",value:x.sipTarget,onChange:y=>A("sipTarget",y),placeholder:"e.g., 50000"})}),a.jsx(X,{label:"Lumpsum Target ()",children:a.jsx(ce,{type:"number",value:x.lumpsumTarget,onChange:y=>A("lumpsumTarget",y),placeholder:"e.g., 200000"})}),a.jsx(X,{label:"Rebalance Threshold (%)",children:a.jsx(ce,{type:"number",value:x.rebalanceThreshold,onChange:y=>A("rebalanceThreshold",y),placeholder:"e.g., 5"})})]}),!b&&a.jsx(X,{label:"Initial Investment ()",children:a.jsx(ce,{type:"number",value:x.initialInvestment,onChange:y=>A("initialInvestment",y),placeholder:"0 if unknown"})}),a.jsxs("div",{className:"flex items-center justify-between",children:[b&&u?a.jsx(ja,{onClick:u}):a.jsx("div",{}),a.jsx(Nt,{onCancel:c,onSubmit:p,submitLabel:b?"Update":"Create Portfolio"})]})]})}function lu({value:n,onSelect:o,placeholder:u,disabled:c}){const[h,m]=j.useState(""),[b,x]=j.useState([]),[g,d]=j.useState(!1),w=j.useRef(null);j.useEffect(()=>{function S(v){w.current&&!w.current.contains(v.target)&&d(!1)}return document.addEventListener("mousedown",S),()=>document.removeEventListener("mousedown",S)},[]);function A(S){m(S),S.length>=2?(x(sN(S)),d(!0)):(x([]),d(!1))}function E(S){o({schemeCode:S.schemeCode,fundName:S.fundName}),m(""),x([]),d(!1)}function C(){o({schemeCode:"",fundName:""}),m("")}return n?.fundName?a.jsxs("div",{className:"flex items-center gap-2 bg-[var(--bg-inset)] border border-[var(--border)] rounded-lg px-3 py-2",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-xs font-medium text-[var(--text-primary)] truncate",children:n.fundName}),a.jsxs("p",{className:"text-xs text-[var(--text-dim)]",children:["Code: ",n.schemeCode]})]}),a.jsx("button",{type:"button",onClick:C,className:"shrink-0 p-1 rounded-md hover:bg-[var(--bg-hover)] text-[var(--text-dim)] hover:text-[var(--text-secondary)] transition-colors",children:a.jsx(au,{size:14})})]}):a.jsxs("div",{ref:w,className:"relative",children:[a.jsxs("div",{className:"relative",children:[a.jsx(_1,{size:14,className:"absolute left-3 top-1/2 -translate-y-1/2 text-[var(--text-dim)]"}),a.jsx("input",{type:"text",value:h,onChange:S=>A(S.target.value),onFocus:()=>h.length>=2&&d(!0),placeholder:u||"Search fund name, code, or category...",disabled:c,className:"w-full bg-[var(--bg-inset)] border border-[var(--border)] rounded-lg pl-9 pr-3 py-2 text-sm text-[var(--text-primary)] placeholder:text-[var(--text-dim)] focus:outline-none focus:border-violet-500/50 disabled:opacity-50 transition-colors"})]}),g&&b.length>0&&a.jsx("div",{className:"absolute left-0 right-0 top-full mt-1 z-50 bg-[var(--bg-card)] border border-[var(--border)] rounded-lg shadow-xl max-h-[240px] overflow-y-auto",children:b.map(S=>a.jsxs("button",{type:"button",onClick:()=>E(S),className:"w-full text-left px-3 py-2.5 hover:bg-[var(--bg-hover)] transition-colors border-b border-[var(--border-light)] last:border-0",children:[a.jsx("p",{className:"text-xs font-medium text-[var(--text-primary)] leading-tight",children:S.fundName}),a.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[a.jsx("span",{className:"text-xs text-[var(--text-dim)]",children:S.schemeCode}),a.jsx("span",{className:"text-xs font-semibold text-violet-400/70 bg-violet-500/10 px-1.5 py-0.5 rounded",children:S.category}),a.jsx("span",{className:"text-xs text-[var(--text-dim)]",children:S.amc})]})]},S.schemeCode))}),g&&h.length>=2&&b.length===0&&a.jsx("div",{className:"absolute left-0 right-0 top-full mt-1 z-50 bg-[var(--bg-card)] border border-[var(--border)] rounded-lg shadow-xl p-4 text-center",children:a.jsxs("p",{className:"text-xs text-[var(--text-muted)]",children:['No funds found for "',h,'"']})})]})}const KN=[{value:"INITIAL",label:"Add Existing Holdings"},{value:"SIP",label:"SIP Investment"},{value:"LUMPSUM",label:"Lumpsum Investment"}];function JN({portfolioId:n,transactionType:o,onSave:u,onCancel:c}){const{mfPortfolios:h,mfHoldings:m}=ke(),{selectedMember:b}=bt(),x=j.useMemo(()=>{const q=h.filter(Y=>Y.status==="Active");return b==="all"?q:q.filter(Y=>Y.ownerId===b)},[h,b]),[g,d]=j.useState({portfolioId:n||"",fundCode:"",fundName:"",transactionType:o||"SIP",date:new Date().toISOString().split("T")[0],units:"",price:"",notes:""}),[w,A]=j.useState({});function E(q,Y){d(z=>({...z,[q]:Y})),A(z=>({...z,[q]:void 0}))}function C({schemeCode:q,fundName:Y}){d(z=>({...z,fundCode:q,fundName:Y})),A(z=>({...z,fundCode:void 0,fundName:void 0}))}const S=j.useMemo(()=>!g.portfolioId||!g.fundCode?null:m.find(q=>q.portfolioId===g.portfolioId&&q.schemeCode===g.fundCode),[m,g.portfolioId,g.fundCode]),v=g.fundCode&&!S,p=j.useMemo(()=>(Number(g.units)||0)*(Number(g.price)||0),[g.units,g.price]);function y(){const q={};return g.portfolioId||(q.portfolioId="Required"),g.fundCode||(q.fundCode="Select a fund"),g.date||(q.date="Required"),(!g.units||Number(g.units)<=0)&&(q.units="Must be > 0"),(!g.price||Number(g.price)<=0)&&(q.price="Must be > 0"),A(q),Object.keys(q).length===0}function _(){y()&&u(g)}const O=x.map(q=>({value:q.portfolioId,label:`${q.portfolioName} (${q.ownerName})`}));return a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsx(X,{label:"Portfolio",required:!0,error:w.portfolioId,children:a.jsx(Se,{value:g.portfolioId,onChange:q=>E("portfolioId",q),options:O,placeholder:"Select portfolio..."})}),a.jsx(X,{label:"Transaction Type",required:!0,children:a.jsx(Se,{value:g.transactionType,onChange:q=>E("transactionType",q),options:KN})})]}),a.jsx(X,{label:"Fund",required:!0,error:w.fundCode,children:a.jsx(lu,{value:g.fundCode?{schemeCode:g.fundCode,fundName:g.fundName}:null,onSelect:C,placeholder:"Search fund by name, code, or category..."})}),S&&a.jsxs("div",{className:"bg-[var(--bg-inset)] rounded-lg px-3 py-2 border border-[var(--border-light)]",children:[a.jsx("p",{className:"text-xs text-[var(--text-dim)]",children:"Existing holding  will average out"}),a.jsxs("p",{className:"text-xs text-[var(--text-muted)]",children:["Current: ",a.jsx("span",{className:"font-semibold text-[var(--text-primary)]",children:S.units.toFixed(2)})," units @ ",S.avgNav.toFixed(2)," avg NAV | Value: ",U(S.currentValue),S.targetAllocationPct>0&&a.jsxs("span",{children:["  Target: ",S.targetAllocationPct.toFixed(1),"%"]})]})]}),v&&a.jsxs("div",{className:"bg-violet-500/10 rounded-lg px-3 py-2 border border-violet-500/20",children:[a.jsx("p",{className:"text-xs text-violet-400 font-semibold",children:"New fund  will be added to portfolio"}),a.jsx("p",{className:"text-xs text-violet-300/70 mt-0.5",children:"Use Allocations to plan how much to invest before buying"})]}),a.jsx(X,{label:"Date",required:!0,error:w.date,children:a.jsx(ce,{type:"date",value:g.date,onChange:q=>E("date",q)})}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsx(X,{label:"Units",required:!0,error:w.units,children:a.jsx(ce,{type:"number",value:g.units,onChange:q=>E("units",q),placeholder:"e.g., 150.50"})}),a.jsx(X,{label:"NAV ( per unit)",required:!0,error:w.price,children:a.jsx(ce,{type:"number",value:g.price,onChange:q=>E("price",q),placeholder:"e.g., 178.45"})})]}),p>0&&a.jsxs("div",{className:"bg-[var(--bg-inset)] rounded-lg px-3 py-2 border border-[var(--border-light)]",children:[a.jsx("p",{className:"text-xs text-[var(--text-dim)]",children:"Total Amount"}),a.jsx("p",{className:"text-sm font-bold text-[var(--text-primary)] tabular-nums",children:U(p)}),S&&a.jsxs("p",{className:"text-xs text-[var(--text-dim)] mt-0.5",children:["New avg NAV: ",((S.investment+p)/(S.units+Number(g.units))).toFixed(2)," Total units: ",(S.units+Number(g.units)).toFixed(2)]})]}),a.jsx(X,{label:"Notes",children:a.jsx(ce,{value:g.notes,onChange:q=>E("notes",q),placeholder:"Optional notes..."})}),a.jsx(Nt,{onCancel:c,onSubmit:_,submitLabel:g.transactionType==="SIP"?"Record SIP":g.transactionType==="LUMPSUM"?"Record Lumpsum":"Add Holdings"})]})}function WN({portfolioId:n,onSave:o,onCancel:u}){const{mfPortfolios:c,mfHoldings:h}=ke(),{selectedMember:m}=bt(),b=j.useMemo(()=>{const z=c.filter(L=>L.status==="Active");return m==="all"?z:z.filter(L=>L.ownerId===m)},[c,m]),[x,g]=j.useState({portfolioId:n||"",fundCode:"",fundName:"",date:new Date().toISOString().split("T")[0],units:"",price:"",notes:""}),[d,w]=j.useState({});function A(z,L){g(te=>({...te,[z]:L})),w(te=>({...te,[z]:void 0}))}const E=j.useMemo(()=>x.portfolioId?h.filter(z=>z.portfolioId===x.portfolioId&&z.units>0):[],[h,x.portfolioId]),C=E.find(z=>z.schemeCode===x.fundCode);function S(z){const L=E.find(te=>te.schemeCode===z);g(te=>({...te,fundCode:z,fundName:L?.fundName||"",price:L?.currentNav?.toString()||""})),w(te=>({...te,fundCode:void 0}))}function v(z){g(L=>({...L,portfolioId:z,fundCode:"",fundName:"",units:"",price:""})),w(L=>({...L,portfolioId:void 0}))}const p=j.useMemo(()=>(Number(x.units)||0)*(Number(x.price)||0),[x.units,x.price]),y=C?p-Number(x.units)*C.avgNav:0;function _(){const z={};return x.portfolioId||(z.portfolioId="Required"),x.fundCode||(z.fundCode="Required"),x.date||(z.date="Required"),(!x.units||Number(x.units)<=0)&&(z.units="Must be > 0"),C&&Number(x.units)>C.units&&(z.units=`Max ${C.units.toFixed(2)} units`),(!x.price||Number(x.price)<=0)&&(z.price="Must be > 0"),w(z),Object.keys(z).length===0}function O(){_()&&o(x)}const q=b.map(z=>({value:z.portfolioId,label:`${z.portfolioName} (${z.ownerName})`})),Y=E.map(z=>({value:z.schemeCode,label:`${z.fundName}`}));return a.jsxs("div",{className:"space-y-4",children:[a.jsx(X,{label:"Portfolio",required:!0,error:d.portfolioId,children:a.jsx(Se,{value:x.portfolioId,onChange:v,options:q,placeholder:"Select portfolio..."})}),a.jsx(X,{label:"Fund to Redeem",required:!0,error:d.fundCode,children:a.jsx(Se,{value:x.fundCode,onChange:S,options:Y,placeholder:x.portfolioId?E.length?"Select fund...":"No holdings":"Select portfolio first..."})}),C&&a.jsxs("div",{className:"bg-[var(--bg-inset)] rounded-lg px-3 py-2 border border-[var(--border-light)]",children:[a.jsx("p",{className:"text-xs text-[var(--text-dim)]",children:C.fundName}),a.jsxs("p",{className:"text-xs text-[var(--text-muted)]",children:["Available: ",a.jsx("span",{className:"font-semibold text-[var(--text-primary)]",children:C.units.toFixed(2)})," units @ ",C.avgNav.toFixed(2)," avg | Current NAV: ",C.currentNav.toFixed(2)]})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsx(X,{label:"Redemption Date",required:!0,error:d.date,children:a.jsx(ce,{type:"date",value:x.date,onChange:z=>A("date",z)})}),a.jsx(X,{label:"Units to Redeem",required:!0,error:d.units,children:a.jsx(ce,{type:"number",value:x.units,onChange:z=>A("units",z),placeholder:C?`Max: ${C.units.toFixed(2)}`:""})})]}),a.jsx(X,{label:"Redemption NAV ()",required:!0,error:d.price,children:a.jsx(ce,{type:"number",value:x.price,onChange:z=>A("price",z),placeholder:"e.g., 178.45"})}),p>0&&a.jsx("div",{className:"bg-[var(--bg-inset)] rounded-lg px-3 py-2 border border-[var(--border-light)]",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-[var(--text-dim)]",children:"Redemption Amount"}),a.jsx("p",{className:"text-sm font-bold text-[var(--text-primary)] tabular-nums",children:U(p)})]}),C&&a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-xs text-[var(--text-dim)]",children:"Est. Gain/Loss"}),a.jsxs("p",{className:`text-sm font-bold tabular-nums ${y>=0?"text-emerald-400":"text-[var(--accent-rose)]"}`,children:[y>=0?"+":"",U(y)]})]})]})}),a.jsx(X,{label:"Notes",children:a.jsx(ce,{value:x.notes,onChange:z=>A("notes",z),placeholder:"Optional notes..."})}),a.jsx(Nt,{onCancel:u,onSubmit:O,submitLabel:"Redeem"})]})}function e2({portfolioId:n,onSave:o,onCancel:u}){const{mfPortfolios:c,mfHoldings:h}=ke(),{selectedMember:m}=bt(),b=j.useMemo(()=>{const H=c.filter(se=>se.status==="Active");return m==="all"?H:H.filter(se=>se.ownerId===m)},[c,m]),[x,g]=j.useState({portfolioId:n||"",fromFundCode:"",fromFundName:"",toFundCode:"",toFundName:"",date:new Date().toISOString().split("T")[0],units:"",fromPrice:"",toPrice:"",targetAllocation:"",notes:""}),[d,w]=j.useState({});function A(H,se){g(M=>({...M,[H]:se})),w(M=>({...M,[H]:void 0}))}function E(H){g(se=>({...se,portfolioId:H,fromFundCode:"",fromFundName:"",toFundCode:"",toFundName:"",units:"",fromPrice:"",toPrice:"",targetAllocation:""})),w(se=>({...se,portfolioId:void 0}))}const C=j.useMemo(()=>x.portfolioId?h.filter(H=>H.portfolioId===x.portfolioId&&H.units>0):[],[h,x.portfolioId]),S=C.find(H=>H.schemeCode===x.fromFundCode),v=j.useMemo(()=>!x.portfolioId||!x.toFundCode?null:h.find(H=>H.portfolioId===x.portfolioId&&H.schemeCode===x.toFundCode),[h,x.portfolioId,x.toFundCode]),p=x.toFundCode&&!v;function y(H){const se=C.find(M=>M.schemeCode===H);g(M=>({...M,fromFundCode:H,fromFundName:se?.fundName||"",fromPrice:se?.currentNav?.toString()||""})),w(M=>({...M,fromFundCode:void 0}))}function _({schemeCode:H,fundName:se}){const M=h.find(ie=>ie.portfolioId===x.portfolioId&&ie.schemeCode===H);g(ie=>({...ie,toFundCode:H,toFundName:se,toPrice:M?.currentNav?.toString()||ie.toPrice,targetAllocation:""})),w(ie=>({...ie,toFundCode:void 0}))}const O=j.useMemo(()=>(Number(x.units)||0)*(Number(x.fromPrice)||0),[x.units,x.fromPrice]),q=O>0&&Number(x.toPrice)>0?O/Number(x.toPrice):0,Y=S?O-Number(x.units)*S.avgNav:0;function z(){const H={};return x.portfolioId||(H.portfolioId="Required"),x.fromFundCode||(H.fromFundCode="Required"),x.toFundCode||(H.toFundCode="Required"),x.fromFundCode&&x.toFundCode&&x.fromFundCode===x.toFundCode&&(H.toFundCode="Must be different from source fund"),x.date||(H.date="Required"),(!x.units||Number(x.units)<=0)&&(H.units="Must be > 0"),S&&Number(x.units)>S.units&&(H.units=`Max ${S.units.toFixed(2)} units`),(!x.fromPrice||Number(x.fromPrice)<=0)&&(H.fromPrice="Must be > 0"),(!x.toPrice||Number(x.toPrice)<=0)&&(H.toPrice="Must be > 0"),w(H),Object.keys(H).length===0}function L(){z()&&o(x)}const te=b.map(H=>({value:H.portfolioId,label:`${H.portfolioName} (${H.ownerName})`})),oe=C.map(H=>({value:H.schemeCode,label:H.fundName}));return a.jsxs("div",{className:"space-y-4",children:[a.jsx(X,{label:"Portfolio",required:!0,error:d.portfolioId,children:a.jsx(Se,{value:x.portfolioId,onChange:E,options:te,placeholder:"Select portfolio..."})}),a.jsx(X,{label:"Switch From (Sell)",required:!0,error:d.fromFundCode,children:a.jsx(Se,{value:x.fromFundCode,onChange:y,options:oe,placeholder:x.portfolioId?C.length?"Select fund to switch from...":"No holdings":"Select portfolio first..."})}),S&&a.jsxs("div",{className:"bg-[var(--bg-inset)] rounded-lg px-3 py-2 border border-[var(--border-light)]",children:[a.jsx("p",{className:"text-xs text-[var(--text-dim)]",children:S.fundName}),a.jsxs("p",{className:"text-xs text-[var(--text-muted)]",children:["Available: ",a.jsx("span",{className:"font-semibold text-[var(--text-primary)]",children:S.units.toFixed(2)})," units @ ",S.avgNav.toFixed(2)," avg | Current NAV: ",S.currentNav.toFixed(2)]})]}),a.jsx(X,{label:"Switch To (Buy)",required:!0,error:d.toFundCode,children:a.jsx(lu,{value:x.toFundCode?{schemeCode:x.toFundCode,fundName:x.toFundName}:null,onSelect:_,placeholder:"Search fund to switch into...",disabled:!x.portfolioId})}),v&&a.jsxs("div",{className:"bg-[var(--bg-inset)] rounded-lg px-3 py-2 border border-[var(--border-light)]",children:[a.jsx("p",{className:"text-xs text-[var(--text-dim)]",children:"Existing holding  units will be added, NAV averaged out"}),a.jsxs("p",{className:"text-xs text-[var(--text-muted)]",children:["Current: ",a.jsx("span",{className:"font-semibold text-[var(--text-primary)]",children:v.units.toFixed(2)})," units @ ",v.avgNav.toFixed(2)," avg | Alloc: ",v.targetAllocationPct.toFixed(1),"%"]})]}),p&&x.toFundCode&&a.jsx("div",{className:"bg-violet-500/10 rounded-lg px-3 py-2 border border-violet-500/20",children:a.jsx("p",{className:"text-xs text-violet-400 font-semibold",children:"New fund  will be added to portfolio"})}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsx(X,{label:"Switch Date",required:!0,error:d.date,children:a.jsx(ce,{type:"date",value:x.date,onChange:H=>A("date",H)})}),a.jsx(X,{label:"Units to Switch",required:!0,error:d.units,children:a.jsx(ce,{type:"number",value:x.units,onChange:H=>A("units",H),placeholder:S?`Max: ${S.units.toFixed(2)}`:""})})]}),a.jsxs("div",{className:`grid grid-cols-1 ${p?"sm:grid-cols-3":"sm:grid-cols-2"} gap-4`,children:[a.jsx(X,{label:"From Fund NAV ()",required:!0,error:d.fromPrice,children:a.jsx(ce,{type:"number",value:x.fromPrice,onChange:H=>A("fromPrice",H),placeholder:"e.g., 178.45"})}),a.jsx(X,{label:"To Fund NAV ()",required:!0,error:d.toPrice,children:a.jsx(ce,{type:"number",value:x.toPrice,onChange:H=>A("toPrice",H),placeholder:"e.g., 82.10"})}),p&&a.jsx(X,{label:"Target Allocation (%)",children:a.jsx(ce,{type:"number",value:x.targetAllocation,onChange:H=>A("targetAllocation",H),placeholder:"e.g., 20"})})]}),O>0&&a.jsxs("div",{className:"bg-[var(--bg-inset)] rounded-lg px-3 py-2 border border-[var(--border-light)]",children:[a.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-2",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-[var(--text-dim)]",children:"Switch Amount"}),a.jsx("p",{className:"text-sm font-bold text-[var(--text-primary)] tabular-nums",children:U(O)})]}),q>0&&a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-xs text-[var(--text-dim)]",children:"Units Bought"}),a.jsx("p",{className:"text-sm font-bold text-[var(--text-primary)] tabular-nums",children:q.toFixed(4)})]}),S&&a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-xs text-[var(--text-dim)]",children:"Est. Gain/Loss"}),a.jsxs("p",{className:`text-sm font-bold tabular-nums ${Y>=0?"text-emerald-400":"text-[var(--accent-rose)]"}`,children:[Y>=0?"+":"",U(Y)]})]})]}),v&&q>0&&a.jsxs("p",{className:"text-xs text-[var(--text-dim)] mt-1 border-t border-[var(--border-light)] pt-1",children:["New total: ",(v.units+q).toFixed(2)," units  New avg NAV: ",((v.investment+O)/(v.units+q)).toFixed(2)]})]}),a.jsx(X,{label:"Notes",children:a.jsx(ce,{value:x.notes,onChange:H=>A("notes",H),placeholder:"Optional notes..."})}),a.jsx(Nt,{onCancel:u,onSubmit:L,submitLabel:"Switch Funds"})]})}function t2({portfolioId:n,onSave:o,onCancel:u}){const{mfHoldings:c,mfPortfolios:h}=ke(),m=h.find(R=>R.portfolioId===n),b=j.useMemo(()=>c.filter(R=>R.portfolioId===n),[c,n]),[x,g]=j.useState(()=>b.map(R=>({schemeCode:R.schemeCode,fundName:R.fundName,units:R.units,currentValue:R.currentValue,currentAllocationPct:R.currentAllocationPct,targetAllocationPct:R.targetAllocationPct,isNew:!1}))),[d,w]=j.useState(null),[A,E]=j.useState(""),[C,S]=j.useState(""),[v,p]=j.useState(""),y=x.reduce((R,k)=>R+k.targetAllocationPct,0),_=x.reduce((R,k)=>R+k.currentValue,0),O=(m?.rebalanceThreshold||.05)*100;function q(R,k){g(K=>K.map(ne=>ne.schemeCode===R?{...ne,targetAllocationPct:Number(k)||0}:ne)),S("")}function Y(R){const k=x.find(K=>K.schemeCode===R);k&&k.units>0||g(K=>K.filter(ne=>ne.schemeCode!==R))}function z(){if(d){if(x.find(R=>R.schemeCode===d.schemeCode)){S("Fund already exists in portfolio");return}g(R=>[...R,{schemeCode:d.schemeCode,fundName:d.fundName,units:0,currentValue:0,currentAllocationPct:0,targetAllocationPct:Number(A)||0,isNew:!0}]),w(null),E(""),S("")}}function L(){if(y>100){S(`Total allocation is ${y.toFixed(1)}%  must be  100%`);return}o(x.map(R=>({schemeCode:R.schemeCode,fundName:R.fundName,targetAllocationPct:R.targetAllocationPct,isNew:R.isNew})))}const te=x.map(R=>{const k=_>0?R.targetAllocationPct/100*_:0,K=k-R.currentValue;return{...R,targetValue:k,gap:K}}),oe=m?.sipTarget||0,H=x.map(R=>({...R,sipAmount:oe>0?R.targetAllocationPct/100*oe:0})),se=Number(v)||m?.lumpsumTarget||0,M=j.useMemo(()=>{if(se<=0)return[];const R=_+se,k=x.map(ne=>{const fe=Math.abs(ne.currentAllocationPct-ne.targetAllocationPct),ye=fe>O,N=ne.targetAllocationPct/100*R,B=Math.max(0,N-ne.currentValue),W=ne.targetAllocationPct/100*se,J=ye?B:W,de=ne.currentValue+J,be=R>0?de/R*100:0;return{...ne,allocation:J,simpleAllocation:W,smartAllocation:B,needsRebalance:ye,deviation:fe,newValue:de,newPct:be}}),K=k.reduce((ne,fe)=>ne+fe.allocation,0);if(K>0&&Math.abs(K-se)>1){const ne=se/K;k.forEach(fe=>{fe.allocation=fe.allocation*ne,fe.newValue=fe.currentValue+fe.allocation,fe.newPct=R>0?fe.newValue/R*100:0})}return k},[x,se,_,O]),[ie,V]=j.useState("allocations");return a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"bg-[var(--bg-inset)] rounded-lg px-3 py-2 border border-[var(--border-light)]",children:[a.jsx("p",{className:"text-xs font-semibold text-[var(--text-primary)]",children:m?.portfolioName}),a.jsxs("div",{className:"flex items-center gap-3 text-xs text-[var(--text-dim)] mt-0.5 flex-wrap",children:[a.jsxs("span",{children:["Current Value: ",a.jsx("span",{className:"font-semibold text-[var(--text-primary)]",children:U(_)})]}),oe>0&&a.jsxs("span",{children:["SIP Target: ",U(oe),"/mo"]}),m?.lumpsumTarget>0&&a.jsxs("span",{children:["Lumpsum: ",U(m.lumpsumTarget)]}),a.jsxs("span",{children:["Rebalance Threshold: ",O.toFixed(0),"%"]})]})]}),a.jsx("div",{className:"flex items-center gap-1 bg-[var(--bg-inset)] rounded-lg p-0.5 overflow-x-auto",children:[{id:"allocations",label:"Allocations"},{id:"gap",label:"Gap Analysis"},{id:"sip",label:"SIP Plan"},{id:"rebalance",label:"Rebalance Lumpsum"}].map(R=>a.jsx("button",{onClick:()=>V(R.id),className:`px-3 py-1.5 text-xs font-semibold rounded-md transition-colors whitespace-nowrap ${ie===R.id?"bg-[var(--bg-card)] text-[var(--text-primary)] shadow-sm":"text-[var(--text-muted)] hover:text-[var(--text-secondary)]"}`,children:R.label},R.id))}),ie==="allocations"&&a.jsxs("div",{className:"space-y-3",children:[a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full text-sm",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b border-[var(--border-light)]",children:[a.jsx("th",{className:"text-left py-1.5 px-2 text-xs text-[var(--text-muted)] font-semibold",children:"Fund"}),a.jsx("th",{className:"text-right py-1.5 px-2 text-xs text-[var(--text-muted)] font-semibold",children:"Units"}),a.jsx("th",{className:"text-right py-1.5 px-2 text-xs text-[var(--text-muted)] font-semibold",children:"Current %"}),a.jsx("th",{className:"text-center py-1.5 px-2 text-xs text-[var(--text-muted)] font-semibold",children:"Target %"}),a.jsx("th",{className:"text-center py-1.5 px-2 text-xs text-[var(--text-muted)] font-semibold w-8"})]})}),a.jsx("tbody",{children:x.map(R=>{const k=R.isNew&&R.targetAllocationPct>0&&R.targetAllocationPct<100&&_>0?R.targetAllocationPct/(100-R.targetAllocationPct)*_:0,K=R.isNew&&R.targetAllocationPct>0&&oe>0?R.targetAllocationPct/100*oe:0;return a.jsxs("tr",{className:"border-b border-[var(--border-light)] last:border-0",children:[a.jsxs("td",{className:"py-2 px-2",children:[a.jsx("p",{className:"text-xs text-[var(--text-primary)] leading-tight max-w-[200px] truncate",children:R.fundName}),a.jsxs("p",{className:"text-xs text-[var(--text-dim)]",children:[R.schemeCode,R.isNew&&a.jsx("span",{className:"text-violet-400 ml-1",children:"(new)"})]}),(k>0||K>0)&&a.jsxs("p",{className:"text-xs text-blue-400 mt-0.5",children:["Invest: ",k>0&&a.jsx("span",{className:"font-semibold",children:U(k)}),k>0&&K>0&&"  ",K>0&&a.jsxs("span",{className:"font-semibold",children:[U(K),"/mo SIP"]})]})]}),a.jsx("td",{className:"py-2 px-2 text-right text-xs text-[var(--text-secondary)] tabular-nums",children:R.units.toFixed(2)}),a.jsxs("td",{className:"py-2 px-2 text-right text-xs text-[var(--text-secondary)] tabular-nums",children:[R.currentAllocationPct.toFixed(1),"%"]}),a.jsx("td",{className:"py-2 px-2",children:a.jsx("input",{type:"number",value:R.targetAllocationPct,onChange:ne=>q(R.schemeCode,ne.target.value),className:"w-20 mx-auto block bg-[var(--bg-inset)] border border-[var(--border)] rounded px-2 py-1 text-xs text-center text-[var(--text-primary)] focus:outline-none focus:border-violet-500/50"})}),a.jsx("td",{className:"py-2 px-2 text-center",children:R.units===0&&a.jsx("button",{onClick:()=>Y(R.schemeCode),className:"p-1 rounded hover:bg-rose-500/15 text-[var(--text-dim)] hover:text-[var(--accent-rose)] transition-colors",children:a.jsx(ib,{size:12})})})]},R.schemeCode)})}),a.jsx("tfoot",{children:a.jsxs("tr",{className:"border-t border-[var(--border)]",children:[a.jsx("td",{className:"py-2 px-2 text-xs font-bold text-[var(--text-primary)]",children:"Total"}),a.jsx("td",{}),a.jsxs("td",{className:"py-2 px-2 text-right text-xs font-bold text-[var(--text-primary)] tabular-nums",children:[x.reduce((R,k)=>R+k.currentAllocationPct,0).toFixed(1),"%"]}),a.jsx("td",{className:"py-2 px-2 text-center",children:a.jsxs("span",{className:`text-xs font-bold tabular-nums ${y>100?"text-[var(--accent-rose)]":y===100?"text-emerald-400":"text-amber-400"}`,children:[y.toFixed(1),"%"]})}),a.jsx("td",{})]})})]})}),a.jsxs("div",{className:"border-t border-[var(--border-light)] pt-3",children:[a.jsx("p",{className:"text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider mb-1",children:"Add New Fund"}),a.jsx("p",{className:"text-xs text-[var(--text-dim)] mb-2",children:"Set target % to see how much to invest. After buying, use Invest to record the transaction."}),a.jsxs("div",{className:"flex items-end gap-2",children:[a.jsx("div",{className:"flex-1",children:a.jsx(lu,{value:d,onSelect:R=>w(R.schemeCode?R:null),placeholder:"Search fund to add..."})}),a.jsx("div",{className:"w-20",children:a.jsx(ce,{type:"number",value:A,onChange:E,placeholder:"%"})}),a.jsxs("button",{onClick:z,disabled:!d,className:"shrink-0 flex items-center gap-1 px-3 py-2 text-xs font-semibold text-violet-400 hover:text-violet-300 bg-[var(--bg-card)] border border-[var(--border)] rounded-lg transition-colors disabled:opacity-40 disabled:cursor-not-allowed",children:[a.jsx(sa,{size:14})," Add"]})]})]})]}),ie==="gap"&&a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full text-sm",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b border-[var(--border-light)]",children:[a.jsx("th",{className:"text-left py-1.5 px-2 text-xs text-[var(--text-muted)] font-semibold",children:"Fund"}),a.jsx("th",{className:"text-right py-1.5 px-2 text-xs text-[var(--text-muted)] font-semibold",children:"Current Value"}),a.jsxs("th",{className:"text-right py-1.5 px-2 text-xs text-[var(--text-muted)] font-semibold",children:[a.jsx("div",{children:"Allocation"}),a.jsx("div",{className:"text-[10px] font-medium text-[var(--text-dim)]",children:"Curr / Target"})]}),a.jsx("th",{className:"text-right py-1.5 px-2 text-xs text-[var(--text-muted)] font-semibold",children:"Target Value"}),a.jsx("th",{className:"text-right py-1.5 px-2 text-xs text-[var(--text-muted)] font-semibold",children:"Gap"})]})}),a.jsx("tbody",{children:te.map(R=>a.jsxs("tr",{className:"border-b border-[var(--border-light)] last:border-0",children:[a.jsx("td",{className:"py-2 px-2 text-xs text-[var(--text-primary)] max-w-[180px] truncate",children:R.fundName}),a.jsx("td",{className:"py-2 px-2 text-right text-xs text-[var(--text-secondary)] tabular-nums",children:U(R.currentValue)}),a.jsxs("td",{className:"py-2 px-2 text-right",children:[a.jsxs("span",{className:"text-xs text-[var(--text-secondary)] tabular-nums",children:[R.currentAllocationPct.toFixed(1),"%"]}),a.jsxs("span",{className:"text-xs text-[var(--text-dim)]",children:[" / ",R.targetAllocationPct.toFixed(1),"%"]})]}),a.jsx("td",{className:"py-2 px-2 text-right text-xs text-[var(--text-secondary)] tabular-nums",children:U(R.targetValue)}),a.jsx("td",{className:"py-2 px-2 text-right",children:a.jsxs("span",{className:`text-xs font-semibold tabular-nums ${R.gap>=0?"text-emerald-400":"text-[var(--accent-rose)]"}`,children:[R.gap>=0?"+":"",U(R.gap)]})})]},R.schemeCode))})]})}),ie==="sip"&&a.jsx("div",{className:"space-y-2",children:oe>0?a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full text-sm",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b border-[var(--border-light)]",children:[a.jsx("th",{className:"text-left py-1.5 px-2 text-xs text-[var(--text-muted)] font-semibold",children:"Fund"}),a.jsxs("th",{className:"text-right py-1.5 px-2 text-xs text-[var(--text-muted)] font-semibold",children:[a.jsx("div",{children:"Allocation"}),a.jsx("div",{className:"text-[10px] font-medium text-[var(--text-dim)]",children:"Curr / Target"})]}),a.jsx("th",{className:"text-right py-1.5 px-2 text-xs text-[var(--text-muted)] font-semibold",children:"Monthly SIP"})]})}),a.jsx("tbody",{children:H.filter(R=>R.targetAllocationPct>0).map(R=>a.jsxs("tr",{className:"border-b border-[var(--border-light)] last:border-0",children:[a.jsx("td",{className:"py-2 px-2 text-xs text-[var(--text-primary)] max-w-[200px] truncate",children:R.fundName}),a.jsxs("td",{className:"py-2 px-2 text-right",children:[a.jsxs("span",{className:"text-xs text-[var(--text-secondary)] tabular-nums",children:[R.currentAllocationPct.toFixed(1),"%"]}),a.jsxs("span",{className:"text-xs text-[var(--text-dim)]",children:[" / ",R.targetAllocationPct.toFixed(1),"%"]})]}),a.jsx("td",{className:"py-2 px-2 text-right text-xs font-semibold text-blue-400 tabular-nums",children:U(R.sipAmount)})]},R.schemeCode))}),a.jsx("tfoot",{children:a.jsxs("tr",{className:"border-t border-[var(--border)]",children:[a.jsx("td",{className:"py-2 px-2 text-xs font-bold text-[var(--text-primary)]",children:"Total"}),a.jsx("td",{}),a.jsx("td",{className:"py-2 px-2 text-right text-xs font-bold text-blue-400 tabular-nums",children:U(oe)})]})})]})}):a.jsx("p",{className:"text-xs text-[var(--text-muted)] text-center py-4",children:"No SIP target set for this portfolio. Edit portfolio to set one."})}),ie==="rebalance"&&a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-end gap-3",children:[a.jsx("div",{className:"flex-1",children:a.jsx(X,{label:"Lumpsum Amount ()",children:a.jsx(ce,{type:"number",value:v,onChange:p,placeholder:m?.lumpsumTarget?`Default: ${U(m.lumpsumTarget)}`:"Enter amount to invest..."})})}),m?.lumpsumTarget>0&&!v&&a.jsx("p",{className:"text-xs text-[var(--text-dim)] pb-2",children:"Using portfolio lumpsum target"})]}),se>0?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"bg-violet-500/10 rounded-lg px-3 py-2 border border-violet-500/20",children:a.jsxs("p",{className:"text-xs text-violet-300 leading-relaxed",children:["Smart rebalance: Funds deviating >",O.toFixed(0),"% from target get adjusted allocation. Overweight funds get 0. Underweight funds get more to bring them toward target."]})}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full text-sm",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b border-[var(--border-light)]",children:[a.jsx("th",{className:"text-left py-1.5 px-2 text-xs text-[var(--text-muted)] font-semibold",children:"Fund"}),a.jsxs("th",{className:"text-right py-1.5 px-2 text-xs text-[var(--text-muted)] font-semibold",children:[a.jsx("div",{children:"Allocation"}),a.jsx("div",{className:"text-[10px] font-medium text-[var(--text-dim)]",children:"Curr  After"})]}),a.jsx("th",{className:"text-right py-1.5 px-2 text-xs text-[var(--text-muted)] font-semibold",children:"Current Value"}),a.jsx("th",{className:"text-right py-1.5 px-2 text-xs text-[var(--text-muted)] font-semibold",children:"Invest"}),a.jsx("th",{className:"text-right py-1.5 px-2 text-xs text-[var(--text-muted)] font-semibold",children:"After Value"})]})}),a.jsx("tbody",{children:M.map(R=>{const k=R.allocation<1;return a.jsxs("tr",{className:`border-b border-[var(--border-light)] last:border-0 ${k?"opacity-50":""}`,children:[a.jsxs("td",{className:"py-2 px-2",children:[a.jsx("p",{className:"text-xs text-[var(--text-primary)] max-w-[160px] truncate",children:R.fundName}),R.needsRebalance&&a.jsxs("span",{className:"text-xs text-amber-400 font-semibold",children:[R.currentAllocationPct>R.targetAllocationPct?"overweight":"underweight"," (",R.deviation.toFixed(1),"%)"]})]}),a.jsxs("td",{className:"py-2 px-2 text-right",children:[a.jsxs("span",{className:"text-xs text-[var(--text-secondary)] tabular-nums",children:[R.currentAllocationPct.toFixed(1),"%"]}),a.jsx("span",{className:"text-xs text-[var(--text-dim)]",children:"  "}),a.jsxs("span",{className:`text-xs font-semibold tabular-nums ${Math.abs(R.newPct-R.targetAllocationPct)<O?"text-emerald-400":"text-amber-400"}`,children:[R.newPct.toFixed(1),"%"]}),a.jsxs("p",{className:"text-xs text-[var(--text-dim)]",children:["target: ",R.targetAllocationPct.toFixed(1),"%"]})]}),a.jsx("td",{className:"py-2 px-2 text-right text-xs text-[var(--text-secondary)] tabular-nums",children:U(R.currentValue)}),a.jsx("td",{className:"py-2 px-2 text-right",children:R.allocation>=1?a.jsx("span",{className:"text-xs font-bold text-emerald-400 tabular-nums",children:U(R.allocation)}):a.jsx("span",{className:"text-xs text-[var(--text-dim)]",children:"0"})}),a.jsx("td",{className:"py-2 px-2 text-right text-xs text-[var(--text-secondary)] tabular-nums",children:U(R.newValue)})]},R.schemeCode)})}),a.jsx("tfoot",{children:a.jsxs("tr",{className:"border-t border-[var(--border)]",children:[a.jsx("td",{className:"py-2 px-2 text-xs font-bold text-[var(--text-primary)]",children:"Total"}),a.jsx("td",{}),a.jsx("td",{className:"py-2 px-2 text-right text-xs font-bold text-[var(--text-primary)] tabular-nums",children:U(_)}),a.jsx("td",{className:"py-2 px-2 text-right text-xs font-bold text-emerald-400 tabular-nums",children:U(se)}),a.jsx("td",{className:"py-2 px-2 text-right text-xs font-bold text-[var(--text-primary)] tabular-nums",children:U(_+se)})]})})]})})]}):a.jsx("p",{className:"text-xs text-[var(--text-muted)] text-center py-4",children:"Enter an amount above to see rebalance distribution."})]}),C&&a.jsx("p",{className:"text-xs text-[var(--accent-rose)] font-medium",children:C}),a.jsx(Nt,{onCancel:u,onSubmit:L,submitLabel:"Save Allocations"})]})}function qh(n){return n>=20?{color:"#c62828",fontWeight:700}:n>=10?{color:"#d84315",fontWeight:700}:n>=5?{color:"#e67e00",fontWeight:400}:n>=1?{color:"#b8860b",fontWeight:400}:{color:"var(--text-dim)",fontWeight:400}}function a2(){const{selectedMember:n}=bt(),{loading:o,mfPortfolios:u,mfHoldings:c,mfTransactions:h,activeInvestmentAccounts:m,addMFPortfolio:b,updateMFPortfolio:x,deleteMFPortfolio:g,investMF:d,redeemMF:w,switchMF:A,updateHoldingAllocations:E}=ke();if(o)return a.jsx(Na,{title:"Loading mutual funds",cards:5});const[C,S]=j.useState(null),[v,p]=j.useState("all"),[y,_]=j.useState("holdings"),[O,q]=j.useState(!1),Y=j.useMemo(()=>{const N=u.filter(B=>B.status!=="Inactive");return n==="all"?N:N.filter(B=>B.ownerId===n)},[u,n]),z=j.useMemo(()=>Y.map(N=>{const B=c.filter(de=>de.portfolioId===N.portfolioId),W=h.filter(de=>de.portfolioId===N.portfolioId),J=m.find(de=>de.accountId===N.investmentAccountId);return{...N,holdings:B,txns:W,fundCount:B.length,platform:J?.platformBroker||N.investmentAccountName||"",clientId:J?.accountClientId||""}}),[Y,c,h,m]),L=j.useMemo(()=>{const N=v==="all"?z:z.filter(re=>re.portfolioId===v),B=N.reduce((re,ve)=>re+ve.totalInvestment,0),W=N.reduce((re,ve)=>re+ve.currentValue,0),J=N.reduce((re,ve)=>re+ve.unrealizedPL,0),de=N.reduce((re,ve)=>re+ve.realizedPL,0),be=J+de,je=B>0?be/B*100:0,we=B>0?J/B*100:0,Ae=B>0?de/B*100:0,it=N.reduce((re,ve)=>re+ve.fundCount,0),St=(v==="all"?c.filter(re=>N.some(ve=>ve.portfolioId===re.portfolioId)):c.filter(re=>re.portfolioId===v)).reduce((re,ve)=>re+(ve.sipAmount||0),0);return{invested:B,current:W,unrealizedPL:J,unrealizedPLPct:we,realizedPL:de,realizedPLPct:Ae,totalPL:be,totalPLPct:je,funds:it,monthlySIP:St}},[z,v,c]),te=j.useMemo(()=>v==="all"?c.filter(N=>Y.some(B=>B.portfolioId===N.portfolioId)):c.filter(N=>N.portfolioId===v),[c,Y,v]),oe=j.useMemo(()=>(v==="all"?h.filter(B=>Y.some(W=>W.portfolioId===B.portfolioId)):h.filter(B=>B.portfolioId===v)).sort((B,W)=>new Date(W.date)-new Date(B.date)),[h,Y,v]),H=j.useMemo(()=>{const N={};return te.forEach(B=>{N[B.portfolioId]=(N[B.portfolioId]||0)+B.currentValue}),te.map(B=>{const W=N[B.portfolioId]||0,J=W>0?B.currentValue/W*100:0;return{...B,currentAllocationPct:J}})},[te]),se=j.useMemo(()=>{const N={};return z.forEach(B=>{const W=c.filter(we=>we.portfolioId===B.portfolioId&&we.units>0),J=W.reduce((we,Ae)=>we+Ae.currentValue,0),de=(B.rebalanceThreshold||.05)*100;let be=0,je=0;W.forEach(we=>{we.athNav>0&&we.belowATHPct>=5&&be++;const Ae=J>0?we.currentValue/J*100:0;Math.abs(Ae-we.targetAllocationPct)>de&&je++}),N[B.portfolioId]={buyOpp:be,rebalance:je}}),N},[z,c]),M=j.useMemo(()=>{if(v!=="all")return se[v]||{buyOpp:0,rebalance:0};let N=0,B=0;return Object.values(se).forEach(W=>{N+=W.buyOpp,B+=W.rebalance}),{buyOpp:N,rebalance:B}},[v,se]),ie=z.find(N=>N.portfolioId===v),V=v==="all"?`All Portfolios (${Y.length})`:`${ie?.portfolioName}  ${ie?.ownerName}`;function R(N){C?.editPortfolio?x(C.editPortfolio.portfolioId,N):b(N),S(null)}function k(){C?.editPortfolio&&confirm("Deactivate this portfolio?")&&(g(C.editPortfolio.portfolioId),p("all"),S(null))}function K(N){d(N,N.transactionType),S(null)}function ne(N){w(N),S(null)}function fe(N){A(N),S(null)}function ye(N){C?.allocations&&(E(C.allocations,N),S(null))}return a.jsxs("div",{className:"space-y-4",children:[Y.length===0?a.jsxs("div",{className:"bg-[var(--bg-card)] rounded-xl border border-[var(--border)] py-12 flex flex-col items-center gap-3",children:[a.jsx(_l,{size:32,className:"text-[var(--text-dim)]"}),a.jsx("p",{className:"text-sm text-[var(--text-muted)]",children:"No mutual fund portfolios yet"}),a.jsx("button",{onClick:()=>S("addPortfolio"),className:"text-xs font-semibold text-violet-400 hover:text-violet-300",children:"Create your first portfolio"})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex items-center justify-between gap-3 flex-wrap",children:[a.jsxs("div",{className:"relative",children:[a.jsxs("button",{onClick:()=>q(!O),className:"flex items-center gap-2 bg-[var(--bg-card)] border border-[var(--border)] rounded-lg px-4 py-2.5 text-sm font-semibold text-[var(--text-primary)] hover:border-[var(--border-light)] transition-colors min-w-[220px]",children:[a.jsx(_l,{size:14,className:"text-violet-400 shrink-0"}),a.jsx("span",{className:"truncate",children:V}),a.jsx(Ul,{size:14,className:`text-[var(--text-dim)] shrink-0 transition-transform ${O?"rotate-180":""}`})]}),O&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"fixed inset-0 z-30",onClick:()=>q(!1)}),a.jsxs("div",{className:"absolute left-0 top-full mt-1 z-40 bg-[var(--bg-card)] border border-[var(--border)] rounded-lg shadow-xl min-w-[300px] py-1 overflow-hidden",children:[a.jsxs("button",{onClick:()=>{p("all"),q(!1),_("holdings")},className:`w-full text-left px-4 py-2.5 text-sm transition-colors ${v==="all"?"bg-[var(--sidebar-active-bg)] text-[var(--text-primary)] font-semibold":"text-[var(--text-secondary)] hover:bg-[var(--bg-hover)]"}`,children:["All Portfolios (",Y.length,")"]}),a.jsx("div",{className:"border-t border-[var(--border-light)]"}),z.map(N=>{const B=N.totalPL>=0,W=se[N.portfolioId]||{};return a.jsx("button",{onClick:()=>{p(N.portfolioId),q(!1),_("holdings")},className:`w-full text-left px-4 py-2.5 transition-colors ${v===N.portfolioId?"bg-[var(--sidebar-active-bg)]":"hover:bg-[var(--bg-hover)]"}`,children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-1.5",children:[a.jsx("p",{className:`text-sm ${v===N.portfolioId?"font-semibold text-[var(--text-primary)]":"text-[var(--text-secondary)]"}`,children:N.portfolioName}),W.buyOpp>0&&a.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-emerald-400 shrink-0",title:`${W.buyOpp} buy opportunities`}),W.rebalance>0&&a.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-violet-400 shrink-0",title:`${W.rebalance} funds need rebalancing`})]}),a.jsxs("p",{className:"text-xs text-[var(--text-dim)]",children:[N.ownerName,"  ",N.platform,"  ",N.fundCount," funds"]})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-xs font-semibold text-[var(--text-primary)] tabular-nums",children:U(N.currentValue)}),a.jsxs("p",{className:`text-xs font-semibold tabular-nums ${B?"text-emerald-400":"text-[var(--accent-rose)]"}`,children:[B?"+":"",N.totalPLPct.toFixed(1),"%"]})]})]})},N.portfolioId)})]})]})]}),a.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[a.jsxs("button",{onClick:()=>S("buyOpp"),disabled:M.buyOpp===0,className:`flex items-center gap-1.5 px-3 py-2 text-xs font-medium rounded-lg transition-colors ${M.buyOpp>0?"text-emerald-400 hover:text-emerald-300 bg-[var(--bg-card)] border border-emerald-500/30 animate-glow-emerald":"text-[var(--text-dim)] bg-[var(--bg-card)] border border-[var(--border)] opacity-50 cursor-not-allowed"}`,children:[a.jsx(Kn,{size:12})," Buy Opp.",M.buyOpp>0&&a.jsx("span",{className:"text-xs font-bold px-1.5 py-0.5 rounded-full bg-emerald-500/15",children:M.buyOpp})]}),a.jsxs("button",{onClick:()=>S("rebalance"),disabled:M.rebalance===0,className:`flex items-center gap-1.5 px-3 py-2 text-xs font-medium rounded-lg transition-colors ${M.rebalance>0?"text-violet-400 hover:text-violet-300 bg-[var(--bg-card)] border border-violet-500/30 animate-glow-violet":"text-[var(--text-dim)] bg-[var(--bg-card)] border border-[var(--border)] opacity-50 cursor-not-allowed"}`,children:[a.jsx(Is,{size:12})," Rebalance",M.rebalance>0&&a.jsx("span",{className:"text-xs font-bold px-1.5 py-0.5 rounded-full bg-violet-500/15",children:M.rebalance})]}),ie&&a.jsxs(a.Fragment,{children:[a.jsxs("button",{onClick:()=>S({allocations:ie.portfolioId}),className:"flex items-center gap-1.5 px-3 py-2 text-xs font-medium text-[var(--text-muted)] hover:text-[var(--text-primary)] bg-[var(--bg-card)] border border-[var(--border)] rounded-lg transition-colors",children:[a.jsx(q1,{size:12})," Allocations"]}),a.jsxs("button",{onClick:()=>S({editPortfolio:ie}),className:"flex items-center gap-1.5 px-3 py-2 text-xs font-medium text-[var(--text-muted)] hover:text-[var(--text-primary)] bg-[var(--bg-card)] border border-[var(--border)] rounded-lg transition-colors",children:[a.jsx(ya,{size:12})," Edit"]})]}),a.jsxs("button",{onClick:()=>S("addPortfolio"),className:"flex items-center gap-1.5 px-3 py-2 text-xs font-semibold text-violet-400 hover:text-violet-300 bg-[var(--bg-card)] border border-[var(--border)] rounded-lg transition-colors",children:[a.jsx(sa,{size:14})," New Portfolio"]})]})]}),ie&&a.jsxs("div",{className:"flex items-center gap-4 text-xs text-[var(--text-dim)] px-1 flex-wrap",children:[a.jsxs("span",{children:[a.jsx("span",{className:"font-semibold",children:"Platform:"})," ",ie.platform]}),a.jsxs("span",{children:[a.jsx("span",{className:"font-semibold",children:"Client ID:"})," ",ie.clientId]}),a.jsxs("span",{children:[a.jsx("span",{className:"font-semibold",children:"Funds:"})," ",ie.fundCount]}),ie.sipTarget>0&&a.jsxs("span",{children:[a.jsx("span",{className:"font-semibold",children:"SIP Target:"})," ",U(ie.sipTarget),"/mo"]}),ie.lumpsumTarget>0&&a.jsxs("span",{children:[a.jsx("span",{className:"font-semibold",children:"Lumpsum Target:"})," ",U(ie.lumpsumTarget)]}),a.jsxs("span",{children:[a.jsx("span",{className:"font-semibold",children:"Rebalance Threshold:"})," ",(ie.rebalanceThreshold*100).toFixed(0),"%"]})]}),a.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-6 gap-3",children:[a.jsx(ks,{label:"Invested",value:U(L.invested)}),a.jsx(ks,{label:"Current Value",value:U(L.current),bold:!0}),a.jsx(ks,{label:"Unrealized P&L",value:`${L.unrealizedPL>=0?"+":""}${U(L.unrealizedPL)}`,sub:`${L.unrealizedPLPct>=0?"+":""}${L.unrealizedPLPct.toFixed(1)}%`,positive:L.unrealizedPL>=0}),a.jsx(ks,{label:"Realized P&L",value:`${L.realizedPL>=0?"+":""}${U(L.realizedPL)}`,sub:`${L.realizedPLPct>=0?"+":""}${L.realizedPLPct.toFixed(1)}%`,positive:L.realizedPL>=0}),a.jsx(ks,{label:"Total P&L",value:`${L.totalPL>=0?"+":""}${U(L.totalPL)}`,sub:`${L.totalPLPct>=0?"+":""}${L.totalPLPct.toFixed(1)}%`,positive:L.totalPL>=0,bold:!0}),a.jsx(ks,{label:"Monthly SIP",value:U(L.monthlySIP),sub:`${L.funds} funds`})]}),a.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-2",children:[a.jsxs("div",{className:"flex items-center gap-1 bg-[var(--bg-inset)] rounded-lg p-0.5",children:[a.jsxs("button",{onClick:()=>_("holdings"),className:`flex items-center gap-1.5 px-3 py-1.5 text-xs font-semibold rounded-md transition-colors ${y==="holdings"?"bg-[var(--bg-card)] text-[var(--text-primary)] shadow-sm":"text-[var(--text-muted)] hover:text-[var(--text-secondary)]"}`,children:[a.jsx(eb,{size:12})," Holdings (",te.length,")"]}),a.jsxs("button",{onClick:()=>_("transactions"),className:`flex items-center gap-1.5 px-3 py-1.5 text-xs font-semibold rounded-md transition-colors ${y==="transactions"?"bg-[var(--bg-card)] text-[var(--text-primary)] shadow-sm":"text-[var(--text-muted)] hover:text-[var(--text-secondary)]"}`,children:[a.jsx(Gi,{size:12})," Transactions (",oe.length,")"]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[v==="all"&&a.jsx("span",{className:"text-xs text-[var(--text-dim)] mr-1 hidden sm:inline",children:"Select a portfolio to take actions"}),a.jsxs("button",{onClick:()=>v!=="all"&&S({invest:v}),disabled:v==="all",className:`flex items-center gap-1.5 px-4 py-2 text-xs font-bold rounded-lg transition-colors shadow-sm ${v==="all"?"bg-emerald-600/40 text-white/50 cursor-not-allowed":"text-white bg-emerald-600 hover:bg-emerald-500"}`,title:v==="all"?"Select a portfolio first":"",children:[a.jsx(Hl,{size:14})," Invest"]}),a.jsxs("button",{onClick:()=>v!=="all"&&te.length>0&&S({redeem:v}),disabled:v==="all"||te.length===0,className:`flex items-center gap-1.5 px-4 py-2 text-xs font-bold rounded-lg transition-colors shadow-sm ${v==="all"||te.length===0?"bg-rose-600/40 text-white/50 cursor-not-allowed":"text-white bg-rose-600 hover:bg-rose-500"}`,title:v==="all"?"Select a portfolio first":"",children:[a.jsx(Kp,{size:14})," Redeem"]}),a.jsxs("button",{onClick:()=>v!=="all"&&te.length>0&&S({switchFunds:v}),disabled:v==="all"||te.length===0,className:`flex items-center gap-1.5 px-4 py-2 text-xs font-bold rounded-lg transition-colors shadow-sm ${v==="all"||te.length===0?"bg-amber-600/40 text-white/50 cursor-not-allowed":"text-white bg-amber-600 hover:bg-amber-500"}`,title:v==="all"?"Select a portfolio first":"",children:[a.jsx(z1,{size:14})," Switch"]})]})]}),y==="holdings"&&a.jsx(a.Fragment,{children:te.length>0?a.jsxs("div",{className:"bg-[var(--bg-card)] rounded-xl border border-[var(--border)] overflow-hidden",children:[a.jsx("div",{className:"hidden lg:block overflow-x-auto",children:a.jsxs("table",{className:"w-full text-sm",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b border-[var(--border-light)] bg-[var(--bg-inset)]",children:[a.jsx("th",{className:"text-left py-2 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Fund Name"}),a.jsx("th",{className:"text-right py-2 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Units"}),a.jsxs("th",{className:"text-right py-2 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:[a.jsx("div",{children:"NAV"}),a.jsx("div",{className:"text-[10px] font-medium text-[var(--text-dim)]",children:"Current / Avg"})]}),a.jsxs("th",{className:"text-right py-2 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:[a.jsx("div",{children:"Allocation %"}),a.jsx("div",{className:"text-[10px] font-medium text-[var(--text-dim)]",children:"Current / Target"})]}),a.jsxs("th",{className:"text-right py-2 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:[a.jsx("div",{children:"Amount"}),a.jsx("div",{className:"text-[10px] font-medium text-[var(--text-dim)]",children:"Current / Invested"})]}),a.jsxs("th",{className:"text-right py-2 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:[a.jsx("div",{children:"P&L"}),a.jsx("div",{className:"text-[10px] font-medium text-[var(--text-dim)]",children:"on Holdings"})]})]})}),a.jsx("tbody",{children:H.map(N=>{const B=qh(N.belowATHPct),W=v==="all"?z.find(Ze=>Ze.portfolioId===N.portfolioId):null,J=N.units===0,de=z.find(Ze=>Ze.portfolioId===N.portfolioId),be=de?.currentValue||0,je=N.pl,we=je>=0,Ae=J&&N.targetAllocationPct>0&&N.targetAllocationPct<100&&be>0?N.targetAllocationPct/(100-N.targetAllocationPct)*be:0,it=J&&N.targetAllocationPct>0&&de?.sipTarget>0?N.targetAllocationPct/100*de.sipTarget:0;return a.jsxs("tr",{className:`border-b border-[var(--border-light)] last:border-0 hover:bg-[var(--bg-hover)] transition-colors ${J?"opacity-60":""}`,children:[a.jsxs("td",{className:"py-2.5 px-3 max-w-[240px]",children:[a.jsxs("p",{className:"text-xs text-[var(--text-primary)] leading-tight",children:[N.fundName,J&&a.jsx("span",{className:"ml-1.5 text-xs font-semibold text-violet-400 bg-violet-500/15 px-1.5 py-0.5 rounded",children:"Planned"})]}),W&&a.jsx("p",{className:"text-xs text-[var(--text-dim)]",children:W.portfolioName}),J&&(Ae>0||it>0)&&a.jsxs("div",{className:"flex items-center gap-2 mt-0.5 flex-wrap",children:[Ae>0&&a.jsxs("span",{className:"text-xs text-emerald-400 font-semibold",children:["Buy ",U(Ae)]}),it>0&&a.jsxs("span",{className:"text-xs text-blue-400 font-semibold",children:["SIP ",U(it),"/mo"]})]})]}),a.jsx("td",{className:"py-2.5 px-3 text-right text-xs text-[var(--text-secondary)] tabular-nums",children:J?"":N.units.toFixed(2)}),a.jsx("td",{className:"py-2.5 px-3 text-right",children:J?a.jsx("span",{className:"text-xs text-[var(--text-dim)]",children:""}):a.jsxs(a.Fragment,{children:[a.jsxs("p",{className:"text-xs font-semibold text-[var(--text-primary)] tabular-nums",children:["",N.currentNav.toFixed(2)]}),a.jsxs("p",{className:"text-xs text-[var(--text-dim)] tabular-nums",children:["",N.avgNav.toFixed(2)]}),N.athNav>0&&N.belowATHPct>0&&a.jsxs("p",{className:"text-xs tabular-nums",style:B,children:["ATH ",N.athNav.toFixed(2)," ",N.belowATHPct.toFixed(1),"%"]})]})}),a.jsx("td",{className:"py-2.5 px-3 text-right",children:J?a.jsxs("p",{className:"text-xs font-semibold text-violet-400 tabular-nums",children:[N.targetAllocationPct.toFixed(1),"%"]}):a.jsxs(a.Fragment,{children:[a.jsxs("p",{className:"text-xs font-semibold text-[var(--text-primary)] tabular-nums",children:[N.currentAllocationPct.toFixed(1),"%"]}),a.jsxs("p",{className:"text-xs text-[var(--text-dim)] tabular-nums",children:[N.targetAllocationPct.toFixed(1),"%"]})]})}),a.jsx("td",{className:"py-2.5 px-3 text-right",children:J?a.jsx("span",{className:"text-xs text-[var(--text-dim)]",children:""}):a.jsxs(a.Fragment,{children:[a.jsx("p",{className:"text-xs font-semibold text-[var(--text-primary)] tabular-nums",children:U(N.currentValue)}),a.jsx("p",{className:"text-xs text-[var(--text-dim)] tabular-nums",children:U(N.investment)})]})}),a.jsx("td",{className:"py-2.5 px-3 text-right",children:J?a.jsx("span",{className:"text-xs text-[var(--text-dim)]",children:""}):a.jsxs(a.Fragment,{children:[a.jsxs("p",{className:`text-xs font-semibold tabular-nums ${we?"text-emerald-400":"text-[var(--accent-rose)]"}`,children:[we?"+":"",U(je)]}),a.jsxs("p",{className:`text-xs font-bold tabular-nums ${we?"text-emerald-400":"text-[var(--accent-rose)]"}`,children:[we?"+":"",N.plPct.toFixed(1),"%"]})]})})]},N.holdingId)})})]})}),a.jsx("div",{className:"lg:hidden divide-y divide-[var(--border-light)]",children:H.map(N=>{const B=qh(N.belowATHPct),W=v==="all"?z.find(Ze=>Ze.portfolioId===N.portfolioId):null,J=N.units===0,de=z.find(Ze=>Ze.portfolioId===N.portfolioId),be=de?.currentValue||0,je=N.pl,we=je>=0,Ae=J&&N.targetAllocationPct>0&&N.targetAllocationPct<100&&be>0?N.targetAllocationPct/(100-N.targetAllocationPct)*be:0,it=J&&N.targetAllocationPct>0&&de?.sipTarget>0?N.targetAllocationPct/100*de.sipTarget:0;return a.jsxs("div",{className:`px-4 py-3 ${J?"opacity-60":""}`,children:[a.jsxs("div",{className:"flex items-start justify-between mb-1.5",children:[a.jsxs("div",{className:"flex-1 mr-3",children:[a.jsxs("p",{className:"text-xs font-medium text-[var(--text-primary)] leading-tight",children:[N.fundName,J&&a.jsx("span",{className:"ml-1.5 text-xs font-semibold text-violet-400 bg-violet-500/15 px-1.5 py-0.5 rounded",children:"Planned"})]}),W&&a.jsx("p",{className:"text-xs text-[var(--text-dim)]",children:W.portfolioName}),J&&(Ae>0||it>0)&&a.jsxs("div",{className:"flex items-center gap-2 mt-0.5 flex-wrap",children:[Ae>0&&a.jsxs("span",{className:"text-xs text-emerald-400 font-semibold",children:["Buy ",U(Ae)]}),it>0&&a.jsxs("span",{className:"text-xs text-blue-400 font-semibold",children:["SIP ",U(it),"/mo"]})]})]}),J?a.jsxs("p",{className:"text-xs font-semibold text-violet-400 tabular-nums shrink-0",children:["Target: ",N.targetAllocationPct.toFixed(1),"%"]}):a.jsxs("div",{className:"text-right shrink-0",children:[a.jsxs("p",{className:`text-xs font-bold tabular-nums ${we?"text-emerald-400":"text-[var(--accent-rose)]"}`,children:[we?"+":"",U(je)]}),a.jsxs("p",{className:`text-xs font-semibold tabular-nums ${we?"text-emerald-400":"text-[var(--accent-rose)]"}`,children:[we?"+":"",N.plPct.toFixed(1),"%"]})]})]}),J?null:a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex items-center justify-between text-xs text-[var(--text-dim)]",children:[a.jsxs("div",{children:[a.jsxs("span",{children:[N.units.toFixed(2)," units"]}),a.jsx("span",{className:"mx-1",children:""}),a.jsxs("span",{children:["NAV ",N.currentNav.toFixed(2)," / ",N.avgNav.toFixed(2)]})]}),a.jsx("p",{className:"text-xs font-semibold text-[var(--text-primary)] tabular-nums",children:U(N.currentValue)})]}),a.jsxs("div",{className:"flex items-center gap-3 mt-1 text-xs text-[var(--text-dim)] flex-wrap",children:[a.jsxs("span",{children:["Alloc: ",N.currentAllocationPct.toFixed(1),"% / ",N.targetAllocationPct.toFixed(1),"%"]}),N.athNav>0&&N.belowATHPct>0&&a.jsxs("span",{style:B,children:["ATH ",N.belowATHPct.toFixed(1),"%"]})]})]})]},N.holdingId)})})]}):a.jsxs("div",{className:"bg-[var(--bg-card)] rounded-xl border border-[var(--border)] py-10 flex flex-col items-center gap-3",children:[a.jsx(_l,{size:28,className:"text-[var(--text-dim)]"}),a.jsxs("p",{className:"text-sm text-[var(--text-muted)]",children:["No holdings",ie?" in this portfolio":""]}),a.jsx("button",{onClick:()=>S({invest:v!=="all"?v:void 0}),className:"text-xs font-semibold text-emerald-400 hover:text-emerald-300",children:"Add your first fund"})]})}),y==="transactions"&&a.jsx(a.Fragment,{children:oe.length>0?a.jsxs("div",{className:"bg-[var(--bg-card)] rounded-xl border border-[var(--border)] overflow-hidden",children:[a.jsx("div",{className:"hidden sm:block overflow-x-auto",children:a.jsxs("table",{className:"w-full text-sm",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b border-[var(--border-light)] bg-[var(--bg-inset)]",children:[a.jsx("th",{className:"text-left py-2 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Date"}),a.jsx("th",{className:"text-left py-2 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Type"}),a.jsx("th",{className:"text-left py-2 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Fund"}),a.jsx("th",{className:"text-right py-2 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Units"}),a.jsx("th",{className:"text-right py-2 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"NAV"}),a.jsx("th",{className:"text-right py-2 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Amount"}),a.jsx("th",{className:"text-right py-2 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Gain/Loss"})]})}),a.jsx("tbody",{children:oe.map(N=>{const B=N.type==="BUY",W=!B&&N.gainLoss!=null&&N.gainLoss!==0,J=W&&N.gainLoss>=0,de=v==="all"?z.find(je=>je.portfolioId===N.portfolioId):null,be={INITIAL:{bg:"bg-purple-500/15",text:"text-purple-400"},SIP:{bg:"bg-blue-500/15",text:"text-blue-400"},LUMPSUM:{bg:"bg-emerald-500/15",text:"text-emerald-400"},WITHDRAWAL:{bg:"bg-rose-500/15",text:"text-[var(--accent-rose)]"},SWITCH:{bg:"bg-amber-500/15",text:"text-amber-400"}}[N.transactionType]||{bg:"bg-gray-500/15",text:"text-[var(--text-muted)]"};return a.jsxs("tr",{className:"border-b border-[var(--border-light)] last:border-0 hover:bg-[var(--bg-hover)] transition-colors",children:[a.jsx("td",{className:"py-2.5 px-3 text-xs text-[var(--text-secondary)]",children:N.date}),a.jsx("td",{className:"py-2.5 px-3",children:a.jsxs("div",{className:"flex items-center gap-1.5",children:[a.jsx("span",{className:`text-xs font-bold px-2 py-0.5 rounded-full ${B?"bg-emerald-500/15 text-emerald-400":"bg-rose-500/15 text-[var(--accent-rose)]"}`,children:N.type}),a.jsx("span",{className:`text-xs font-semibold px-1.5 py-0.5 rounded ${be.bg} ${be.text}`,children:N.transactionType})]})}),a.jsxs("td",{className:"py-2.5 px-3",children:[a.jsx("p",{className:"text-xs text-[var(--text-primary)] truncate max-w-[200px]",children:N.fundName}),de&&a.jsx("p",{className:"text-xs text-[var(--text-dim)]",children:de.portfolioName})]}),a.jsx("td",{className:"py-2.5 px-3 text-right text-xs text-[var(--text-secondary)] tabular-nums",children:N.units.toFixed(2)}),a.jsxs("td",{className:"py-2.5 px-3 text-right text-xs text-[var(--text-muted)] tabular-nums",children:["",N.price.toFixed(2)]}),a.jsx("td",{className:"py-2.5 px-3 text-right text-xs font-semibold text-[var(--text-primary)] tabular-nums",children:U(N.totalAmount)}),a.jsx("td",{className:"py-2.5 px-3 text-right",children:W?a.jsxs("span",{className:`text-xs font-semibold tabular-nums ${J?"text-emerald-400":"text-[var(--accent-rose)]"}`,children:[J?"+":"",U(N.gainLoss)]}):a.jsx("span",{className:"text-xs text-[var(--text-dim)]",children:""})})]},N.transactionId)})})]})}),a.jsx("div",{className:"sm:hidden divide-y divide-[var(--border-light)]",children:oe.map(N=>{const B=N.type==="BUY",W=!B&&N.gainLoss!=null&&N.gainLoss!==0,J=W&&N.gainLoss>=0;return a.jsxs("div",{className:"px-4 py-3",children:[a.jsxs("div",{className:"flex items-center justify-between mb-1",children:[a.jsxs("div",{className:"flex items-center gap-1.5",children:[a.jsx("span",{className:`text-xs font-bold px-2 py-0.5 rounded-full ${B?"bg-emerald-500/15 text-emerald-400":"bg-rose-500/15 text-[var(--accent-rose)]"}`,children:N.type}),a.jsx("span",{className:"text-xs font-semibold text-[var(--text-dim)]",children:N.transactionType})]}),a.jsx("p",{className:"text-xs text-[var(--text-dim)]",children:N.date})]}),a.jsx("p",{className:"text-xs text-[var(--text-primary)] truncate mb-1",children:N.fundName}),a.jsxs("div",{className:"flex items-center justify-between text-xs",children:[a.jsxs("p",{className:"text-[var(--text-dim)]",children:[N.units.toFixed(2)," units @ ",N.price.toFixed(2)]}),a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-xs font-semibold text-[var(--text-primary)] tabular-nums",children:U(N.totalAmount)}),W&&a.jsxs("p",{className:`text-xs font-semibold tabular-nums ${J?"text-emerald-400":"text-[var(--accent-rose)]"}`,children:["G/L: ",J?"+":"",U(N.gainLoss)]})]})]}),N.notes&&a.jsx("p",{className:"text-xs text-[var(--text-dim)] mt-1",children:N.notes})]},N.transactionId)})})]}):a.jsxs("div",{className:"bg-[var(--bg-card)] rounded-xl border border-[var(--border)] py-10 flex flex-col items-center gap-3",children:[a.jsx(Gi,{size:28,className:"text-[var(--text-dim)]"}),a.jsx("p",{className:"text-sm text-[var(--text-muted)]",children:"No transactions yet"}),a.jsx("button",{onClick:()=>S({invest:v!=="all"?v:void 0}),className:"text-xs font-semibold text-emerald-400 hover:text-emerald-300",children:"Make your first investment"})]})})]}),a.jsx(rt,{open:C==="addPortfolio"||!!C?.editPortfolio,onClose:()=>S(null),title:C?.editPortfolio?"Edit Portfolio":"New MF Portfolio",children:a.jsx(ZN,{initial:C?.editPortfolio||void 0,onSave:R,onDelete:C?.editPortfolio?k:void 0,onCancel:()=>S(null)})}),a.jsx(rt,{open:!!C?.invest,onClose:()=>S(null),title:"Invest in Mutual Fund",wide:!0,children:a.jsx(JN,{portfolioId:typeof C?.invest=="string"?C.invest:void 0,onSave:K,onCancel:()=>S(null)})}),a.jsx(rt,{open:!!C?.redeem,onClose:()=>S(null),title:"Redeem Mutual Fund",wide:!0,children:a.jsx(WN,{portfolioId:typeof C?.redeem=="string"?C.redeem:void 0,onSave:ne,onCancel:()=>S(null)})}),a.jsx(rt,{open:!!C?.switchFunds,onClose:()=>S(null),title:"Switch Funds",wide:!0,children:a.jsx(e2,{portfolioId:typeof C?.switchFunds=="string"?C.switchFunds:void 0,onSave:fe,onCancel:()=>S(null)})}),a.jsx(rt,{open:!!C?.allocations,onClose:()=>S(null),title:"Manage Portfolio Allocation",wide:!0,children:C?.allocations&&a.jsx(t2,{portfolioId:C.allocations,onSave:ye,onCancel:()=>S(null)})}),a.jsx(rt,{open:C==="rebalance",onClose:()=>S(null),title:"Rebalance Portfolios",wide:!0,children:C==="rebalance"&&a.jsx(ub,{})}),a.jsx(rt,{open:C==="buyOpp",onClose:()=>S(null),title:"Buy Opportunities",wide:!0,children:C==="buyOpp"&&a.jsx(db,{})})]})}function ks({label:n,value:o,sub:u,positive:c,bold:h}){return a.jsxs("div",{className:"bg-[var(--bg-card)] rounded-xl border border-[var(--border)] px-4 py-3",children:[a.jsx("p",{className:"text-xs text-[var(--text-dim)] uppercase tracking-wider mb-1",children:n}),a.jsx("p",{className:`text-sm tabular-nums ${h?"font-bold":"font-semibold"} ${c===void 0?"text-[var(--text-primary)]":c?"text-emerald-400":"text-[var(--accent-rose)]"}`,children:o}),u&&a.jsx("p",{className:`text-xs font-semibold tabular-nums mt-0.5 ${c?"text-emerald-400":"text-[var(--accent-rose)]"}`,children:u})]})}function l2({initial:n,onSave:o,onDelete:u,onCancel:c}){const{activeMembers:h,activeInvestmentAccounts:m}=ke(),b=!!n,[x,g]=j.useState({portfolioName:n?.portfolioName||"",ownerId:n?.ownerId||"",investmentAccountId:n?.investmentAccountId||""}),[d,w]=j.useState({});function A(y,_){g(O=>({...O,[y]:_})),w(O=>({...O,[y]:void 0}))}function E(y){g(_=>({..._,ownerId:y,investmentAccountId:""})),w(_=>({..._,ownerId:void 0}))}const C=j.useMemo(()=>x.ownerId?m.filter(y=>y.memberId===x.ownerId&&(y.accountType==="Demat + Trading"||y.accountType==="Trading")).map(y=>({value:y.accountId,label:`${y.accountName} - ${y.platformBroker}`})):[],[m,x.ownerId]);function S(){const y={};return x.portfolioName.trim()||(y.portfolioName="Required"),x.ownerId||(y.ownerId="Required"),x.investmentAccountId||(y.investmentAccountId="Required"),w(y),Object.keys(y).length===0}function v(){S()&&o(x)}const p=h.map(y=>({value:y.memberId,label:`${y.memberName} (${y.relationship})`}));return a.jsxs("div",{className:"space-y-4",children:[a.jsx(X,{label:"Portfolio Name",required:!0,error:d.portfolioName,children:a.jsx(ce,{value:x.portfolioName,onChange:y=>A("portfolioName",y),placeholder:"e.g., Long-Term Growth"})}),a.jsx(X,{label:"Owner",required:!0,error:d.ownerId,children:a.jsx(Se,{value:x.ownerId,onChange:E,options:p,placeholder:"Select family member..."})}),a.jsx(X,{label:"Investment Account",required:!0,error:d.investmentAccountId,children:a.jsx(Se,{value:x.investmentAccountId,onChange:y=>A("investmentAccountId",y),options:C,placeholder:x.ownerId?C.length?"Select demat account...":"No demat accounts for this member":"Select owner first..."})}),a.jsxs("div",{className:"flex items-center justify-between",children:[b&&u?a.jsx(ja,{onClick:u}):a.jsx("div",{}),a.jsx(Nt,{onCancel:c,onSubmit:v,submitLabel:b?"Update":"Create Portfolio"})]})]})}function s2({portfolioId:n,onSave:o,onCancel:u}){const{stockPortfolios:c}=ke(),{selectedMember:h}=bt(),m=j.useMemo(()=>{const p=c.filter(y=>y.status==="Active");return h==="all"?p:p.filter(y=>y.ownerId===h)},[c,h]),[b,x]=j.useState({portfolioId:n||"",symbol:"",companyName:"",exchange:"NSE",date:new Date().toISOString().split("T")[0],quantity:"",pricePerShare:"",brokerage:"0",notes:""}),[g,d]=j.useState({});function w(p,y){x(_=>({..._,[p]:y})),d(_=>({..._,[p]:void 0}))}const A=j.useMemo(()=>{const p=Number(b.quantity)||0,y=Number(b.pricePerShare)||0;return p*y},[b.quantity,b.pricePerShare]),E=j.useMemo(()=>A+(Number(b.brokerage)||0),[A,b.brokerage]);function C(){const p={};return b.portfolioId||(p.portfolioId="Required"),b.symbol.trim()||(p.symbol="Required"),b.companyName.trim()||(p.companyName="Required"),b.date||(p.date="Required"),(!b.quantity||Number(b.quantity)<=0)&&(p.quantity="Must be > 0"),(!b.pricePerShare||Number(b.pricePerShare)<=0)&&(p.pricePerShare="Must be > 0"),d(p),Object.keys(p).length===0}function S(){C()&&o(b)}const v=m.map(p=>({value:p.portfolioId,label:`${p.portfolioName} (${p.ownerName})`}));return a.jsxs("div",{className:"space-y-4",children:[a.jsx(X,{label:"Portfolio",required:!0,error:g.portfolioId,children:a.jsx(Se,{value:b.portfolioId,onChange:p=>w("portfolioId",p),options:v,placeholder:"Select portfolio..."})}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsx(X,{label:"Stock Symbol",required:!0,error:g.symbol,children:a.jsx(ce,{value:b.symbol,onChange:p=>w("symbol",p.toUpperCase()),placeholder:"e.g., RELIANCE"})}),a.jsx(X,{label:"Company Name",required:!0,error:g.companyName,children:a.jsx(ce,{value:b.companyName,onChange:p=>w("companyName",p),placeholder:"e.g., Reliance Industries Ltd"})})]}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:a.jsx(X,{label:"Purchase Date",required:!0,error:g.date,children:a.jsx(ce,{type:"date",value:b.date,onChange:p=>w("date",p)})})}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsx(X,{label:"Quantity (Shares)",required:!0,error:g.quantity,children:a.jsx(ce,{type:"number",value:b.quantity,onChange:p=>w("quantity",p),placeholder:"e.g., 100"})}),a.jsx(X,{label:"Price per Share ()",required:!0,error:g.pricePerShare,children:a.jsx(ce,{type:"number",value:b.pricePerShare,onChange:p=>w("pricePerShare",p),placeholder:"e.g., 2500"})})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsx(X,{label:"Brokerage ()",children:a.jsx(ce,{type:"number",value:b.brokerage,onChange:p=>w("brokerage",p),placeholder:"0"})}),a.jsx("div",{className:"flex flex-col justify-end",children:a.jsxs("div",{className:"bg-[var(--bg-inset)] rounded-lg px-3 py-2 border border-[var(--border-light)]",children:[a.jsx("p",{className:"text-xs text-[var(--text-dim)]",children:"Total Amount"}),a.jsx("p",{className:"text-sm font-bold text-[var(--text-primary)] tabular-nums",children:U(A)}),Number(b.brokerage)>0&&a.jsxs("p",{className:"text-xs text-[var(--text-muted)] tabular-nums",children:["Net: ",U(E)]})]})})]}),a.jsx(X,{label:"Notes",children:a.jsx(ce,{value:b.notes,onChange:p=>w("notes",p),placeholder:"Optional notes..."})}),a.jsx(Nt,{onCancel:u,onSubmit:S,submitLabel:"Buy Stock"})]})}function n2({portfolioId:n,onSave:o,onCancel:u}){const{stockPortfolios:c,stockHoldings:h}=ke(),{selectedMember:m}=bt(),b=j.useMemo(()=>{const L=c.filter(te=>te.status==="Active");return m==="all"?L:L.filter(te=>te.ownerId===m)},[c,m]),[x,g]=j.useState({portfolioId:n||"",symbol:"",companyName:"",date:new Date().toISOString().split("T")[0],quantity:"",pricePerShare:"",brokerage:"0",notes:""}),[d,w]=j.useState({});function A(L,te){g(oe=>({...oe,[L]:te})),w(oe=>({...oe,[L]:void 0}))}const E=j.useMemo(()=>x.portfolioId?h.filter(L=>L.portfolioId===x.portfolioId&&L.quantity>0):[],[h,x.portfolioId]),C=E.find(L=>L.symbol===x.symbol),S=C?.quantity||0,v=j.useMemo(()=>{const L=Number(x.quantity)||0,te=Number(x.pricePerShare)||0;return L*te},[x.quantity,x.pricePerShare]),p=j.useMemo(()=>v-(Number(x.brokerage)||0),[v,x.brokerage]);function y(L){const te=E.find(oe=>oe.symbol===L);g(oe=>({...oe,symbol:L,companyName:te?.companyName||""})),w(oe=>({...oe,symbol:void 0}))}function _(L){g(te=>({...te,portfolioId:L,symbol:"",companyName:"",quantity:""})),w(te=>({...te,portfolioId:void 0}))}function O(){const L={};return x.portfolioId||(L.portfolioId="Required"),x.symbol||(L.symbol="Required"),x.date||(L.date="Required"),(!x.quantity||Number(x.quantity)<=0)&&(L.quantity="Must be > 0"),Number(x.quantity)>S&&(L.quantity=`Max ${S} shares`),(!x.pricePerShare||Number(x.pricePerShare)<=0)&&(L.pricePerShare="Must be > 0"),w(L),Object.keys(L).length===0}function q(){O()&&o(x)}const Y=b.map(L=>({value:L.portfolioId,label:`${L.portfolioName} (${L.ownerName})`})),z=E.map(L=>({value:L.symbol,label:`${L.symbol}  ${L.quantity} shares`}));return a.jsxs("div",{className:"space-y-4",children:[a.jsx(X,{label:"Portfolio",required:!0,error:d.portfolioId,children:a.jsx(Se,{value:x.portfolioId,onChange:_,options:Y,placeholder:"Select portfolio..."})}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsx(X,{label:"Stock to Sell",required:!0,error:d.symbol,children:a.jsx(Se,{value:x.symbol,onChange:y,options:z,placeholder:x.portfolioId?E.length?"Select stock...":"No holdings in this portfolio":"Select portfolio first..."})}),C&&a.jsx("div",{className:"flex flex-col justify-end",children:a.jsxs("div",{className:"bg-[var(--bg-inset)] rounded-lg px-3 py-2 border border-[var(--border-light)]",children:[a.jsx("p",{className:"text-xs text-[var(--text-dim)]",children:C.companyName}),a.jsxs("p",{className:"text-xs text-[var(--text-muted)]",children:["Available: ",a.jsx("span",{className:"font-semibold text-[var(--text-primary)]",children:S})," shares @ ",U(C.avgBuyPrice)," avg"]})]})})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsx(X,{label:"Sale Date",required:!0,error:d.date,children:a.jsx(ce,{type:"date",value:x.date,onChange:L=>A("date",L)})}),a.jsx(X,{label:"Quantity to Sell",required:!0,error:d.quantity,children:a.jsx(ce,{type:"number",value:x.quantity,onChange:L=>A("quantity",L),placeholder:S?`Max: ${S}`:""})})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsx(X,{label:"Sale Price per Share ()",required:!0,error:d.pricePerShare,children:a.jsx(ce,{type:"number",value:x.pricePerShare,onChange:L=>A("pricePerShare",L),placeholder:"e.g., 2750"})}),a.jsx(X,{label:"Brokerage ()",children:a.jsx(ce,{type:"number",value:x.brokerage,onChange:L=>A("brokerage",L),placeholder:"0"})})]}),v>0&&a.jsx("div",{className:"bg-[var(--bg-inset)] rounded-lg px-3 py-2 border border-[var(--border-light)]",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-[var(--text-dim)]",children:"Net Sale Amount"}),a.jsx("p",{className:"text-sm font-bold text-[var(--text-primary)] tabular-nums",children:U(p)})]}),C&&a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-xs text-[var(--text-dim)]",children:"Est. P&L"}),(()=>{const L=Number(x.quantity)*C.avgBuyPrice,te=p-L,oe=te>=0;return a.jsxs("p",{className:`text-sm font-bold tabular-nums ${oe?"text-emerald-400":"text-[var(--accent-rose)]"}`,children:[oe?"+":"",U(te)]})})()]})]})}),a.jsx(X,{label:"Notes",children:a.jsx(ce,{value:x.notes,onChange:L=>A("notes",L),placeholder:"Optional notes..."})}),a.jsx(Nt,{onCancel:u,onSubmit:q,submitLabel:"Sell Stock"})]})}function r2(){const{selectedMember:n}=bt(),{loading:o,stockPortfolios:u,stockHoldings:c,stockTransactions:h,activeInvestmentAccounts:m,addStockPortfolio:b,updateStockPortfolio:x,deleteStockPortfolio:g,buyStock:d,sellStock:w}=ke();if(o)return a.jsx(Na,{title:"Loading stocks",cards:5});const[A,E]=j.useState(null),[C,S]=j.useState("all"),[v,p]=j.useState("holdings"),[y,_]=j.useState(!1),O=j.useMemo(()=>{const V=u.filter(R=>R.status!=="Inactive");return n==="all"?V:V.filter(R=>R.ownerId===n)},[u,n]),q=j.useMemo(()=>O.map(V=>{const R=c.filter(J=>J.portfolioId===V.portfolioId),k=h.filter(J=>J.portfolioId===V.portfolioId),K=R.reduce((J,de)=>J+de.totalInvestment,0),ne=R.reduce((J,de)=>J+de.currentValue,0),fe=ne-K,ye=k.filter(J=>J.type==="SELL"&&J.realizedPL!=null).reduce((J,de)=>J+de.realizedPL,0),N=fe+ye,B=K>0?N/K*100:0,W=m.find(J=>J.accountId===V.investmentAccountId);return{...V,holdings:R,txns:k,invested:K,current:ne,unrealizedPL:fe,realizedPL:ye,totalPL:N,totalPLPct:B,stockCount:R.length,platform:W?.platformBroker||V.investmentAccountName||"",clientId:W?.accountClientId||""}}),[O,c,h,m]),Y=j.useMemo(()=>{const V=C==="all"?q:q.filter(W=>W.portfolioId===C),R=V.reduce((W,J)=>W+J.invested,0),k=V.reduce((W,J)=>W+J.current,0),K=V.reduce((W,J)=>W+J.unrealizedPL,0),ne=V.reduce((W,J)=>W+J.realizedPL,0),fe=K+ne,ye=R>0?fe/R*100:0,N=R>0?K/R*100:0,B=V.reduce((W,J)=>W+J.stockCount,0);return{invested:R,current:k,unrealizedPL:K,unrealizedPLPct:N,realizedPL:ne,totalPL:fe,totalPLPct:ye,stocks:B}},[q,C]),z=j.useMemo(()=>C==="all"?c.filter(V=>O.some(R=>R.portfolioId===V.portfolioId)):c.filter(V=>V.portfolioId===C),[c,O,C]),L=j.useMemo(()=>(C==="all"?h.filter(R=>O.some(k=>k.portfolioId===R.portfolioId)):h.filter(R=>R.portfolioId===C)).sort((R,k)=>new Date(k.date)-new Date(R.date)),[h,O,C]),te=q.find(V=>V.portfolioId===C),oe=C==="all"?`All Portfolios (${O.length})`:`${te?.portfolioName}  ${te?.ownerName}`;function H(V){A?.editPortfolio?x(A.editPortfolio.portfolioId,V):b(V),E(null)}function se(){A?.editPortfolio&&confirm("Deactivate this portfolio?")&&(g(A.editPortfolio.portfolioId),S("all"),E(null))}function M(V){d(V),E(null)}function ie(V){w(V),E(null)}return a.jsxs("div",{className:"space-y-4",children:[O.length===0?a.jsxs("div",{className:"bg-[var(--bg-card)] rounded-xl border border-[var(--border)] py-12 flex flex-col items-center gap-3",children:[a.jsx(Os,{size:32,className:"text-[var(--text-dim)]"}),a.jsx("p",{className:"text-sm text-[var(--text-muted)]",children:"No stock portfolios yet"}),a.jsx("button",{onClick:()=>E("addPortfolio"),className:"text-xs font-semibold text-violet-400 hover:text-violet-300",children:"Create your first portfolio"})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex items-center justify-between gap-3 flex-wrap",children:[a.jsxs("div",{className:"relative",children:[a.jsxs("button",{onClick:()=>_(!y),className:"flex items-center gap-2 bg-[var(--bg-card)] border border-[var(--border)] rounded-lg px-4 py-2.5 text-sm font-semibold text-[var(--text-primary)] hover:border-[var(--border-light)] transition-colors min-w-[220px]",children:[a.jsx(Os,{size:14,className:"text-violet-400 shrink-0"}),a.jsx("span",{className:"truncate",children:oe}),a.jsx(Ul,{size:14,className:`text-[var(--text-dim)] shrink-0 transition-transform ${y?"rotate-180":""}`})]}),y&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"fixed inset-0 z-30",onClick:()=>_(!1)}),a.jsxs("div",{className:"absolute left-0 top-full mt-1 z-40 bg-[var(--bg-card)] border border-[var(--border)] rounded-lg shadow-xl min-w-[280px] py-1 overflow-hidden",children:[a.jsxs("button",{onClick:()=>{S("all"),_(!1),p("holdings")},className:`w-full text-left px-4 py-2.5 text-sm transition-colors ${C==="all"?"bg-[var(--sidebar-active-bg)] text-[var(--text-primary)] font-semibold":"text-[var(--text-secondary)] hover:bg-[var(--bg-hover)]"}`,children:["All Portfolios (",O.length,")"]}),a.jsx("div",{className:"border-t border-[var(--border-light)]"}),q.map(V=>{const R=V.totalPL>=0;return a.jsx("button",{onClick:()=>{S(V.portfolioId),_(!1),p("holdings")},className:`w-full text-left px-4 py-2.5 transition-colors ${C===V.portfolioId?"bg-[var(--sidebar-active-bg)]":"hover:bg-[var(--bg-hover)]"}`,children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:`text-sm ${C===V.portfolioId?"font-semibold text-[var(--text-primary)]":"text-[var(--text-secondary)]"}`,children:V.portfolioName}),a.jsxs("p",{className:"text-xs text-[var(--text-dim)]",children:[V.ownerName,"  ",V.platform]})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-xs font-semibold text-[var(--text-primary)] tabular-nums",children:U(V.current)}),a.jsxs("p",{className:`text-xs font-semibold tabular-nums ${R?"text-emerald-400":"text-[var(--accent-rose)]"}`,children:[R?"+":"",V.totalPLPct.toFixed(1),"%"]})]})]})},V.portfolioId)})]})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[te&&a.jsxs("button",{onClick:()=>E({editPortfolio:te}),className:"flex items-center gap-1.5 px-3 py-2 text-xs font-medium text-[var(--text-muted)] hover:text-[var(--text-primary)] bg-[var(--bg-card)] border border-[var(--border)] rounded-lg transition-colors",children:[a.jsx(ya,{size:12})," Edit"]}),a.jsxs("button",{onClick:()=>E("addPortfolio"),className:"flex items-center gap-1.5 px-3 py-2 text-xs font-semibold text-violet-400 hover:text-violet-300 bg-[var(--bg-card)] border border-[var(--border)] rounded-lg transition-colors",children:[a.jsx(sa,{size:14})," New Portfolio"]})]})]}),te&&a.jsxs("div",{className:"flex items-center gap-4 text-xs text-[var(--text-dim)] px-1",children:[a.jsxs("span",{children:[a.jsx("span",{className:"font-semibold",children:"Platform:"})," ",te.platform]}),a.jsxs("span",{children:[a.jsx("span",{className:"font-semibold",children:"Client ID:"})," ",te.clientId]}),a.jsxs("span",{children:[a.jsx("span",{className:"font-semibold",children:"Stocks:"})," ",te.stockCount]})]}),a.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-5 gap-3",children:[a.jsx(Un,{label:"Invested",value:U(Y.invested)}),a.jsx(Un,{label:"Current Value",value:U(Y.current),bold:!0}),a.jsx(Un,{label:"Unrealized P&L",value:`${Y.unrealizedPL>=0?"+":""}${U(Y.unrealizedPL)}`,sub:`${Y.unrealizedPLPct>=0?"+":""}${Y.unrealizedPLPct.toFixed(1)}%`,positive:Y.unrealizedPL>=0}),a.jsx(Un,{label:"Realized P&L",value:`${Y.realizedPL>=0?"+":""}${U(Y.realizedPL)}`,positive:Y.realizedPL>=0}),a.jsx(Un,{label:"Total P&L",value:`${Y.totalPL>=0?"+":""}${U(Y.totalPL)}`,sub:`${Y.totalPLPct>=0?"+":""}${Y.totalPLPct.toFixed(1)}%`,positive:Y.totalPL>=0,bold:!0})]}),a.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-2",children:[a.jsxs("div",{className:"flex items-center gap-1 bg-[var(--bg-inset)] rounded-lg p-0.5",children:[a.jsxs("button",{onClick:()=>p("holdings"),className:`flex items-center gap-1.5 px-3 py-1.5 text-xs font-semibold rounded-md transition-colors ${v==="holdings"?"bg-[var(--bg-card)] text-[var(--text-primary)] shadow-sm":"text-[var(--text-muted)] hover:text-[var(--text-secondary)]"}`,children:[a.jsx(eb,{size:12})," Holdings (",z.length,")"]}),a.jsxs("button",{onClick:()=>p("transactions"),className:`flex items-center gap-1.5 px-3 py-1.5 text-xs font-semibold rounded-md transition-colors ${v==="transactions"?"bg-[var(--bg-card)] text-[var(--text-primary)] shadow-sm":"text-[var(--text-muted)] hover:text-[var(--text-secondary)]"}`,children:[a.jsx(Gi,{size:12})," Transactions (",L.length,")"]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("button",{onClick:()=>C!=="all"&&E({buy:C}),disabled:C==="all",className:`flex items-center gap-1.5 px-4 py-2 text-xs font-bold rounded-lg transition-colors shadow-sm ${C==="all"?"bg-emerald-600/40 text-white/50 cursor-not-allowed":"text-white bg-emerald-600 hover:bg-emerald-500"}`,title:C==="all"?"Select a portfolio first":"",children:[a.jsx(Hl,{size:14})," Buy"]}),a.jsxs("button",{onClick:()=>C!=="all"&&z.length>0&&E({sell:C}),disabled:C==="all"||z.length===0,className:`flex items-center gap-1.5 px-4 py-2 text-xs font-bold rounded-lg transition-colors shadow-sm ${C==="all"||z.length===0?"bg-rose-600/40 text-white/50 cursor-not-allowed":"text-white bg-rose-600 hover:bg-rose-500"}`,title:C==="all"?"Select a portfolio first":"",children:[a.jsx(Kn,{size:14})," Sell"]})]})]}),v==="holdings"&&a.jsx(a.Fragment,{children:z.length>0?a.jsxs("div",{className:"bg-[var(--bg-card)] rounded-xl border border-[var(--border)] overflow-hidden",children:[a.jsx("div",{className:"hidden sm:block overflow-x-auto",children:a.jsxs("table",{className:"w-full text-sm",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b border-[var(--border-light)] bg-[var(--bg-inset)]",children:[a.jsx("th",{className:"text-left py-2 px-4 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Stock"}),a.jsx("th",{className:"text-right py-2 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Qty"}),a.jsx("th",{className:"text-right py-2 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Avg Price"}),a.jsx("th",{className:"text-right py-2 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Current Price"}),a.jsx("th",{className:"text-right py-2 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Invested"}),a.jsx("th",{className:"text-right py-2 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Current Value"}),a.jsx("th",{className:"text-right py-2 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"P&L"}),a.jsx("th",{className:"text-right py-2 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Returns"})]})}),a.jsxs("tbody",{children:[z.map(V=>{const R=V.unrealizedPL>=0,k=C==="all"?q.find(K=>K.portfolioId===V.portfolioId):null;return a.jsxs("tr",{className:"border-b border-[var(--border-light)] last:border-0 hover:bg-[var(--bg-hover)] transition-colors",children:[a.jsxs("td",{className:"py-2.5 px-4",children:[a.jsx("p",{className:"text-xs font-medium text-[var(--text-primary)]",children:V.companyName}),a.jsxs("p",{className:"text-xs font-mono text-[var(--text-dim)]",children:[V.symbol,k&&a.jsxs("span",{className:"ml-1.5 text-[var(--text-dim)] font-sans",children:[" ",k.portfolioName]})]})]}),a.jsx("td",{className:"py-2.5 px-3 text-right text-xs text-[var(--text-secondary)] tabular-nums",children:V.quantity}),a.jsx("td",{className:"py-2.5 px-3 text-right text-xs text-[var(--text-muted)] tabular-nums",children:U(V.avgBuyPrice)}),a.jsx("td",{className:"py-2.5 px-3 text-right text-xs font-semibold text-[var(--text-primary)] tabular-nums",children:U(V.currentPrice)}),a.jsx("td",{className:"py-2.5 px-3 text-right text-xs text-[var(--text-secondary)] tabular-nums",children:U(V.totalInvestment)}),a.jsx("td",{className:"py-2.5 px-3 text-right text-xs font-semibold text-[var(--text-primary)] tabular-nums",children:U(V.currentValue)}),a.jsxs("td",{className:`py-2.5 px-3 text-right text-xs font-semibold tabular-nums ${R?"text-emerald-400":"text-[var(--accent-rose)]"}`,children:[R?"+":"",U(V.unrealizedPL)]}),a.jsxs("td",{className:`py-2.5 px-3 text-right text-xs font-bold tabular-nums ${R?"text-emerald-400":"text-[var(--accent-rose)]"}`,children:[R?"+":"",V.unrealizedPLPct.toFixed(1),"%"]})]},V.holdingId)}),a.jsxs("tr",{className:"bg-[var(--bg-inset)] border-t-2 border-[var(--border-light)]",children:[a.jsxs("td",{className:"py-2.5 px-4 text-xs font-semibold text-[var(--text-muted)]",children:["Total (",z.length," stocks)"]}),a.jsx("td",{colSpan:3,className:"py-2.5 px-3"}),a.jsx("td",{className:"py-2.5 px-3 text-right text-xs font-semibold text-[var(--text-primary)] tabular-nums",children:U(Y.invested)}),a.jsx("td",{className:"py-2.5 px-3 text-right text-xs font-semibold text-[var(--text-primary)] tabular-nums",children:U(Y.current)}),a.jsxs("td",{className:`py-2.5 px-3 text-right text-xs font-semibold tabular-nums ${Y.unrealizedPL>=0?"text-emerald-400":"text-[var(--accent-rose)]"}`,children:[Y.unrealizedPL>=0?"+":"",U(Y.unrealizedPL)]}),a.jsxs("td",{className:`py-2.5 px-3 text-right text-xs font-bold tabular-nums ${Y.unrealizedPL>=0?"text-emerald-400":"text-[var(--accent-rose)]"}`,children:[Y.unrealizedPLPct>=0?"+":"",Y.unrealizedPLPct.toFixed(1),"%"]})]})]})]})}),a.jsx("div",{className:"sm:hidden divide-y divide-[var(--border-light)]",children:z.map(V=>{const R=V.unrealizedPL>=0,k=C==="all"?q.find(K=>K.portfolioId===V.portfolioId):null;return a.jsxs("div",{className:"px-4 py-3",children:[a.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-medium text-[var(--text-primary)]",children:V.companyName}),a.jsxs("p",{className:"text-xs font-mono text-[var(--text-dim)]",children:[V.symbol,k&&a.jsxs("span",{className:"ml-1 font-sans",children:[" ",k.portfolioName]})]})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("p",{className:`text-xs font-bold tabular-nums ${R?"text-emerald-400":"text-[var(--accent-rose)]"}`,children:[R?"+":"",V.unrealizedPLPct.toFixed(1),"%"]}),a.jsxs("p",{className:`text-xs font-semibold tabular-nums ${R?"text-emerald-400":"text-[var(--accent-rose)]"}`,children:[R?"+":"",U(V.unrealizedPL)]})]})]}),a.jsxs("div",{className:"flex items-center justify-between text-xs",children:[a.jsxs("div",{className:"text-[var(--text-dim)]",children:[a.jsxs("span",{children:[V.quantity," shares"]}),a.jsx("span",{className:"mx-1",children:""}),a.jsxs("span",{children:["Avg ",U(V.avgBuyPrice)]}),a.jsx("span",{className:"mx-1",children:""}),a.jsxs("span",{children:["CMP ",U(V.currentPrice)]})]}),a.jsx("p",{className:"text-xs font-semibold text-[var(--text-primary)] tabular-nums",children:U(V.currentValue)})]})]},V.holdingId)})})]}):a.jsxs("div",{className:"bg-[var(--bg-card)] rounded-xl border border-[var(--border)] py-10 flex flex-col items-center gap-3",children:[a.jsx(Os,{size:28,className:"text-[var(--text-dim)]"}),a.jsxs("p",{className:"text-sm text-[var(--text-muted)]",children:["No holdings",te?" in this portfolio":""]}),a.jsx("button",{onClick:()=>E({buy:C!=="all"?C:void 0}),className:"text-xs font-semibold text-emerald-400 hover:text-emerald-300",children:"Buy your first stock"})]})}),v==="transactions"&&a.jsx(a.Fragment,{children:L.length>0?a.jsxs("div",{className:"bg-[var(--bg-card)] rounded-xl border border-[var(--border)] overflow-hidden",children:[a.jsx("div",{className:"hidden sm:block overflow-x-auto",children:a.jsxs("table",{className:"w-full text-sm",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b border-[var(--border-light)] bg-[var(--bg-inset)]",children:[a.jsx("th",{className:"text-left py-2 px-4 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Date"}),a.jsx("th",{className:"text-left py-2 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Type"}),a.jsx("th",{className:"text-left py-2 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Stock"}),a.jsx("th",{className:"text-right py-2 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Qty"}),a.jsx("th",{className:"text-right py-2 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Price"}),a.jsx("th",{className:"text-right py-2 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Amount"}),a.jsx("th",{className:"text-right py-2 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Brokerage"}),a.jsx("th",{className:"text-right py-2 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Net"}),a.jsx("th",{className:"text-right py-2 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Realized P&L"})]})}),a.jsx("tbody",{children:L.map(V=>{const R=V.type==="BUY",k=!R&&V.realizedPL!=null,K=k&&V.realizedPL>=0,ne=C==="all"?q.find(fe=>fe.portfolioId===V.portfolioId):null;return a.jsxs("tr",{className:"border-b border-[var(--border-light)] last:border-0 hover:bg-[var(--bg-hover)] transition-colors",children:[a.jsx("td",{className:"py-2.5 px-4 text-xs text-[var(--text-secondary)]",children:V.date}),a.jsx("td",{className:"py-2.5 px-3",children:a.jsx("span",{className:`text-xs font-bold px-2 py-0.5 rounded-full ${R?"bg-emerald-500/15 text-emerald-400":"bg-rose-500/15 text-[var(--accent-rose)]"}`,children:V.type})}),a.jsxs("td",{className:"py-2.5 px-3",children:[a.jsx("p",{className:"text-xs font-medium text-[var(--text-primary)]",children:V.symbol}),a.jsxs("p",{className:"text-xs text-[var(--text-dim)] truncate max-w-[140px]",children:[V.companyName,ne&&a.jsxs("span",{children:["  ",ne.portfolioName]})]})]}),a.jsx("td",{className:"py-2.5 px-3 text-right text-xs text-[var(--text-secondary)] tabular-nums",children:V.quantity}),a.jsx("td",{className:"py-2.5 px-3 text-right text-xs text-[var(--text-muted)] tabular-nums",children:U(V.pricePerShare)}),a.jsx("td",{className:"py-2.5 px-3 text-right text-xs text-[var(--text-secondary)] tabular-nums",children:U(V.totalAmount)}),a.jsx("td",{className:"py-2.5 px-3 text-right text-xs text-[var(--text-dim)] tabular-nums",children:V.brokerage>0?U(V.brokerage):""}),a.jsx("td",{className:"py-2.5 px-3 text-right text-xs font-semibold text-[var(--text-primary)] tabular-nums",children:U(V.netAmount)}),a.jsx("td",{className:"py-2.5 px-3 text-right",children:k?a.jsxs("span",{className:`text-xs font-semibold tabular-nums ${K?"text-emerald-400":"text-[var(--accent-rose)]"}`,children:[K?"+":"",U(V.realizedPL)]}):a.jsx("span",{className:"text-xs text-[var(--text-dim)]",children:""})})]},V.transactionId)})})]})}),a.jsx("div",{className:"sm:hidden divide-y divide-[var(--border-light)]",children:L.map(V=>{const R=V.type==="BUY",k=!R&&V.realizedPL!=null,K=k&&V.realizedPL>=0;return a.jsxs("div",{className:"px-4 py-3",children:[a.jsxs("div",{className:"flex items-center justify-between mb-1",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:`text-xs font-bold px-2 py-0.5 rounded-full ${R?"bg-emerald-500/15 text-emerald-400":"bg-rose-500/15 text-[var(--accent-rose)]"}`,children:V.type}),a.jsx("p",{className:"text-xs font-semibold text-[var(--text-primary)]",children:V.symbol})]}),a.jsx("p",{className:"text-xs text-[var(--text-dim)]",children:V.date})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("p",{className:"text-xs text-[var(--text-dim)]",children:[V.quantity," shares @ ",U(V.pricePerShare)]}),a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-xs font-semibold text-[var(--text-primary)] tabular-nums",children:U(V.netAmount)}),k&&a.jsxs("p",{className:`text-xs font-semibold tabular-nums ${K?"text-emerald-400":"text-[var(--accent-rose)]"}`,children:["P&L: ",K?"+":"",U(V.realizedPL)]})]})]}),V.notes&&a.jsx("p",{className:"text-xs text-[var(--text-dim)] mt-1",children:V.notes})]},V.transactionId)})})]}):a.jsxs("div",{className:"bg-[var(--bg-card)] rounded-xl border border-[var(--border)] py-10 flex flex-col items-center gap-3",children:[a.jsx(Gi,{size:28,className:"text-[var(--text-dim)]"}),a.jsx("p",{className:"text-sm text-[var(--text-muted)]",children:"No transactions yet"}),a.jsx("button",{onClick:()=>E({buy:C!=="all"?C:void 0}),className:"text-xs font-semibold text-emerald-400 hover:text-emerald-300",children:"Make your first purchase"})]})})]}),a.jsx(rt,{open:A==="addPortfolio"||!!A?.editPortfolio,onClose:()=>E(null),title:A?.editPortfolio?"Edit Portfolio":"New Stock Portfolio",children:a.jsx(l2,{initial:A?.editPortfolio||void 0,onSave:H,onDelete:A?.editPortfolio?se:void 0,onCancel:()=>E(null)})}),a.jsx(rt,{open:!!A?.buy,onClose:()=>E(null),title:"Buy Stock",wide:!0,children:a.jsx(s2,{portfolioId:typeof A?.buy=="string"?A.buy:void 0,onSave:M,onCancel:()=>E(null)})}),a.jsx(rt,{open:!!A?.sell,onClose:()=>E(null),title:"Sell Stock",wide:!0,children:a.jsx(n2,{portfolioId:typeof A?.sell=="string"?A.sell:void 0,onSave:ie,onCancel:()=>E(null)})})]})}function Un({label:n,value:o,sub:u,positive:c,bold:h}){return a.jsxs("div",{className:"bg-[var(--bg-card)] rounded-xl border border-[var(--border)] px-4 py-3",children:[a.jsx("p",{className:"text-xs text-[var(--text-dim)] uppercase tracking-wider mb-1",children:n}),a.jsx("p",{className:`text-sm tabular-nums ${h?"font-bold":"font-semibold"} ${c===void 0?"text-[var(--text-primary)]":c?"text-emerald-400":"text-[var(--accent-rose)]"}`,children:o}),u&&a.jsx("p",{className:`text-xs font-semibold tabular-nums mt-0.5 ${c?"text-emerald-400":"text-[var(--accent-rose)]"}`,children:u})]})}const i2=["Self","Spouse","Father","Mother","Son","Daughter","Brother","Sister","Other"].map(n=>({value:n,label:n})),Ti={pan:/^[A-Z]{5}[0-9]{4}[A-Z]{1}$/,aadhar:/^\d{12}$/,email:/^[^\s@]+@[^\s@]+\.[^\s@]+$/,mobile:/^\d{10}$/};function o2({initial:n,onSave:o,onDelete:u,onCancel:c}){const h=!!n,[m,b]=j.useState({memberName:n?.memberName||"",relationship:n?.relationship||"",pan:n?.pan||"",aadhar:n?.aadhar||"",email:n?.email||"",mobile:n?.mobile||"",includeInEmailReports:n?.includeInEmailReports??!0,status:n?.status||"Active"}),[x,g]=j.useState({});function d(E,C){b(S=>({...S,[E]:C})),g(S=>({...S,[E]:void 0}))}function w(){const E={};return m.memberName.trim()||(E.memberName="Required"),m.relationship||(E.relationship="Required"),Ti.pan.test(m.pan.toUpperCase())||(E.pan="Format: ABCDE1234F"),Ti.aadhar.test(m.aadhar)||(E.aadhar="12 digits required"),Ti.email.test(m.email)||(E.email="Invalid email"),Ti.mobile.test(m.mobile)||(E.mobile="10 digits required"),g(E),Object.keys(E).length===0}function A(){w()&&o({...m,pan:m.pan.toUpperCase()})}return a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsx(X,{label:"Member Name",required:!0,error:x.memberName,children:a.jsx(ce,{value:m.memberName,onChange:E=>d("memberName",E),placeholder:"e.g., Jagadeesh"})}),a.jsx(X,{label:"Relationship",required:!0,error:x.relationship,children:a.jsx(Se,{value:m.relationship,onChange:E=>d("relationship",E),options:i2,placeholder:"Select..."})})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsx(X,{label:"PAN",required:!0,error:x.pan,children:a.jsx(ce,{value:m.pan,onChange:E=>d("pan",E.toUpperCase()),placeholder:"ABCDE1234F",maxLength:10})}),a.jsx(X,{label:"Aadhar",required:!0,error:x.aadhar,children:a.jsx(ce,{value:m.aadhar,onChange:E=>d("aadhar",E.replace(/\D/g,"")),placeholder:"123456789012",maxLength:12})})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsx(X,{label:"Email",required:!0,error:x.email,children:a.jsx(ce,{type:"email",value:m.email,onChange:E=>d("email",E),placeholder:"email@example.com"})}),a.jsx(X,{label:"Mobile",required:!0,error:x.mobile,children:a.jsx(ce,{value:m.mobile,onChange:E=>d("mobile",E.replace(/\D/g,"")),placeholder:"9876543210",maxLength:10})})]}),a.jsx(uN,{checked:m.includeInEmailReports,onChange:E=>d("includeInEmailReports",E),label:"Include in email reports"}),h&&a.jsx(X,{label:"Status",children:a.jsx(Se,{value:m.status,onChange:E=>d("status",E),options:[{value:"Active",label:"Active"},{value:"Inactive",label:"Inactive"}]})}),a.jsxs("div",{className:"flex items-center justify-between",children:[h&&u?a.jsx(ja,{onClick:u}):a.jsx("div",{}),a.jsx(Nt,{onCancel:c,onSubmit:A,submitLabel:h?"Update":"Add Member"})]})]})}const Mi=["from-violet-500 to-indigo-500","from-rose-500 to-pink-500","from-blue-500 to-cyan-500","from-amber-500 to-orange-500","from-emerald-500 to-teal-500"],Bh={Self:"bg-violet-500/15 text-[var(--accent-violet)]",Spouse:"bg-rose-500/15 text-[var(--accent-rose)]",Father:"bg-blue-500/15 text-[var(--accent-blue)]",Mother:"bg-amber-500/15 text-[var(--accent-amber)]",Son:"bg-emerald-500/15 text-emerald-400",Daughter:"bg-emerald-500/15 text-emerald-400"};function c2(){const{loading:n,members:o,banks:u,investments:c,insurancePolicies:h,addMember:m,updateMember:b,deleteMember:x}=ke();if(n)return a.jsx(Na,{title:"Loading family",cards:3});const[g,d]=j.useState(null),w=o.filter(v=>v.status!=="Inactive"),A=w.filter(v=>v.includeInEmailReports).length,E=j.useMemo(()=>{const v={};return w.forEach(p=>{v[p.memberId]={bankCount:u.filter(y=>y.memberId===p.memberId&&y.status!=="Inactive").length,invCount:c.filter(y=>y.memberId===p.memberId&&y.status!=="Inactive").length,insCount:h.filter(y=>y.memberId===p.memberId&&y.status!=="Inactive").length}}),v},[w,u,c,h]);function C(v){g?.edit?b(g.edit.memberId,v):m(v),d(null)}function S(){g?.edit&&confirm("Deactivate this family member?")&&(x(g.edit.memberId),d(null))}return a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[a.jsx(Od,{label:"Members",value:w.length}),a.jsx(Od,{label:"Email Reports",value:`${A} / ${w.length}`}),a.jsx(Od,{label:"Bank Accounts",value:u.filter(v=>v.status!=="Inactive").length})]}),a.jsx("div",{className:"flex items-center justify-end px-1",children:a.jsxs("button",{onClick:()=>d("add"),className:"flex items-center gap-1.5 px-3 py-2 text-xs font-semibold text-violet-400 hover:text-violet-300 bg-[var(--bg-card)] border border-[var(--border)] rounded-lg transition-colors",children:[a.jsx(sa,{size:14})," Add Member"]})}),w.length===0?a.jsxs("div",{className:"bg-[var(--bg-card)] rounded-xl border border-[var(--border)] py-12 flex flex-col items-center gap-3",children:[a.jsx(_s,{size:32,className:"text-[var(--text-dim)]"}),a.jsx("p",{className:"text-sm text-[var(--text-muted)]",children:"No family members yet"}),a.jsx("button",{onClick:()=>d("add"),className:"text-xs font-semibold text-violet-400 hover:text-violet-300",children:"Add your first member"})]}):a.jsxs("div",{className:"bg-[var(--bg-card)] rounded-xl border border-[var(--border)] overflow-hidden",children:[a.jsx("div",{className:"hidden sm:block overflow-x-auto",children:a.jsxs("table",{className:"w-full text-sm min-w-[680px]",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b border-[var(--border-light)] bg-[var(--bg-inset)]",children:[a.jsx("th",{className:"text-left py-2.5 px-4 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Member"}),a.jsx("th",{className:"text-left py-2.5 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Relationship"}),a.jsx("th",{className:"text-left py-2.5 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Email"}),a.jsx("th",{className:"text-left py-2.5 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Mobile"}),a.jsxs("th",{className:"text-center py-2.5 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:[a.jsx("div",{children:"Accounts"}),a.jsx("div",{className:"text-[10px] font-medium text-[var(--text-dim)]",children:"Bank / Inv / Ins"})]}),a.jsx("th",{className:"text-center py-2.5 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Email Rpt"}),a.jsx("th",{className:"w-8 py-2.5 px-2"})]})}),a.jsx("tbody",{children:w.map((v,p)=>{const y=E[v.memberId]||{};return a.jsxs("tr",{className:"border-b border-[var(--border-light)] last:border-0 hover:bg-[var(--bg-hover)] transition-colors group",children:[a.jsx("td",{className:"py-2.5 px-4",children:a.jsxs("div",{className:"flex items-center gap-2.5",children:[a.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-xs font-bold text-white bg-gradient-to-br ${Mi[p%Mi.length]}`,children:v.memberName.charAt(0)}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-[var(--text-primary)]",children:v.memberName}),a.jsx("p",{className:"text-xs text-[var(--text-dim)]",children:v.memberId})]})]})}),a.jsx("td",{className:"py-2.5 px-3",children:a.jsx("span",{className:`text-xs font-semibold px-2 py-0.5 rounded-full ${Bh[v.relationship]||"bg-slate-500/15 text-[var(--text-muted)]"}`,children:v.relationship})}),a.jsx("td",{className:"py-2.5 px-3 text-xs text-[var(--text-muted)] truncate max-w-[180px]",children:v.email}),a.jsx("td",{className:"py-2.5 px-3 text-xs text-[var(--text-muted)] tabular-nums",children:v.mobile}),a.jsx("td",{className:"py-2.5 px-3 text-center",children:a.jsxs("div",{className:"flex items-center justify-center gap-2 text-xs text-[var(--text-dim)]",children:[a.jsxs("span",{className:"flex items-center gap-0.5",title:"Bank accounts",children:[a.jsx(Vn,{size:10})," ",y.bankCount||0]}),a.jsxs("span",{className:"flex items-center gap-0.5",title:"Investment accounts",children:[a.jsx($i,{size:10})," ",y.invCount||0]}),a.jsxs("span",{className:"flex items-center gap-0.5",title:"Insurance policies",children:[a.jsx(Il,{size:10})," ",y.insCount||0]})]})}),a.jsx("td",{className:"py-2.5 px-3 text-center",children:v.includeInEmailReports?a.jsx(lb,{size:13,className:"inline text-emerald-400"}):a.jsx("span",{className:"text-xs text-[var(--text-dim)]",children:""})}),a.jsx("td",{className:"py-2.5 px-2",children:a.jsx("button",{onClick:()=>d({edit:v}),className:"opacity-0 group-hover:opacity-100 p-1 rounded text-[var(--text-dim)] hover:text-[var(--text-primary)] transition-all",children:a.jsx(ya,{size:12})})})]},v.memberId)})})]})}),a.jsx("div",{className:"sm:hidden divide-y divide-[var(--border-light)]",children:w.map((v,p)=>{const y=E[v.memberId]||{};return a.jsxs("div",{onClick:()=>d({edit:v}),className:"px-4 py-3.5 hover:bg-[var(--bg-hover)] transition-colors cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2.5 mb-1.5",children:[a.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-xs font-bold text-white bg-gradient-to-br ${Mi[p%Mi.length]}`,children:v.memberName.charAt(0)}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("p",{className:"text-sm font-medium text-[var(--text-primary)]",children:v.memberName}),a.jsx("span",{className:`text-xs font-semibold px-2 py-0.5 rounded-full ${Bh[v.relationship]||"bg-slate-500/15 text-[var(--text-muted)]"}`,children:v.relationship})]}),a.jsx("p",{className:"text-xs text-[var(--text-muted)] truncate",children:v.email})]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("p",{className:"text-xs text-[var(--text-dim)] tabular-nums",children:v.mobile}),a.jsxs("div",{className:"flex items-center gap-2 text-xs text-[var(--text-dim)]",children:[a.jsxs("span",{className:"flex items-center gap-0.5",children:[a.jsx(Vn,{size:10})," ",y.bankCount||0]}),a.jsxs("span",{className:"flex items-center gap-0.5",children:[a.jsx($i,{size:10})," ",y.invCount||0]}),a.jsxs("span",{className:"flex items-center gap-0.5",children:[a.jsx(Il,{size:10})," ",y.insCount||0]})]})]})]},v.memberId)})})]}),a.jsx(rt,{open:!!g,onClose:()=>d(null),title:g?.edit?"Edit Member":"Add Family Member",wide:!0,children:a.jsx(o2,{initial:g?.edit||void 0,onSave:C,onDelete:g?.edit?S:void 0,onCancel:()=>d(null)})})]})}function Od({label:n,value:o}){return a.jsxs("div",{className:"bg-[var(--bg-card)] rounded-xl border border-[var(--border)] px-4 py-3",children:[a.jsx("p",{className:"text-xs text-[var(--text-dim)] uppercase tracking-wider mb-1",children:n}),a.jsx("p",{className:"text-sm font-bold text-[var(--text-primary)] tabular-nums",children:o})]})}const Uh=["Retirement","Emergency Fund","Child Education","Home Purchase","Car","Travel","Wedding","Custom"].map(n=>({value:n,label:n})),$h=[{value:"High",label:"High"},{value:"Medium",label:"Medium"},{value:"Low",label:"Low"}],d2=[{value:"On Track",label:"On Track"},{value:"Needs Attention",label:"Needs Attention"},{value:"Achieved",label:"Achieved"},{value:"Paused",label:"Paused"}],ki={Retirement:{inflation:6,cagr:12},"Emergency Fund":{inflation:0,cagr:7},"Child Education":{inflation:10,cagr:12},"Home Purchase":{inflation:8,cagr:12},Wedding:{inflation:6,cagr:12},Car:{inflation:5,cagr:10},Travel:{inflation:6,cagr:10},Custom:{inflation:6,cagr:12}},Ph=[{label:"Basics",icon:Zn},{label:"Financials",icon:Pj},{label:"Review",icon:Xn}];function u2({initial:n,onSave:o,onDelete:u,onCancel:c}){const h=!!n,{activeMembers:m}=ke(),b=[{value:"",label:"Family (Default)"},...m.map(z=>({value:z.memberId,label:z.memberName}))],[x,g]=j.useState(0),[d,w]=j.useState(()=>{if(h){const z=(n.expectedInflation||.06)*100,L=(n.expectedCAGR||.12)*100,te=n.targetDate?Math.max(0,(new Date(n.targetDate)-new Date)/(365.25*24*60*60*1e3)):0,oe=z/100;let H=n.targetAmount||0;return oe>0&&te>0&&n.goalType!=="Emergency Fund"&&(H=n.targetAmount/Math.pow(1+oe,te)),{goalType:n.goalType||"",goalName:n.goalName||"",familyMemberId:n.familyMemberId||"",todaysCost:Math.round(H).toString(),targetDate:n.targetDate||"",lumpsum:(n.lumpsumInvested||0).toString(),monthlySIP:(n.monthlyInvestment||0).toString(),inflation:z.toString(),cagr:L.toString(),priority:n.priority||"Medium",status:n.status||"On Track",notes:n.notes||"",monthlyExpenses:(n.monthlyExpenses||"").toString(),emergencyMonths:(n.emergencyMonths||6).toString()}}return{goalType:"",goalName:"",familyMemberId:"",todaysCost:"",targetDate:"",lumpsum:"",monthlySIP:"",inflation:"6",cagr:"12",priority:"Medium",status:"On Track",notes:"",monthlyExpenses:"",emergencyMonths:"6"}}),[A,E]=j.useState({});function C(z,L){w(te=>({...te,[z]:L})),E(te=>({...te,[z]:void 0}))}j.useEffect(()=>{if(h||!d.goalType)return;const z=ki[d.goalType]||ki.Custom;w(L=>({...L,inflation:z.inflation.toString(),cagr:z.cagr.toString()}))},[d.goalType,h]);const S=d.goalType==="Retirement",v=d.goalType==="Emergency Fund",p=j.useMemo(()=>{const z=(Number(d.inflation)||0)/100,te=(Number(d.cagr)||0)/100/12,oe=Number(d.lumpsum)||0,H=Number(d.monthlySIP)||0,se=Number(d.monthlyExpenses)||0,M=Number(d.emergencyMonths)||6,ie=d.targetDate?Math.max(0,(new Date(d.targetDate)-new Date)/(365.25*24*60*60*1e3)):0,V=Math.round(ie*12);let R=0,k=0;S?(R=se*12*25,k=R*Math.pow(1+z,ie)):v?(R=se*M,k=R):(R=Number(d.todaysCost)||0,k=z>0&&ie>0?R*Math.pow(1+z,ie):R),k=Math.round(k);const K=oe>0&&V>0?oe*Math.pow(1+te,V):oe,ne=H>0&&te>0&&V>0?H*((Math.pow(1+te,V)-1)/te):H*V,fe=Math.round(K+ne),ye=Math.round(oe+H*V),N=fe-ye;let B=0;if(k>0&&V>0){const de=k-K;de>0&&te>0?B=de/((Math.pow(1+te,V)-1)/te):de>0&&(B=de/V),B=Math.max(0,Math.ceil(B))}const W=k>0&&fe>=k,J=k>0?fe/k*100:0;return{todaysCost:R,inflatedTarget:k,yearsToGo:ie,months:V,fvLumpsum:Math.round(K),fvSIP:Math.round(ne),projectedValue:fe,totalInvested:ye,totalReturns:N,requiredSIP:B,isOnTrack:W,pctOfTarget:J,hasTarget:k>0,hasInputs:oe>0||H>0}},[d.todaysCost,d.targetDate,d.lumpsum,d.monthlySIP,d.inflation,d.cagr,d.monthlyExpenses,d.emergencyMonths,S,v]);function y(z){const L={};return z===0&&(d.goalType||(L.goalType="Required"),d.goalName.trim()||(L.goalName="Required")),z===1&&(d.targetDate||(L.targetDate="Required"),S||v?(!d.monthlyExpenses||Number(d.monthlyExpenses)<=0)&&(L.monthlyExpenses="Required"):(!d.todaysCost||Number(d.todaysCost)<=0)&&(L.todaysCost="Must be > 0")),E(L),Object.keys(L).length===0}function _(){const z={};return d.goalType||(z.goalType="Required"),d.goalName.trim()||(z.goalName="Required"),d.targetDate||(z.targetDate="Required"),S||v?(!d.monthlyExpenses||Number(d.monthlyExpenses)<=0)&&(z.monthlyExpenses="Required"):(!d.todaysCost||Number(d.todaysCost)<=0)&&(z.todaysCost="Must be > 0"),E(z),Object.keys(z).length===0}function O(){y(x)&&g(z=>Math.min(z+1,2))}function q(){if(!_())return;const z=d.familyMemberId&&m.find(L=>L.memberId===d.familyMemberId)?.memberName||"Family";o({goalType:d.goalType,goalName:d.goalName,familyMemberId:d.familyMemberId||"",familyMember:z,targetAmount:p.inflatedTarget,targetDate:d.targetDate,priority:d.priority,status:d.status,notes:d.notes,expectedInflation:(Number(d.inflation)||0)/100,expectedCAGR:(Number(d.cagr)||0)/100,monthlyInvestment:Number(d.monthlySIP)||0,lumpsumInvested:Number(d.lumpsum)||0,monthlyExpenses:S||v?Number(d.monthlyExpenses)||0:void 0,emergencyMonths:v?Number(d.emergencyMonths)||6:void 0,isRetirement:S,currentCost:p.todaysCost})}const Y=d.familyMemberId&&m.find(z=>z.memberId===d.familyMemberId)?.memberName||"Family";return h?a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsx(X,{label:"Goal Type",required:!0,error:A.goalType,children:a.jsx(Se,{value:d.goalType,onChange:z=>C("goalType",z),options:Uh,placeholder:"Select type..."})}),a.jsx(X,{label:"Goal Name",required:!0,error:A.goalName,children:a.jsx(ce,{value:d.goalName,onChange:z=>C("goalName",z),placeholder:"e.g., Retirement Fund (2045)"})})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsx(X,{label:"Family Member",error:A.familyMemberId,children:a.jsx(Se,{value:d.familyMemberId,onChange:z=>C("familyMemberId",z),options:b,placeholder:"Family (Default)"})}),a.jsx(X,{label:"Target Date",required:!0,error:A.targetDate,children:a.jsx(ce,{type:"date",value:d.targetDate,onChange:z=>C("targetDate",z)})})]}),S||v?a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsx(X,{label:"Monthly Expenses",required:!0,error:A.monthlyExpenses,children:a.jsx(ce,{type:"number",value:d.monthlyExpenses,onChange:z=>C("monthlyExpenses",z),placeholder:"e.g., 50000"})}),v&&a.jsx(X,{label:"Emergency Months",children:a.jsx(ce,{type:"number",value:d.emergencyMonths,onChange:z=>C("emergencyMonths",z),placeholder:"6"})})]}):a.jsx(X,{label:"Today's Cost",required:!0,error:A.todaysCost,children:a.jsx(ce,{type:"number",value:d.todaysCost,onChange:z=>C("todaysCost",z),placeholder:"e.g., 1000000"})}),a.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:[a.jsx(X,{label:"Inflation %",children:a.jsx(ce,{type:"number",value:d.inflation,onChange:z=>C("inflation",z),placeholder:"6"})}),a.jsx(X,{label:"Expected CAGR %",children:a.jsx(ce,{type:"number",value:d.cagr,onChange:z=>C("cagr",z),placeholder:"12"})}),a.jsx(X,{label:"Lumpsum",children:a.jsx(ce,{type:"number",value:d.lumpsum,onChange:z=>C("lumpsum",z),placeholder:"0"})}),a.jsx(X,{label:"Monthly SIP",children:a.jsx(ce,{type:"number",value:d.monthlySIP,onChange:z=>C("monthlySIP",z),placeholder:"0"})})]}),p.hasTarget&&a.jsx(Fh,{calc:p,inflation:d.inflation,isRetirement:S,isEmergency:v}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsx(X,{label:"Priority",children:a.jsx(Se,{value:d.priority,onChange:z=>C("priority",z),options:$h})}),a.jsx(X,{label:"Status",children:a.jsx(Se,{value:d.status,onChange:z=>C("status",z),options:d2})})]}),a.jsx(X,{label:"Notes",children:a.jsx(Hs,{value:d.notes,onChange:z=>C("notes",z),placeholder:"Optional notes...",rows:2})}),a.jsxs("div",{className:"flex items-center justify-between",children:[u?a.jsx(ja,{onClick:u}):a.jsx("div",{}),a.jsx(Nt,{onCancel:c,onSubmit:q,submitLabel:"Update Goal"})]})]}):a.jsxs("div",{className:"space-y-5",children:[a.jsx("div",{className:"flex items-center gap-1 mb-2",children:Ph.map((z,L)=>{const te=z.icon,oe=L===x,H=L<x;return a.jsxs("div",{className:"flex items-center flex-1",children:[a.jsxs("button",{onClick:()=>{L<x&&g(L)},className:`flex items-center gap-1.5 text-xs font-semibold transition-colors ${oe?"text-violet-400":H?"text-emerald-400 cursor-pointer":"text-[var(--text-dim)]"}`,children:[a.jsx("span",{className:`w-6 h-6 rounded-full flex items-center justify-center text-[10px] font-bold border ${oe?"border-violet-400 bg-violet-500/15":H?"border-emerald-400 bg-emerald-500/15":"border-[var(--border)] bg-[var(--bg-inset)]"}`,children:H?a.jsx(Xn,{size:12}):a.jsx(te,{size:12})}),a.jsx("span",{className:"hidden sm:inline",children:z.label})]}),L<Ph.length-1&&a.jsx("div",{className:`flex-1 h-px mx-2 ${H?"bg-emerald-400/40":"bg-[var(--border)]"}`})]},z.label)})}),x===0&&a.jsxs("div",{className:"space-y-4",children:[a.jsx("p",{className:"text-xs text-[var(--text-muted)]",children:"Tell us about your financial goal"}),a.jsx(X,{label:"Goal Type",required:!0,error:A.goalType,children:a.jsx(Se,{value:d.goalType,onChange:z=>C("goalType",z),options:Uh,placeholder:"Select type..."})}),d.goalType&&a.jsxs("div",{className:"flex items-center gap-3 px-3 py-2 rounded-lg bg-[var(--bg-inset)] border border-[var(--border-light)]",children:[a.jsx(Hl,{size:12,className:"text-[var(--text-dim)] shrink-0"}),a.jsxs("p",{className:"text-[11px] text-[var(--text-muted)]",children:["Default: ",ki[d.goalType]?.inflation||6,"% inflation, ",ki[d.goalType]?.cagr||12,"% CAGR",S&&"  Uses 25x annual expenses rule",v&&"  No inflation applied"]})]}),a.jsx(X,{label:"Goal Name",required:!0,error:A.goalName,children:a.jsx(ce,{value:d.goalName,onChange:z=>C("goalName",z),placeholder:"e.g., Retirement Fund (2045)"})}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsx(X,{label:"Family Member",error:A.familyMemberId,children:a.jsx(Se,{value:d.familyMemberId,onChange:z=>C("familyMemberId",z),options:b,placeholder:"Family (Default)"})}),a.jsx(X,{label:"Priority",children:a.jsx(Se,{value:d.priority,onChange:z=>C("priority",z),options:$h})})]})]}),x===1&&a.jsxs("div",{className:"space-y-4",children:[a.jsx("p",{className:"text-xs text-[var(--text-muted)]",children:S?"Set your retirement timeline and monthly expenses":v?"Set your emergency fund requirements":"Set your target and investment plan"}),a.jsx(X,{label:"Target Date",required:!0,error:A.targetDate,children:a.jsx(ce,{type:"date",value:d.targetDate,onChange:z=>C("targetDate",z)})}),S||v?a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsx(X,{label:"Monthly Expenses (Today)",required:!0,error:A.monthlyExpenses,children:a.jsx(ce,{type:"number",value:d.monthlyExpenses,onChange:z=>C("monthlyExpenses",z),placeholder:"e.g., 50000"})}),v&&a.jsx(X,{label:"Emergency Fund (Months)",children:a.jsx(ce,{type:"number",value:d.emergencyMonths,onChange:z=>C("emergencyMonths",z),placeholder:"6"})}),S&&a.jsx("div",{className:"sm:col-span-2",children:a.jsxs("p",{className:"text-[11px] text-[var(--text-dim)]",children:["Corpus = Monthly Expenses x 12 x 25 = ",U(p.todaysCost)," (today)"]})})]}):a.jsx(X,{label:"Today's Cost",required:!0,error:A.todaysCost,children:a.jsx(ce,{type:"number",value:d.todaysCost,onChange:z=>C("todaysCost",z),placeholder:"e.g., 1000000"})}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsx(X,{label:`Inflation Rate (%)${v?"  N/A":""}`,children:a.jsx(ce,{type:"number",value:d.inflation,onChange:z=>C("inflation",z),placeholder:"6"})}),a.jsx(X,{label:"Expected Returns (CAGR %)",children:a.jsx(ce,{type:"number",value:d.cagr,onChange:z=>C("cagr",z),placeholder:"12"})})]}),p.hasTarget&&a.jsx(Fh,{calc:p,inflation:d.inflation,isRetirement:S,isEmergency:v}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsx(X,{label:"Lumpsum Investment (Optional)",children:a.jsx(ce,{type:"number",value:d.lumpsum,onChange:z=>C("lumpsum",z),placeholder:"0"})}),a.jsx(X,{label:"Monthly SIP",children:a.jsx(ce,{type:"number",value:d.monthlySIP,onChange:z=>C("monthlySIP",z),placeholder:"0"})})]}),p.hasTarget&&p.months>0&&a.jsx(Gh,{calc:p,sip:d.monthlySIP,lumpsum:d.lumpsum}),a.jsx(X,{label:"Notes",children:a.jsx(Hs,{value:d.notes,onChange:z=>C("notes",z),placeholder:"Optional notes...",rows:2})})]}),x===2&&a.jsxs("div",{className:"space-y-4",children:[a.jsx("p",{className:"text-xs text-[var(--text-muted)]",children:"Review your goal before saving"}),a.jsxs("div",{className:"bg-[var(--bg-inset)] rounded-lg border border-[var(--border-light)] p-4 space-y-3",children:[a.jsx(It,{label:"Goal",value:d.goalName,bold:!0}),a.jsx(It,{label:"Type",value:d.goalType,color:"violet"}),a.jsx(It,{label:"Member",value:Y}),a.jsx(It,{label:"Priority",value:d.priority,badge:d.priority==="High"?"rose":d.priority==="Low"?"blue":"amber"}),a.jsxs("div",{className:"border-t border-[var(--border-light)] pt-3 space-y-2",children:[(S||v)&&a.jsx(It,{label:"Monthly Expenses",value:U(Number(d.monthlyExpenses)||0)}),v&&a.jsx(It,{label:"Emergency Months",value:d.emergencyMonths}),!S&&!v&&a.jsx(It,{label:"Today's Cost",value:U(p.todaysCost)}),a.jsx(It,{label:"Inflation",value:`${d.inflation}% p.a.`}),a.jsx(It,{label:"Expected CAGR",value:`${d.cagr}% p.a.`}),a.jsx(It,{label:"Future Value (Inflated)",value:U(p.inflatedTarget),bold:!0,color:"violet"})]}),a.jsxs("div",{className:"border-t border-[var(--border-light)] pt-3 space-y-2",children:[a.jsx(It,{label:"Lumpsum",value:U(Number(d.lumpsum)||0)}),a.jsx(It,{label:"Monthly SIP",value:`${U(Number(d.monthlySIP)||0)}/mo`,color:"emerald"}),a.jsx(It,{label:"Target Date",value:d.targetDate}),a.jsx(It,{label:"Time Remaining",value:p.yearsToGo>0?`${p.yearsToGo.toFixed(1)} years`:""})]})]}),p.hasTarget&&p.months>0&&p.hasInputs&&a.jsx(Gh,{calc:p,sip:d.monthlySIP,lumpsum:d.lumpsum,compact:!0})]}),a.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-[var(--border-light)]",children:[a.jsx("div",{children:x>0&&a.jsxs("button",{onClick:()=>g(z=>z-1),className:"flex items-center gap-1 px-4 py-2 text-xs font-semibold text-[var(--text-muted)] hover:text-[var(--text-primary)] rounded-lg hover:bg-[var(--bg-hover)] transition-colors",children:[a.jsx(wj,{size:14})," Back"]})}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:c,className:"px-4 py-2 text-xs font-semibold text-[var(--text-muted)] hover:text-[var(--text-primary)] rounded-lg hover:bg-[var(--bg-hover)] transition-colors",children:"Cancel"}),x<2?a.jsxs("button",{onClick:O,className:"flex items-center gap-1 px-5 py-2 text-xs font-semibold text-white bg-violet-600 hover:bg-violet-500 rounded-lg transition-colors",children:["Next ",a.jsx($n,{size:14})]}):a.jsx("button",{onClick:q,className:"px-5 py-2 text-xs font-semibold text-white bg-violet-600 hover:bg-violet-500 rounded-lg transition-colors",children:"Create Goal"})]})]})]})}function Fh({calc:n,inflation:o,isRetirement:u,isEmergency:c}){return c?a.jsx("div",{className:"flex items-center gap-2 px-3 py-2 rounded-lg bg-blue-500/5 border border-blue-500/15",children:a.jsxs("p",{className:"text-xs text-[var(--text-muted)]",children:["Emergency Fund: ",a.jsx("span",{className:"font-bold text-[var(--text-primary)]",children:U(n.inflatedTarget)}),a.jsx("span",{className:"text-[var(--text-dim)]",children:" (no inflation applied)"})]})}):a.jsxs("div",{className:"flex items-center justify-between gap-2 px-3 py-2 rounded-lg bg-violet-500/5 border border-violet-500/15",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-[10px] font-semibold text-[var(--text-dim)] uppercase tracking-wider",children:u?"Corpus Today":"Today's Cost"}),a.jsx("p",{className:"text-xs font-semibold text-[var(--text-secondary)]",children:U(n.todaysCost)})]}),a.jsxs("div",{className:"text-center",children:[a.jsxs("p",{className:"text-[10px] text-[var(--text-dim)]",children:[o,"% x ",n.yearsToGo.toFixed(1),"yrs"]}),a.jsx($n,{size:12,className:"text-violet-400 mx-auto"})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-[10px] font-semibold text-violet-400 uppercase tracking-wider",children:"Future Value"}),a.jsx("p",{className:"text-xs font-bold text-[var(--text-primary)]",children:U(n.inflatedTarget)})]})]})}function Gh({calc:n,sip:o,lumpsum:u,compact:c}){const h=Number(o)||0,m=Number(u)||0;return a.jsxs("div",{className:`rounded-lg border p-3 space-y-2 ${n.isOnTrack?"bg-emerald-500/5 border-emerald-500/20":"bg-amber-500/5 border-amber-500/20"}`,children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-1.5",children:[n.isOnTrack?a.jsx(Xn,{size:12,className:"text-emerald-400"}):a.jsx(Ki,{size:12,className:"text-amber-400"}),a.jsx("p",{className:`text-[10px] font-bold uppercase tracking-wider ${n.isOnTrack?"text-emerald-400":"text-amber-400"}`,children:n.isOnTrack?"On Track":"SIP May Be Insufficient"})]}),a.jsxs("p",{className:"text-[10px] text-[var(--text-dim)]",children:["@","0","CAGR assumed"]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-xs text-[var(--text-dim)]",children:"Required Monthly SIP"}),a.jsxs("span",{className:"text-sm font-bold text-[var(--text-primary)] tabular-nums",children:[U(n.requiredSIP),"/mo"]})]}),!c&&n.hasInputs&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-xs text-[var(--text-dim)]",children:"Projected Value"}),a.jsx("span",{className:`text-sm font-bold tabular-nums ${n.isOnTrack?"text-emerald-400":"text-amber-400"}`,children:U(n.projectedValue)})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"flex-1 h-1.5 bg-[var(--bg-card)] rounded-full overflow-hidden",children:a.jsx("div",{className:`h-full rounded-full ${n.isOnTrack?"bg-emerald-500":"bg-amber-500"}`,style:{width:`${Math.min(n.pctOfTarget,100)}%`}})}),a.jsxs("span",{className:"text-xs font-bold tabular-nums text-[var(--text-primary)]",children:[Math.round(n.pctOfTarget),"%"]})]}),a.jsxs("div",{className:"border-t border-[var(--border-light)] pt-2 space-y-1",children:[m>0&&a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("span",{className:"text-[11px] text-[var(--text-dim)]",children:["Lumpsum ",U(m)," grows to"]}),a.jsx("span",{className:"text-[11px] font-semibold text-emerald-400 tabular-nums",children:U(n.fvLumpsum)})]}),h>0&&a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("span",{className:"text-[11px] text-[var(--text-dim)]",children:["SIP ",U(h),"/mo x ",n.months," mo"]}),a.jsx("span",{className:"text-[11px] font-semibold text-blue-400 tabular-nums",children:U(n.fvSIP)})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-[11px] text-[var(--text-dim)]",children:"Total Invested"}),a.jsx("span",{className:"text-[11px] font-semibold text-[var(--text-primary)] tabular-nums",children:U(n.totalInvested)})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-[11px] text-[var(--text-dim)]",children:"Wealth Created"}),a.jsxs("span",{className:"text-[11px] font-semibold text-emerald-400 tabular-nums",children:["+",U(n.totalReturns)]})]})]})]})]})}function It({label:n,value:o,bold:u,color:c,badge:h}){const m=c==="violet"?"text-violet-400":c==="emerald"?"text-emerald-400":"text-[var(--text-primary)]";if(h){const b=h==="rose"?"bg-rose-500/15 text-rose-400":h==="blue"?"bg-blue-500/15 text-blue-400":"bg-amber-500/15 text-amber-400";return a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-xs text-[var(--text-dim)]",children:n}),a.jsx("span",{className:`text-xs font-semibold px-1.5 py-0.5 rounded ${b}`,children:o})]})}return a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-xs text-[var(--text-dim)]",children:n}),a.jsx("span",{className:`text-xs ${u?"font-bold text-sm":"font-semibold"} ${m}`,children:o})]})}function m2({goal:n,onClose:o}){const{mfPortfolios:u,goalPortfolioMappings:c,updateGoalMappings:h}=ke(),m=u.filter(p=>p.status!=="Inactive"),b=j.useMemo(()=>c.filter(p=>p.goalId===n.goalId).map(p=>({portfolioId:p.portfolioId,allocationPct:p.allocationPct})),[c,n.goalId]),[x,g]=j.useState(b.length>0?b:[]),d=x.reduce((p,y)=>p+(y.allocationPct||0),0),w=d===100||x.length===0;function A(){const p=new Set(x.map(_=>_.portfolioId)),y=m.find(_=>!p.has(_.portfolioId));y&&g(_=>[..._,{portfolioId:y.portfolioId,allocationPct:0}])}function E(p){g(y=>y.filter((_,O)=>O!==p))}function C(p,y,_){g(O=>O.map((q,Y)=>Y===p?{...q,[y]:y==="allocationPct"?Math.max(0,Math.min(100,Number(_)||0)):_}:q))}function S(){h(n.goalId,x),o()}const v=x.reduce((p,y)=>{const _=m.find(O=>O.portfolioId===y.portfolioId);return p+(_?_.currentValue*y.allocationPct/100:0)},0);return a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"bg-[var(--bg-inset)] rounded-lg border border-[var(--border-light)] p-3",children:[a.jsxs("div",{className:"flex items-center justify-between mb-1",children:[a.jsx("span",{className:"text-xs text-[var(--text-dim)]",children:"Goal Target"}),a.jsx("span",{className:"text-sm font-bold text-[var(--text-primary)]",children:U(n.targetAmount)})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-xs text-[var(--text-dim)]",children:"Linked Portfolio Value"}),a.jsx("span",{className:"text-sm font-semibold text-emerald-400",children:U(v)})]})]}),x.length===0?a.jsxs("div",{className:"py-6 text-center",children:[a.jsx(Fi,{size:24,className:"mx-auto mb-2 text-[var(--text-dim)]"}),a.jsx("p",{className:"text-xs text-[var(--text-muted)]",children:"No portfolios linked to this goal"})]}):a.jsx("div",{className:"space-y-2",children:x.map((p,y)=>{const _=m.find(O=>O.portfolioId===p.portfolioId);return a.jsxs("div",{className:"flex items-center gap-2 bg-[var(--bg-inset)] rounded-lg border border-[var(--border-light)] p-3",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("select",{value:p.portfolioId,onChange:O=>C(y,"portfolioId",O.target.value),className:"w-full px-2 py-1.5 text-xs bg-[var(--bg-input)] border border-[var(--border-input)] rounded-lg text-[var(--text-primary)] focus:outline-none focus:border-[var(--sidebar-active-text)]",children:m.map(O=>a.jsxs("option",{value:O.portfolioId,disabled:x.some((q,Y)=>Y!==y&&q.portfolioId===O.portfolioId),children:[O.portfolioName," (",O.ownerName,")  ",U(O.currentValue)]},O.portfolioId))}),_&&a.jsxs("p",{className:"text-[10px] text-[var(--text-dim)] mt-1 px-1",children:["Contributes ",U(_.currentValue*p.allocationPct/100)," to this goal"]})]}),a.jsxs("div",{className:"flex items-center gap-1 shrink-0",children:[a.jsx("input",{type:"number",value:p.allocationPct,onChange:O=>C(y,"allocationPct",O.target.value),className:"w-16 px-2 py-1.5 text-xs text-center bg-[var(--bg-input)] border border-[var(--border-input)] rounded-lg text-[var(--text-primary)] focus:outline-none focus:border-[var(--sidebar-active-text)]",min:"0",max:"100"}),a.jsx("span",{className:"text-xs text-[var(--text-dim)]",children:"%"}),a.jsx("button",{onClick:()=>E(y),className:"p-1.5 text-[var(--text-dim)] hover:text-rose-400 rounded transition-colors",children:a.jsx(ib,{size:12})})]})]},y)})}),x.length>0&&a.jsxs("div",{className:"flex items-center justify-between px-1",children:[a.jsx("span",{className:"text-xs text-[var(--text-dim)]",children:"Total Allocation"}),a.jsxs("span",{className:`text-xs font-bold ${d===100?"text-emerald-400":d>100?"text-rose-400":"text-amber-400"}`,children:[d,"%",d!==100&&a.jsx("span",{className:"font-normal text-[var(--text-dim)]",children:" (must be 100%)"})]})]}),x.length<m.length&&a.jsxs("button",{onClick:A,className:"flex items-center gap-1.5 text-xs font-semibold text-violet-400 hover:text-violet-300 transition-colors",children:[a.jsx(sa,{size:14})," Link Portfolio"]}),a.jsxs("div",{className:"flex items-center justify-end gap-2 pt-4 border-t border-[var(--border-light)]",children:[a.jsx("button",{onClick:o,className:"px-4 py-2 text-xs font-semibold text-[var(--text-muted)] hover:text-[var(--text-primary)] rounded-lg hover:bg-[var(--bg-hover)] transition-colors",children:"Cancel"}),a.jsx("button",{onClick:S,disabled:!w,className:"px-5 py-2 text-xs font-semibold text-white bg-violet-600 hover:bg-violet-500 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Save Mapping"})]})]})}function x2({goal:n,onClose:o}){const{goalPortfolioMappings:u,mfPortfolios:c,mfHoldings:h}=ke(),m=j.useMemo(()=>{const x=u.filter(A=>A.goalId===n.goalId);if(x.length===0)return null;const g=x.map(A=>{const E=c.find(y=>y.portfolioId===A.portfolioId);if(!E)return null;const C=h.filter(y=>y.portfolioId===A.portfolioId&&y.units>0),S=C.reduce((y,_)=>y+_.currentValue,0),v=S*A.allocationPct/100,p=C.map(y=>{const _=S>0?y.currentValue/S:0,O=v*_,q=y.currentNav>0?O/y.currentNav:0,Y=O-q*y.avgNav;return{fundName:y.fundName,currentValue:y.currentValue,withdrawValue:O,withdrawUnits:Math.min(q,y.units),currentNav:y.currentNav,taxableGain:Y,availableUnits:y.units}}).filter(y=>y.withdrawValue>0);return{portfolioName:E.portfolioName,ownerName:E.ownerName,allocationPct:A.allocationPct,portfolioValue:S,linkedValue:v,fundWithdrawals:p}}).filter(Boolean),d=g.reduce((A,E)=>A+E.linkedValue,0),w=g.reduce((A,E)=>A+E.fundWithdrawals.reduce((C,S)=>C+S.taxableGain,0),0);return{portfolioDetails:g,totalLinked:d,totalTaxableGain:w}},[n,u,c,h]);if(!m)return a.jsxs("div",{className:"py-8 text-center space-y-2",children:[a.jsx(Ki,{size:24,className:"mx-auto text-amber-400"}),a.jsx("p",{className:"text-sm text-[var(--text-muted)]",children:"No portfolios linked to this goal"}),a.jsx("p",{className:"text-xs text-[var(--text-dim)]",children:"Link portfolios first to generate a withdrawal plan"}),a.jsx("button",{onClick:o,className:"mt-2 px-4 py-2 text-xs font-semibold text-[var(--text-muted)] hover:text-[var(--text-primary)] rounded-lg hover:bg-[var(--bg-hover)] transition-colors",children:"Close"})]});const b=n.targetAmount>0?m.totalLinked/n.targetAmount*100:0;return a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"bg-[var(--bg-inset)] rounded-lg border border-[var(--border-light)] p-4 space-y-2",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-xs text-[var(--text-dim)]",children:"Goal Target"}),a.jsx("span",{className:"text-sm font-bold text-[var(--text-primary)]",children:U(n.targetAmount)})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-xs text-[var(--text-dim)]",children:"Available from Linked Portfolios"}),a.jsx("span",{className:`text-sm font-bold ${m.totalLinked>=n.targetAmount?"text-emerald-400":"text-amber-400"}`,children:U(m.totalLinked)})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"flex-1 h-2 bg-[var(--bg-card)] rounded-full overflow-hidden",children:a.jsx("div",{className:`h-full rounded-full ${b>=100?"bg-emerald-500":"bg-amber-500"}`,style:{width:`${Math.min(b,100)}%`}})}),a.jsxs("span",{className:"text-xs font-bold text-[var(--text-primary)] tabular-nums",children:[b.toFixed(0),"%"]})]}),m.totalTaxableGain>0&&a.jsxs("div",{className:"flex items-center justify-between pt-1",children:[a.jsx("span",{className:"text-xs text-[var(--text-dim)]",children:"Estimated Taxable Gain"}),a.jsx("span",{className:"text-xs font-semibold text-amber-400",children:U(m.totalTaxableGain)})]})]}),m.portfolioDetails.map(x=>a.jsxs("div",{className:"bg-[var(--bg-inset)] rounded-lg border border-[var(--border-light)] overflow-hidden",children:[a.jsxs("div",{className:"px-4 py-2.5 bg-[var(--bg-card)] border-b border-[var(--border-light)] flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-semibold text-[var(--text-primary)]",children:x.portfolioName}),a.jsxs("p",{className:"text-[10px] text-[var(--text-dim)]",children:[x.ownerName,"  ",x.allocationPct,"% allocated to goal"]})]}),a.jsx("span",{className:"text-xs font-bold text-[var(--text-primary)]",children:U(x.linkedValue)})]}),a.jsx("div",{className:"px-4 py-2",children:a.jsxs("table",{className:"w-full text-xs",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"text-[var(--text-dim)]",children:[a.jsx("th",{className:"text-left py-1 font-medium",children:"Fund"}),a.jsx("th",{className:"text-right py-1 font-medium",children:"Units"}),a.jsx("th",{className:"text-right py-1 font-medium",children:"Amount"}),a.jsx("th",{className:"text-right py-1 font-medium",children:"Gain"})]})}),a.jsx("tbody",{children:x.fundWithdrawals.map(g=>a.jsxs("tr",{className:"border-t border-[var(--border-light)]",children:[a.jsx("td",{className:"py-1.5 text-[var(--text-secondary)] max-w-[180px] truncate",children:g.fundName}),a.jsx("td",{className:"py-1.5 text-right text-[var(--text-muted)] tabular-nums",children:g.withdrawUnits.toFixed(2)}),a.jsx("td",{className:"py-1.5 text-right text-[var(--text-primary)] font-semibold tabular-nums",children:U(g.withdrawValue)}),a.jsx("td",{className:`py-1.5 text-right tabular-nums font-semibold ${g.taxableGain>=0?"text-emerald-400":"text-rose-400"}`,children:U(Math.abs(g.taxableGain))})]},g.fundName))})]})})]},x.portfolioName)),a.jsx("div",{className:"flex items-center justify-end gap-2 pt-4 border-t border-[var(--border-light)]",children:a.jsx("button",{onClick:o,className:"px-5 py-2 text-xs font-semibold text-[var(--text-muted)] hover:text-[var(--text-primary)] rounded-lg hover:bg-[var(--bg-hover)] transition-colors",children:"Close"})})]})}const Vh={"On Track":"bg-blue-500/15 text-[var(--accent-blue)]","Needs Attention":"bg-amber-500/15 text-[var(--accent-amber)]",Achieved:"bg-emerald-500/15 text-emerald-400",Paused:"bg-slate-500/15 text-[var(--text-muted)]"},f2={High:"bg-rose-500/15 text-[var(--accent-rose)]",Medium:"bg-amber-500/15 text-[var(--accent-amber)]",Low:"bg-blue-500/15 text-[var(--accent-blue)]"},Yh={"On Track":"bg-blue-500","Needs Attention":"bg-amber-500",Achieved:"bg-emerald-500",Paused:"bg-slate-500"};function h2(){const{selectedMember:n,member:o}=bt(),{loading:u,goalList:c,addGoal:h,updateGoal:m,deleteGoal:b,goalPortfolioMappings:x}=ke();if(u)return a.jsx(Na,{title:"Loading goals",cards:5});const[g,d]=j.useState(null),[w,A]=j.useState(null),[E,C]=j.useState(null),[S,v]=j.useState(null),p=j.useRef(new Set),y=j.useMemo(()=>{const M=c.filter(ie=>ie.isActive!==!1);return n==="all"?M:M.filter(ie=>ie.familyMemberId===n)},[c,n]),_=y.reduce((M,ie)=>M+(ie.targetAmount||0),0),O=y.reduce((M,ie)=>M+(ie.currentValue||0),0),q=y.reduce((M,ie)=>M+(ie.monthlyInvestment||0),0),Y=_>0?O/_*100:0,z=y.filter(M=>M.status==="Needs Attention").length,L=y.filter(M=>M.status==="Achieved").length;j.useEffect(()=>{const M=new Set(y.filter(V=>V.status==="Achieved").map(V=>V.goalId)),ie=p.current;for(const V of M)if(!ie.has(V)){const R=y.find(k=>k.goalId===V);R&&(v(R),setTimeout(()=>v(null),5e3))}p.current=M},[y]);function te(M){g?.edit?m(g.edit.goalId,M):h(M),d(null)}function oe(){g?.edit&&confirm("Delete this goal?")&&(b(g.edit.goalId),d(null))}function H(M){return!M.targetAmount||M.targetAmount===0?0:Math.min((M.currentValue||0)/M.targetAmount*100,100)}function se(M){if(!M.targetDate)return null;const V=(new Date(M.targetDate)-new Date)/(365.25*24*60*60*1e3);return V>0?V.toFixed(1):"0"}return a.jsxs("div",{className:"space-y-4",children:[y.length===0?a.jsxs("div",{className:"bg-[var(--bg-card)] rounded-xl border border-[var(--border)] py-12 flex flex-col items-center gap-3",children:[a.jsx(Zn,{size:32,className:"text-[var(--text-dim)]"}),a.jsxs("p",{className:"text-sm text-[var(--text-muted)]",children:["No goals set",o?` for ${o.memberName}`:""]}),a.jsx("button",{onClick:()=>d("add"),className:"text-xs font-semibold text-violet-400 hover:text-violet-300",children:"Create your first goal"})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-6 gap-3",children:[a.jsx(Es,{label:"Goals",value:y.length,sub:L>0?`${L} achieved`:void 0}),a.jsx(Es,{label:"Target",value:U(_),bold:!0}),a.jsx(Es,{label:"Current Value",value:U(O),bold:!0}),a.jsx(Es,{label:"Total Gap",value:U(Math.max(_-O,0)),sub:_>O?"remaining to target":"all targets met",positive:_<=O,bold:!0}),a.jsx(Es,{label:"Overall Progress",value:`${Y.toFixed(1)}%`,positive:Y>=50,bold:!0}),a.jsx(Es,{label:"Monthly SIP",value:U(q),sub:z>0?`${z} need attention`:void 0})]}),S&&a.jsxs("div",{className:"relative bg-gradient-to-r from-emerald-500/10 via-yellow-500/10 to-emerald-500/10 rounded-xl border border-emerald-500/30 px-4 py-3 flex items-center gap-3 animate-fade-in overflow-hidden",children:[a.jsx("div",{className:"absolute inset-0 pointer-events-none",children:Array.from({length:20}).map((M,ie)=>a.jsx("span",{className:"absolute text-sm animate-confetti",style:{left:`${Math.random()*100}%`,animationDelay:`${Math.random()*2}s`,animationDuration:`${2+Math.random()*2}s`},children:["","","","",""][ie%5]},ie))}),a.jsx(vh,{size:20,className:"text-yellow-400 shrink-0 relative z-10"}),a.jsxs("div",{className:"relative z-10",children:[a.jsx("p",{className:"text-sm font-bold text-emerald-400",children:"Goal Achieved!"}),a.jsxs("p",{className:"text-xs text-[var(--text-secondary)]",children:[S.goalName,"  Congratulations!"]})]}),a.jsx("button",{onClick:()=>v(null),className:"ml-auto text-xs text-[var(--text-dim)] hover:text-[var(--text-primary)] relative z-10",children:"Dismiss"})]}),L>0&&a.jsxs("div",{className:"bg-[var(--bg-card)] rounded-xl border border-emerald-500/20 p-4",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[a.jsx(vh,{size:14,className:"text-yellow-400"}),a.jsx("p",{className:"text-xs font-bold text-[var(--text-secondary)] uppercase tracking-wider",children:"Achieved Goals"})]}),a.jsx("div",{className:"flex gap-3 overflow-x-auto no-scrollbar pb-1",children:y.filter(M=>M.status==="Achieved").map(M=>a.jsxs("div",{className:"shrink-0 bg-emerald-500/10 border border-emerald-500/20 rounded-lg px-3 py-2 min-w-[160px]",children:[a.jsx("p",{className:"text-xs font-semibold text-emerald-400",children:M.goalName}),a.jsx("p",{className:"text-sm font-bold text-[var(--text-primary)] mt-1",children:U(M.targetAmount)}),a.jsx("p",{className:"text-[10px] text-[var(--text-dim)] mt-0.5",children:M.familyMemberName})]},M.goalId))})]}),a.jsx("div",{className:"flex items-center justify-end gap-2 px-1",children:a.jsxs("button",{onClick:()=>d("add"),className:"flex items-center gap-1.5 px-3 py-2 text-xs font-semibold text-violet-400 hover:text-violet-300 bg-[var(--bg-card)] border border-[var(--border)] rounded-lg transition-colors",children:[a.jsx(sa,{size:14})," Add Goal"]})}),a.jsxs("div",{className:"bg-[var(--bg-card)] rounded-xl border border-[var(--border)] overflow-hidden",children:[a.jsx("div",{className:"hidden lg:block overflow-x-auto",children:a.jsxs("table",{className:"w-full text-sm",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b border-[var(--border-light)] bg-[var(--bg-inset)]",children:[a.jsx("th",{className:"text-left py-2.5 px-4 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Goal"}),!o&&a.jsx("th",{className:"text-left py-2.5 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Member"}),a.jsxs("th",{className:"text-right py-2.5 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:[a.jsx("div",{children:"Amount"}),a.jsx("div",{className:"text-[10px] font-medium text-[var(--text-dim)]",children:"Current / Target"})]}),a.jsx("th",{className:"text-center py-2.5 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider min-w-[120px]",children:"Progress"}),a.jsx("th",{className:"text-right py-2.5 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Monthly SIP"}),a.jsxs("th",{className:"text-center py-2.5 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:[a.jsx("div",{children:"Timeline"}),a.jsx("div",{className:"text-[10px] font-medium text-[var(--text-dim)]",children:"Years Left"})]}),a.jsx("th",{className:"text-center py-2.5 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Status"}),a.jsx("th",{className:"w-8 py-2.5 px-2"})]})}),a.jsx("tbody",{children:y.map(M=>{const ie=H(M),V=se(M);return a.jsxs("tr",{className:"border-b border-[var(--border-light)] last:border-0 hover:bg-[var(--bg-hover)] transition-colors group",children:[a.jsxs("td",{className:"py-2.5 px-4",children:[a.jsx("p",{className:"text-sm font-medium text-[var(--text-primary)]",children:M.goalName}),a.jsxs("div",{className:"flex items-center gap-1.5 mt-0.5",children:[a.jsx("span",{className:`text-xs font-semibold px-1.5 py-0.5 rounded ${f2[M.priority]||""}`,children:M.priority}),M.notes&&a.jsx("span",{className:"text-xs text-[var(--text-dim)]",children:M.notes})]})]}),!o&&a.jsx("td",{className:"py-2.5 px-3 text-xs text-[var(--text-secondary)]",children:M.familyMemberName}),a.jsxs("td",{className:"py-2.5 px-3 text-right",children:[a.jsx("p",{className:"text-xs font-semibold text-[var(--text-primary)] tabular-nums",children:U(M.currentValue)}),a.jsx("p",{className:"text-xs text-[var(--text-dim)] tabular-nums",children:U(M.targetAmount)})]}),a.jsx("td",{className:"py-2.5 px-3",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"flex-1 h-2 bg-[var(--bg-inset)] rounded-full overflow-hidden",children:a.jsx("div",{className:`h-full rounded-full ${Yh[M.status]||"bg-blue-500"}`,style:{width:`${ie}%`}})}),a.jsxs("span",{className:"text-xs font-bold text-[var(--text-primary)] tabular-nums w-10 text-right",children:[ie.toFixed(0),"%"]})]})}),a.jsx("td",{className:"py-2.5 px-3 text-right text-xs font-semibold text-[var(--text-primary)] tabular-nums",children:U(M.monthlyInvestment)}),a.jsx("td",{className:"py-2.5 px-3 text-center text-xs text-[var(--text-muted)] tabular-nums",children:M.status==="Achieved"?"Done":V?`${V} yrs`:""}),a.jsx("td",{className:"py-2.5 px-3 text-center",children:a.jsx("span",{className:`text-xs font-semibold px-2 py-0.5 rounded-full ${Vh[M.status]||"bg-slate-500/15 text-[var(--text-muted)]"}`,children:M.status})}),a.jsx("td",{className:"py-2.5 px-2",children:a.jsxs("div",{className:"flex items-center gap-0.5 opacity-0 group-hover:opacity-100 transition-all",children:[a.jsx("button",{onClick:()=>C(M),className:"p-1 rounded text-[var(--text-dim)] hover:text-emerald-400 transition-colors",title:"Withdrawal plan",children:a.jsx(Kp,{size:12})}),a.jsx("button",{onClick:()=>A(M),className:"p-1 rounded text-[var(--text-dim)] hover:text-violet-400 transition-colors",title:"Link portfolios",children:a.jsx(Fi,{size:12})}),a.jsx("button",{onClick:()=>d({edit:M}),className:"p-1 rounded text-[var(--text-dim)] hover:text-[var(--text-primary)] transition-colors",children:a.jsx(ya,{size:12})})]})})]},M.goalId)})})]})}),a.jsx("div",{className:"lg:hidden divide-y divide-[var(--border-light)]",children:y.map(M=>{const ie=H(M),V=se(M);return a.jsxs("div",{onClick:()=>d({edit:M}),className:"px-4 py-4 hover:bg-[var(--bg-hover)] transition-colors cursor-pointer",children:[a.jsxs("div",{className:"flex items-start justify-between mb-2",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-[var(--text-primary)]",children:M.goalName}),a.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[a.jsxs("span",{className:"text-xs text-[var(--text-muted)]",children:[M.familyMemberName,"  SIP ",U(M.monthlyInvestment),"/mo"]}),x.filter(R=>R.goalId===M.goalId).length>0&&a.jsxs("span",{className:"text-[10px] font-semibold text-violet-400 flex items-center gap-0.5",children:[a.jsx(Fi,{size:9}),x.filter(R=>R.goalId===M.goalId).length]})]})]}),a.jsx("span",{className:`text-xs font-semibold px-2 py-0.5 rounded-full shrink-0 ${Vh[M.status]||"bg-slate-500/15 text-[var(--text-muted)]"}`,children:M.status})]}),a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("div",{className:"flex-1 h-2 bg-[var(--bg-inset)] rounded-full overflow-hidden",children:a.jsx("div",{className:`h-full rounded-full ${Yh[M.status]||"bg-blue-500"}`,style:{width:`${ie}%`}})}),a.jsxs("span",{className:"text-xs font-bold text-[var(--text-primary)] tabular-nums",children:[ie.toFixed(0),"%"]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("span",{className:"text-xs text-[var(--text-muted)]",children:[U(M.currentValue)," ",a.jsx("span",{className:"text-[var(--text-dim)]",children:"of"})," ",U(M.targetAmount)]}),a.jsx("span",{className:"text-xs text-[var(--text-dim)]",children:M.status==="Achieved"?"Done":V?`${V} yrs left`:""})]})]},M.goalId)})})]})]}),a.jsx(rt,{open:!!g,onClose:()=>d(null),title:g?.edit?"Edit Goal":"Add Goal",wide:!0,children:a.jsx(u2,{initial:g?.edit||void 0,onSave:te,onDelete:g?.edit?oe:void 0,onCancel:()=>d(null)})}),a.jsx(rt,{open:!!w,onClose:()=>A(null),title:`Link Portfolios  ${w?.goalName||""}`,wide:!0,children:w&&a.jsx(m2,{goal:w,onClose:()=>A(null)})}),a.jsx(rt,{open:!!E,onClose:()=>C(null),title:`Withdrawal Plan  ${E?.goalName||""}`,wide:!0,children:E&&a.jsx(x2,{goal:E,onClose:()=>C(null)})})]})}function Es({label:n,value:o,sub:u,positive:c,bold:h}){return a.jsxs("div",{className:"bg-[var(--bg-card)] rounded-xl border border-[var(--border)] px-4 py-3",children:[a.jsx("p",{className:"text-xs text-[var(--text-dim)] uppercase tracking-wider mb-1",children:n}),a.jsx("p",{className:`text-sm tabular-nums ${h?"font-bold":"font-semibold"} ${c===void 0?"text-[var(--text-primary)]":c?"text-emerald-400":"text-[var(--accent-amber)]"}`,children:o}),u&&a.jsx("p",{className:"text-xs text-[var(--text-dim)] mt-0.5",children:u})]})}const p2=[{label:"Reports & Transactions",desc:"View transaction history",icon:tu,path:"/reports",color:"bg-blue-500/15 text-[var(--accent-blue)]"},{label:"Reminders",desc:"View and manage reminders",icon:Zp,path:"/reminders",color:"bg-amber-500/15 text-[var(--accent-amber)]"},{label:"Health Check",desc:"Financial health questionnaire",icon:$d,path:"/health-check",color:"bg-emerald-500/15 text-emerald-400"},{label:"Settings",desc:"App configuration",icon:rb,path:"/settings",color:"bg-slate-500/15 text-[var(--text-muted)]"},{label:"About",desc:"Capital Friends v2.0",icon:Wp,path:"/about",color:"bg-violet-500/15 text-[var(--accent-violet)]"},{label:"Support Developer",desc:"UPI: jagadeeshmanne.hdfc@kphdfc",icon:Pi,path:"/about",color:"bg-pink-500/15 text-pink-400"}];function b2(){const n=ql();return a.jsxs("div",{className:"space-y-4",children:[a.jsx("h1",{className:"text-base font-bold text-[var(--text-primary)]",children:"More"}),a.jsx("div",{className:"space-y-2",children:p2.map(o=>a.jsxs("button",{onClick:()=>n(o.path),className:"w-full flex items-center gap-3 bg-[var(--bg-card)] rounded-xl border border-[var(--border)] p-4 hover:bg-[var(--bg-hover)] transition-colors text-left",children:[a.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center shrink-0 ${o.color}`,children:a.jsx(o.icon,{size:18})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-[var(--text-primary)]",children:o.label}),a.jsx("p",{className:"text-xs text-[var(--text-dim)]",children:o.desc})]})]},o.label))})]})}const Ei=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];function v2(){const n=ql(),{theme:o,toggle:u}=Vp(),{members:c,settings:h,updateSettings:m,updateMember:b,healthCheckCompleted:x}=ke(),{user:g,signOut:d}=Bl(),w=c.filter(M=>M.status==="Active"),[A,E]=j.useState("Daily"),[C,S]=j.useState("09"),[v,p]=j.useState("Monday"),[y,_]=j.useState(!1),[O,q]=j.useState(!1),[Y,z]=j.useState(!1),[L,te]=j.useState(null);j.useEffect(()=>{!h||!Object.keys(h).length||(h.EmailFrequency&&E(h.EmailFrequency),h.EmailHour!=null&&S(String(h.EmailHour).padStart(2,"0")),h.EmailDayOfWeek!=null&&p(Ei[Number(h.EmailDayOfWeek)]||"Monday"))},[h]);async function oe(){_(!0),q(!1);try{const M=Ei.indexOf(v);await m({EmailFrequency:A==="None"?"None":A,EmailConfigured:A==="None"?"FALSE":"TRUE",EmailHour:String(parseInt(C,10)),EmailMinute:"0",EmailDayOfWeek:String(M>=0?M:1)}),q(!0),setTimeout(()=>q(!1),2e3)}catch(M){alert("Failed to save: "+M.message)}finally{_(!1)}}async function H(){z(!0),te(null);try{const M=await Fy();te(M)}catch(M){te({error:M.message})}finally{z(!1)}}function se(M){if(!M)return"Never";try{const ie=new Date(M);if(isNaN(ie.getTime()))return"Unknown";const V=Date.now(),R=Math.floor((V-ie.getTime())/(1e3*60));if(R<1)return"Just now";if(R<60)return R+" min ago";const k=Math.floor(R/60);return k<24?k+"h ago":ie.toLocaleDateString("en-IN",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"})}catch{return"Unknown"}}return a.jsxs("div",{className:"space-y-4 max-w-xl mx-auto",children:[a.jsxs(zs,{children:[a.jsx(Ds,{icon:a.jsx(Z1,{size:14}),title:"Account"}),a.jsxs("div",{className:"px-4 py-4 space-y-3",children:[a.jsx(aa,{label:"Signed in as",children:a.jsx("p",{className:"text-xs font-semibold text-[var(--text-primary)] truncate max-w-[200px]",children:g?.email||""})}),a.jsx(aa,{label:"Name",children:a.jsx("p",{className:"text-xs font-semibold text-[var(--text-primary)]",children:g?.name||""})}),a.jsx("div",{className:"pt-1",children:a.jsxs("button",{onClick:d,className:"flex items-center gap-1.5 px-3 py-1.5 text-xs font-semibold text-red-500 border border-red-200 dark:border-red-800/40 rounded-lg hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors",children:[a.jsx(ab,{size:12}),"Sign Out"]})})]})]}),a.jsxs(zs,{children:[a.jsx(Ds,{icon:a.jsx($d,{size:14}),title:"Financial Health Check"}),a.jsxs("div",{className:"px-4 py-4 space-y-3",children:[a.jsx(aa,{label:"Status",children:a.jsx("span",{className:`text-xs font-semibold ${x?"text-emerald-400":"text-[var(--accent-amber)]"}`,children:x?"Completed":"Not completed"})}),a.jsx("div",{className:"flex justify-end pt-1",children:a.jsxs("button",{onClick:()=>n("/health-check"),className:"flex items-center gap-1.5 px-3 py-1.5 text-xs font-semibold rounded-lg border border-[var(--border)] text-[var(--text-primary)] hover:bg-[var(--bg-hover)] transition-colors",children:[a.jsx($d,{size:12}),x?"Update Answers":"Take Health Check"]})})]})]}),a.jsxs(zs,{children:[a.jsx(Ds,{icon:a.jsx(Uj,{size:14}),title:"Data & Sync"}),a.jsxs("div",{className:"px-4 py-4 space-y-3",children:[a.jsx(aa,{label:"Last synced",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("p",{className:"text-xs font-semibold text-[var(--text-primary)]",children:se(h.masterDataLastSync)}),h._stale&&a.jsx("span",{className:"text-[10px] font-bold text-amber-600 px-1.5 py-0.5 rounded bg-amber-100 dark:bg-amber-900/30",children:"STALE"})]})}),h._navDataDate&&a.jsx(aa,{label:"NAV data as of",children:a.jsx("p",{className:"text-xs font-semibold text-[var(--text-primary)]",children:h._navDataDate})}),a.jsx(aa,{label:"Auto-refresh",children:a.jsx("p",{className:"text-xs text-[var(--text-muted)]",children:"Daily at ~6:30 AM"})}),a.jsxs("div",{className:"flex items-center justify-between pt-1",children:[a.jsx("p",{className:"text-xs text-[var(--text-dim)]",children:"Refresh MF NAVs, ATH & Stock prices"}),a.jsxs("button",{onClick:H,disabled:Y,className:"flex items-center gap-1.5 px-3 py-1.5 text-xs font-semibold rounded-lg bg-violet-600 text-white hover:bg-violet-500 transition-colors disabled:opacity-50",children:[a.jsx(Is,{size:12,className:Y?"animate-spin":""}),Y?"Refreshing...":"Refresh Now"]})]}),L&&a.jsx("div",{className:`text-xs px-3 py-2 rounded-lg ${L.error?"bg-red-50 text-red-600 dark:bg-red-900/20 dark:text-red-400":"bg-green-50 text-green-600 dark:bg-green-900/20 dark:text-green-400"}`,children:L.error?"Failed: "+L.error:`Done  MF: ${L.mf?.count||0} | ATH: ${L.ath?.count||0} | Stocks: ${L.stocks?.count||0} (${L.duration})`})]})]}),a.jsxs(zs,{children:[a.jsx(Ds,{icon:a.jsx(Ud,{size:14}),title:"Appearance"}),a.jsx("div",{className:"px-4 py-4",children:a.jsx(aa,{label:"Theme",children:a.jsxs("button",{onClick:u,className:"flex items-center gap-2 px-3 py-1.5 text-xs font-semibold rounded-lg border border-[var(--border)] bg-[var(--bg-inset)] text-[var(--text-primary)] hover:bg-[var(--bg-hover)] transition-colors",children:[o==="dark"?a.jsx(sb,{size:12}):a.jsx(Ud,{size:12}),o==="dark"?"Dark":"Light"]})})})]}),a.jsxs(zs,{children:[a.jsx(Ds,{icon:a.jsx(lb,{size:14}),title:"Email Reports"}),a.jsxs("div",{className:"px-4 py-4 space-y-3",children:[a.jsx(aa,{label:"Frequency",children:a.jsx(Id,{value:A,onChange:E,options:["Daily","Weekly","Monthly","None"]})}),A!=="None"&&a.jsx(aa,{label:"Send time",children:a.jsx(Id,{value:C,onChange:S,options:Array.from({length:24},(M,ie)=>String(ie).padStart(2,"0")),suffix:":00"})}),A==="Weekly"&&a.jsx(aa,{label:"Day",children:a.jsx(Id,{value:v,onChange:p,options:Ei.slice(1).concat(Ei[0])})}),a.jsx("div",{className:"flex justify-end pt-1",children:a.jsx("button",{onClick:oe,disabled:y,className:"px-4 py-1.5 text-xs font-semibold text-white bg-violet-600 hover:bg-violet-500 rounded-lg transition-colors disabled:opacity-50",children:y?"Saving...":O?"Saved!":"Save"})}),w.length>0&&a.jsx(a.Fragment,{children:a.jsxs("div",{className:"border-t border-[var(--border-light)] pt-3",children:[a.jsx("p",{className:"text-xs text-[var(--text-dim)] mb-2",children:"Send report to"}),a.jsx("div",{className:"space-y-2",children:w.map(M=>a.jsx(g2,{member:M,onToggle:b},M.memberId))})]})}),w.length===0&&a.jsx("p",{className:"text-xs text-[var(--text-dim)] pt-1",children:"Add family members to configure email recipients."})]})]}),a.jsxs(zs,{children:[a.jsx(Ds,{icon:a.jsx(e1,{size:14}),title:"Display"}),a.jsxs("div",{className:"px-4 py-4 space-y-3",children:[a.jsx(aa,{label:"Currency",children:a.jsx("p",{className:"text-xs font-semibold text-[var(--text-primary)]",children:"INR ()"})}),a.jsx(aa,{label:"Date format",children:a.jsx("p",{className:"text-xs font-semibold text-[var(--text-primary)]",children:"DD/MM/YYYY"})})]})]})]})}function zs({children:n}){return a.jsx("div",{className:"bg-[var(--bg-card)] rounded-xl border border-[var(--border)] overflow-hidden",children:n})}function Ds({icon:n,title:o}){return a.jsx("div",{className:"px-4 py-2.5 border-b border-[var(--border-light)] bg-[var(--bg-inset)]",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-[var(--text-muted)]",children:n}),a.jsx("h3",{className:"text-xs font-bold text-[var(--text-muted)] uppercase tracking-wider",children:o})]})})}function aa({label:n,children:o}){return a.jsxs("div",{className:"flex items-center justify-between gap-4",children:[a.jsx("p",{className:"text-xs text-[var(--text-dim)] shrink-0",children:n}),o]})}function Id({value:n,onChange:o,options:u,suffix:c}){return a.jsxs("div",{className:"relative",children:[a.jsx("select",{value:n,onChange:h=>o(h.target.value),className:"appearance-none pl-3 pr-7 py-1.5 text-xs font-semibold bg-[var(--bg-inset)] border border-[var(--border)] rounded-lg text-[var(--text-primary)] focus:outline-none focus:border-violet-500 cursor-pointer",children:u.map(h=>a.jsxs("option",{value:h,children:[h,c||""]},h))}),a.jsx(Ul,{size:10,className:"absolute right-2 top-1/2 -translate-y-1/2 text-[var(--text-dim)] pointer-events-none"})]})}function g2({member:n,onToggle:o}){const u=n.includeInEmailReports==="Yes"||n.includeInEmailReports===!0,[c,h]=j.useState(!1);async function m(){h(!0);try{await o(n.memberId,{...n,includeInEmailReports:u?"No":"Yes"})}catch{}finally{h(!1)}}return a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[a.jsx("div",{className:"w-6 h-6 rounded-full bg-violet-100 dark:bg-violet-900/30 flex items-center justify-center shrink-0",children:a.jsx("span",{className:"text-[10px] font-bold text-violet-600",children:n.memberName?.charAt(0)?.toUpperCase()})}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("p",{className:"text-xs font-semibold text-[var(--text-primary)] truncate",children:n.memberName}),n.email&&a.jsx("p",{className:"text-[10px] text-[var(--text-dim)] truncate",children:n.email})]})]}),a.jsx("button",{onClick:m,disabled:c,className:`relative w-9 h-5 rounded-full transition-colors shrink-0 disabled:opacity-50 ${u?"bg-violet-500":"bg-[var(--bg-inset)] border border-[var(--border)]"}`,children:a.jsx("span",{className:`absolute top-0.5 w-4 h-4 rounded-full transition-all ${u?"left-[18px] bg-white":"left-0.5 bg-[var(--text-dim)]"}`})})]})}const y2=["SIP Due Date","Insurance Renewal","FD Maturity","Loan EMI","Investment Review","Custom"].map(n=>({value:n,label:n})),j2=[{value:"One-time",label:"One-time"},{value:"Monthly",label:"Monthly"},{value:"Quarterly",label:"Quarterly"},{value:"Yearly",label:"Yearly"}],N2=[{value:"High",label:"High"},{value:"Medium",label:"Medium"},{value:"Low",label:"Low"}];function S2({initial:n,onSave:o,onDelete:u,onCancel:c}){const h=!!n,{activeMembers:m}=ke(),b=m.map(S=>({value:S.memberId,label:S.memberName})),[x,g]=j.useState({reminderType:n?.reminderType||"",title:n?.title||"",description:n?.description||"",familyMemberId:n?.familyMemberId||"",dueDate:n?.dueDate||"",advanceNoticeDays:n?.advanceNoticeDays?.toString()||"7",frequency:n?.frequency||"One-time",priority:n?.priority||"Medium",status:n?.status||"Pending"}),[d,w]=j.useState({});function A(S,v){g(p=>({...p,[S]:v})),w(p=>({...p,[S]:void 0}))}function E(){const S={};return x.reminderType||(S.reminderType="Required"),x.title.trim()||(S.title="Required"),x.familyMemberId||(S.familyMemberId="Required"),x.dueDate||(S.dueDate="Required"),w(S),Object.keys(S).length===0}function C(){E()&&o({...x,advanceNoticeDays:Number(x.advanceNoticeDays)||7})}return a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsx(X,{label:"Reminder Type",required:!0,error:d.reminderType,children:a.jsx(Se,{value:x.reminderType,onChange:S=>A("reminderType",S),options:y2,placeholder:"Select type..."})}),a.jsx(X,{label:"Title",required:!0,error:d.title,children:a.jsx(ce,{value:x.title,onChange:S=>A("title",S),placeholder:"e.g., HDFC SIP Due"})})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsx(X,{label:"Family Member",required:!0,error:d.familyMemberId,children:a.jsx(Se,{value:x.familyMemberId,onChange:S=>A("familyMemberId",S),options:b,placeholder:"Select member..."})}),a.jsx(X,{label:"Due Date",required:!0,error:d.dueDate,children:a.jsx(ce,{type:"date",value:x.dueDate,onChange:S=>A("dueDate",S)})})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[a.jsx(X,{label:"Frequency",children:a.jsx(Se,{value:x.frequency,onChange:S=>A("frequency",S),options:j2})}),a.jsx(X,{label:"Priority",children:a.jsx(Se,{value:x.priority,onChange:S=>A("priority",S),options:N2})}),a.jsx(X,{label:"Advance Notice (days)",children:a.jsx(ce,{type:"number",value:x.advanceNoticeDays,onChange:S=>A("advanceNoticeDays",S),placeholder:"7"})})]}),h&&a.jsx(X,{label:"Status",children:a.jsx(Se,{value:x.status,onChange:S=>A("status",S),options:[{value:"Pending",label:"Pending"},{value:"Completed",label:"Completed"}]})}),a.jsx(X,{label:"Description",children:a.jsx(Hs,{value:x.description,onChange:S=>A("description",S),placeholder:"Optional details...",rows:2})}),a.jsxs("div",{className:"flex items-center justify-between",children:[h&&u?a.jsx(ja,{onClick:u,label:"Delete"}):a.jsx("div",{}),a.jsx(Nt,{onCancel:c,onSubmit:C,submitLabel:h?"Update Reminder":"Add Reminder"})]})]})}const zi={"SIP Due Date":"bg-violet-500/15 text-[var(--accent-violet)]","Insurance Renewal":"bg-amber-500/15 text-[var(--accent-amber)]","FD Maturity":"bg-blue-500/15 text-[var(--accent-blue)]","Loan EMI":"bg-rose-500/15 text-[var(--accent-rose)]","Investment Review":"bg-emerald-500/15 text-emerald-400",Custom:"bg-slate-500/15 text-[var(--text-muted)]"},Qh={High:"bg-rose-500",Medium:"bg-amber-500",Low:"bg-blue-500"};function Rs(n){if(!n)return 1/0;const o=new Date(n)-new Date;return Math.ceil(o/(1440*60*1e3))}function w2(){const{selectedMember:n,member:o}=bt(),{reminderList:u,addReminder:c,updateReminder:h,deleteReminder:m}=ke(),[b,x]=j.useState(null),g=j.useMemo(()=>{const p=u.filter(y=>y.isActive!==!1);return n==="all"?p:p.filter(y=>y.familyMemberId===n)},[u,n]),d=g.filter(p=>Rs(p.dueDate)<0).length,w=g.filter(p=>{const y=Rs(p.dueDate);return y>=0&&y<=7}).length,A=g.filter(p=>{const y=Rs(p.dueDate);return y>7&&y<=30}).length,E=[...g].sort((p,y)=>{const _=Rs(p.dueDate),O=Rs(y.dueDate);return _-O});function C(p){b?.edit?h(b.edit.reminderId,p):c(p),x(null)}function S(){b?.edit&&confirm("Delete this reminder?")&&(m(b.edit.reminderId),x(null))}function v(p){const y=Rs(p);return y<0?{label:`${Math.abs(y)}d overdue`,cls:"bg-rose-500/20 text-[var(--accent-rose)]"}:y===0?{label:"Today",cls:"bg-rose-500/20 text-[var(--accent-rose)]"}:y<=7?{label:`${y}d`,cls:"bg-amber-500/20 text-[var(--accent-amber)]"}:y<=30?{label:`${y}d`,cls:"bg-blue-500/20 text-[var(--accent-blue)]"}:{label:`${y}d`,cls:"bg-slate-500/20 text-[var(--text-muted)]"}}return a.jsxs("div",{className:"space-y-4",children:[g.length===0?a.jsxs("div",{className:"bg-[var(--bg-card)] rounded-xl border border-[var(--border)] py-12 flex flex-col items-center gap-3",children:[a.jsx(hj,{size:32,className:"text-[var(--text-dim)]"}),a.jsxs("p",{className:"text-sm text-[var(--text-muted)]",children:["No reminders",o?` for ${o.memberName}`:""]}),a.jsx("button",{onClick:()=>x("add"),className:"text-xs font-semibold text-violet-400 hover:text-violet-300",children:"Add a reminder"})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:[a.jsx(Di,{label:"Active",value:g.length}),d>0&&a.jsx(Di,{label:"Overdue",value:d,color:"rose"}),w>0&&a.jsx(Di,{label:"Due This Week",value:w,color:"amber"}),a.jsx(Di,{label:"Next 30 Days",value:A})]}),a.jsx("div",{className:"flex items-center justify-end px-1",children:a.jsxs("button",{onClick:()=>x("add"),className:"flex items-center gap-1.5 px-3 py-2 text-xs font-semibold text-violet-400 hover:text-violet-300 bg-[var(--bg-card)] border border-[var(--border)] rounded-lg transition-colors",children:[a.jsx(sa,{size:14})," Add Reminder"]})}),a.jsxs("div",{className:"bg-[var(--bg-card)] rounded-xl border border-[var(--border)] overflow-hidden",children:[a.jsx("div",{className:"hidden sm:block overflow-x-auto",children:a.jsxs("table",{className:"w-full text-sm min-w-[680px]",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b border-[var(--border-light)] bg-[var(--bg-inset)]",children:[a.jsx("th",{className:"text-left py-2.5 px-4 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Reminder"}),a.jsx("th",{className:"text-left py-2.5 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Type"}),!o&&a.jsx("th",{className:"text-left py-2.5 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Member"}),a.jsx("th",{className:"text-center py-2.5 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Due Date"}),a.jsx("th",{className:"text-center py-2.5 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Frequency"}),a.jsx("th",{className:"text-center py-2.5 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Status"}),a.jsx("th",{className:"w-8 py-2.5 px-2"})]})}),a.jsx("tbody",{children:E.map(p=>{const y=v(p.dueDate);return a.jsxs("tr",{className:"border-b border-[var(--border-light)] last:border-0 hover:bg-[var(--bg-hover)] transition-colors group",children:[a.jsx("td",{className:"py-2.5 px-4",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:`w-2 h-2 rounded-full shrink-0 ${Qh[p.priority]||"bg-slate-400"}`}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-[var(--text-primary)]",children:p.title}),p.description&&a.jsx("p",{className:"text-xs text-[var(--text-dim)] truncate max-w-[200px]",children:p.description})]})]})}),a.jsx("td",{className:"py-2.5 px-3",children:a.jsx("span",{className:`text-xs font-semibold px-2 py-0.5 rounded-full ${zi[p.reminderType]||zi.Custom}`,children:p.reminderType})}),!o&&a.jsx("td",{className:"py-2.5 px-3 text-xs text-[var(--text-secondary)]",children:p.familyMemberName}),a.jsx("td",{className:"py-2.5 px-3 text-center",children:a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-[var(--text-muted)] tabular-nums",children:p.dueDate}),a.jsx("span",{className:`text-xs font-semibold px-1.5 py-0.5 rounded-full ${y.cls}`,children:y.label})]})}),a.jsx("td",{className:"py-2.5 px-3 text-center text-xs text-[var(--text-muted)]",children:p.frequency}),a.jsx("td",{className:"py-2.5 px-3 text-center",children:a.jsx("span",{className:`text-xs font-semibold px-2 py-0.5 rounded-full ${p.status==="Pending"?"bg-amber-500/15 text-[var(--accent-amber)]":"bg-emerald-500/15 text-emerald-400"}`,children:p.status})}),a.jsx("td",{className:"py-2.5 px-2",children:a.jsx("button",{onClick:()=>x({edit:p}),className:"opacity-0 group-hover:opacity-100 p-1 rounded text-[var(--text-dim)] hover:text-[var(--text-primary)] transition-all",children:a.jsx(ya,{size:12})})})]},p.reminderId)})})]})}),a.jsx("div",{className:"sm:hidden divide-y divide-[var(--border-light)]",children:E.map(p=>{const y=v(p.dueDate);return a.jsxs("div",{onClick:()=>x({edit:p}),className:"px-4 py-3.5 hover:bg-[var(--bg-hover)] transition-colors cursor-pointer",children:[a.jsxs("div",{className:"flex items-center justify-between mb-1",children:[a.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[a.jsx("span",{className:`w-2 h-2 rounded-full shrink-0 ${Qh[p.priority]||"bg-slate-400"}`}),a.jsx("p",{className:"text-sm font-medium text-[var(--text-primary)] truncate",children:p.title})]}),a.jsx("span",{className:`text-xs font-semibold px-2 py-0.5 rounded-full shrink-0 ml-2 ${zi[p.reminderType]||zi.Custom}`,children:p.reminderType})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("p",{className:"text-xs text-[var(--text-muted)]",children:[p.familyMemberName,"  ",p.frequency]}),a.jsx("span",{className:`text-xs font-semibold px-1.5 py-0.5 rounded-full ${y.cls}`,children:y.label})]})]},p.reminderId)})})]})]}),a.jsx(rt,{open:!!b,onClose:()=>x(null),title:b?.edit?"Edit Reminder":"Add Reminder",wide:!0,children:a.jsx(S2,{initial:b?.edit||void 0,onSave:C,onDelete:b?.edit?S:void 0,onCancel:()=>x(null)})})]})}function Di({label:n,value:o,color:u}){const c=u==="rose"?"text-[var(--accent-rose)]":u==="amber"?"text-[var(--accent-amber)]":"text-[var(--text-primary)]";return a.jsxs("div",{className:"bg-[var(--bg-card)] rounded-xl border border-[var(--border)] px-4 py-3",children:[a.jsx("p",{className:"text-xs text-[var(--text-dim)] uppercase tracking-wider mb-1",children:n}),a.jsx("p",{className:`text-sm font-bold tabular-nums ${c}`,children:o})]})}const Xh={BUY:"bg-emerald-500/15 text-emerald-400",SELL:"bg-rose-500/15 text-[var(--accent-rose)]"},C2={INITIAL:"bg-violet-500/15 text-[var(--accent-violet)]",SIP:"bg-blue-500/15 text-[var(--accent-blue)]",LUMPSUM:"bg-emerald-500/15 text-emerald-400",WITHDRAWAL:"bg-amber-500/15 text-[var(--accent-amber)]",SWITCH:"bg-orange-500/15 text-[var(--accent-orange)]"};function A2(){const{selectedMember:n}=bt(),{mfTransactions:o,mfPortfolios:u,stockTransactions:c,stockPortfolios:h}=ke(),[m,b]=j.useState("mf"),[x,g]=j.useState("all"),d=j.useMemo(()=>{let v=[...o].sort((p,y)=>new Date(y.date)-new Date(p.date));if(n!=="all"){const p=new Set(u.filter(y=>y.ownerId===n).map(y=>y.portfolioId));v=v.filter(y=>p.has(y.portfolioId))}return x!=="all"&&(v=v.filter(p=>p.type===x)),v},[o,u,n,x]),w=j.useMemo(()=>{let v=[...c].sort((p,y)=>new Date(y.date)-new Date(p.date));if(n!=="all"){const p=new Set(h.filter(y=>y.ownerId===n).map(y=>y.portfolioId));v=v.filter(y=>p.has(y.portfolioId))}return x!=="all"&&(v=v.filter(p=>p.type===x)),v},[c,h,n,x]),A=m==="mf"?d:w,E=A.filter(v=>v.type==="BUY").reduce((v,p)=>v+(p.totalAmount||0),0),C=A.filter(v=>v.type==="SELL").reduce((v,p)=>v+(p.totalAmount||0),0),S=A.reduce((v,p)=>v+(p.gainLoss||p.realizedPL||0),0);return a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:[a.jsx(Ri,{label:"Transactions",value:A.length}),a.jsx(Ri,{label:"Total Bought",value:U(E)}),a.jsx(Ri,{label:"Total Sold",value:U(C)}),a.jsx(Ri,{label:"Realized P&L",value:`${S>=0?"+":""}${U(Math.abs(S))}`,positive:S>=0,bold:!0})]}),a.jsxs("div",{className:"flex items-center justify-between px-1",children:[a.jsx("div",{className:"flex gap-1",children:["mf","stocks"].map(v=>a.jsx("button",{onClick:()=>b(v),className:`px-3 py-1.5 text-xs font-semibold rounded-lg transition-colors ${m===v?"bg-violet-500/20 text-violet-400 border border-violet-500/30":"text-[var(--text-dim)] hover:text-[var(--text-primary)] border border-transparent"}`,children:v==="mf"?"Mutual Funds":"Stocks"},v))}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(Jj,{size:12,className:"text-[var(--text-dim)]"}),["all","BUY","SELL"].map(v=>a.jsx("button",{onClick:()=>g(v),className:`px-2 py-1 text-xs font-semibold rounded transition-colors ${x===v?"bg-[var(--bg-card)] text-[var(--text-primary)] border border-[var(--border)]":"text-[var(--text-dim)] hover:text-[var(--text-muted)]"}`,children:v==="all"?"All":v},v))]})]}),a.jsx("div",{className:"bg-[var(--bg-card)] rounded-xl border border-[var(--border)] overflow-hidden",children:A.length===0?a.jsxs("div",{className:"py-12 flex flex-col items-center gap-3",children:[a.jsx(tu,{size:32,className:"text-[var(--text-dim)]"}),a.jsx("p",{className:"text-sm text-[var(--text-muted)]",children:"No transactions found"})]}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"hidden sm:block overflow-x-auto",children:a.jsxs("table",{className:"w-full text-sm min-w-[700px]",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b border-[var(--border-light)] bg-[var(--bg-inset)]",children:[a.jsx("th",{className:"text-left py-2.5 px-4 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Date"}),a.jsx("th",{className:"text-left py-2.5 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Type"}),a.jsx("th",{className:"text-left py-2.5 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:m==="mf"?"Fund":"Stock"}),a.jsx("th",{className:"text-left py-2.5 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Portfolio"}),a.jsx("th",{className:"text-right py-2.5 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:m==="mf"?"Units":"Qty"}),a.jsx("th",{className:"text-right py-2.5 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:m==="mf"?"NAV":"Price"}),a.jsx("th",{className:"text-right py-2.5 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Amount"}),a.jsx("th",{className:"text-right py-2.5 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"P&L"})]})}),a.jsx("tbody",{children:A.map(v=>{const p=v.gainLoss||v.realizedPL||0;return a.jsxs("tr",{className:"border-b border-[var(--border-light)] last:border-0 hover:bg-[var(--bg-hover)] transition-colors",children:[a.jsx("td",{className:"py-2.5 px-4 text-xs text-[var(--text-muted)] tabular-nums",children:v.date}),a.jsx("td",{className:"py-2.5 px-3",children:a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("span",{className:`text-xs font-semibold px-1.5 py-0.5 rounded ${Xh[v.type]||""}`,children:v.type}),v.transactionType&&a.jsx("span",{className:`text-[10px] font-semibold px-1 py-0.5 rounded ${C2[v.transactionType]||""}`,children:v.transactionType})]})}),a.jsxs("td",{className:"py-2.5 px-3",children:[a.jsx("p",{className:"text-xs font-medium text-[var(--text-primary)] truncate max-w-[180px]",children:v.fundName||v.companyName}),a.jsx("p",{className:"text-[10px] text-[var(--text-dim)]",children:v.fundCode||v.symbol})]}),a.jsx("td",{className:"py-2.5 px-3 text-xs text-[var(--text-muted)]",children:v.portfolioName||""}),a.jsx("td",{className:"py-2.5 px-3 text-right text-xs text-[var(--text-muted)] tabular-nums",children:(v.units||v.quantity||0).toFixed(m==="mf"?2:0)}),a.jsx("td",{className:"py-2.5 px-3 text-right text-xs text-[var(--text-muted)] tabular-nums",children:U(v.price||v.pricePerShare||0)}),a.jsx("td",{className:"py-2.5 px-3 text-right text-xs font-semibold text-[var(--text-primary)] tabular-nums",children:U(v.totalAmount||0)}),a.jsx("td",{className:"py-2.5 px-3 text-right",children:p!==0?a.jsxs("span",{className:`text-xs font-semibold tabular-nums ${p>=0?"text-emerald-400":"text-[var(--accent-rose)]"}`,children:[p>=0?"+":"",U(Math.abs(p))]}):a.jsx("span",{className:"text-xs text-[var(--text-dim)]",children:""})})]},v.transactionId)})})]})}),a.jsx("div",{className:"sm:hidden divide-y divide-[var(--border-light)]",children:A.map(v=>(v.gainLoss||v.realizedPL,a.jsxs("div",{className:"px-4 py-3",children:[a.jsxs("div",{className:"flex items-center justify-between mb-1",children:[a.jsx("p",{className:"text-sm font-medium text-[var(--text-primary)] truncate mr-2",children:v.fundName||v.companyName}),a.jsx("span",{className:`text-xs font-semibold px-1.5 py-0.5 rounded shrink-0 ${Xh[v.type]||""}`,children:v.type})]}),a.jsxs("p",{className:"text-xs text-[var(--text-muted)]",children:[v.date,"  ",v.portfolioName]}),a.jsxs("div",{className:"flex items-center justify-between mt-1.5",children:[a.jsxs("span",{className:"text-xs text-[var(--text-dim)]",children:[(v.units||v.quantity||0).toFixed(m==="mf"?2:0)," @ ",U(v.price||v.pricePerShare||0)]}),a.jsx("span",{className:"text-xs font-semibold text-[var(--text-primary)] tabular-nums",children:U(v.totalAmount||0)})]})]},v.transactionId)))})]})})]})}function Ri({label:n,value:o,positive:u,bold:c}){return a.jsxs("div",{className:"bg-[var(--bg-card)] rounded-xl border border-[var(--border)] px-4 py-3",children:[a.jsx("p",{className:"text-xs text-[var(--text-dim)] uppercase tracking-wider mb-1",children:n}),a.jsx("p",{className:`text-sm tabular-nums ${c?"font-bold":"font-semibold"} ${u===void 0?"text-[var(--text-primary)]":u?"text-emerald-400":"text-[var(--accent-rose)]"}`,children:o})]})}const va=[{id:"healthIns",question:"Does your family have Health Insurance?",tip:"50L to 1Cr family floater recommended (considering inflation & future expenses)",category:"Insurance"},{id:"termLife",question:"Do you have adequate Term Life Insurance?",tip:"Recommended: 10-15x annual income",category:"Insurance"},{id:"emergencyFund",question:"Do you have an Emergency Fund?",tip:"6-12 months of monthly expenses in liquid assets",category:"Savings"},{id:"familyAware",question:"Is your family aware of all investments?",tip:"Ensure nominees and family know about all assets",category:"Planning"},{id:"hasWill",question:"Do you have a Will?",tip:"Legal document for asset distribution",category:"Planning"},{id:"nominees",question:"Have you updated Nominees on all accounts?",tip:"Bank, demat, insurance, MF  all should have nominees",category:"Planning"},{id:"goals",question:"Do you have clearly defined Financial Goals?",tip:"Retirement, education, home  with target amounts and dates",category:"Goals"}];function T2(){const n=ql(),{members:o,insurancePolicies:u,goalList:c,otherInvList:h,healthCheckCompleted:m,completeHealthCheck:b}=ke(),x=o.filter(H=>H.status==="Active"),g=m===!1,[d,w]=j.useState(!1),[A,E]=j.useState(!0),[C,S]=j.useState(null),v=j.useMemo(()=>{const H={},se=u.filter(R=>R.policyType==="Health"&&R.status==="Active");H.healthIns=se.length>0;const M=u.filter(R=>R.policyType==="Term Life"&&R.status==="Active");H.termLife=M.length>0;const ie=c.filter(R=>R.goalType==="Emergency Fund"&&R.isActive),V=h.filter(R=>R.investmentType==="FD"||R.investmentType==="PPF");return H.emergencyFund=ie.length>0||V.length>0,H.goals=c.filter(R=>R.isActive).length>=2,H},[u,c,h]);j.useEffect(()=>{By().then(H=>{H&&S(H)}).catch(()=>{}).finally(()=>E(!1))},[]);const[p,y]=j.useState(()=>{const H={};return va.forEach(se=>{H[se.id]=v[se.id]?"yes":""}),H});j.useEffect(()=>{C&&y(H=>{const se={...H};return va.forEach(M=>{const ie=C[M.id];ie==="Yes"?se[M.id]="yes":ie==="No"&&(se[M.id]="no")}),se})},[C]);const _=Object.values(p).filter(H=>H).length,O=Object.values(p).filter(H=>H==="yes").length,q=_===va.length,Y=_>0?Math.round(O/va.length*100):0;function z(){return Y>=80?"text-emerald-400":Y>=50?"text-[var(--accent-amber)]":"text-[var(--accent-rose)]"}function L(){return Y>=80?"Excellent":Y>=60?"Good":Y>=40?"Needs Work":"Critical"}const te=j.useMemo(()=>{const H=[];return p.healthIns!=="yes"&&H.push({severity:"critical",text:"Get Health Insurance for your family",action:"Minimum 5L cover recommended"}),p.termLife!=="yes"&&H.push({severity:"critical",text:"Get Term Life Insurance (10-15x annual income)",action:"Compare plans online"}),p.emergencyFund!=="yes"&&H.push({severity:"warning",text:"Build an Emergency Fund",action:"Save 6-12 months expenses in liquid fund/FD"}),p.familyAware!=="yes"&&H.push({severity:"warning",text:"Share investment details with family",action:"Create a document with all account info"}),p.hasWill!=="yes"&&H.push({severity:"warning",text:"Create a legal Will",action:"Consult a lawyer for Will registration"}),p.nominees!=="yes"&&H.push({severity:"warning",text:"Update nominees on all accounts",action:"Check bank, demat, insurance, MF accounts"}),p.goals!=="yes"&&H.push({severity:"info",text:"Define clear financial goals",action:"Use the Goal Planner to set targets"}),H},[p]),oe=j.useCallback(async()=>{if(q){w(!0);try{const H={};va.forEach(se=>{H[se.id]=p[se.id]==="yes"?"Yes":"No"}),H.score=O,H.total=va.length,await b(H),n("/dashboard")}catch(H){console.error("Failed to save health check:",H)}finally{w(!1)}}},[q,p,O,b,n]);return a.jsxs("div",{className:"space-y-4 max-w-2xl mx-auto",children:[g&&a.jsxs("div",{className:"bg-violet-500/10 border border-violet-500/20 rounded-xl p-4",children:[a.jsx("h2",{className:"text-base font-bold text-violet-400 mb-1",children:"Welcome to Capital Friends!"}),a.jsx("p",{className:"text-sm text-[var(--text-secondary)]",children:"Before you start, please complete this quick Financial Health Check. It takes less than a minute and helps you understand where your family stands financially."})]}),a.jsxs("div",{className:"bg-[var(--bg-card)] rounded-xl border border-[var(--border)] p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Jp,{size:16,className:"text-violet-400"}),a.jsx("h2",{className:"text-sm font-bold text-[var(--text-primary)]",children:"Financial Health Score"})]}),a.jsxs("span",{className:"text-xs text-[var(--text-dim)]",children:[_,"/",va.length," answered"]})]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("div",{className:"relative w-20 h-20",children:[a.jsxs("svg",{className:"w-20 h-20 -rotate-90",viewBox:"0 0 36 36",children:[a.jsx("path",{d:"M18 2.0845a 15.9155 15.9155 0 0 1 0 31.831a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",stroke:"var(--border)",strokeWidth:"3"}),a.jsx("path",{d:"M18 2.0845a 15.9155 15.9155 0 0 1 0 31.831a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeDasharray:`${Y}, 100`,className:z(),strokeLinecap:"round"})]}),a.jsxs("span",{className:`absolute inset-0 flex items-center justify-center text-lg font-bold ${z()}`,children:[Y,"%"]})]}),a.jsxs("div",{children:[a.jsx("p",{className:`text-base font-bold ${z()}`,children:L()}),a.jsxs("p",{className:"text-xs text-[var(--text-dim)] mt-0.5",children:[O," of ",va.length," checks passed"]}),a.jsxs("p",{className:"text-xs text-[var(--text-dim)]",children:[x.length," family members tracked"]})]})]})]}),a.jsxs("div",{className:"bg-[var(--bg-card)] rounded-xl border border-[var(--border)] overflow-hidden",children:[a.jsx("div",{className:"px-4 py-3 border-b border-[var(--border-light)] bg-[var(--bg-inset)]",children:a.jsx("h3",{className:"text-xs font-bold text-[var(--text-muted)] uppercase tracking-wider",children:"Health Check Questions"})}),a.jsx("div",{className:"divide-y divide-[var(--border-light)]",children:va.map((H,se)=>a.jsxs("div",{className:"px-4 py-3",children:[a.jsxs("div",{className:"flex items-start justify-between gap-3",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("p",{className:"text-sm text-[var(--text-primary)]",children:[a.jsxs("span",{className:"text-[var(--text-dim)] mr-2",children:[se+1,"."]}),H.question]}),a.jsx("p",{className:"text-xs text-[var(--text-dim)] mt-0.5 ml-5",children:H.tip})]}),a.jsxs("div",{className:"flex gap-1 shrink-0",children:[a.jsx("button",{onClick:()=>y(M=>({...M,[H.id]:"yes"})),className:`px-3 py-1.5 text-xs font-semibold rounded-lg transition-colors ${p[H.id]==="yes"?"bg-emerald-500/20 text-emerald-400 border border-emerald-500/30":"bg-[var(--bg-inset)] text-[var(--text-dim)] border border-[var(--border)] hover:text-[var(--text-primary)]"}`,children:"Yes"}),a.jsx("button",{onClick:()=>y(M=>({...M,[H.id]:"no"})),className:`px-3 py-1.5 text-xs font-semibold rounded-lg transition-colors ${p[H.id]==="no"?"bg-rose-500/20 text-[var(--accent-rose)] border border-rose-500/30":"bg-[var(--bg-inset)] text-[var(--text-dim)] border border-[var(--border)] hover:text-[var(--text-primary)]"}`,children:"No"})]})]}),v[H.id]&&a.jsx("p",{className:"text-xs text-violet-400 mt-1 ml-5",children:"Auto-detected from your data"})]},H.id))})]}),te.length>0&&q&&a.jsxs("div",{className:"bg-[var(--bg-card)] rounded-xl border border-[var(--border)] overflow-hidden",children:[a.jsx("div",{className:"px-4 py-3 border-b border-[var(--border-light)] bg-[var(--bg-inset)]",children:a.jsx("h3",{className:"text-xs font-bold text-[var(--text-muted)] uppercase tracking-wider",children:"Recommendations"})}),a.jsx("div",{className:"divide-y divide-[var(--border-light)]",children:te.map((H,se)=>{const M=H.severity==="critical"?a.jsx(Rj,{size:14,className:"text-[var(--accent-rose)]"}):H.severity==="warning"?a.jsx(Ki,{size:14,className:"text-[var(--accent-amber)]"}):a.jsx(Ej,{size:14,className:"text-[var(--accent-blue)]"});return a.jsxs("div",{className:"flex items-start gap-3 px-4 py-3",children:[a.jsx("span",{className:"shrink-0 mt-0.5",children:M}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm text-[var(--text-primary)]",children:H.text}),a.jsx("p",{className:"text-xs text-[var(--text-dim)] mt-0.5",children:H.action})]})]},se)})})]}),a.jsxs("div",{className:"bg-[var(--bg-card)] rounded-xl border border-[var(--border)] p-4",children:[!q&&a.jsxs("p",{className:"text-xs text-[var(--accent-amber)] mb-3",children:["Please answer all ",va.length," questions before saving."]}),a.jsx("button",{onClick:oe,disabled:!q||d,className:`w-full flex items-center justify-center gap-2 px-4 py-3 rounded-lg text-sm font-bold transition-colors ${q&&!d?"bg-violet-600 hover:bg-violet-500 text-white":"bg-[var(--bg-inset)] text-[var(--text-dim)] cursor-not-allowed"}`,children:d?a.jsxs(a.Fragment,{children:[a.jsx(u1,{size:16,className:"animate-spin"}),"Saving..."]}):g?a.jsxs(a.Fragment,{children:["Save & Continue to Dashboard",a.jsx(uj,{size:16})]}):a.jsxs(a.Fragment,{children:[a.jsx(O1,{size:16}),"Update Health Check"]})})]})]})}function M2(){return a.jsxs("div",{className:"space-y-4 max-w-lg mx-auto",children:[a.jsxs("div",{className:"bg-[var(--bg-card)] rounded-xl border border-[var(--border)] p-5 text-center",children:[a.jsx("div",{className:"w-14 h-14 rounded-2xl bg-gradient-to-br from-violet-500 to-indigo-600 flex items-center justify-center mx-auto mb-3",children:a.jsx("span",{className:"text-xl font-bold text-white",children:"CF"})}),a.jsx("h1",{className:"text-lg font-bold text-[var(--text-primary)]",children:"Capital Friends"}),a.jsx("p",{className:"text-xs text-[var(--text-dim)] mt-0.5",children:"Family Portfolio Management"}),a.jsx("p",{className:"text-xs text-[var(--text-muted)] mt-2",children:"v2.0.0"})]}),a.jsxs("div",{className:"bg-[var(--bg-card)] rounded-xl border border-[var(--border)] overflow-hidden",children:[a.jsx("div",{className:"px-4 py-3 border-b border-[var(--border-light)] bg-[var(--bg-inset)]",children:a.jsx("h3",{className:"text-xs font-bold text-[var(--text-muted)] uppercase tracking-wider",children:"Features"})}),a.jsx("div",{className:"px-4 py-3 space-y-2",children:["Track Mutual Funds, Stocks & Other Investments","Family member-wise portfolio management","ATH-based Buy Opportunities","Smart Rebalancing with threshold alerts","Goal planning with portfolio mapping","Insurance, Liabilities & Bank Accounts","Financial Health Check questionnaire","Reminders for SIPs, renewals & due dates","Email reports with detailed breakdowns"].map(n=>a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-violet-500 shrink-0"}),a.jsx("p",{className:"text-xs text-[var(--text-secondary)]",children:n})]},n))})]}),a.jsxs("div",{className:"bg-[var(--bg-card)] rounded-xl border border-[var(--border)] overflow-hidden",children:[a.jsx("div",{className:"px-4 py-3 border-b border-[var(--border-light)] bg-[var(--bg-inset)]",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Pi,{size:12,className:"text-pink-400"}),a.jsx("h3",{className:"text-xs font-bold text-[var(--text-muted)] uppercase tracking-wider",children:"Support Developer"})]})}),a.jsxs("div",{className:"px-4 py-4 text-center",children:[a.jsx("p",{className:"text-sm text-[var(--text-secondary)] mb-3",children:"If Capital Friends helps you manage your family finances, consider supporting the developer."}),a.jsxs("div",{className:"bg-[var(--bg-inset)] rounded-lg px-4 py-3 border border-[var(--border)]",children:[a.jsx("p",{className:"text-xs text-[var(--text-dim)] mb-1",children:"UPI"}),a.jsx("p",{className:"text-sm font-mono font-semibold text-[var(--text-primary)] select-all",children:"jagadeeshmanne.hdfc@kphdfc"})]}),a.jsxs("div",{className:"flex items-center justify-center gap-1 mt-3",children:[a.jsx(Ij,{size:12,className:"text-[var(--accent-amber)]"}),a.jsx("p",{className:"text-xs text-[var(--text-dim)]",children:"Buy me a chai!"})]})]})]}),a.jsxs("div",{className:"text-center py-2",children:[a.jsxs("p",{className:"text-xs text-[var(--text-dim)]",children:["Made with ",a.jsx(Pi,{size:10,className:"inline text-pink-400 mx-0.5"})," by Jagadeesh Manne"]}),a.jsx("p",{className:"text-xs text-[var(--text-dim)] mt-0.5",children:"Built with React + Vite + Tailwind CSS"})]})]})}function k2(){return Date.now().toString(36).toUpperCase()}function E2(){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZ",o=u=>Array.from({length:u},()=>n[Math.floor(Math.random()*26)]).join("");return o(5)+Math.floor(1e3+Math.random()*9e3)+o(1)}function z2(){return String(Math.floor(2e11+Math.random()*8e11))}function Zh(){return"9"+String(Math.floor(1e8+Math.random()*9e8))}function D2(){return String(Math.floor(1e9+Math.random()*9e9))}function R2(){const n=k2();return{member:{memberName:`Test Member ${n}`,relationship:"Self",pan:E2(),aadhar:z2(),email:`test-${n.toLowerCase()}@example.com`,mobile:Zh(),includeInEmailReports:!0},bank:{accountName:`Test Savings ${n}`,bankName:"Test Bank",accountNumber:D2(),ifscCode:"TEST0001234",accountType:"Savings",branchName:"Test Branch"},investmentAccount:{accountName:`Test Demat ${n}`,accountType:"Demat",platformBroker:"Test Broker Platform",accountClientId:`CLI-${n}`,registeredEmail:`test-${n.toLowerCase()}@example.com`,registeredPhone:Zh()},insurance:{policyType:"Term Life",company:"Test Insurance Co",policyNumber:`POL-${n}`,policyName:`Test Term Plan ${n}`,sumAssured:5e6,nominee:"Test Nominee",dynamicFields:{Premium:15e3,"Premium Frequency":"Annual"}},liability:{liabilityType:"Home Loan",lenderName:"Test Bank",outstandingBalance:45e5,dynamicFields:{"Principal Amount":5e6,"Interest Rate":8.5,"EMI Amount":45e3},notes:`Test liability ${n}`},otherInvestment:{investmentType:"Fixed Deposit",investmentName:`Test FD ${n}`,investedAmount:1e5,currentValue:105e3,investmentCategory:"Debt"},stockPortfolio:{portfolioName:`Test Stock Portfolio ${n}`,broker:"Test Broker"},reminder:{title:`Test Reminder ${n}`,description:"Automated test reminder",dueDate:new Date(Date.now()+10080*60*1e3).toISOString().split("T")[0],category:"Insurance",priority:"Medium"},goal:{goalName:`Test Goal ${n}`,goalType:"Custom",targetAmount:1e6,targetDate:"2040-01-01",priority:"Medium",expectedInflation:.06,expectedCAGR:.12}}}function L2({status:n,text:o}){const u={pass:"bg-emerald-500/20 text-emerald-400 border-emerald-500/30",fail:"bg-rose-500/20 text-rose-400 border-rose-500/30",skip:"bg-amber-500/20 text-amber-400 border-amber-500/30",running:"bg-blue-500/20 text-blue-400 border-blue-500/30",pending:"bg-gray-500/20 text-gray-400 border-gray-500/30"};return a.jsx("span",{className:`text-xs font-medium px-2 py-0.5 rounded border ${u[n]||u.pending}`,children:o||n.toUpperCase()})}function O2(){const{user:n}=Bl(),[o,u]=j.useState([]),[c,h]=j.useState(!1),[m,b]=j.useState(null),[x,g]=j.useState(!1),d=j.useCallback((p,y,_="")=>{u(O=>[...O,{test:p,status:y,detail:_,time:new Date().toLocaleTimeString()}])},[]),w=j.useCallback((p,y="")=>{u(_=>{const O=[..._];return O.length>0&&(O[O.length-1]={...O[O.length-1],status:p,detail:y}),O})},[]),A=async()=>{g(!0),b(null);try{const p=await xe("test:diagnose");b(p)}catch(p){b({error:p.message})}finally{g(!1)}},E=async()=>{h(!0),u([]);const p=R2();let y=null,_=null,O=null,q=null,Y=null,z=null,L=null,te=null,oe=null,H=null;try{d("API Echo Test","running");try{const M=await xe("test:echo",{hello:"world"});M&&M.echo&&M.echo.hello==="world"?w("pass","Echo response received correctly"):w("fail","Unexpected response: "+JSON.stringify(M))}catch(M){w("fail",M.message)}d("Diagnostics","running");try{const M=await xe("test:diagnose"),ie=Object.entries(M.sheets||{}).filter(([,R])=>!R.exists).map(([R])=>R);if(ie.length>0)w("fail",`Missing sheets: ${ie.join(", ")}`);else{const R=Object.keys(M.sheets).length;w("pass",`All ${R} sheets exist. SpreadsheetId: ${M.spreadsheetId}`)}const V=Object.entries(M.dataTests||{}).filter(([,R])=>!R.success).map(([R,k])=>`${R}: ${k.error}`);V.length>0&&d("Data Function Errors","fail",V.join("; "))}catch(M){w("fail",M.message)}d("Load All Data (bulk)","running");try{const M=await Ui(),ie=Object.entries(M).map(([V,R])=>`${V}: ${Array.isArray(R)?R.length:"?"}`);w("pass",ie.join(", "))}catch(M){w("fail",M.message)}d("Members  Create","running");try{const M=await bp(p.member);y=M?.memberId,_=p.member.memberName,y?w("pass",`Created: ${y}`):w("fail","No memberId returned: "+JSON.stringify(M))}catch(M){w("fail",M.message)}d("Members  List","running");try{const M=await pp();Array.isArray(M)&&M.some(V=>V.memberId===y)?w("pass",`Found ${y} in ${M.length} member(s)`):w("fail",`Member ${y} not found. Got ${Array.isArray(M)?M.length:0} members: ${JSON.stringify(M).substring(0,200)}`)}catch(M){w("fail",M.message)}if(y){d("Members  Update","running");try{await vp({...p.member,memberId:y,memberName:"Updated Test Member"}),_="Updated Test Member",w("pass",'Updated name to "Updated Test Member"')}catch(M){w("fail",M.message)}}d("Banks  Create","running");try{const M=await jp({...p.bank,memberId:y||"FM-001"});O=M?.accountId,w(O?"pass":"fail",O?`Created: ${O}`:"No accountId: "+JSON.stringify(M))}catch(M){w("fail",M.message)}d("Banks  List","running");try{const M=await yp();w("pass",`${Array.isArray(M)?M.length:0} account(s)`)}catch(M){w("fail",M.message)}d("Investment Accounts  Create","running");try{const M=await wp({...p.investmentAccount,memberId:y||"FM-001",bankAccountId:O||"BA-001"});q=M?.accountId,w(q?"pass":"fail",q?`Created: ${q}`:"No accountId: "+JSON.stringify(M))}catch(M){w("fail",M.message)}d("Investment Accounts  List","running");try{const M=await Sp();w("pass",`${Array.isArray(M)?M.length:0} account(s)`)}catch(M){w("fail",M.message)}d("Insurance  Create","running");try{const M=await Ep({...p.insurance,memberId:y||"FM-001",insuredMember:_||"Test Member"});Y=M?.policyId,w(Y?"pass":"fail",Y?`Created: ${Y}`:"No policyId: "+JSON.stringify(M))}catch(M){w("fail",M.message)}d("Insurance  List","running");try{const M=await kp();w("pass",`${Array.isArray(M)?M.length:0} policy/policies`)}catch(M){w("fail",M.message)}d("Liabilities  Create","running");try{const M=await Rp({...p.liability,familyMember:y||"FM-001"});z=M?.liabilityId,w(z?"pass":"fail",z?`Created: ${z}`:"No liabilityId: "+JSON.stringify(M))}catch(M){w("fail",M.message)}d("Liabilities  List","running");try{const M=await Dp();w("pass",`${Array.isArray(M)?M.length:0} liability/liabilities`)}catch(M){w("fail",M.message)}d("Other Investments  Create","running");try{const M=await Ip({...p.otherInvestment,familyMember:y||"FM-001"});L=M?.investmentId,w(L?"pass":"fail",L?`Created: ${L}`:"No investmentId: "+JSON.stringify(M))}catch(M){w("fail",M.message)}d("Other Investments  List","running");try{const M=await Op();w("pass",`${Array.isArray(M)?M.length:0} investment(s)`)}catch(M){w("fail",M.message)}d("Stock Portfolios  Create","running");try{const M=await qp({...p.stockPortfolio,owner:y||"FM-001"});te=M?.portfolioId,w(te?"pass":"fail",te?`Created: ${te}`:"No portfolioId: "+JSON.stringify(M))}catch(M){w("fail",M.message)}d("Stock Portfolios  List","running");try{const M=await Hp();w("pass",`${Array.isArray(M)?M.length:0} portfolio(s)`)}catch(M){w("fail",M.message)}d("Reminders  Create","running");try{const M=await $p(p.reminder);oe=M?.reminderId,w(oe?"pass":"fail",oe?`Created: ${oe}`:"No reminderId: "+JSON.stringify(M))}catch(M){w("fail",M.message)}d("Reminders  List","running");try{const M=await Up();w("pass",`${Array.isArray(M)?M.length:0} reminder(s)`)}catch(M){w("fail",M.message)}d("Goals  Create","running");try{const M=await Tp(p.goal);H=M?.goalId,w(H?"pass":"fail",H?`Created: ${H}`:"No goalId: "+JSON.stringify(M))}catch(M){w("fail",M.message)}d("Goals  List","running");try{const M=await Ap();w("pass",`${Array.isArray(M)?M.length:0} goal(s)`)}catch(M){w("fail",M.message)}d("Cleanup  Delete test data","running");const se=[];if(H)try{await Mp(H)}catch(M){se.push("goal: "+M.message)}if(oe)try{await Pp(oe)}catch(M){se.push("reminder: "+M.message)}if(te)try{await Bp(te)}catch(M){se.push("stockPortfolio: "+M.message)}if(L)try{await _p(L)}catch(M){se.push("otherInv: "+M.message)}if(z)try{await Lp(z)}catch(M){se.push("liability: "+M.message)}if(Y)try{await zp(Y)}catch(M){se.push("insurance: "+M.message)}if(q)try{await Cp(q)}catch(M){se.push("invAcct: "+M.message)}if(O)try{await Np(O)}catch(M){se.push("bank: "+M.message)}if(y)try{await gp(y)}catch(M){se.push("member: "+M.message)}se.length>0?w("fail",se.join("; ")):w("pass","All test data cleaned up"),d("Final Load All (post-cleanup)","running");try{const M=await Ui(),ie=Object.entries(M).map(([V,R])=>`${V}: ${Array.isArray(R)?R.length:"?"}`);w("pass",ie.join(", "))}catch(M){w("fail",M.message)}}catch(se){d("UNEXPECTED ERROR","fail",se.message)}finally{h(!1)}},C=o.filter(p=>p.status==="pass").length,S=o.filter(p=>p.status==="fail").length,v=o.filter(p=>p.status!=="running").length;return a.jsx("div",{className:"min-h-screen bg-[var(--bg-main)] p-4 max-w-3xl mx-auto",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-lg font-bold text-[var(--text-primary)]",children:"API Test Suite"}),a.jsxs("p",{className:"text-xs text-[var(--text-dim)]",children:["Signed in as ",n?.email||"unknown"]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:A,disabled:x||c,className:"px-3 py-1.5 text-xs font-medium rounded-lg bg-[var(--bg-card)] border border-[var(--border)] text-[var(--text-secondary)] hover:bg-[var(--bg-elevated)] disabled:opacity-50 cursor-pointer",children:x?"Running...":"Diagnostics"}),a.jsx("button",{onClick:E,disabled:c,className:"px-3 py-1.5 text-xs font-medium rounded-lg bg-violet-600 text-white hover:bg-violet-700 disabled:opacity-50 cursor-pointer",children:c?"Running Tests...":"Run All Tests"})]})]}),v>0&&a.jsxs("div",{className:"flex gap-3 text-xs",children:[a.jsxs("span",{className:"text-emerald-400",children:["Pass: ",C]}),a.jsxs("span",{className:"text-rose-400",children:["Fail: ",S]}),a.jsxs("span",{className:"text-[var(--text-dim)]",children:["Total: ",v]})]}),m&&a.jsxs("div",{className:"bg-[var(--bg-card)] rounded-xl border border-[var(--border)] p-4 space-y-3",children:[a.jsx("h2",{className:"text-sm font-semibold text-[var(--text-primary)]",children:"Diagnostics Report"}),m.error?a.jsx("p",{className:"text-xs text-rose-400",children:m.error}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"text-xs text-[var(--text-secondary)] space-y-1",children:[a.jsxs("p",{children:[a.jsx("span",{className:"text-[var(--text-dim)]",children:"Spreadsheet:"})," ",m.spreadsheetName]}),a.jsxs("p",{children:[a.jsx("span",{className:"text-[var(--text-dim)]",children:"ID:"})," ",a.jsx("code",{className:"text-[10px]",children:m.spreadsheetId})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-xs font-medium text-[var(--text-primary)] mb-1",children:"Sheets"}),a.jsx("div",{className:"grid grid-cols-2 gap-1",children:Object.entries(m.sheets||{}).map(([p,y])=>a.jsxs("div",{className:"flex items-center justify-between text-[11px] px-2 py-1 rounded bg-[var(--bg-elevated)]",children:[a.jsx("span",{className:"text-[var(--text-secondary)] truncate",children:p}),y.exists?a.jsxs("span",{className:"text-emerald-400 ml-1",children:[y.dataRows,"r"]}):a.jsx("span",{className:"text-rose-400 ml-1",children:"MISSING"})]},p))})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-xs font-medium text-[var(--text-primary)] mb-1",children:"Data Functions"}),a.jsx("div",{className:"space-y-1",children:Object.entries(m.dataTests||{}).map(([p,y])=>a.jsxs("div",{className:"flex items-center justify-between text-[11px] px-2 py-1 rounded bg-[var(--bg-elevated)]",children:[a.jsx("span",{className:"text-[var(--text-secondary)]",children:p}),y.success?a.jsxs("span",{className:"text-emerald-400",children:[y.count," items"]}):a.jsx("span",{className:"text-rose-400 truncate ml-2 max-w-[200px]",title:y.error,children:y.error})]},p))})]}),m.safeCallErrors&&m.safeCallErrors.length>0&&a.jsxs("div",{children:[a.jsx("h3",{className:"text-xs font-medium text-rose-400 mb-1",children:"SafeCall Errors"}),m.safeCallErrors.map((p,y)=>a.jsxs("p",{className:"text-[11px] text-rose-400",children:[p.fn,": ",p.error]},y))]})]})]}),o.length>0&&a.jsx("div",{className:"bg-[var(--bg-card)] rounded-xl border border-[var(--border)] overflow-hidden",children:a.jsx("div",{className:"divide-y divide-[var(--border)]",children:o.map((p,y)=>a.jsxs("div",{className:"px-4 py-2 flex items-start gap-3",children:[a.jsx("div",{className:"mt-0.5 shrink-0",children:a.jsx(L2,{status:p.status})}),a.jsxs("div",{className:"min-w-0 flex-1",children:[a.jsx("p",{className:"text-xs font-medium text-[var(--text-primary)]",children:p.test}),p.detail&&a.jsx("p",{className:"text-[11px] text-[var(--text-dim)] mt-0.5 break-all",children:p.detail})]}),a.jsx("span",{className:"text-[10px] text-[var(--text-dim)] shrink-0",children:p.time})]},y))})}),o.length===0&&!m&&a.jsxs("div",{className:"text-center py-12 text-[var(--text-dim)]",children:[a.jsx("p",{className:"text-sm",children:'Click "Run All Tests" to test all CRUD operations'}),a.jsx("p",{className:"text-xs mt-1",children:'or "Diagnostics" to check spreadsheet structure'})]})]})})}function I2(){return a.jsxs(Dg,{children:[a.jsx(Qe,{index:!0,element:a.jsx(AN,{})}),a.jsx(Qe,{path:"login",element:a.jsx(mb,{})}),a.jsx(Qe,{element:a.jsx(jN,{}),children:a.jsxs(Qe,{element:a.jsx(yN,{}),children:[a.jsx(Qe,{path:"dashboard",element:a.jsx(TN,{})}),a.jsx(Qe,{path:"family",element:a.jsx(c2,{})}),a.jsx(Qe,{path:"accounts/bank",element:a.jsx(Eh,{})}),a.jsx(Qe,{path:"accounts/investment",element:a.jsx(RN,{})}),a.jsx(Qe,{path:"insurance",element:a.jsx(_N,{})}),a.jsx(Qe,{path:"investments/mutual-funds",element:a.jsx(a2,{})}),a.jsx(Qe,{path:"investments/stocks",element:a.jsx(r2,{})}),a.jsx(Qe,{path:"investments/other",element:a.jsx(XN,{})}),a.jsx(Qe,{path:"liabilities",element:a.jsx(UN,{})}),a.jsx(Qe,{path:"goals",element:a.jsx(h2,{})}),a.jsx(Qe,{path:"reports",element:a.jsx(A2,{})}),a.jsx(Qe,{path:"reminders",element:a.jsx(w2,{})}),a.jsx(Qe,{path:"health-check",element:a.jsx(T2,{})}),a.jsx(Qe,{path:"about",element:a.jsx(M2,{})}),a.jsx(Qe,{path:"test",element:a.jsx(O2,{})}),a.jsx(Qe,{path:"settings",element:a.jsx(v2,{})}),a.jsx(Qe,{path:"more",element:a.jsx(b2,{})}),a.jsx(Qe,{path:"accounts",element:a.jsx(Eh,{})}),a.jsx(Qe,{path:"*",element:a.jsx(MN,{})})]})})]})}Rv.createRoot(document.getElementById("root")).render(a.jsx(ay,{children:a.jsx(Jy,{children:a.jsx(Wy,{children:a.jsx(tj,{children:a.jsx(aj,{children:a.jsx(I2,{})})})})})}));
