(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const x of document.querySelectorAll('link[rel="modulepreload"]'))u(x);new MutationObserver(x=>{for(const m of x)if(m.type==="childList")for(const h of m.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&u(h)}).observe(document,{childList:!0,subtree:!0});function c(x){const m={};return x.integrity&&(m.integrity=x.integrity),x.referrerPolicy&&(m.referrerPolicy=x.referrerPolicy),x.crossOrigin==="use-credentials"?m.credentials="include":x.crossOrigin==="anonymous"?m.credentials="omit":m.credentials="same-origin",m}function u(x){if(x.ep)return;x.ep=!0;const m=c(x);fetch(x.href,m)}})();var zu={exports:{}},Kn={};var ph;function dg(){if(ph)return Kn;ph=1;var n=Symbol.for("react.transitional.element"),o=Symbol.for("react.fragment");function c(u,x,m){var h=null;if(m!==void 0&&(h=""+m),x.key!==void 0&&(h=""+x.key),"key"in x){m={};for(var f in x)f!=="key"&&(m[f]=x[f])}else m=x;return x=m.ref,{$$typeof:n,type:u,key:h,ref:x!==void 0?x:null,props:m}}return Kn.Fragment=o,Kn.jsx=c,Kn.jsxs=c,Kn}var bh;function mg(){return bh||(bh=1,zu.exports=dg()),zu.exports}var a=mg(),Ru={exports:{}},Te={};var vh;function xg(){if(vh)return Te;vh=1;var n=Symbol.for("react.transitional.element"),o=Symbol.for("react.portal"),c=Symbol.for("react.fragment"),u=Symbol.for("react.strict_mode"),x=Symbol.for("react.profiler"),m=Symbol.for("react.consumer"),h=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),j=Symbol.for("react.lazy"),S=Symbol.for("react.activity"),M=Symbol.iterator;function k(R){return R===null||typeof R!="object"?null:(R=M&&R[M]||R["@@iterator"],typeof R=="function"?R:null)}var z={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,N={};function y(R,ee,oe){this.props=R,this.context=ee,this.refs=N,this.updater=oe||z}y.prototype.isReactComponent={},y.prototype.setState=function(R,ee){if(typeof R!="object"&&typeof R!="function"&&R!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,R,ee,"setState")},y.prototype.forceUpdate=function(R){this.updater.enqueueForceUpdate(this,R,"forceUpdate")};function w(){}w.prototype=y.prototype;function p(R,ee,oe){this.props=R,this.context=ee,this.refs=N,this.updater=oe||z}var I=p.prototype=new w;I.constructor=p,A(I,y.prototype),I.isPureReactComponent=!0;var J=Array.isArray;function q(){}var Z={H:null,A:null,T:null,S:null},D=Object.prototype.hasOwnProperty;function $(R,ee,oe){var de=oe.ref;return{$$typeof:n,type:R,key:ee,ref:de!==void 0?de:null,props:oe}}function P(R,ee){return $(R.type,ee,R.props)}function le(R){return typeof R=="object"&&R!==null&&R.$$typeof===n}function E(R){var ee={"=":"=0",":":"=2"};return"$"+R.replace(/[=:]/g,function(oe){return ee[oe]})}var fe=/\/+/g;function W(R,ee){return typeof R=="object"&&R!==null&&R.key!=null?E(""+R.key):ee.toString(36)}function se(R){switch(R.status){case"fulfilled":return R.value;case"rejected":throw R.reason;default:switch(typeof R.status=="string"?R.then(q,q):(R.status="pending",R.then(function(ee){R.status==="pending"&&(R.status="fulfilled",R.value=ee)},function(ee){R.status==="pending"&&(R.status="rejected",R.reason=ee)})),R.status){case"fulfilled":return R.value;case"rejected":throw R.reason}}throw R}function F(R,ee,oe,de,je){var _=typeof R;(_==="undefined"||_==="boolean")&&(R=null);var te=!1;if(R===null)te=!0;else switch(_){case"bigint":case"string":case"number":te=!0;break;case"object":switch(R.$$typeof){case n:case o:te=!0;break;case j:return te=R._init,F(te(R._payload),ee,oe,de,je)}}if(te)return je=je(R),te=de===""?"."+W(R,0):de,J(je)?(oe="",te!=null&&(oe=te.replace(fe,"$&/")+"/"),F(je,ee,oe,"",function(me){return me})):je!=null&&(le(je)&&(je=P(je,oe+(je.key==null||R&&R.key===je.key?"":(""+je.key).replace(fe,"$&/")+"/")+te)),ee.push(je)),1;te=0;var he=de===""?".":de+":";if(J(R))for(var pe=0;pe<R.length;pe++)de=R[pe],_=he+W(de,pe),te+=F(de,ee,oe,_,je);else if(pe=k(R),typeof pe=="function")for(R=pe.call(R),pe=0;!(de=R.next()).done;)de=de.value,_=he+W(de,pe++),te+=F(de,ee,oe,_,je);else if(_==="object"){if(typeof R.then=="function")return F(se(R),ee,oe,de,je);throw ee=String(R),Error("Objects are not valid as a React child (found: "+(ee==="[object Object]"?"object with keys {"+Object.keys(R).join(", ")+"}":ee)+"). If you meant to render a collection of children, use an array instead.")}return te}function T(R,ee,oe){if(R==null)return R;var de=[],je=0;return F(R,de,"","",function(_){return ee.call(oe,_,je++)}),de}function O(R){if(R._status===-1){var ee=R._result;ee=ee(),ee.then(function(oe){(R._status===0||R._status===-1)&&(R._status=1,R._result=oe)},function(oe){(R._status===0||R._status===-1)&&(R._status=2,R._result=oe)}),R._status===-1&&(R._status=0,R._result=ee)}if(R._status===1)return R._result.default;throw R._result}var ie=typeof reportError=="function"?reportError:function(R){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ee=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof R=="object"&&R!==null&&typeof R.message=="string"?String(R.message):String(R),error:R});if(!window.dispatchEvent(ee))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",R);return}console.error(R)},ue={map:T,forEach:function(R,ee,oe){T(R,function(){ee.apply(this,arguments)},oe)},count:function(R){var ee=0;return T(R,function(){ee++}),ee},toArray:function(R){return T(R,function(ee){return ee})||[]},only:function(R){if(!le(R))throw Error("React.Children.only expected to receive a single React element child.");return R}};return Te.Activity=S,Te.Children=ue,Te.Component=y,Te.Fragment=c,Te.Profiler=x,Te.PureComponent=p,Te.StrictMode=u,Te.Suspense=v,Te.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Z,Te.__COMPILER_RUNTIME={__proto__:null,c:function(R){return Z.H.useMemoCache(R)}},Te.cache=function(R){return function(){return R.apply(null,arguments)}},Te.cacheSignal=function(){return null},Te.cloneElement=function(R,ee,oe){if(R==null)throw Error("The argument must be a React element, but you passed "+R+".");var de=A({},R.props),je=R.key;if(ee!=null)for(_ in ee.key!==void 0&&(je=""+ee.key),ee)!D.call(ee,_)||_==="key"||_==="__self"||_==="__source"||_==="ref"&&ee.ref===void 0||(de[_]=ee[_]);var _=arguments.length-2;if(_===1)de.children=oe;else if(1<_){for(var te=Array(_),he=0;he<_;he++)te[he]=arguments[he+2];de.children=te}return $(R.type,je,de)},Te.createContext=function(R){return R={$$typeof:h,_currentValue:R,_currentValue2:R,_threadCount:0,Provider:null,Consumer:null},R.Provider=R,R.Consumer={$$typeof:m,_context:R},R},Te.createElement=function(R,ee,oe){var de,je={},_=null;if(ee!=null)for(de in ee.key!==void 0&&(_=""+ee.key),ee)D.call(ee,de)&&de!=="key"&&de!=="__self"&&de!=="__source"&&(je[de]=ee[de]);var te=arguments.length-2;if(te===1)je.children=oe;else if(1<te){for(var he=Array(te),pe=0;pe<te;pe++)he[pe]=arguments[pe+2];je.children=he}if(R&&R.defaultProps)for(de in te=R.defaultProps,te)je[de]===void 0&&(je[de]=te[de]);return $(R,_,je)},Te.createRef=function(){return{current:null}},Te.forwardRef=function(R){return{$$typeof:f,render:R}},Te.isValidElement=le,Te.lazy=function(R){return{$$typeof:j,_payload:{_status:-1,_result:R},_init:O}},Te.memo=function(R,ee){return{$$typeof:d,type:R,compare:ee===void 0?null:ee}},Te.startTransition=function(R){var ee=Z.T,oe={};Z.T=oe;try{var de=R(),je=Z.S;je!==null&&je(oe,de),typeof de=="object"&&de!==null&&typeof de.then=="function"&&de.then(q,ie)}catch(_){ie(_)}finally{ee!==null&&oe.types!==null&&(ee.types=oe.types),Z.T=ee}},Te.unstable_useCacheRefresh=function(){return Z.H.useCacheRefresh()},Te.use=function(R){return Z.H.use(R)},Te.useActionState=function(R,ee,oe){return Z.H.useActionState(R,ee,oe)},Te.useCallback=function(R,ee){return Z.H.useCallback(R,ee)},Te.useContext=function(R){return Z.H.useContext(R)},Te.useDebugValue=function(){},Te.useDeferredValue=function(R,ee){return Z.H.useDeferredValue(R,ee)},Te.useEffect=function(R,ee){return Z.H.useEffect(R,ee)},Te.useEffectEvent=function(R){return Z.H.useEffectEvent(R)},Te.useId=function(){return Z.H.useId()},Te.useImperativeHandle=function(R,ee,oe){return Z.H.useImperativeHandle(R,ee,oe)},Te.useInsertionEffect=function(R,ee){return Z.H.useInsertionEffect(R,ee)},Te.useLayoutEffect=function(R,ee){return Z.H.useLayoutEffect(R,ee)},Te.useMemo=function(R,ee){return Z.H.useMemo(R,ee)},Te.useOptimistic=function(R,ee){return Z.H.useOptimistic(R,ee)},Te.useReducer=function(R,ee,oe){return Z.H.useReducer(R,ee,oe)},Te.useRef=function(R){return Z.H.useRef(R)},Te.useState=function(R){return Z.H.useState(R)},Te.useSyncExternalStore=function(R,ee,oe){return Z.H.useSyncExternalStore(R,ee,oe)},Te.useTransition=function(){return Z.H.useTransition()},Te.version="19.2.4",Te}var gh;function od(){return gh||(gh=1,Ru.exports=xg()),Ru.exports}var g=od(),Ou={exports:{}},Jn={},Lu={exports:{}},_u={};var yh;function fg(){return yh||(yh=1,(function(n){function o(F,T){var O=F.length;F.push(T);e:for(;0<O;){var ie=O-1>>>1,ue=F[ie];if(0<x(ue,T))F[ie]=T,F[O]=ue,O=ie;else break e}}function c(F){return F.length===0?null:F[0]}function u(F){if(F.length===0)return null;var T=F[0],O=F.pop();if(O!==T){F[0]=O;e:for(var ie=0,ue=F.length,R=ue>>>1;ie<R;){var ee=2*(ie+1)-1,oe=F[ee],de=ee+1,je=F[de];if(0>x(oe,O))de<ue&&0>x(je,oe)?(F[ie]=je,F[de]=O,ie=de):(F[ie]=oe,F[ee]=O,ie=ee);else if(de<ue&&0>x(je,O))F[ie]=je,F[de]=O,ie=de;else break e}}return T}function x(F,T){var O=F.sortIndex-T.sortIndex;return O!==0?O:F.id-T.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var m=performance;n.unstable_now=function(){return m.now()}}else{var h=Date,f=h.now();n.unstable_now=function(){return h.now()-f}}var v=[],d=[],j=1,S=null,M=3,k=!1,z=!1,A=!1,N=!1,y=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;function I(F){for(var T=c(d);T!==null;){if(T.callback===null)u(d);else if(T.startTime<=F)u(d),T.sortIndex=T.expirationTime,o(v,T);else break;T=c(d)}}function J(F){if(A=!1,I(F),!z)if(c(v)!==null)z=!0,q||(q=!0,E());else{var T=c(d);T!==null&&se(J,T.startTime-F)}}var q=!1,Z=-1,D=5,$=-1;function P(){return N?!0:!(n.unstable_now()-$<D)}function le(){if(N=!1,q){var F=n.unstable_now();$=F;var T=!0;try{e:{z=!1,A&&(A=!1,w(Z),Z=-1),k=!0;var O=M;try{t:{for(I(F),S=c(v);S!==null&&!(S.expirationTime>F&&P());){var ie=S.callback;if(typeof ie=="function"){S.callback=null,M=S.priorityLevel;var ue=ie(S.expirationTime<=F);if(F=n.unstable_now(),typeof ue=="function"){S.callback=ue,I(F),T=!0;break t}S===c(v)&&u(v),I(F)}else u(v);S=c(v)}if(S!==null)T=!0;else{var R=c(d);R!==null&&se(J,R.startTime-F),T=!1}}break e}finally{S=null,M=O,k=!1}T=void 0}}finally{T?E():q=!1}}}var E;if(typeof p=="function")E=function(){p(le)};else if(typeof MessageChannel<"u"){var fe=new MessageChannel,W=fe.port2;fe.port1.onmessage=le,E=function(){W.postMessage(null)}}else E=function(){y(le,0)};function se(F,T){Z=y(function(){F(n.unstable_now())},T)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(F){F.callback=null},n.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<F?Math.floor(1e3/F):5},n.unstable_getCurrentPriorityLevel=function(){return M},n.unstable_next=function(F){switch(M){case 1:case 2:case 3:var T=3;break;default:T=M}var O=M;M=T;try{return F()}finally{M=O}},n.unstable_requestPaint=function(){N=!0},n.unstable_runWithPriority=function(F,T){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var O=M;M=F;try{return T()}finally{M=O}},n.unstable_scheduleCallback=function(F,T,O){var ie=n.unstable_now();switch(typeof O=="object"&&O!==null?(O=O.delay,O=typeof O=="number"&&0<O?ie+O:ie):O=ie,F){case 1:var ue=-1;break;case 2:ue=250;break;case 5:ue=1073741823;break;case 4:ue=1e4;break;default:ue=5e3}return ue=O+ue,F={id:j++,callback:T,priorityLevel:F,startTime:O,expirationTime:ue,sortIndex:-1},O>ie?(F.sortIndex=O,o(d,F),c(v)===null&&F===c(d)&&(A?(w(Z),Z=-1):A=!0,se(J,O-ie))):(F.sortIndex=ue,o(v,F),z||k||(z=!0,q||(q=!0,E()))),F},n.unstable_shouldYield=P,n.unstable_wrapCallback=function(F){var T=M;return function(){var O=M;M=T;try{return F.apply(this,arguments)}finally{M=O}}}})(_u)),_u}var jh;function hg(){return jh||(jh=1,Lu.exports=fg()),Lu.exports}var Iu={exports:{}},kt={};var Nh;function pg(){if(Nh)return kt;Nh=1;var n=od();function o(v){var d="https://react.dev/errors/"+v;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var j=2;j<arguments.length;j++)d+="&args[]="+encodeURIComponent(arguments[j])}return"Minified React error #"+v+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function c(){}var u={d:{f:c,r:function(){throw Error(o(522))},D:c,C:c,L:c,m:c,X:c,S:c,M:c},p:0,findDOMNode:null},x=Symbol.for("react.portal");function m(v,d,j){var S=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:x,key:S==null?null:""+S,children:v,containerInfo:d,implementation:j}}var h=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(v,d){if(v==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return kt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=u,kt.createPortal=function(v,d){var j=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(o(299));return m(v,d,null,j)},kt.flushSync=function(v){var d=h.T,j=u.p;try{if(h.T=null,u.p=2,v)return v()}finally{h.T=d,u.p=j,u.d.f()}},kt.preconnect=function(v,d){typeof v=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,u.d.C(v,d))},kt.prefetchDNS=function(v){typeof v=="string"&&u.d.D(v)},kt.preinit=function(v,d){if(typeof v=="string"&&d&&typeof d.as=="string"){var j=d.as,S=f(j,d.crossOrigin),M=typeof d.integrity=="string"?d.integrity:void 0,k=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;j==="style"?u.d.S(v,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:S,integrity:M,fetchPriority:k}):j==="script"&&u.d.X(v,{crossOrigin:S,integrity:M,fetchPriority:k,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},kt.preinitModule=function(v,d){if(typeof v=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var j=f(d.as,d.crossOrigin);u.d.M(v,{crossOrigin:j,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&u.d.M(v)},kt.preload=function(v,d){if(typeof v=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var j=d.as,S=f(j,d.crossOrigin);u.d.L(v,j,{crossOrigin:S,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},kt.preloadModule=function(v,d){if(typeof v=="string")if(d){var j=f(d.as,d.crossOrigin);u.d.m(v,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:j,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else u.d.m(v)},kt.requestFormReset=function(v){u.d.r(v)},kt.unstable_batchedUpdates=function(v,d){return v(d)},kt.useFormState=function(v,d,j){return h.H.useFormState(v,d,j)},kt.useFormStatus=function(){return h.H.useHostTransitionStatus()},kt.version="19.2.4",kt}var Sh;function bg(){if(Sh)return Iu.exports;Sh=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(o){console.error(o)}}return n(),Iu.exports=pg(),Iu.exports}var wh;function vg(){if(wh)return Jn;wh=1;var n=hg(),o=od(),c=bg();function u(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)t+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function x(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function m(e){var t=e,l=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(l=t.return),e=t.return;while(e)}return t.tag===3?l:null}function h(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function f(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function v(e){if(m(e)!==e)throw Error(u(188))}function d(e){var t=e.alternate;if(!t){if(t=m(e),t===null)throw Error(u(188));return t!==e?null:e}for(var l=e,s=t;;){var r=l.return;if(r===null)break;var i=r.alternate;if(i===null){if(s=r.return,s!==null){l=s;continue}break}if(r.child===i.child){for(i=r.child;i;){if(i===l)return v(r),e;if(i===s)return v(r),t;i=i.sibling}throw Error(u(188))}if(l.return!==s.return)l=r,s=i;else{for(var b=!1,C=r.child;C;){if(C===l){b=!0,l=r,s=i;break}if(C===s){b=!0,s=r,l=i;break}C=C.sibling}if(!b){for(C=i.child;C;){if(C===l){b=!0,l=i,s=r;break}if(C===s){b=!0,s=i,l=r;break}C=C.sibling}if(!b)throw Error(u(189))}}if(l.alternate!==s)throw Error(u(190))}if(l.tag!==3)throw Error(u(188));return l.stateNode.current===l?e:t}function j(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=j(e),t!==null)return t;e=e.sibling}return null}var S=Object.assign,M=Symbol.for("react.element"),k=Symbol.for("react.transitional.element"),z=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),N=Symbol.for("react.strict_mode"),y=Symbol.for("react.profiler"),w=Symbol.for("react.consumer"),p=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),J=Symbol.for("react.suspense"),q=Symbol.for("react.suspense_list"),Z=Symbol.for("react.memo"),D=Symbol.for("react.lazy"),$=Symbol.for("react.activity"),P=Symbol.for("react.memo_cache_sentinel"),le=Symbol.iterator;function E(e){return e===null||typeof e!="object"?null:(e=le&&e[le]||e["@@iterator"],typeof e=="function"?e:null)}var fe=Symbol.for("react.client.reference");function W(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===fe?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case A:return"Fragment";case y:return"Profiler";case N:return"StrictMode";case J:return"Suspense";case q:return"SuspenseList";case $:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case z:return"Portal";case p:return e.displayName||"Context";case w:return(e._context.displayName||"Context")+".Consumer";case I:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Z:return t=e.displayName||null,t!==null?t:W(e.type)||"Memo";case D:t=e._payload,e=e._init;try{return W(e(t))}catch{}}return null}var se=Array.isArray,F=o.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,T=c.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,O={pending:!1,data:null,method:null,action:null},ie=[],ue=-1;function R(e){return{current:e}}function ee(e){0>ue||(e.current=ie[ue],ie[ue]=null,ue--)}function oe(e,t){ue++,ie[ue]=e.current,e.current=t}var de=R(null),je=R(null),_=R(null),te=R(null);function he(e,t){switch(oe(_,t),oe(je,e),oe(de,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Uf(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=Uf(t),e=Hf(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}ee(de),oe(de,e)}function pe(){ee(de),ee(je),ee(_)}function me(e){e.memoizedState!==null&&oe(te,e);var t=de.current,l=Hf(t,e.type);t!==l&&(oe(je,e),oe(de,l))}function Se(e){je.current===e&&(ee(de),ee(je)),te.current===e&&(ee(te),Yn._currentValue=O)}var Oe,Ue;function $e(e){if(Oe===void 0)try{throw Error()}catch(l){var t=l.stack.trim().match(/\n( *(at )?)/);Oe=t&&t[1]||"",Ue=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Oe+e+Ue}var st=!1;function nt(e,t){if(!e||st)return"";st=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var s={DetermineComponentFrameRoot:function(){try{if(t){var re=function(){throw Error()};if(Object.defineProperty(re.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(re,[])}catch(K){var Q=K}Reflect.construct(e,[],re)}else{try{re.call()}catch(K){Q=K}e.call(re.prototype)}}else{try{throw Error()}catch(K){Q=K}(re=e())&&typeof re.catch=="function"&&re.catch(function(){})}}catch(K){if(K&&Q&&typeof K.stack=="string")return[K.stack,Q.stack]}return[null,null]}};s.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var r=Object.getOwnPropertyDescriptor(s.DetermineComponentFrameRoot,"name");r&&r.configurable&&Object.defineProperty(s.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var i=s.DetermineComponentFrameRoot(),b=i[0],C=i[1];if(b&&C){var L=b.split(`
`),Y=C.split(`
`);for(r=s=0;s<L.length&&!L[s].includes("DetermineComponentFrameRoot");)s++;for(;r<Y.length&&!Y[r].includes("DetermineComponentFrameRoot");)r++;if(s===L.length||r===Y.length)for(s=L.length-1,r=Y.length-1;1<=s&&0<=r&&L[s]!==Y[r];)r--;for(;1<=s&&0<=r;s--,r--)if(L[s]!==Y[r]){if(s!==1||r!==1)do if(s--,r--,0>r||L[s]!==Y[r]){var ae=`
`+L[s].replace(" at new "," at ");return e.displayName&&ae.includes("<anonymous>")&&(ae=ae.replace("<anonymous>",e.displayName)),ae}while(1<=s&&0<=r);break}}}finally{st=!1,Error.prepareStackTrace=l}return(l=e?e.displayName||e.name:"")?$e(l):""}function zt(e,t){switch(e.tag){case 26:case 27:case 5:return $e(e.type);case 16:return $e("Lazy");case 13:return e.child!==t&&t!==null?$e("Suspense Fallback"):$e("Suspense");case 19:return $e("SuspenseList");case 0:case 15:return nt(e.type,!1);case 11:return nt(e.type.render,!1);case 1:return nt(e.type,!0);case 31:return $e("Activity");default:return""}}function Pe(e){try{var t="",l=null;do t+=zt(e,l),l=e,e=e.return;while(e);return t}catch(s){return`
Error generating stack: `+s.message+`
`+s.stack}}var Ie=Object.prototype.hasOwnProperty,yt=n.unstable_scheduleCallback,fa=n.unstable_cancelCallback,Ce=n.unstable_shouldYield,Ze=n.unstable_requestPaint,Ke=n.unstable_now,_t=n.unstable_getCurrentPriorityLevel,ht=n.unstable_ImmediatePriority,Mt=n.unstable_UserBlockingPriority,Na=n.unstable_NormalPriority,ho=n.unstable_LowPriority,pr=n.unstable_IdlePriority,po=n.log,bo=n.unstable_setDisableYieldValue,El=null,Rt=null;function Sa(e){if(typeof po=="function"&&bo(e),Rt&&typeof Rt.setStrictMode=="function")try{Rt.setStrictMode(El,e)}catch{}}var Ot=Math.clz32?Math.clz32:yo,vo=Math.log,go=Math.LN2;function yo(e){return e>>>=0,e===0?32:31-(vo(e)/go|0)|0}var ts=256,as=262144,ls=4194304;function La(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function ss(e,t,l){var s=e.pendingLanes;if(s===0)return 0;var r=0,i=e.suspendedLanes,b=e.pingedLanes;e=e.warmLanes;var C=s&134217727;return C!==0?(s=C&~i,s!==0?r=La(s):(b&=C,b!==0?r=La(b):l||(l=C&~e,l!==0&&(r=La(l))))):(C=s&~i,C!==0?r=La(C):b!==0?r=La(b):l||(l=s&~e,l!==0&&(r=La(l)))),r===0?0:t!==0&&t!==r&&(t&i)===0&&(i=r&-r,l=t&-t,i>=l||i===32&&(l&4194048)!==0)?t:r}function Dl(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function jo(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function br(){var e=ls;return ls<<=1,(ls&62914560)===0&&(ls=4194304),e}function sn(e){for(var t=[],l=0;31>l;l++)t.push(e);return t}function zl(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function No(e,t,l,s,r,i){var b=e.pendingLanes;e.pendingLanes=l,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=l,e.entangledLanes&=l,e.errorRecoveryDisabledLanes&=l,e.shellSuspendCounter=0;var C=e.entanglements,L=e.expirationTimes,Y=e.hiddenUpdates;for(l=b&~l;0<l;){var ae=31-Ot(l),re=1<<ae;C[ae]=0,L[ae]=-1;var Q=Y[ae];if(Q!==null)for(Y[ae]=null,ae=0;ae<Q.length;ae++){var K=Q[ae];K!==null&&(K.lane&=-536870913)}l&=~re}s!==0&&vr(e,s,0),i!==0&&r===0&&e.tag!==0&&(e.suspendedLanes|=i&~(b&~t))}function vr(e,t,l){e.pendingLanes|=t,e.suspendedLanes&=~t;var s=31-Ot(t);e.entangledLanes|=t,e.entanglements[s]=e.entanglements[s]|1073741824|l&261930}function gr(e,t){var l=e.entangledLanes|=t;for(e=e.entanglements;l;){var s=31-Ot(l),r=1<<s;r&t|e[s]&t&&(e[s]|=t),l&=~r}}function yr(e,t){var l=t&-t;return l=(l&42)!==0?1:nn(l),(l&(e.suspendedLanes|t))!==0?0:l}function nn(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function rn(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function jr(){var e=T.p;return e!==0?e:(e=window.event,e===void 0?32:ch(e.type))}function Nr(e,t){var l=T.p;try{return T.p=e,t()}finally{T.p=l}}var wa=Math.random().toString(36).slice(2),pt="__reactFiber$"+wa,Tt="__reactProps$"+wa,sl="__reactContainer$"+wa,on="__reactEvents$"+wa,So="__reactListeners$"+wa,wo="__reactHandles$"+wa,U="__reactResources$"+wa,xe="__reactMarker$"+wa;function jt(e){delete e[pt],delete e[Tt],delete e[on],delete e[So],delete e[wo]}function ha(e){var t=e[pt];if(t)return t;for(var l=e.parentNode;l;){if(t=l[sl]||l[pt]){if(l=t.alternate,t.child!==null||l!==null&&l.child!==null)for(e=Yf(e);e!==null;){if(l=e[pt])return l;e=Yf(e)}return t}e=l,l=e.parentNode}return null}function ns(e){if(e=e[pt]||e[sl]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function cn(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(u(33))}function rs(e){var t=e[U];return t||(t=e[U]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function vt(e){e[xe]=!0}var Ad=new Set,Md={};function Rl(e,t){is(e,t),is(e+"Capture",t)}function is(e,t){for(Md[e]=t,e=0;e<t.length;e++)Ad.add(t[e])}var ab=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Td={},kd={};function lb(e){return Ie.call(kd,e)?!0:Ie.call(Td,e)?!1:ab.test(e)?kd[e]=!0:(Td[e]=!0,!1)}function Sr(e,t,l){if(lb(t))if(l===null)e.removeAttribute(t);else{switch(typeof l){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var s=t.toLowerCase().slice(0,5);if(s!=="data-"&&s!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+l)}}function wr(e,t,l){if(l===null)e.removeAttribute(t);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+l)}}function _a(e,t,l,s){if(s===null)e.removeAttribute(l);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(l);return}e.setAttributeNS(t,l,""+s)}}function la(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Ed(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function sb(e,t,l){var s=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var r=s.get,i=s.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(b){l=""+b,i.call(this,b)}}),Object.defineProperty(e,t,{enumerable:s.enumerable}),{getValue:function(){return l},setValue:function(b){l=""+b},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Co(e){if(!e._valueTracker){var t=Ed(e)?"checked":"value";e._valueTracker=sb(e,t,""+e[t])}}function Dd(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var l=t.getValue(),s="";return e&&(s=Ed(e)?e.checked?"true":"false":e.value),e=s,e!==l?(t.setValue(e),!0):!1}function Cr(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var nb=/[\n"\\]/g;function sa(e){return e.replace(nb,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Ao(e,t,l,s,r,i,b,C){e.name="",b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?e.type=b:e.removeAttribute("type"),t!=null?b==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+la(t)):e.value!==""+la(t)&&(e.value=""+la(t)):b!=="submit"&&b!=="reset"||e.removeAttribute("value"),t!=null?Mo(e,b,la(t)):l!=null?Mo(e,b,la(l)):s!=null&&e.removeAttribute("value"),r==null&&i!=null&&(e.defaultChecked=!!i),r!=null&&(e.checked=r&&typeof r!="function"&&typeof r!="symbol"),C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?e.name=""+la(C):e.removeAttribute("name")}function zd(e,t,l,s,r,i,b,C){if(i!=null&&typeof i!="function"&&typeof i!="symbol"&&typeof i!="boolean"&&(e.type=i),t!=null||l!=null){if(!(i!=="submit"&&i!=="reset"||t!=null)){Co(e);return}l=l!=null?""+la(l):"",t=t!=null?""+la(t):l,C||t===e.value||(e.value=t),e.defaultValue=t}s=s??r,s=typeof s!="function"&&typeof s!="symbol"&&!!s,e.checked=C?e.checked:!!s,e.defaultChecked=!!s,b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(e.name=b),Co(e)}function Mo(e,t,l){t==="number"&&Cr(e.ownerDocument)===e||e.defaultValue===""+l||(e.defaultValue=""+l)}function os(e,t,l,s){if(e=e.options,t){t={};for(var r=0;r<l.length;r++)t["$"+l[r]]=!0;for(l=0;l<e.length;l++)r=t.hasOwnProperty("$"+e[l].value),e[l].selected!==r&&(e[l].selected=r),r&&s&&(e[l].defaultSelected=!0)}else{for(l=""+la(l),t=null,r=0;r<e.length;r++){if(e[r].value===l){e[r].selected=!0,s&&(e[r].defaultSelected=!0);return}t!==null||e[r].disabled||(t=e[r])}t!==null&&(t.selected=!0)}}function Rd(e,t,l){if(t!=null&&(t=""+la(t),t!==e.value&&(e.value=t),l==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=l!=null?""+la(l):""}function Od(e,t,l,s){if(t==null){if(s!=null){if(l!=null)throw Error(u(92));if(se(s)){if(1<s.length)throw Error(u(93));s=s[0]}l=s}l==null&&(l=""),t=l}l=la(t),e.defaultValue=l,s=e.textContent,s===l&&s!==""&&s!==null&&(e.value=s),Co(e)}function cs(e,t){if(t){var l=e.firstChild;if(l&&l===e.lastChild&&l.nodeType===3){l.nodeValue=t;return}}e.textContent=t}var rb=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ld(e,t,l){var s=t.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?s?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":s?e.setProperty(t,l):typeof l!="number"||l===0||rb.has(t)?t==="float"?e.cssFloat=l:e[t]=(""+l).trim():e[t]=l+"px"}function _d(e,t,l){if(t!=null&&typeof t!="object")throw Error(u(62));if(e=e.style,l!=null){for(var s in l)!l.hasOwnProperty(s)||t!=null&&t.hasOwnProperty(s)||(s.indexOf("--")===0?e.setProperty(s,""):s==="float"?e.cssFloat="":e[s]="");for(var r in t)s=t[r],t.hasOwnProperty(r)&&l[r]!==s&&Ld(e,r,s)}else for(var i in t)t.hasOwnProperty(i)&&Ld(e,i,t[i])}function To(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ib=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ob=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ar(e){return ob.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Ia(){}var ko=null;function Eo(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var us=null,ds=null;function Id(e){var t=ns(e);if(t&&(e=t.stateNode)){var l=e[Tt]||null;e:switch(e=t.stateNode,t.type){case"input":if(Ao(e,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),t=l.name,l.type==="radio"&&t!=null){for(l=e;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+sa(""+t)+'"][type="radio"]'),t=0;t<l.length;t++){var s=l[t];if(s!==e&&s.form===e.form){var r=s[Tt]||null;if(!r)throw Error(u(90));Ao(s,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name)}}for(t=0;t<l.length;t++)s=l[t],s.form===e.form&&Dd(s)}break e;case"textarea":Rd(e,l.value,l.defaultValue);break e;case"select":t=l.value,t!=null&&os(e,!!l.multiple,t,!1)}}}var Do=!1;function Bd(e,t,l){if(Do)return e(t,l);Do=!0;try{var s=e(t);return s}finally{if(Do=!1,(us!==null||ds!==null)&&(xi(),us&&(t=us,e=ds,ds=us=null,Id(t),e)))for(t=0;t<e.length;t++)Id(e[t])}}function un(e,t){var l=e.stateNode;if(l===null)return null;var s=l[Tt]||null;if(s===null)return null;l=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(l&&typeof l!="function")throw Error(u(231,t,typeof l));return l}var Ba=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),zo=!1;if(Ba)try{var dn={};Object.defineProperty(dn,"passive",{get:function(){zo=!0}}),window.addEventListener("test",dn,dn),window.removeEventListener("test",dn,dn)}catch{zo=!1}var nl=null,Ro=null,Mr=null;function Ud(){if(Mr)return Mr;var e,t=Ro,l=t.length,s,r="value"in nl?nl.value:nl.textContent,i=r.length;for(e=0;e<l&&t[e]===r[e];e++);var b=l-e;for(s=1;s<=b&&t[l-s]===r[i-s];s++);return Mr=r.slice(e,1<s?1-s:void 0)}function Tr(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function kr(){return!0}function Hd(){return!1}function It(e){function t(l,s,r,i,b){this._reactName=l,this._targetInst=r,this.type=s,this.nativeEvent=i,this.target=b,this.currentTarget=null;for(var C in e)e.hasOwnProperty(C)&&(l=e[C],this[C]=l?l(i):i[C]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?kr:Hd,this.isPropagationStopped=Hd,this}return S(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=kr)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=kr)},persist:function(){},isPersistent:kr}),t}var Ol={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Er=It(Ol),mn=S({},Ol,{view:0,detail:0}),cb=It(mn),Oo,Lo,xn,Dr=S({},mn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Io,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==xn&&(xn&&e.type==="mousemove"?(Oo=e.screenX-xn.screenX,Lo=e.screenY-xn.screenY):Lo=Oo=0,xn=e),Oo)},movementY:function(e){return"movementY"in e?e.movementY:Lo}}),Fd=It(Dr),ub=S({},Dr,{dataTransfer:0}),db=It(ub),mb=S({},mn,{relatedTarget:0}),_o=It(mb),xb=S({},Ol,{animationName:0,elapsedTime:0,pseudoElement:0}),fb=It(xb),hb=S({},Ol,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),pb=It(hb),bb=S({},Ol,{data:0}),qd=It(bb),vb={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},gb={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},yb={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jb(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=yb[e])?!!t[e]:!1}function Io(){return jb}var Nb=S({},mn,{key:function(e){if(e.key){var t=vb[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Tr(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?gb[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Io,charCode:function(e){return e.type==="keypress"?Tr(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Tr(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Sb=It(Nb),wb=S({},Dr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$d=It(wb),Cb=S({},mn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Io}),Ab=It(Cb),Mb=S({},Ol,{propertyName:0,elapsedTime:0,pseudoElement:0}),Tb=It(Mb),kb=S({},Dr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Eb=It(kb),Db=S({},Ol,{newState:0,oldState:0}),zb=It(Db),Rb=[9,13,27,32],Bo=Ba&&"CompositionEvent"in window,fn=null;Ba&&"documentMode"in document&&(fn=document.documentMode);var Ob=Ba&&"TextEvent"in window&&!fn,Pd=Ba&&(!Bo||fn&&8<fn&&11>=fn),Gd=" ",Vd=!1;function Yd(e,t){switch(e){case"keyup":return Rb.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Qd(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ms=!1;function Lb(e,t){switch(e){case"compositionend":return Qd(t);case"keypress":return t.which!==32?null:(Vd=!0,Gd);case"textInput":return e=t.data,e===Gd&&Vd?null:e;default:return null}}function _b(e,t){if(ms)return e==="compositionend"||!Bo&&Yd(e,t)?(e=Ud(),Mr=Ro=nl=null,ms=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Pd&&t.locale!=="ko"?null:t.data;default:return null}}var Ib={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Xd(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Ib[e.type]:t==="textarea"}function Zd(e,t,l,s){us?ds?ds.push(s):ds=[s]:us=s,t=yi(t,"onChange"),0<t.length&&(l=new Er("onChange","change",null,l,s),e.push({event:l,listeners:t}))}var hn=null,pn=null;function Bb(e){Rf(e,0)}function zr(e){var t=cn(e);if(Dd(t))return e}function Kd(e,t){if(e==="change")return t}var Jd=!1;if(Ba){var Uo;if(Ba){var Ho="oninput"in document;if(!Ho){var Wd=document.createElement("div");Wd.setAttribute("oninput","return;"),Ho=typeof Wd.oninput=="function"}Uo=Ho}else Uo=!1;Jd=Uo&&(!document.documentMode||9<document.documentMode)}function em(){hn&&(hn.detachEvent("onpropertychange",tm),pn=hn=null)}function tm(e){if(e.propertyName==="value"&&zr(pn)){var t=[];Zd(t,pn,e,Eo(e)),Bd(Bb,t)}}function Ub(e,t,l){e==="focusin"?(em(),hn=t,pn=l,hn.attachEvent("onpropertychange",tm)):e==="focusout"&&em()}function Hb(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return zr(pn)}function Fb(e,t){if(e==="click")return zr(t)}function qb(e,t){if(e==="input"||e==="change")return zr(t)}function $b(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Vt=typeof Object.is=="function"?Object.is:$b;function bn(e,t){if(Vt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var l=Object.keys(e),s=Object.keys(t);if(l.length!==s.length)return!1;for(s=0;s<l.length;s++){var r=l[s];if(!Ie.call(t,r)||!Vt(e[r],t[r]))return!1}return!0}function am(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lm(e,t){var l=am(e);e=0;for(var s;l;){if(l.nodeType===3){if(s=e+l.textContent.length,e<=t&&s>=t)return{node:l,offset:t-e};e=s}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=am(l)}}function sm(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?sm(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function nm(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Cr(e.document);t instanceof e.HTMLIFrameElement;){try{var l=typeof t.contentWindow.location.href=="string"}catch{l=!1}if(l)e=t.contentWindow;else break;t=Cr(e.document)}return t}function Fo(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var Pb=Ba&&"documentMode"in document&&11>=document.documentMode,xs=null,qo=null,vn=null,$o=!1;function rm(e,t,l){var s=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;$o||xs==null||xs!==Cr(s)||(s=xs,"selectionStart"in s&&Fo(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),vn&&bn(vn,s)||(vn=s,s=yi(qo,"onSelect"),0<s.length&&(t=new Er("onSelect","select",null,t,l),e.push({event:t,listeners:s}),t.target=xs)))}function Ll(e,t){var l={};return l[e.toLowerCase()]=t.toLowerCase(),l["Webkit"+e]="webkit"+t,l["Moz"+e]="moz"+t,l}var fs={animationend:Ll("Animation","AnimationEnd"),animationiteration:Ll("Animation","AnimationIteration"),animationstart:Ll("Animation","AnimationStart"),transitionrun:Ll("Transition","TransitionRun"),transitionstart:Ll("Transition","TransitionStart"),transitioncancel:Ll("Transition","TransitionCancel"),transitionend:Ll("Transition","TransitionEnd")},Po={},im={};Ba&&(im=document.createElement("div").style,"AnimationEvent"in window||(delete fs.animationend.animation,delete fs.animationiteration.animation,delete fs.animationstart.animation),"TransitionEvent"in window||delete fs.transitionend.transition);function _l(e){if(Po[e])return Po[e];if(!fs[e])return e;var t=fs[e],l;for(l in t)if(t.hasOwnProperty(l)&&l in im)return Po[e]=t[l];return e}var om=_l("animationend"),cm=_l("animationiteration"),um=_l("animationstart"),Gb=_l("transitionrun"),Vb=_l("transitionstart"),Yb=_l("transitioncancel"),dm=_l("transitionend"),mm=new Map,Go="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Go.push("scrollEnd");function pa(e,t){mm.set(e,t),Rl(t,[e])}var Rr=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},na=[],hs=0,Vo=0;function Or(){for(var e=hs,t=Vo=hs=0;t<e;){var l=na[t];na[t++]=null;var s=na[t];na[t++]=null;var r=na[t];na[t++]=null;var i=na[t];if(na[t++]=null,s!==null&&r!==null){var b=s.pending;b===null?r.next=r:(r.next=b.next,b.next=r),s.pending=r}i!==0&&xm(l,r,i)}}function Lr(e,t,l,s){na[hs++]=e,na[hs++]=t,na[hs++]=l,na[hs++]=s,Vo|=s,e.lanes|=s,e=e.alternate,e!==null&&(e.lanes|=s)}function Yo(e,t,l,s){return Lr(e,t,l,s),_r(e)}function Il(e,t){return Lr(e,null,null,t),_r(e)}function xm(e,t,l){e.lanes|=l;var s=e.alternate;s!==null&&(s.lanes|=l);for(var r=!1,i=e.return;i!==null;)i.childLanes|=l,s=i.alternate,s!==null&&(s.childLanes|=l),i.tag===22&&(e=i.stateNode,e===null||e._visibility&1||(r=!0)),e=i,i=i.return;return e.tag===3?(i=e.stateNode,r&&t!==null&&(r=31-Ot(l),e=i.hiddenUpdates,s=e[r],s===null?e[r]=[t]:s.push(t),t.lane=l|536870912),i):null}function _r(e){if(50<Hn)throw Hn=0,au=null,Error(u(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var ps={};function Qb(e,t,l,s){this.tag=e,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Yt(e,t,l,s){return new Qb(e,t,l,s)}function Qo(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Ua(e,t){var l=e.alternate;return l===null?(l=Yt(e.tag,t,e.key,e.mode),l.elementType=e.elementType,l.type=e.type,l.stateNode=e.stateNode,l.alternate=e,e.alternate=l):(l.pendingProps=t,l.type=e.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=e.flags&65011712,l.childLanes=e.childLanes,l.lanes=e.lanes,l.child=e.child,l.memoizedProps=e.memoizedProps,l.memoizedState=e.memoizedState,l.updateQueue=e.updateQueue,t=e.dependencies,l.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},l.sibling=e.sibling,l.index=e.index,l.ref=e.ref,l.refCleanup=e.refCleanup,l}function fm(e,t){e.flags&=65011714;var l=e.alternate;return l===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=l.childLanes,e.lanes=l.lanes,e.child=l.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=l.memoizedProps,e.memoizedState=l.memoizedState,e.updateQueue=l.updateQueue,e.type=l.type,t=l.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Ir(e,t,l,s,r,i){var b=0;if(s=e,typeof e=="function")Qo(e)&&(b=1);else if(typeof e=="string")b=Wv(e,l,de.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case $:return e=Yt(31,l,t,r),e.elementType=$,e.lanes=i,e;case A:return Bl(l.children,r,i,t);case N:b=8,r|=24;break;case y:return e=Yt(12,l,t,r|2),e.elementType=y,e.lanes=i,e;case J:return e=Yt(13,l,t,r),e.elementType=J,e.lanes=i,e;case q:return e=Yt(19,l,t,r),e.elementType=q,e.lanes=i,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case p:b=10;break e;case w:b=9;break e;case I:b=11;break e;case Z:b=14;break e;case D:b=16,s=null;break e}b=29,l=Error(u(130,e===null?"null":typeof e,"")),s=null}return t=Yt(b,l,t,r),t.elementType=e,t.type=s,t.lanes=i,t}function Bl(e,t,l,s){return e=Yt(7,e,s,t),e.lanes=l,e}function Xo(e,t,l){return e=Yt(6,e,null,t),e.lanes=l,e}function hm(e){var t=Yt(18,null,null,0);return t.stateNode=e,t}function Zo(e,t,l){return t=Yt(4,e.children!==null?e.children:[],e.key,t),t.lanes=l,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var pm=new WeakMap;function ra(e,t){if(typeof e=="object"&&e!==null){var l=pm.get(e);return l!==void 0?l:(t={value:e,source:t,stack:Pe(t)},pm.set(e,t),t)}return{value:e,source:t,stack:Pe(t)}}var bs=[],vs=0,Br=null,gn=0,ia=[],oa=0,rl=null,Ca=1,Aa="";function Ha(e,t){bs[vs++]=gn,bs[vs++]=Br,Br=e,gn=t}function bm(e,t,l){ia[oa++]=Ca,ia[oa++]=Aa,ia[oa++]=rl,rl=e;var s=Ca;e=Aa;var r=32-Ot(s)-1;s&=~(1<<r),l+=1;var i=32-Ot(t)+r;if(30<i){var b=r-r%5;i=(s&(1<<b)-1).toString(32),s>>=b,r-=b,Ca=1<<32-Ot(t)+r|l<<r|s,Aa=i+e}else Ca=1<<i|l<<r|s,Aa=e}function Ko(e){e.return!==null&&(Ha(e,1),bm(e,1,0))}function Jo(e){for(;e===Br;)Br=bs[--vs],bs[vs]=null,gn=bs[--vs],bs[vs]=null;for(;e===rl;)rl=ia[--oa],ia[oa]=null,Aa=ia[--oa],ia[oa]=null,Ca=ia[--oa],ia[oa]=null}function vm(e,t){ia[oa++]=Ca,ia[oa++]=Aa,ia[oa++]=rl,Ca=t.id,Aa=t.overflow,rl=e}var Nt=null,We=null,Be=!1,il=null,ca=!1,Wo=Error(u(519));function ol(e){var t=Error(u(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw yn(ra(t,e)),Wo}function gm(e){var t=e.stateNode,l=e.type,s=e.memoizedProps;switch(t[pt]=e,t[Tt]=s,l){case"dialog":ze("cancel",t),ze("close",t);break;case"iframe":case"object":case"embed":ze("load",t);break;case"video":case"audio":for(l=0;l<qn.length;l++)ze(qn[l],t);break;case"source":ze("error",t);break;case"img":case"image":case"link":ze("error",t),ze("load",t);break;case"details":ze("toggle",t);break;case"input":ze("invalid",t),zd(t,s.value,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name,!0);break;case"select":ze("invalid",t);break;case"textarea":ze("invalid",t),Od(t,s.value,s.defaultValue,s.children)}l=s.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||t.textContent===""+l||s.suppressHydrationWarning===!0||If(t.textContent,l)?(s.popover!=null&&(ze("beforetoggle",t),ze("toggle",t)),s.onScroll!=null&&ze("scroll",t),s.onScrollEnd!=null&&ze("scrollend",t),s.onClick!=null&&(t.onclick=Ia),t=!0):t=!1,t||ol(e,!0)}function ym(e){for(Nt=e.return;Nt;)switch(Nt.tag){case 5:case 31:case 13:ca=!1;return;case 27:case 3:ca=!0;return;default:Nt=Nt.return}}function gs(e){if(e!==Nt)return!1;if(!Be)return ym(e),Be=!0,!1;var t=e.tag,l;if((l=t!==3&&t!==27)&&((l=t===5)&&(l=e.type,l=!(l!=="form"&&l!=="button")||bu(e.type,e.memoizedProps)),l=!l),l&&We&&ol(e),ym(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(u(317));We=Vf(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(u(317));We=Vf(e)}else t===27?(t=We,Nl(e.type)?(e=Nu,Nu=null,We=e):We=t):We=Nt?da(e.stateNode.nextSibling):null;return!0}function Ul(){We=Nt=null,Be=!1}function ec(){var e=il;return e!==null&&(Ft===null?Ft=e:Ft.push.apply(Ft,e),il=null),e}function yn(e){il===null?il=[e]:il.push(e)}var tc=R(null),Hl=null,Fa=null;function cl(e,t,l){oe(tc,t._currentValue),t._currentValue=l}function qa(e){e._currentValue=tc.current,ee(tc)}function ac(e,t,l){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===l)break;e=e.return}}function lc(e,t,l,s){var r=e.child;for(r!==null&&(r.return=e);r!==null;){var i=r.dependencies;if(i!==null){var b=r.child;i=i.firstContext;e:for(;i!==null;){var C=i;i=r;for(var L=0;L<t.length;L++)if(C.context===t[L]){i.lanes|=l,C=i.alternate,C!==null&&(C.lanes|=l),ac(i.return,l,e),s||(b=null);break e}i=C.next}}else if(r.tag===18){if(b=r.return,b===null)throw Error(u(341));b.lanes|=l,i=b.alternate,i!==null&&(i.lanes|=l),ac(b,l,e),b=null}else b=r.child;if(b!==null)b.return=r;else for(b=r;b!==null;){if(b===e){b=null;break}if(r=b.sibling,r!==null){r.return=b.return,b=r;break}b=b.return}r=b}}function ys(e,t,l,s){e=null;for(var r=t,i=!1;r!==null;){if(!i){if((r.flags&524288)!==0)i=!0;else if((r.flags&262144)!==0)break}if(r.tag===10){var b=r.alternate;if(b===null)throw Error(u(387));if(b=b.memoizedProps,b!==null){var C=r.type;Vt(r.pendingProps.value,b.value)||(e!==null?e.push(C):e=[C])}}else if(r===te.current){if(b=r.alternate,b===null)throw Error(u(387));b.memoizedState.memoizedState!==r.memoizedState.memoizedState&&(e!==null?e.push(Yn):e=[Yn])}r=r.return}e!==null&&lc(t,e,l,s),t.flags|=262144}function Ur(e){for(e=e.firstContext;e!==null;){if(!Vt(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Fl(e){Hl=e,Fa=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function St(e){return jm(Hl,e)}function Hr(e,t){return Hl===null&&Fl(e),jm(e,t)}function jm(e,t){var l=t._currentValue;if(t={context:t,memoizedValue:l,next:null},Fa===null){if(e===null)throw Error(u(308));Fa=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Fa=Fa.next=t;return l}var Xb=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(l,s){e.push(s)}};this.abort=function(){t.aborted=!0,e.forEach(function(l){return l()})}},Zb=n.unstable_scheduleCallback,Kb=n.unstable_NormalPriority,ut={$$typeof:p,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function sc(){return{controller:new Xb,data:new Map,refCount:0}}function jn(e){e.refCount--,e.refCount===0&&Zb(Kb,function(){e.controller.abort()})}var Nn=null,nc=0,js=0,Ns=null;function Jb(e,t){if(Nn===null){var l=Nn=[];nc=0,js=ou(),Ns={status:"pending",value:void 0,then:function(s){l.push(s)}}}return nc++,t.then(Nm,Nm),t}function Nm(){if(--nc===0&&Nn!==null){Ns!==null&&(Ns.status="fulfilled");var e=Nn;Nn=null,js=0,Ns=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function Wb(e,t){var l=[],s={status:"pending",value:null,reason:null,then:function(r){l.push(r)}};return e.then(function(){s.status="fulfilled",s.value=t;for(var r=0;r<l.length;r++)(0,l[r])(t)},function(r){for(s.status="rejected",s.reason=r,r=0;r<l.length;r++)(0,l[r])(void 0)}),s}var Sm=F.S;F.S=function(e,t){rf=Ke(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&Jb(e,t),Sm!==null&&Sm(e,t)};var ql=R(null);function rc(){var e=ql.current;return e!==null?e:Je.pooledCache}function Fr(e,t){t===null?oe(ql,ql.current):oe(ql,t.pool)}function wm(){var e=rc();return e===null?null:{parent:ut._currentValue,pool:e}}var Ss=Error(u(460)),ic=Error(u(474)),qr=Error(u(542)),$r={then:function(){}};function Cm(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Am(e,t,l){switch(l=e[l],l===void 0?e.push(t):l!==t&&(t.then(Ia,Ia),t=l),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Tm(e),e;default:if(typeof t.status=="string")t.then(Ia,Ia);else{if(e=Je,e!==null&&100<e.shellSuspendCounter)throw Error(u(482));e=t,e.status="pending",e.then(function(s){if(t.status==="pending"){var r=t;r.status="fulfilled",r.value=s}},function(s){if(t.status==="pending"){var r=t;r.status="rejected",r.reason=s}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Tm(e),e}throw Pl=t,Ss}}function $l(e){try{var t=e._init;return t(e._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(Pl=l,Ss):l}}var Pl=null;function Mm(){if(Pl===null)throw Error(u(459));var e=Pl;return Pl=null,e}function Tm(e){if(e===Ss||e===qr)throw Error(u(483))}var ws=null,Sn=0;function Pr(e){var t=Sn;return Sn+=1,ws===null&&(ws=[]),Am(ws,e,t)}function wn(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function Gr(e,t){throw t.$$typeof===M?Error(u(525)):(e=Object.prototype.toString.call(t),Error(u(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function km(e){function t(H,B){if(e){var V=H.deletions;V===null?(H.deletions=[B],H.flags|=16):V.push(B)}}function l(H,B){if(!e)return null;for(;B!==null;)t(H,B),B=B.sibling;return null}function s(H){for(var B=new Map;H!==null;)H.key!==null?B.set(H.key,H):B.set(H.index,H),H=H.sibling;return B}function r(H,B){return H=Ua(H,B),H.index=0,H.sibling=null,H}function i(H,B,V){return H.index=V,e?(V=H.alternate,V!==null?(V=V.index,V<B?(H.flags|=67108866,B):V):(H.flags|=67108866,B)):(H.flags|=1048576,B)}function b(H){return e&&H.alternate===null&&(H.flags|=67108866),H}function C(H,B,V,ne){return B===null||B.tag!==6?(B=Xo(V,H.mode,ne),B.return=H,B):(B=r(B,V),B.return=H,B)}function L(H,B,V,ne){var Ne=V.type;return Ne===A?ae(H,B,V.props.children,ne,V.key):B!==null&&(B.elementType===Ne||typeof Ne=="object"&&Ne!==null&&Ne.$$typeof===D&&$l(Ne)===B.type)?(B=r(B,V.props),wn(B,V),B.return=H,B):(B=Ir(V.type,V.key,V.props,null,H.mode,ne),wn(B,V),B.return=H,B)}function Y(H,B,V,ne){return B===null||B.tag!==4||B.stateNode.containerInfo!==V.containerInfo||B.stateNode.implementation!==V.implementation?(B=Zo(V,H.mode,ne),B.return=H,B):(B=r(B,V.children||[]),B.return=H,B)}function ae(H,B,V,ne,Ne){return B===null||B.tag!==7?(B=Bl(V,H.mode,ne,Ne),B.return=H,B):(B=r(B,V),B.return=H,B)}function re(H,B,V){if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return B=Xo(""+B,H.mode,V),B.return=H,B;if(typeof B=="object"&&B!==null){switch(B.$$typeof){case k:return V=Ir(B.type,B.key,B.props,null,H.mode,V),wn(V,B),V.return=H,V;case z:return B=Zo(B,H.mode,V),B.return=H,B;case D:return B=$l(B),re(H,B,V)}if(se(B)||E(B))return B=Bl(B,H.mode,V,null),B.return=H,B;if(typeof B.then=="function")return re(H,Pr(B),V);if(B.$$typeof===p)return re(H,Hr(H,B),V);Gr(H,B)}return null}function Q(H,B,V,ne){var Ne=B!==null?B.key:null;if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return Ne!==null?null:C(H,B,""+V,ne);if(typeof V=="object"&&V!==null){switch(V.$$typeof){case k:return V.key===Ne?L(H,B,V,ne):null;case z:return V.key===Ne?Y(H,B,V,ne):null;case D:return V=$l(V),Q(H,B,V,ne)}if(se(V)||E(V))return Ne!==null?null:ae(H,B,V,ne,null);if(typeof V.then=="function")return Q(H,B,Pr(V),ne);if(V.$$typeof===p)return Q(H,B,Hr(H,V),ne);Gr(H,V)}return null}function K(H,B,V,ne,Ne){if(typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint")return H=H.get(V)||null,C(B,H,""+ne,Ne);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case k:return H=H.get(ne.key===null?V:ne.key)||null,L(B,H,ne,Ne);case z:return H=H.get(ne.key===null?V:ne.key)||null,Y(B,H,ne,Ne);case D:return ne=$l(ne),K(H,B,V,ne,Ne)}if(se(ne)||E(ne))return H=H.get(V)||null,ae(B,H,ne,Ne,null);if(typeof ne.then=="function")return K(H,B,V,Pr(ne),Ne);if(ne.$$typeof===p)return K(H,B,V,Hr(B,ne),Ne);Gr(B,ne)}return null}function ge(H,B,V,ne){for(var Ne=null,He=null,ye=B,Ee=B=0,_e=null;ye!==null&&Ee<V.length;Ee++){ye.index>Ee?(_e=ye,ye=null):_e=ye.sibling;var Fe=Q(H,ye,V[Ee],ne);if(Fe===null){ye===null&&(ye=_e);break}e&&ye&&Fe.alternate===null&&t(H,ye),B=i(Fe,B,Ee),He===null?Ne=Fe:He.sibling=Fe,He=Fe,ye=_e}if(Ee===V.length)return l(H,ye),Be&&Ha(H,Ee),Ne;if(ye===null){for(;Ee<V.length;Ee++)ye=re(H,V[Ee],ne),ye!==null&&(B=i(ye,B,Ee),He===null?Ne=ye:He.sibling=ye,He=ye);return Be&&Ha(H,Ee),Ne}for(ye=s(ye);Ee<V.length;Ee++)_e=K(ye,H,Ee,V[Ee],ne),_e!==null&&(e&&_e.alternate!==null&&ye.delete(_e.key===null?Ee:_e.key),B=i(_e,B,Ee),He===null?Ne=_e:He.sibling=_e,He=_e);return e&&ye.forEach(function(Ml){return t(H,Ml)}),Be&&Ha(H,Ee),Ne}function we(H,B,V,ne){if(V==null)throw Error(u(151));for(var Ne=null,He=null,ye=B,Ee=B=0,_e=null,Fe=V.next();ye!==null&&!Fe.done;Ee++,Fe=V.next()){ye.index>Ee?(_e=ye,ye=null):_e=ye.sibling;var Ml=Q(H,ye,Fe.value,ne);if(Ml===null){ye===null&&(ye=_e);break}e&&ye&&Ml.alternate===null&&t(H,ye),B=i(Ml,B,Ee),He===null?Ne=Ml:He.sibling=Ml,He=Ml,ye=_e}if(Fe.done)return l(H,ye),Be&&Ha(H,Ee),Ne;if(ye===null){for(;!Fe.done;Ee++,Fe=V.next())Fe=re(H,Fe.value,ne),Fe!==null&&(B=i(Fe,B,Ee),He===null?Ne=Fe:He.sibling=Fe,He=Fe);return Be&&Ha(H,Ee),Ne}for(ye=s(ye);!Fe.done;Ee++,Fe=V.next())Fe=K(ye,H,Ee,Fe.value,ne),Fe!==null&&(e&&Fe.alternate!==null&&ye.delete(Fe.key===null?Ee:Fe.key),B=i(Fe,B,Ee),He===null?Ne=Fe:He.sibling=Fe,He=Fe);return e&&ye.forEach(function(ug){return t(H,ug)}),Be&&Ha(H,Ee),Ne}function Xe(H,B,V,ne){if(typeof V=="object"&&V!==null&&V.type===A&&V.key===null&&(V=V.props.children),typeof V=="object"&&V!==null){switch(V.$$typeof){case k:e:{for(var Ne=V.key;B!==null;){if(B.key===Ne){if(Ne=V.type,Ne===A){if(B.tag===7){l(H,B.sibling),ne=r(B,V.props.children),ne.return=H,H=ne;break e}}else if(B.elementType===Ne||typeof Ne=="object"&&Ne!==null&&Ne.$$typeof===D&&$l(Ne)===B.type){l(H,B.sibling),ne=r(B,V.props),wn(ne,V),ne.return=H,H=ne;break e}l(H,B);break}else t(H,B);B=B.sibling}V.type===A?(ne=Bl(V.props.children,H.mode,ne,V.key),ne.return=H,H=ne):(ne=Ir(V.type,V.key,V.props,null,H.mode,ne),wn(ne,V),ne.return=H,H=ne)}return b(H);case z:e:{for(Ne=V.key;B!==null;){if(B.key===Ne)if(B.tag===4&&B.stateNode.containerInfo===V.containerInfo&&B.stateNode.implementation===V.implementation){l(H,B.sibling),ne=r(B,V.children||[]),ne.return=H,H=ne;break e}else{l(H,B);break}else t(H,B);B=B.sibling}ne=Zo(V,H.mode,ne),ne.return=H,H=ne}return b(H);case D:return V=$l(V),Xe(H,B,V,ne)}if(se(V))return ge(H,B,V,ne);if(E(V)){if(Ne=E(V),typeof Ne!="function")throw Error(u(150));return V=Ne.call(V),we(H,B,V,ne)}if(typeof V.then=="function")return Xe(H,B,Pr(V),ne);if(V.$$typeof===p)return Xe(H,B,Hr(H,V),ne);Gr(H,V)}return typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint"?(V=""+V,B!==null&&B.tag===6?(l(H,B.sibling),ne=r(B,V),ne.return=H,H=ne):(l(H,B),ne=Xo(V,H.mode,ne),ne.return=H,H=ne),b(H)):l(H,B)}return function(H,B,V,ne){try{Sn=0;var Ne=Xe(H,B,V,ne);return ws=null,Ne}catch(ye){if(ye===Ss||ye===qr)throw ye;var He=Yt(29,ye,null,H.mode);return He.lanes=ne,He.return=H,He}}}var Gl=km(!0),Em=km(!1),ul=!1;function oc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function cc(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function dl(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function ml(e,t,l){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,(qe&2)!==0){var r=s.pending;return r===null?t.next=t:(t.next=r.next,r.next=t),s.pending=t,t=_r(e),xm(e,null,l),t}return Lr(e,s,t,l),_r(e)}function Cn(e,t,l){if(t=t.updateQueue,t!==null&&(t=t.shared,(l&4194048)!==0)){var s=t.lanes;s&=e.pendingLanes,l|=s,t.lanes=l,gr(e,l)}}function uc(e,t){var l=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,l===s)){var r=null,i=null;if(l=l.firstBaseUpdate,l!==null){do{var b={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};i===null?r=i=b:i=i.next=b,l=l.next}while(l!==null);i===null?r=i=t:i=i.next=t}else r=i=t;l={baseState:s.baseState,firstBaseUpdate:r,lastBaseUpdate:i,shared:s.shared,callbacks:s.callbacks},e.updateQueue=l;return}e=l.lastBaseUpdate,e===null?l.firstBaseUpdate=t:e.next=t,l.lastBaseUpdate=t}var dc=!1;function An(){if(dc){var e=Ns;if(e!==null)throw e}}function Mn(e,t,l,s){dc=!1;var r=e.updateQueue;ul=!1;var i=r.firstBaseUpdate,b=r.lastBaseUpdate,C=r.shared.pending;if(C!==null){r.shared.pending=null;var L=C,Y=L.next;L.next=null,b===null?i=Y:b.next=Y,b=L;var ae=e.alternate;ae!==null&&(ae=ae.updateQueue,C=ae.lastBaseUpdate,C!==b&&(C===null?ae.firstBaseUpdate=Y:C.next=Y,ae.lastBaseUpdate=L))}if(i!==null){var re=r.baseState;b=0,ae=Y=L=null,C=i;do{var Q=C.lane&-536870913,K=Q!==C.lane;if(K?(Le&Q)===Q:(s&Q)===Q){Q!==0&&Q===js&&(dc=!0),ae!==null&&(ae=ae.next={lane:0,tag:C.tag,payload:C.payload,callback:null,next:null});e:{var ge=e,we=C;Q=t;var Xe=l;switch(we.tag){case 1:if(ge=we.payload,typeof ge=="function"){re=ge.call(Xe,re,Q);break e}re=ge;break e;case 3:ge.flags=ge.flags&-65537|128;case 0:if(ge=we.payload,Q=typeof ge=="function"?ge.call(Xe,re,Q):ge,Q==null)break e;re=S({},re,Q);break e;case 2:ul=!0}}Q=C.callback,Q!==null&&(e.flags|=64,K&&(e.flags|=8192),K=r.callbacks,K===null?r.callbacks=[Q]:K.push(Q))}else K={lane:Q,tag:C.tag,payload:C.payload,callback:C.callback,next:null},ae===null?(Y=ae=K,L=re):ae=ae.next=K,b|=Q;if(C=C.next,C===null){if(C=r.shared.pending,C===null)break;K=C,C=K.next,K.next=null,r.lastBaseUpdate=K,r.shared.pending=null}}while(!0);ae===null&&(L=re),r.baseState=L,r.firstBaseUpdate=Y,r.lastBaseUpdate=ae,i===null&&(r.shared.lanes=0),bl|=b,e.lanes=b,e.memoizedState=re}}function Dm(e,t){if(typeof e!="function")throw Error(u(191,e));e.call(t)}function zm(e,t){var l=e.callbacks;if(l!==null)for(e.callbacks=null,e=0;e<l.length;e++)Dm(l[e],t)}var Cs=R(null),Vr=R(0);function Rm(e,t){e=Ka,oe(Vr,e),oe(Cs,t),Ka=e|t.baseLanes}function mc(){oe(Vr,Ka),oe(Cs,Cs.current)}function xc(){Ka=Vr.current,ee(Cs),ee(Vr)}var Qt=R(null),ua=null;function xl(e){var t=e.alternate;oe(ot,ot.current&1),oe(Qt,e),ua===null&&(t===null||Cs.current!==null||t.memoizedState!==null)&&(ua=e)}function fc(e){oe(ot,ot.current),oe(Qt,e),ua===null&&(ua=e)}function Om(e){e.tag===22?(oe(ot,ot.current),oe(Qt,e),ua===null&&(ua=e)):fl()}function fl(){oe(ot,ot.current),oe(Qt,Qt.current)}function Xt(e){ee(Qt),ua===e&&(ua=null),ee(ot)}var ot=R(0);function Yr(e){for(var t=e;t!==null;){if(t.tag===13){var l=t.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||yu(l)||ju(l)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var $a=0,ke=null,Ye=null,dt=null,Qr=!1,As=!1,Vl=!1,Xr=0,Tn=0,Ms=null,ev=0;function rt(){throw Error(u(321))}function hc(e,t){if(t===null)return!1;for(var l=0;l<t.length&&l<e.length;l++)if(!Vt(e[l],t[l]))return!1;return!0}function pc(e,t,l,s,r,i){return $a=i,ke=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,F.H=e===null||e.memoizedState===null?bx:Dc,Vl=!1,i=l(s,r),Vl=!1,As&&(i=_m(t,l,s,r)),Lm(e),i}function Lm(e){F.H=Dn;var t=Ye!==null&&Ye.next!==null;if($a=0,dt=Ye=ke=null,Qr=!1,Tn=0,Ms=null,t)throw Error(u(300));e===null||mt||(e=e.dependencies,e!==null&&Ur(e)&&(mt=!0))}function _m(e,t,l,s){ke=e;var r=0;do{if(As&&(Ms=null),Tn=0,As=!1,25<=r)throw Error(u(301));if(r+=1,dt=Ye=null,e.updateQueue!=null){var i=e.updateQueue;i.lastEffect=null,i.events=null,i.stores=null,i.memoCache!=null&&(i.memoCache.index=0)}F.H=vx,i=t(l,s)}while(As);return i}function tv(){var e=F.H,t=e.useState()[0];return t=typeof t.then=="function"?kn(t):t,e=e.useState()[0],(Ye!==null?Ye.memoizedState:null)!==e&&(ke.flags|=1024),t}function bc(){var e=Xr!==0;return Xr=0,e}function vc(e,t,l){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~l}function gc(e){if(Qr){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}Qr=!1}$a=0,dt=Ye=ke=null,As=!1,Tn=Xr=0,Ms=null}function Lt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return dt===null?ke.memoizedState=dt=e:dt=dt.next=e,dt}function ct(){if(Ye===null){var e=ke.alternate;e=e!==null?e.memoizedState:null}else e=Ye.next;var t=dt===null?ke.memoizedState:dt.next;if(t!==null)dt=t,Ye=e;else{if(e===null)throw ke.alternate===null?Error(u(467)):Error(u(310));Ye=e,e={memoizedState:Ye.memoizedState,baseState:Ye.baseState,baseQueue:Ye.baseQueue,queue:Ye.queue,next:null},dt===null?ke.memoizedState=dt=e:dt=dt.next=e}return dt}function Zr(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function kn(e){var t=Tn;return Tn+=1,Ms===null&&(Ms=[]),e=Am(Ms,e,t),t=ke,(dt===null?t.memoizedState:dt.next)===null&&(t=t.alternate,F.H=t===null||t.memoizedState===null?bx:Dc),e}function Kr(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return kn(e);if(e.$$typeof===p)return St(e)}throw Error(u(438,String(e)))}function yc(e){var t=null,l=ke.updateQueue;if(l!==null&&(t=l.memoCache),t==null){var s=ke.alternate;s!==null&&(s=s.updateQueue,s!==null&&(s=s.memoCache,s!=null&&(t={data:s.data.map(function(r){return r.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),l===null&&(l=Zr(),ke.updateQueue=l),l.memoCache=t,l=t.data[t.index],l===void 0)for(l=t.data[t.index]=Array(e),s=0;s<e;s++)l[s]=P;return t.index++,l}function Pa(e,t){return typeof t=="function"?t(e):t}function Jr(e){var t=ct();return jc(t,Ye,e)}function jc(e,t,l){var s=e.queue;if(s===null)throw Error(u(311));s.lastRenderedReducer=l;var r=e.baseQueue,i=s.pending;if(i!==null){if(r!==null){var b=r.next;r.next=i.next,i.next=b}t.baseQueue=r=i,s.pending=null}if(i=e.baseState,r===null)e.memoizedState=i;else{t=r.next;var C=b=null,L=null,Y=t,ae=!1;do{var re=Y.lane&-536870913;if(re!==Y.lane?(Le&re)===re:($a&re)===re){var Q=Y.revertLane;if(Q===0)L!==null&&(L=L.next={lane:0,revertLane:0,gesture:null,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null}),re===js&&(ae=!0);else if(($a&Q)===Q){Y=Y.next,Q===js&&(ae=!0);continue}else re={lane:0,revertLane:Y.revertLane,gesture:null,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},L===null?(C=L=re,b=i):L=L.next=re,ke.lanes|=Q,bl|=Q;re=Y.action,Vl&&l(i,re),i=Y.hasEagerState?Y.eagerState:l(i,re)}else Q={lane:re,revertLane:Y.revertLane,gesture:Y.gesture,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},L===null?(C=L=Q,b=i):L=L.next=Q,ke.lanes|=re,bl|=re;Y=Y.next}while(Y!==null&&Y!==t);if(L===null?b=i:L.next=C,!Vt(i,e.memoizedState)&&(mt=!0,ae&&(l=Ns,l!==null)))throw l;e.memoizedState=i,e.baseState=b,e.baseQueue=L,s.lastRenderedState=i}return r===null&&(s.lanes=0),[e.memoizedState,s.dispatch]}function Nc(e){var t=ct(),l=t.queue;if(l===null)throw Error(u(311));l.lastRenderedReducer=e;var s=l.dispatch,r=l.pending,i=t.memoizedState;if(r!==null){l.pending=null;var b=r=r.next;do i=e(i,b.action),b=b.next;while(b!==r);Vt(i,t.memoizedState)||(mt=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),l.lastRenderedState=i}return[i,s]}function Im(e,t,l){var s=ke,r=ct(),i=Be;if(i){if(l===void 0)throw Error(u(407));l=l()}else l=t();var b=!Vt((Ye||r).memoizedState,l);if(b&&(r.memoizedState=l,mt=!0),r=r.queue,Cc(Hm.bind(null,s,r,e),[e]),r.getSnapshot!==t||b||dt!==null&&dt.memoizedState.tag&1){if(s.flags|=2048,Ts(9,{destroy:void 0},Um.bind(null,s,r,l,t),null),Je===null)throw Error(u(349));i||($a&127)!==0||Bm(s,t,l)}return l}function Bm(e,t,l){e.flags|=16384,e={getSnapshot:t,value:l},t=ke.updateQueue,t===null?(t=Zr(),ke.updateQueue=t,t.stores=[e]):(l=t.stores,l===null?t.stores=[e]:l.push(e))}function Um(e,t,l,s){t.value=l,t.getSnapshot=s,Fm(t)&&qm(e)}function Hm(e,t,l){return l(function(){Fm(t)&&qm(e)})}function Fm(e){var t=e.getSnapshot;e=e.value;try{var l=t();return!Vt(e,l)}catch{return!0}}function qm(e){var t=Il(e,2);t!==null&&qt(t,e,2)}function Sc(e){var t=Lt();if(typeof e=="function"){var l=e;if(e=l(),Vl){Sa(!0);try{l()}finally{Sa(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pa,lastRenderedState:e},t}function $m(e,t,l,s){return e.baseState=l,jc(e,Ye,typeof s=="function"?s:Pa)}function av(e,t,l,s,r){if(ti(e))throw Error(u(485));if(e=t.action,e!==null){var i={payload:r,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(b){i.listeners.push(b)}};F.T!==null?l(!0):i.isTransition=!1,s(i),l=t.pending,l===null?(i.next=t.pending=i,Pm(t,i)):(i.next=l.next,t.pending=l.next=i)}}function Pm(e,t){var l=t.action,s=t.payload,r=e.state;if(t.isTransition){var i=F.T,b={};F.T=b;try{var C=l(r,s),L=F.S;L!==null&&L(b,C),Gm(e,t,C)}catch(Y){wc(e,t,Y)}finally{i!==null&&b.types!==null&&(i.types=b.types),F.T=i}}else try{i=l(r,s),Gm(e,t,i)}catch(Y){wc(e,t,Y)}}function Gm(e,t,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(s){Vm(e,t,s)},function(s){return wc(e,t,s)}):Vm(e,t,l)}function Vm(e,t,l){t.status="fulfilled",t.value=l,Ym(t),e.state=l,t=e.pending,t!==null&&(l=t.next,l===t?e.pending=null:(l=l.next,t.next=l,Pm(e,l)))}function wc(e,t,l){var s=e.pending;if(e.pending=null,s!==null){s=s.next;do t.status="rejected",t.reason=l,Ym(t),t=t.next;while(t!==s)}e.action=null}function Ym(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Qm(e,t){return t}function Xm(e,t){if(Be){var l=Je.formState;if(l!==null){e:{var s=ke;if(Be){if(We){t:{for(var r=We,i=ca;r.nodeType!==8;){if(!i){r=null;break t}if(r=da(r.nextSibling),r===null){r=null;break t}}i=r.data,r=i==="F!"||i==="F"?r:null}if(r){We=da(r.nextSibling),s=r.data==="F!";break e}}ol(s)}s=!1}s&&(t=l[0])}}return l=Lt(),l.memoizedState=l.baseState=t,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qm,lastRenderedState:t},l.queue=s,l=fx.bind(null,ke,s),s.dispatch=l,s=Sc(!1),i=Ec.bind(null,ke,!1,s.queue),s=Lt(),r={state:t,dispatch:null,action:e,pending:null},s.queue=r,l=av.bind(null,ke,r,i,l),r.dispatch=l,s.memoizedState=e,[t,l,!1]}function Zm(e){var t=ct();return Km(t,Ye,e)}function Km(e,t,l){if(t=jc(e,t,Qm)[0],e=Jr(Pa)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var s=kn(t)}catch(b){throw b===Ss?qr:b}else s=t;t=ct();var r=t.queue,i=r.dispatch;return l!==t.memoizedState&&(ke.flags|=2048,Ts(9,{destroy:void 0},lv.bind(null,r,l),null)),[s,i,e]}function lv(e,t){e.action=t}function Jm(e){var t=ct(),l=Ye;if(l!==null)return Km(t,l,e);ct(),t=t.memoizedState,l=ct();var s=l.queue.dispatch;return l.memoizedState=e,[t,s,!1]}function Ts(e,t,l,s){return e={tag:e,create:l,deps:s,inst:t,next:null},t=ke.updateQueue,t===null&&(t=Zr(),ke.updateQueue=t),l=t.lastEffect,l===null?t.lastEffect=e.next=e:(s=l.next,l.next=e,e.next=s,t.lastEffect=e),e}function Wm(){return ct().memoizedState}function Wr(e,t,l,s){var r=Lt();ke.flags|=e,r.memoizedState=Ts(1|t,{destroy:void 0},l,s===void 0?null:s)}function ei(e,t,l,s){var r=ct();s=s===void 0?null:s;var i=r.memoizedState.inst;Ye!==null&&s!==null&&hc(s,Ye.memoizedState.deps)?r.memoizedState=Ts(t,i,l,s):(ke.flags|=e,r.memoizedState=Ts(1|t,i,l,s))}function ex(e,t){Wr(8390656,8,e,t)}function Cc(e,t){ei(2048,8,e,t)}function sv(e){ke.flags|=4;var t=ke.updateQueue;if(t===null)t=Zr(),ke.updateQueue=t,t.events=[e];else{var l=t.events;l===null?t.events=[e]:l.push(e)}}function tx(e){var t=ct().memoizedState;return sv({ref:t,nextImpl:e}),function(){if((qe&2)!==0)throw Error(u(440));return t.impl.apply(void 0,arguments)}}function ax(e,t){return ei(4,2,e,t)}function lx(e,t){return ei(4,4,e,t)}function sx(e,t){if(typeof t=="function"){e=e();var l=t(e);return function(){typeof l=="function"?l():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function nx(e,t,l){l=l!=null?l.concat([e]):null,ei(4,4,sx.bind(null,t,e),l)}function Ac(){}function rx(e,t){var l=ct();t=t===void 0?null:t;var s=l.memoizedState;return t!==null&&hc(t,s[1])?s[0]:(l.memoizedState=[e,t],e)}function ix(e,t){var l=ct();t=t===void 0?null:t;var s=l.memoizedState;if(t!==null&&hc(t,s[1]))return s[0];if(s=e(),Vl){Sa(!0);try{e()}finally{Sa(!1)}}return l.memoizedState=[s,t],s}function Mc(e,t,l){return l===void 0||($a&1073741824)!==0&&(Le&261930)===0?e.memoizedState=t:(e.memoizedState=l,e=cf(),ke.lanes|=e,bl|=e,l)}function ox(e,t,l,s){return Vt(l,t)?l:Cs.current!==null?(e=Mc(e,l,s),Vt(e,t)||(mt=!0),e):($a&42)===0||($a&1073741824)!==0&&(Le&261930)===0?(mt=!0,e.memoizedState=l):(e=cf(),ke.lanes|=e,bl|=e,t)}function cx(e,t,l,s,r){var i=T.p;T.p=i!==0&&8>i?i:8;var b=F.T,C={};F.T=C,Ec(e,!1,t,l);try{var L=r(),Y=F.S;if(Y!==null&&Y(C,L),L!==null&&typeof L=="object"&&typeof L.then=="function"){var ae=Wb(L,s);En(e,t,ae,Jt(e))}else En(e,t,s,Jt(e))}catch(re){En(e,t,{then:function(){},status:"rejected",reason:re},Jt())}finally{T.p=i,b!==null&&C.types!==null&&(b.types=C.types),F.T=b}}function nv(){}function Tc(e,t,l,s){if(e.tag!==5)throw Error(u(476));var r=ux(e).queue;cx(e,r,t,O,l===null?nv:function(){return dx(e),l(s)})}function ux(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:O,baseState:O,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pa,lastRenderedState:O},next:null};var l={};return t.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pa,lastRenderedState:l},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function dx(e){var t=ux(e);t.next===null&&(t=e.alternate.memoizedState),En(e,t.next.queue,{},Jt())}function kc(){return St(Yn)}function mx(){return ct().memoizedState}function xx(){return ct().memoizedState}function rv(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var l=Jt();e=dl(l);var s=ml(t,e,l);s!==null&&(qt(s,t,l),Cn(s,t,l)),t={cache:sc()},e.payload=t;return}t=t.return}}function iv(e,t,l){var s=Jt();l={lane:s,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},ti(e)?hx(t,l):(l=Yo(e,t,l,s),l!==null&&(qt(l,e,s),px(l,t,s)))}function fx(e,t,l){var s=Jt();En(e,t,l,s)}function En(e,t,l,s){var r={lane:s,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(ti(e))hx(t,r);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var b=t.lastRenderedState,C=i(b,l);if(r.hasEagerState=!0,r.eagerState=C,Vt(C,b))return Lr(e,t,r,0),Je===null&&Or(),!1}catch{}if(l=Yo(e,t,r,s),l!==null)return qt(l,e,s),px(l,t,s),!0}return!1}function Ec(e,t,l,s){if(s={lane:2,revertLane:ou(),gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null},ti(e)){if(t)throw Error(u(479))}else t=Yo(e,l,s,2),t!==null&&qt(t,e,2)}function ti(e){var t=e.alternate;return e===ke||t!==null&&t===ke}function hx(e,t){As=Qr=!0;var l=e.pending;l===null?t.next=t:(t.next=l.next,l.next=t),e.pending=t}function px(e,t,l){if((l&4194048)!==0){var s=t.lanes;s&=e.pendingLanes,l|=s,t.lanes=l,gr(e,l)}}var Dn={readContext:St,use:Kr,useCallback:rt,useContext:rt,useEffect:rt,useImperativeHandle:rt,useLayoutEffect:rt,useInsertionEffect:rt,useMemo:rt,useReducer:rt,useRef:rt,useState:rt,useDebugValue:rt,useDeferredValue:rt,useTransition:rt,useSyncExternalStore:rt,useId:rt,useHostTransitionStatus:rt,useFormState:rt,useActionState:rt,useOptimistic:rt,useMemoCache:rt,useCacheRefresh:rt};Dn.useEffectEvent=rt;var bx={readContext:St,use:Kr,useCallback:function(e,t){return Lt().memoizedState=[e,t===void 0?null:t],e},useContext:St,useEffect:ex,useImperativeHandle:function(e,t,l){l=l!=null?l.concat([e]):null,Wr(4194308,4,sx.bind(null,t,e),l)},useLayoutEffect:function(e,t){return Wr(4194308,4,e,t)},useInsertionEffect:function(e,t){Wr(4,2,e,t)},useMemo:function(e,t){var l=Lt();t=t===void 0?null:t;var s=e();if(Vl){Sa(!0);try{e()}finally{Sa(!1)}}return l.memoizedState=[s,t],s},useReducer:function(e,t,l){var s=Lt();if(l!==void 0){var r=l(t);if(Vl){Sa(!0);try{l(t)}finally{Sa(!1)}}}else r=t;return s.memoizedState=s.baseState=r,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:r},s.queue=e,e=e.dispatch=iv.bind(null,ke,e),[s.memoizedState,e]},useRef:function(e){var t=Lt();return e={current:e},t.memoizedState=e},useState:function(e){e=Sc(e);var t=e.queue,l=fx.bind(null,ke,t);return t.dispatch=l,[e.memoizedState,l]},useDebugValue:Ac,useDeferredValue:function(e,t){var l=Lt();return Mc(l,e,t)},useTransition:function(){var e=Sc(!1);return e=cx.bind(null,ke,e.queue,!0,!1),Lt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,l){var s=ke,r=Lt();if(Be){if(l===void 0)throw Error(u(407));l=l()}else{if(l=t(),Je===null)throw Error(u(349));(Le&127)!==0||Bm(s,t,l)}r.memoizedState=l;var i={value:l,getSnapshot:t};return r.queue=i,ex(Hm.bind(null,s,i,e),[e]),s.flags|=2048,Ts(9,{destroy:void 0},Um.bind(null,s,i,l,t),null),l},useId:function(){var e=Lt(),t=Je.identifierPrefix;if(Be){var l=Aa,s=Ca;l=(s&~(1<<32-Ot(s)-1)).toString(32)+l,t="_"+t+"R_"+l,l=Xr++,0<l&&(t+="H"+l.toString(32)),t+="_"}else l=ev++,t="_"+t+"r_"+l.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:kc,useFormState:Xm,useActionState:Xm,useOptimistic:function(e){var t=Lt();t.memoizedState=t.baseState=e;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=l,t=Ec.bind(null,ke,!0,l),l.dispatch=t,[e,t]},useMemoCache:yc,useCacheRefresh:function(){return Lt().memoizedState=rv.bind(null,ke)},useEffectEvent:function(e){var t=Lt(),l={impl:e};return t.memoizedState=l,function(){if((qe&2)!==0)throw Error(u(440));return l.impl.apply(void 0,arguments)}}},Dc={readContext:St,use:Kr,useCallback:rx,useContext:St,useEffect:Cc,useImperativeHandle:nx,useInsertionEffect:ax,useLayoutEffect:lx,useMemo:ix,useReducer:Jr,useRef:Wm,useState:function(){return Jr(Pa)},useDebugValue:Ac,useDeferredValue:function(e,t){var l=ct();return ox(l,Ye.memoizedState,e,t)},useTransition:function(){var e=Jr(Pa)[0],t=ct().memoizedState;return[typeof e=="boolean"?e:kn(e),t]},useSyncExternalStore:Im,useId:mx,useHostTransitionStatus:kc,useFormState:Zm,useActionState:Zm,useOptimistic:function(e,t){var l=ct();return $m(l,Ye,e,t)},useMemoCache:yc,useCacheRefresh:xx};Dc.useEffectEvent=tx;var vx={readContext:St,use:Kr,useCallback:rx,useContext:St,useEffect:Cc,useImperativeHandle:nx,useInsertionEffect:ax,useLayoutEffect:lx,useMemo:ix,useReducer:Nc,useRef:Wm,useState:function(){return Nc(Pa)},useDebugValue:Ac,useDeferredValue:function(e,t){var l=ct();return Ye===null?Mc(l,e,t):ox(l,Ye.memoizedState,e,t)},useTransition:function(){var e=Nc(Pa)[0],t=ct().memoizedState;return[typeof e=="boolean"?e:kn(e),t]},useSyncExternalStore:Im,useId:mx,useHostTransitionStatus:kc,useFormState:Jm,useActionState:Jm,useOptimistic:function(e,t){var l=ct();return Ye!==null?$m(l,Ye,e,t):(l.baseState=e,[e,l.queue.dispatch])},useMemoCache:yc,useCacheRefresh:xx};vx.useEffectEvent=tx;function zc(e,t,l,s){t=e.memoizedState,l=l(s,t),l=l==null?t:S({},t,l),e.memoizedState=l,e.lanes===0&&(e.updateQueue.baseState=l)}var Rc={enqueueSetState:function(e,t,l){e=e._reactInternals;var s=Jt(),r=dl(s);r.payload=t,l!=null&&(r.callback=l),t=ml(e,r,s),t!==null&&(qt(t,e,s),Cn(t,e,s))},enqueueReplaceState:function(e,t,l){e=e._reactInternals;var s=Jt(),r=dl(s);r.tag=1,r.payload=t,l!=null&&(r.callback=l),t=ml(e,r,s),t!==null&&(qt(t,e,s),Cn(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var l=Jt(),s=dl(l);s.tag=2,t!=null&&(s.callback=t),t=ml(e,s,l),t!==null&&(qt(t,e,l),Cn(t,e,l))}};function gx(e,t,l,s,r,i,b){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,i,b):t.prototype&&t.prototype.isPureReactComponent?!bn(l,s)||!bn(r,i):!0}function yx(e,t,l,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(l,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(l,s),t.state!==e&&Rc.enqueueReplaceState(t,t.state,null)}function Yl(e,t){var l=t;if("ref"in t){l={};for(var s in t)s!=="ref"&&(l[s]=t[s])}if(e=e.defaultProps){l===t&&(l=S({},l));for(var r in e)l[r]===void 0&&(l[r]=e[r])}return l}function jx(e){Rr(e)}function Nx(e){console.error(e)}function Sx(e){Rr(e)}function ai(e,t){try{var l=e.onUncaughtError;l(t.value,{componentStack:t.stack})}catch(s){setTimeout(function(){throw s})}}function wx(e,t,l){try{var s=e.onCaughtError;s(l.value,{componentStack:l.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function Oc(e,t,l){return l=dl(l),l.tag=3,l.payload={element:null},l.callback=function(){ai(e,t)},l}function Cx(e){return e=dl(e),e.tag=3,e}function Ax(e,t,l,s){var r=l.type.getDerivedStateFromError;if(typeof r=="function"){var i=s.value;e.payload=function(){return r(i)},e.callback=function(){wx(t,l,s)}}var b=l.stateNode;b!==null&&typeof b.componentDidCatch=="function"&&(e.callback=function(){wx(t,l,s),typeof r!="function"&&(vl===null?vl=new Set([this]):vl.add(this));var C=s.stack;this.componentDidCatch(s.value,{componentStack:C!==null?C:""})})}function ov(e,t,l,s,r){if(l.flags|=32768,s!==null&&typeof s=="object"&&typeof s.then=="function"){if(t=l.alternate,t!==null&&ys(t,l,r,!0),l=Qt.current,l!==null){switch(l.tag){case 31:case 13:return ua===null?fi():l.alternate===null&&it===0&&(it=3),l.flags&=-257,l.flags|=65536,l.lanes=r,s===$r?l.flags|=16384:(t=l.updateQueue,t===null?l.updateQueue=new Set([s]):t.add(s),nu(e,s,r)),!1;case 22:return l.flags|=65536,s===$r?l.flags|=16384:(t=l.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([s])},l.updateQueue=t):(l=t.retryQueue,l===null?t.retryQueue=new Set([s]):l.add(s)),nu(e,s,r)),!1}throw Error(u(435,l.tag))}return nu(e,s,r),fi(),!1}if(Be)return t=Qt.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=r,s!==Wo&&(e=Error(u(422),{cause:s}),yn(ra(e,l)))):(s!==Wo&&(t=Error(u(423),{cause:s}),yn(ra(t,l))),e=e.current.alternate,e.flags|=65536,r&=-r,e.lanes|=r,s=ra(s,l),r=Oc(e.stateNode,s,r),uc(e,r),it!==4&&(it=2)),!1;var i=Error(u(520),{cause:s});if(i=ra(i,l),Un===null?Un=[i]:Un.push(i),it!==4&&(it=2),t===null)return!0;s=ra(s,l),l=t;do{switch(l.tag){case 3:return l.flags|=65536,e=r&-r,l.lanes|=e,e=Oc(l.stateNode,s,e),uc(l,e),!1;case 1:if(t=l.type,i=l.stateNode,(l.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||i!==null&&typeof i.componentDidCatch=="function"&&(vl===null||!vl.has(i))))return l.flags|=65536,r&=-r,l.lanes|=r,r=Cx(r),Ax(r,e,l,s),uc(l,r),!1}l=l.return}while(l!==null);return!1}var Lc=Error(u(461)),mt=!1;function wt(e,t,l,s){t.child=e===null?Em(t,null,l,s):Gl(t,e.child,l,s)}function Mx(e,t,l,s,r){l=l.render;var i=t.ref;if("ref"in s){var b={};for(var C in s)C!=="ref"&&(b[C]=s[C])}else b=s;return Fl(t),s=pc(e,t,l,b,i,r),C=bc(),e!==null&&!mt?(vc(e,t,r),Ga(e,t,r)):(Be&&C&&Ko(t),t.flags|=1,wt(e,t,s,r),t.child)}function Tx(e,t,l,s,r){if(e===null){var i=l.type;return typeof i=="function"&&!Qo(i)&&i.defaultProps===void 0&&l.compare===null?(t.tag=15,t.type=i,kx(e,t,i,s,r)):(e=Ir(l.type,null,s,t,t.mode,r),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!$c(e,r)){var b=i.memoizedProps;if(l=l.compare,l=l!==null?l:bn,l(b,s)&&e.ref===t.ref)return Ga(e,t,r)}return t.flags|=1,e=Ua(i,s),e.ref=t.ref,e.return=t,t.child=e}function kx(e,t,l,s,r){if(e!==null){var i=e.memoizedProps;if(bn(i,s)&&e.ref===t.ref)if(mt=!1,t.pendingProps=s=i,$c(e,r))(e.flags&131072)!==0&&(mt=!0);else return t.lanes=e.lanes,Ga(e,t,r)}return _c(e,t,l,s,r)}function Ex(e,t,l,s){var r=s.children,i=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.mode==="hidden"){if((t.flags&128)!==0){if(i=i!==null?i.baseLanes|l:l,e!==null){for(s=t.child=e.child,r=0;s!==null;)r=r|s.lanes|s.childLanes,s=s.sibling;s=r&~i}else s=0,t.child=null;return Dx(e,t,i,l,s)}if((l&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&Fr(t,i!==null?i.cachePool:null),i!==null?Rm(t,i):mc(),Om(t);else return s=t.lanes=536870912,Dx(e,t,i!==null?i.baseLanes|l:l,l,s)}else i!==null?(Fr(t,i.cachePool),Rm(t,i),fl(),t.memoizedState=null):(e!==null&&Fr(t,null),mc(),fl());return wt(e,t,r,l),t.child}function zn(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function Dx(e,t,l,s,r){var i=rc();return i=i===null?null:{parent:ut._currentValue,pool:i},t.memoizedState={baseLanes:l,cachePool:i},e!==null&&Fr(t,null),mc(),Om(t),e!==null&&ys(e,t,s,!0),t.childLanes=r,null}function li(e,t){return t=ni({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function zx(e,t,l){return Gl(t,e.child,null,l),e=li(t,t.pendingProps),e.flags|=2,Xt(t),t.memoizedState=null,e}function cv(e,t,l){var s=t.pendingProps,r=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(Be){if(s.mode==="hidden")return e=li(t,s),t.lanes=536870912,zn(null,e);if(fc(t),(e=We)?(e=Gf(e,ca),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:rl!==null?{id:Ca,overflow:Aa}:null,retryLane:536870912,hydrationErrors:null},l=hm(e),l.return=t,t.child=l,Nt=t,We=null)):e=null,e===null)throw ol(t);return t.lanes=536870912,null}return li(t,s)}var i=e.memoizedState;if(i!==null){var b=i.dehydrated;if(fc(t),r)if(t.flags&256)t.flags&=-257,t=zx(e,t,l);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(u(558));else if(mt||ys(e,t,l,!1),r=(l&e.childLanes)!==0,mt||r){if(s=Je,s!==null&&(b=yr(s,l),b!==0&&b!==i.retryLane))throw i.retryLane=b,Il(e,b),qt(s,e,b),Lc;fi(),t=zx(e,t,l)}else e=i.treeContext,We=da(b.nextSibling),Nt=t,Be=!0,il=null,ca=!1,e!==null&&vm(t,e),t=li(t,s),t.flags|=4096;return t}return e=Ua(e.child,{mode:s.mode,children:s.children}),e.ref=t.ref,t.child=e,e.return=t,e}function si(e,t){var l=t.ref;if(l===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(u(284));(e===null||e.ref!==l)&&(t.flags|=4194816)}}function _c(e,t,l,s,r){return Fl(t),l=pc(e,t,l,s,void 0,r),s=bc(),e!==null&&!mt?(vc(e,t,r),Ga(e,t,r)):(Be&&s&&Ko(t),t.flags|=1,wt(e,t,l,r),t.child)}function Rx(e,t,l,s,r,i){return Fl(t),t.updateQueue=null,l=_m(t,s,l,r),Lm(e),s=bc(),e!==null&&!mt?(vc(e,t,i),Ga(e,t,i)):(Be&&s&&Ko(t),t.flags|=1,wt(e,t,l,i),t.child)}function Ox(e,t,l,s,r){if(Fl(t),t.stateNode===null){var i=ps,b=l.contextType;typeof b=="object"&&b!==null&&(i=St(b)),i=new l(s,i),t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=Rc,t.stateNode=i,i._reactInternals=t,i=t.stateNode,i.props=s,i.state=t.memoizedState,i.refs={},oc(t),b=l.contextType,i.context=typeof b=="object"&&b!==null?St(b):ps,i.state=t.memoizedState,b=l.getDerivedStateFromProps,typeof b=="function"&&(zc(t,l,b,s),i.state=t.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(b=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),b!==i.state&&Rc.enqueueReplaceState(i,i.state,null),Mn(t,s,i,r),An(),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308),s=!0}else if(e===null){i=t.stateNode;var C=t.memoizedProps,L=Yl(l,C);i.props=L;var Y=i.context,ae=l.contextType;b=ps,typeof ae=="object"&&ae!==null&&(b=St(ae));var re=l.getDerivedStateFromProps;ae=typeof re=="function"||typeof i.getSnapshotBeforeUpdate=="function",C=t.pendingProps!==C,ae||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(C||Y!==b)&&yx(t,i,s,b),ul=!1;var Q=t.memoizedState;i.state=Q,Mn(t,s,i,r),An(),Y=t.memoizedState,C||Q!==Y||ul?(typeof re=="function"&&(zc(t,l,re,s),Y=t.memoizedState),(L=ul||gx(t,l,L,s,Q,Y,b))?(ae||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(t.flags|=4194308)):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=Y),i.props=s,i.state=Y,i.context=b,s=L):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{i=t.stateNode,cc(e,t),b=t.memoizedProps,ae=Yl(l,b),i.props=ae,re=t.pendingProps,Q=i.context,Y=l.contextType,L=ps,typeof Y=="object"&&Y!==null&&(L=St(Y)),C=l.getDerivedStateFromProps,(Y=typeof C=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(b!==re||Q!==L)&&yx(t,i,s,L),ul=!1,Q=t.memoizedState,i.state=Q,Mn(t,s,i,r),An();var K=t.memoizedState;b!==re||Q!==K||ul||e!==null&&e.dependencies!==null&&Ur(e.dependencies)?(typeof C=="function"&&(zc(t,l,C,s),K=t.memoizedState),(ae=ul||gx(t,l,ae,s,Q,K,L)||e!==null&&e.dependencies!==null&&Ur(e.dependencies))?(Y||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(s,K,L),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(s,K,L)),typeof i.componentDidUpdate=="function"&&(t.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof i.componentDidUpdate!="function"||b===e.memoizedProps&&Q===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||b===e.memoizedProps&&Q===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=K),i.props=s,i.state=K,i.context=L,s=ae):(typeof i.componentDidUpdate!="function"||b===e.memoizedProps&&Q===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||b===e.memoizedProps&&Q===e.memoizedState||(t.flags|=1024),s=!1)}return i=s,si(e,t),s=(t.flags&128)!==0,i||s?(i=t.stateNode,l=s&&typeof l.getDerivedStateFromError!="function"?null:i.render(),t.flags|=1,e!==null&&s?(t.child=Gl(t,e.child,null,r),t.child=Gl(t,null,l,r)):wt(e,t,l,r),t.memoizedState=i.state,e=t.child):e=Ga(e,t,r),e}function Lx(e,t,l,s){return Ul(),t.flags|=256,wt(e,t,l,s),t.child}var Ic={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Bc(e){return{baseLanes:e,cachePool:wm()}}function Uc(e,t,l){return e=e!==null?e.childLanes&~l:0,t&&(e|=Kt),e}function _x(e,t,l){var s=t.pendingProps,r=!1,i=(t.flags&128)!==0,b;if((b=i)||(b=e!==null&&e.memoizedState===null?!1:(ot.current&2)!==0),b&&(r=!0,t.flags&=-129),b=(t.flags&32)!==0,t.flags&=-33,e===null){if(Be){if(r?xl(t):fl(),(e=We)?(e=Gf(e,ca),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:rl!==null?{id:Ca,overflow:Aa}:null,retryLane:536870912,hydrationErrors:null},l=hm(e),l.return=t,t.child=l,Nt=t,We=null)):e=null,e===null)throw ol(t);return ju(e)?t.lanes=32:t.lanes=536870912,null}var C=s.children;return s=s.fallback,r?(fl(),r=t.mode,C=ni({mode:"hidden",children:C},r),s=Bl(s,r,l,null),C.return=t,s.return=t,C.sibling=s,t.child=C,s=t.child,s.memoizedState=Bc(l),s.childLanes=Uc(e,b,l),t.memoizedState=Ic,zn(null,s)):(xl(t),Hc(t,C))}var L=e.memoizedState;if(L!==null&&(C=L.dehydrated,C!==null)){if(i)t.flags&256?(xl(t),t.flags&=-257,t=Fc(e,t,l)):t.memoizedState!==null?(fl(),t.child=e.child,t.flags|=128,t=null):(fl(),C=s.fallback,r=t.mode,s=ni({mode:"visible",children:s.children},r),C=Bl(C,r,l,null),C.flags|=2,s.return=t,C.return=t,s.sibling=C,t.child=s,Gl(t,e.child,null,l),s=t.child,s.memoizedState=Bc(l),s.childLanes=Uc(e,b,l),t.memoizedState=Ic,t=zn(null,s));else if(xl(t),ju(C)){if(b=C.nextSibling&&C.nextSibling.dataset,b)var Y=b.dgst;b=Y,s=Error(u(419)),s.stack="",s.digest=b,yn({value:s,source:null,stack:null}),t=Fc(e,t,l)}else if(mt||ys(e,t,l,!1),b=(l&e.childLanes)!==0,mt||b){if(b=Je,b!==null&&(s=yr(b,l),s!==0&&s!==L.retryLane))throw L.retryLane=s,Il(e,s),qt(b,e,s),Lc;yu(C)||fi(),t=Fc(e,t,l)}else yu(C)?(t.flags|=192,t.child=e.child,t=null):(e=L.treeContext,We=da(C.nextSibling),Nt=t,Be=!0,il=null,ca=!1,e!==null&&vm(t,e),t=Hc(t,s.children),t.flags|=4096);return t}return r?(fl(),C=s.fallback,r=t.mode,L=e.child,Y=L.sibling,s=Ua(L,{mode:"hidden",children:s.children}),s.subtreeFlags=L.subtreeFlags&65011712,Y!==null?C=Ua(Y,C):(C=Bl(C,r,l,null),C.flags|=2),C.return=t,s.return=t,s.sibling=C,t.child=s,zn(null,s),s=t.child,C=e.child.memoizedState,C===null?C=Bc(l):(r=C.cachePool,r!==null?(L=ut._currentValue,r=r.parent!==L?{parent:L,pool:L}:r):r=wm(),C={baseLanes:C.baseLanes|l,cachePool:r}),s.memoizedState=C,s.childLanes=Uc(e,b,l),t.memoizedState=Ic,zn(e.child,s)):(xl(t),l=e.child,e=l.sibling,l=Ua(l,{mode:"visible",children:s.children}),l.return=t,l.sibling=null,e!==null&&(b=t.deletions,b===null?(t.deletions=[e],t.flags|=16):b.push(e)),t.child=l,t.memoizedState=null,l)}function Hc(e,t){return t=ni({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function ni(e,t){return e=Yt(22,e,null,t),e.lanes=0,e}function Fc(e,t,l){return Gl(t,e.child,null,l),e=Hc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Ix(e,t,l){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),ac(e.return,t,l)}function qc(e,t,l,s,r,i){var b=e.memoizedState;b===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:l,tailMode:r,treeForkCount:i}:(b.isBackwards=t,b.rendering=null,b.renderingStartTime=0,b.last=s,b.tail=l,b.tailMode=r,b.treeForkCount=i)}function Bx(e,t,l){var s=t.pendingProps,r=s.revealOrder,i=s.tail;s=s.children;var b=ot.current,C=(b&2)!==0;if(C?(b=b&1|2,t.flags|=128):b&=1,oe(ot,b),wt(e,t,s,l),s=Be?gn:0,!C&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Ix(e,l,t);else if(e.tag===19)Ix(e,l,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(r){case"forwards":for(l=t.child,r=null;l!==null;)e=l.alternate,e!==null&&Yr(e)===null&&(r=l),l=l.sibling;l=r,l===null?(r=t.child,t.child=null):(r=l.sibling,l.sibling=null),qc(t,!1,r,l,i,s);break;case"backwards":case"unstable_legacy-backwards":for(l=null,r=t.child,t.child=null;r!==null;){if(e=r.alternate,e!==null&&Yr(e)===null){t.child=r;break}e=r.sibling,r.sibling=l,l=r,r=e}qc(t,!0,l,null,i,s);break;case"together":qc(t,!1,null,null,void 0,s);break;default:t.memoizedState=null}return t.child}function Ga(e,t,l){if(e!==null&&(t.dependencies=e.dependencies),bl|=t.lanes,(l&t.childLanes)===0)if(e!==null){if(ys(e,t,l,!1),(l&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(u(153));if(t.child!==null){for(e=t.child,l=Ua(e,e.pendingProps),t.child=l,l.return=t;e.sibling!==null;)e=e.sibling,l=l.sibling=Ua(e,e.pendingProps),l.return=t;l.sibling=null}return t.child}function $c(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&Ur(e)))}function uv(e,t,l){switch(t.tag){case 3:he(t,t.stateNode.containerInfo),cl(t,ut,e.memoizedState.cache),Ul();break;case 27:case 5:me(t);break;case 4:he(t,t.stateNode.containerInfo);break;case 10:cl(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,fc(t),null;break;case 13:var s=t.memoizedState;if(s!==null)return s.dehydrated!==null?(xl(t),t.flags|=128,null):(l&t.child.childLanes)!==0?_x(e,t,l):(xl(t),e=Ga(e,t,l),e!==null?e.sibling:null);xl(t);break;case 19:var r=(e.flags&128)!==0;if(s=(l&t.childLanes)!==0,s||(ys(e,t,l,!1),s=(l&t.childLanes)!==0),r){if(s)return Bx(e,t,l);t.flags|=128}if(r=t.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),oe(ot,ot.current),s)break;return null;case 22:return t.lanes=0,Ex(e,t,l,t.pendingProps);case 24:cl(t,ut,e.memoizedState.cache)}return Ga(e,t,l)}function Ux(e,t,l){if(e!==null)if(e.memoizedProps!==t.pendingProps)mt=!0;else{if(!$c(e,l)&&(t.flags&128)===0)return mt=!1,uv(e,t,l);mt=(e.flags&131072)!==0}else mt=!1,Be&&(t.flags&1048576)!==0&&bm(t,gn,t.index);switch(t.lanes=0,t.tag){case 16:e:{var s=t.pendingProps;if(e=$l(t.elementType),t.type=e,typeof e=="function")Qo(e)?(s=Yl(e,s),t.tag=1,t=Ox(null,t,e,s,l)):(t.tag=0,t=_c(null,t,e,s,l));else{if(e!=null){var r=e.$$typeof;if(r===I){t.tag=11,t=Mx(null,t,e,s,l);break e}else if(r===Z){t.tag=14,t=Tx(null,t,e,s,l);break e}}throw t=W(e)||e,Error(u(306,t,""))}}return t;case 0:return _c(e,t,t.type,t.pendingProps,l);case 1:return s=t.type,r=Yl(s,t.pendingProps),Ox(e,t,s,r,l);case 3:e:{if(he(t,t.stateNode.containerInfo),e===null)throw Error(u(387));s=t.pendingProps;var i=t.memoizedState;r=i.element,cc(e,t),Mn(t,s,null,l);var b=t.memoizedState;if(s=b.cache,cl(t,ut,s),s!==i.cache&&lc(t,[ut],l,!0),An(),s=b.element,i.isDehydrated)if(i={element:s,isDehydrated:!1,cache:b.cache},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){t=Lx(e,t,s,l);break e}else if(s!==r){r=ra(Error(u(424)),t),yn(r),t=Lx(e,t,s,l);break e}else for(e=t.stateNode.containerInfo,e.nodeType===9?e=e.body:e=e.nodeName==="HTML"?e.ownerDocument.body:e,We=da(e.firstChild),Nt=t,Be=!0,il=null,ca=!0,l=Em(t,null,s,l),t.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(Ul(),s===r){t=Ga(e,t,l);break e}wt(e,t,s,l)}t=t.child}return t;case 26:return si(e,t),e===null?(l=Kf(t.type,null,t.pendingProps,null))?t.memoizedState=l:Be||(l=t.type,e=t.pendingProps,s=ji(_.current).createElement(l),s[pt]=t,s[Tt]=e,Ct(s,l,e),vt(s),t.stateNode=s):t.memoizedState=Kf(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return me(t),e===null&&Be&&(s=t.stateNode=Qf(t.type,t.pendingProps,_.current),Nt=t,ca=!0,r=We,Nl(t.type)?(Nu=r,We=da(s.firstChild)):We=r),wt(e,t,t.pendingProps.children,l),si(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Be&&((r=s=We)&&(s=Hv(s,t.type,t.pendingProps,ca),s!==null?(t.stateNode=s,Nt=t,We=da(s.firstChild),ca=!1,r=!0):r=!1),r||ol(t)),me(t),r=t.type,i=t.pendingProps,b=e!==null?e.memoizedProps:null,s=i.children,bu(r,i)?s=null:b!==null&&bu(r,b)&&(t.flags|=32),t.memoizedState!==null&&(r=pc(e,t,tv,null,null,l),Yn._currentValue=r),si(e,t),wt(e,t,s,l),t.child;case 6:return e===null&&Be&&((e=l=We)&&(l=Fv(l,t.pendingProps,ca),l!==null?(t.stateNode=l,Nt=t,We=null,e=!0):e=!1),e||ol(t)),null;case 13:return _x(e,t,l);case 4:return he(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=Gl(t,null,s,l):wt(e,t,s,l),t.child;case 11:return Mx(e,t,t.type,t.pendingProps,l);case 7:return wt(e,t,t.pendingProps,l),t.child;case 8:return wt(e,t,t.pendingProps.children,l),t.child;case 12:return wt(e,t,t.pendingProps.children,l),t.child;case 10:return s=t.pendingProps,cl(t,t.type,s.value),wt(e,t,s.children,l),t.child;case 9:return r=t.type._context,s=t.pendingProps.children,Fl(t),r=St(r),s=s(r),t.flags|=1,wt(e,t,s,l),t.child;case 14:return Tx(e,t,t.type,t.pendingProps,l);case 15:return kx(e,t,t.type,t.pendingProps,l);case 19:return Bx(e,t,l);case 31:return cv(e,t,l);case 22:return Ex(e,t,l,t.pendingProps);case 24:return Fl(t),s=St(ut),e===null?(r=rc(),r===null&&(r=Je,i=sc(),r.pooledCache=i,i.refCount++,i!==null&&(r.pooledCacheLanes|=l),r=i),t.memoizedState={parent:s,cache:r},oc(t),cl(t,ut,r)):((e.lanes&l)!==0&&(cc(e,t),Mn(t,null,null,l),An()),r=e.memoizedState,i=t.memoizedState,r.parent!==s?(r={parent:s,cache:s},t.memoizedState=r,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=r),cl(t,ut,s)):(s=i.cache,cl(t,ut,s),s!==r.cache&&lc(t,[ut],l,!0))),wt(e,t,t.pendingProps.children,l),t.child;case 29:throw t.pendingProps}throw Error(u(156,t.tag))}function Va(e){e.flags|=4}function Pc(e,t,l,s,r){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(r&335544128)===r)if(e.stateNode.complete)e.flags|=8192;else if(xf())e.flags|=8192;else throw Pl=$r,ic}else e.flags&=-16777217}function Hx(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!ah(t))if(xf())e.flags|=8192;else throw Pl=$r,ic}function ri(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?br():536870912,e.lanes|=t,zs|=t)}function Rn(e,t){if(!Be)switch(e.tailMode){case"hidden":t=e.tail;for(var l=null;t!==null;)t.alternate!==null&&(l=t),t=t.sibling;l===null?e.tail=null:l.sibling=null;break;case"collapsed":l=e.tail;for(var s=null;l!==null;)l.alternate!==null&&(s=l),l=l.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function et(e){var t=e.alternate!==null&&e.alternate.child===e.child,l=0,s=0;if(t)for(var r=e.child;r!==null;)l|=r.lanes|r.childLanes,s|=r.subtreeFlags&65011712,s|=r.flags&65011712,r.return=e,r=r.sibling;else for(r=e.child;r!==null;)l|=r.lanes|r.childLanes,s|=r.subtreeFlags,s|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=s,e.childLanes=l,t}function dv(e,t,l){var s=t.pendingProps;switch(Jo(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return et(t),null;case 1:return et(t),null;case 3:return l=t.stateNode,s=null,e!==null&&(s=e.memoizedState.cache),t.memoizedState.cache!==s&&(t.flags|=2048),qa(ut),pe(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(e===null||e.child===null)&&(gs(t)?Va(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,ec())),et(t),null;case 26:var r=t.type,i=t.memoizedState;return e===null?(Va(t),i!==null?(et(t),Hx(t,i)):(et(t),Pc(t,r,null,s,l))):i?i!==e.memoizedState?(Va(t),et(t),Hx(t,i)):(et(t),t.flags&=-16777217):(e=e.memoizedProps,e!==s&&Va(t),et(t),Pc(t,r,e,s,l)),null;case 27:if(Se(t),l=_.current,r=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==s&&Va(t);else{if(!s){if(t.stateNode===null)throw Error(u(166));return et(t),null}e=de.current,gs(t)?gm(t):(e=Qf(r,s,l),t.stateNode=e,Va(t))}return et(t),null;case 5:if(Se(t),r=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==s&&Va(t);else{if(!s){if(t.stateNode===null)throw Error(u(166));return et(t),null}if(i=de.current,gs(t))gm(t);else{var b=ji(_.current);switch(i){case 1:i=b.createElementNS("http://www.w3.org/2000/svg",r);break;case 2:i=b.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;default:switch(r){case"svg":i=b.createElementNS("http://www.w3.org/2000/svg",r);break;case"math":i=b.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;case"script":i=b.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i=typeof s.is=="string"?b.createElement("select",{is:s.is}):b.createElement("select"),s.multiple?i.multiple=!0:s.size&&(i.size=s.size);break;default:i=typeof s.is=="string"?b.createElement(r,{is:s.is}):b.createElement(r)}}i[pt]=t,i[Tt]=s;e:for(b=t.child;b!==null;){if(b.tag===5||b.tag===6)i.appendChild(b.stateNode);else if(b.tag!==4&&b.tag!==27&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===t)break e;for(;b.sibling===null;){if(b.return===null||b.return===t)break e;b=b.return}b.sibling.return=b.return,b=b.sibling}t.stateNode=i;e:switch(Ct(i,r,s),r){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&Va(t)}}return et(t),Pc(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,l),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==s&&Va(t);else{if(typeof s!="string"&&t.stateNode===null)throw Error(u(166));if(e=_.current,gs(t)){if(e=t.stateNode,l=t.memoizedProps,s=null,r=Nt,r!==null)switch(r.tag){case 27:case 5:s=r.memoizedProps}e[pt]=t,e=!!(e.nodeValue===l||s!==null&&s.suppressHydrationWarning===!0||If(e.nodeValue,l)),e||ol(t,!0)}else e=ji(e).createTextNode(s),e[pt]=t,t.stateNode=e}return et(t),null;case 31:if(l=t.memoizedState,e===null||e.memoizedState!==null){if(s=gs(t),l!==null){if(e===null){if(!s)throw Error(u(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(u(557));e[pt]=t}else Ul(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;et(t),e=!1}else l=ec(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=l),e=!0;if(!e)return t.flags&256?(Xt(t),t):(Xt(t),null);if((t.flags&128)!==0)throw Error(u(558))}return et(t),null;case 13:if(s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(r=gs(t),s!==null&&s.dehydrated!==null){if(e===null){if(!r)throw Error(u(318));if(r=t.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(u(317));r[pt]=t}else Ul(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;et(t),r=!1}else r=ec(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=r),r=!0;if(!r)return t.flags&256?(Xt(t),t):(Xt(t),null)}return Xt(t),(t.flags&128)!==0?(t.lanes=l,t):(l=s!==null,e=e!==null&&e.memoizedState!==null,l&&(s=t.child,r=null,s.alternate!==null&&s.alternate.memoizedState!==null&&s.alternate.memoizedState.cachePool!==null&&(r=s.alternate.memoizedState.cachePool.pool),i=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(i=s.memoizedState.cachePool.pool),i!==r&&(s.flags|=2048)),l!==e&&l&&(t.child.flags|=8192),ri(t,t.updateQueue),et(t),null);case 4:return pe(),e===null&&mu(t.stateNode.containerInfo),et(t),null;case 10:return qa(t.type),et(t),null;case 19:if(ee(ot),s=t.memoizedState,s===null)return et(t),null;if(r=(t.flags&128)!==0,i=s.rendering,i===null)if(r)Rn(s,!1);else{if(it!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(i=Yr(e),i!==null){for(t.flags|=128,Rn(s,!1),e=i.updateQueue,t.updateQueue=e,ri(t,e),t.subtreeFlags=0,e=l,l=t.child;l!==null;)fm(l,e),l=l.sibling;return oe(ot,ot.current&1|2),Be&&Ha(t,s.treeForkCount),t.child}e=e.sibling}s.tail!==null&&Ke()>di&&(t.flags|=128,r=!0,Rn(s,!1),t.lanes=4194304)}else{if(!r)if(e=Yr(i),e!==null){if(t.flags|=128,r=!0,e=e.updateQueue,t.updateQueue=e,ri(t,e),Rn(s,!0),s.tail===null&&s.tailMode==="hidden"&&!i.alternate&&!Be)return et(t),null}else 2*Ke()-s.renderingStartTime>di&&l!==536870912&&(t.flags|=128,r=!0,Rn(s,!1),t.lanes=4194304);s.isBackwards?(i.sibling=t.child,t.child=i):(e=s.last,e!==null?e.sibling=i:t.child=i,s.last=i)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Ke(),e.sibling=null,l=ot.current,oe(ot,r?l&1|2:l&1),Be&&Ha(t,s.treeForkCount),e):(et(t),null);case 22:case 23:return Xt(t),xc(),s=t.memoizedState!==null,e!==null?e.memoizedState!==null!==s&&(t.flags|=8192):s&&(t.flags|=8192),s?(l&536870912)!==0&&(t.flags&128)===0&&(et(t),t.subtreeFlags&6&&(t.flags|=8192)):et(t),l=t.updateQueue,l!==null&&ri(t,l.retryQueue),l=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(l=e.memoizedState.cachePool.pool),s=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),s!==l&&(t.flags|=2048),e!==null&&ee(ql),null;case 24:return l=null,e!==null&&(l=e.memoizedState.cache),t.memoizedState.cache!==l&&(t.flags|=2048),qa(ut),et(t),null;case 25:return null;case 30:return null}throw Error(u(156,t.tag))}function mv(e,t){switch(Jo(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return qa(ut),pe(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return Se(t),null;case 31:if(t.memoizedState!==null){if(Xt(t),t.alternate===null)throw Error(u(340));Ul()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(Xt(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(u(340));Ul()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ee(ot),null;case 4:return pe(),null;case 10:return qa(t.type),null;case 22:case 23:return Xt(t),xc(),e!==null&&ee(ql),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return qa(ut),null;case 25:return null;default:return null}}function Fx(e,t){switch(Jo(t),t.tag){case 3:qa(ut),pe();break;case 26:case 27:case 5:Se(t);break;case 4:pe();break;case 31:t.memoizedState!==null&&Xt(t);break;case 13:Xt(t);break;case 19:ee(ot);break;case 10:qa(t.type);break;case 22:case 23:Xt(t),xc(),e!==null&&ee(ql);break;case 24:qa(ut)}}function On(e,t){try{var l=t.updateQueue,s=l!==null?l.lastEffect:null;if(s!==null){var r=s.next;l=r;do{if((l.tag&e)===e){s=void 0;var i=l.create,b=l.inst;s=i(),b.destroy=s}l=l.next}while(l!==r)}}catch(C){Ve(t,t.return,C)}}function hl(e,t,l){try{var s=t.updateQueue,r=s!==null?s.lastEffect:null;if(r!==null){var i=r.next;s=i;do{if((s.tag&e)===e){var b=s.inst,C=b.destroy;if(C!==void 0){b.destroy=void 0,r=t;var L=l,Y=C;try{Y()}catch(ae){Ve(r,L,ae)}}}s=s.next}while(s!==i)}}catch(ae){Ve(t,t.return,ae)}}function qx(e){var t=e.updateQueue;if(t!==null){var l=e.stateNode;try{zm(t,l)}catch(s){Ve(e,e.return,s)}}}function $x(e,t,l){l.props=Yl(e.type,e.memoizedProps),l.state=e.memoizedState;try{l.componentWillUnmount()}catch(s){Ve(e,t,s)}}function Ln(e,t){try{var l=e.ref;if(l!==null){switch(e.tag){case 26:case 27:case 5:var s=e.stateNode;break;case 30:s=e.stateNode;break;default:s=e.stateNode}typeof l=="function"?e.refCleanup=l(s):l.current=s}}catch(r){Ve(e,t,r)}}function Ma(e,t){var l=e.ref,s=e.refCleanup;if(l!==null)if(typeof s=="function")try{s()}catch(r){Ve(e,t,r)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(r){Ve(e,t,r)}else l.current=null}function Px(e){var t=e.type,l=e.memoizedProps,s=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":l.autoFocus&&s.focus();break e;case"img":l.src?s.src=l.src:l.srcSet&&(s.srcset=l.srcSet)}}catch(r){Ve(e,e.return,r)}}function Gc(e,t,l){try{var s=e.stateNode;Ov(s,e.type,l,t),s[Tt]=t}catch(r){Ve(e,e.return,r)}}function Gx(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Nl(e.type)||e.tag===4}function Vc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Gx(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Nl(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Yc(e,t,l){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(e,t):(t=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,t.appendChild(e),l=l._reactRootContainer,l!=null||t.onclick!==null||(t.onclick=Ia));else if(s!==4&&(s===27&&Nl(e.type)&&(l=e.stateNode,t=null),e=e.child,e!==null))for(Yc(e,t,l),e=e.sibling;e!==null;)Yc(e,t,l),e=e.sibling}function ii(e,t,l){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?l.insertBefore(e,t):l.appendChild(e);else if(s!==4&&(s===27&&Nl(e.type)&&(l=e.stateNode),e=e.child,e!==null))for(ii(e,t,l),e=e.sibling;e!==null;)ii(e,t,l),e=e.sibling}function Vx(e){var t=e.stateNode,l=e.memoizedProps;try{for(var s=e.type,r=t.attributes;r.length;)t.removeAttributeNode(r[0]);Ct(t,s,l),t[pt]=e,t[Tt]=l}catch(i){Ve(e,e.return,i)}}var Ya=!1,xt=!1,Qc=!1,Yx=typeof WeakSet=="function"?WeakSet:Set,gt=null;function xv(e,t){if(e=e.containerInfo,hu=Ti,e=nm(e),Fo(e)){if("selectionStart"in e)var l={start:e.selectionStart,end:e.selectionEnd};else e:{l=(l=e.ownerDocument)&&l.defaultView||window;var s=l.getSelection&&l.getSelection();if(s&&s.rangeCount!==0){l=s.anchorNode;var r=s.anchorOffset,i=s.focusNode;s=s.focusOffset;try{l.nodeType,i.nodeType}catch{l=null;break e}var b=0,C=-1,L=-1,Y=0,ae=0,re=e,Q=null;t:for(;;){for(var K;re!==l||r!==0&&re.nodeType!==3||(C=b+r),re!==i||s!==0&&re.nodeType!==3||(L=b+s),re.nodeType===3&&(b+=re.nodeValue.length),(K=re.firstChild)!==null;)Q=re,re=K;for(;;){if(re===e)break t;if(Q===l&&++Y===r&&(C=b),Q===i&&++ae===s&&(L=b),(K=re.nextSibling)!==null)break;re=Q,Q=re.parentNode}re=K}l=C===-1||L===-1?null:{start:C,end:L}}else l=null}l=l||{start:0,end:0}}else l=null;for(pu={focusedElem:e,selectionRange:l},Ti=!1,gt=t;gt!==null;)if(t=gt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,gt=e;else for(;gt!==null;){switch(t=gt,i=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(l=0;l<e.length;l++)r=e[l],r.ref.impl=r.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&i!==null){e=void 0,l=t,r=i.memoizedProps,i=i.memoizedState,s=l.stateNode;try{var ge=Yl(l.type,r);e=s.getSnapshotBeforeUpdate(ge,i),s.__reactInternalSnapshotBeforeUpdate=e}catch(we){Ve(l,l.return,we)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,l=e.nodeType,l===9)gu(e);else if(l===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":gu(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(u(163))}if(e=t.sibling,e!==null){e.return=t.return,gt=e;break}gt=t.return}}function Qx(e,t,l){var s=l.flags;switch(l.tag){case 0:case 11:case 15:Xa(e,l),s&4&&On(5,l);break;case 1:if(Xa(e,l),s&4)if(e=l.stateNode,t===null)try{e.componentDidMount()}catch(b){Ve(l,l.return,b)}else{var r=Yl(l.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(r,t,e.__reactInternalSnapshotBeforeUpdate)}catch(b){Ve(l,l.return,b)}}s&64&&qx(l),s&512&&Ln(l,l.return);break;case 3:if(Xa(e,l),s&64&&(e=l.updateQueue,e!==null)){if(t=null,l.child!==null)switch(l.child.tag){case 27:case 5:t=l.child.stateNode;break;case 1:t=l.child.stateNode}try{zm(e,t)}catch(b){Ve(l,l.return,b)}}break;case 27:t===null&&s&4&&Vx(l);case 26:case 5:Xa(e,l),t===null&&s&4&&Px(l),s&512&&Ln(l,l.return);break;case 12:Xa(e,l);break;case 31:Xa(e,l),s&4&&Kx(e,l);break;case 13:Xa(e,l),s&4&&Jx(e,l),s&64&&(e=l.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(l=Nv.bind(null,l),qv(e,l))));break;case 22:if(s=l.memoizedState!==null||Ya,!s){t=t!==null&&t.memoizedState!==null||xt,r=Ya;var i=xt;Ya=s,(xt=t)&&!i?Za(e,l,(l.subtreeFlags&8772)!==0):Xa(e,l),Ya=r,xt=i}break;case 30:break;default:Xa(e,l)}}function Xx(e){var t=e.alternate;t!==null&&(e.alternate=null,Xx(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&jt(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var tt=null,Bt=!1;function Qa(e,t,l){for(l=l.child;l!==null;)Zx(e,t,l),l=l.sibling}function Zx(e,t,l){if(Rt&&typeof Rt.onCommitFiberUnmount=="function")try{Rt.onCommitFiberUnmount(El,l)}catch{}switch(l.tag){case 26:xt||Ma(l,t),Qa(e,t,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:xt||Ma(l,t);var s=tt,r=Bt;Nl(l.type)&&(tt=l.stateNode,Bt=!1),Qa(e,t,l),Pn(l.stateNode),tt=s,Bt=r;break;case 5:xt||Ma(l,t);case 6:if(s=tt,r=Bt,tt=null,Qa(e,t,l),tt=s,Bt=r,tt!==null)if(Bt)try{(tt.nodeType===9?tt.body:tt.nodeName==="HTML"?tt.ownerDocument.body:tt).removeChild(l.stateNode)}catch(i){Ve(l,t,i)}else try{tt.removeChild(l.stateNode)}catch(i){Ve(l,t,i)}break;case 18:tt!==null&&(Bt?(e=tt,$f(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,l.stateNode),Hs(e)):$f(tt,l.stateNode));break;case 4:s=tt,r=Bt,tt=l.stateNode.containerInfo,Bt=!0,Qa(e,t,l),tt=s,Bt=r;break;case 0:case 11:case 14:case 15:hl(2,l,t),xt||hl(4,l,t),Qa(e,t,l);break;case 1:xt||(Ma(l,t),s=l.stateNode,typeof s.componentWillUnmount=="function"&&$x(l,t,s)),Qa(e,t,l);break;case 21:Qa(e,t,l);break;case 22:xt=(s=xt)||l.memoizedState!==null,Qa(e,t,l),xt=s;break;default:Qa(e,t,l)}}function Kx(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Hs(e)}catch(l){Ve(t,t.return,l)}}}function Jx(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Hs(e)}catch(l){Ve(t,t.return,l)}}function fv(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Yx),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Yx),t;default:throw Error(u(435,e.tag))}}function oi(e,t){var l=fv(e);t.forEach(function(s){if(!l.has(s)){l.add(s);var r=Sv.bind(null,e,s);s.then(r,r)}})}function Ut(e,t){var l=t.deletions;if(l!==null)for(var s=0;s<l.length;s++){var r=l[s],i=e,b=t,C=b;e:for(;C!==null;){switch(C.tag){case 27:if(Nl(C.type)){tt=C.stateNode,Bt=!1;break e}break;case 5:tt=C.stateNode,Bt=!1;break e;case 3:case 4:tt=C.stateNode.containerInfo,Bt=!0;break e}C=C.return}if(tt===null)throw Error(u(160));Zx(i,b,r),tt=null,Bt=!1,i=r.alternate,i!==null&&(i.return=null),r.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)Wx(t,e),t=t.sibling}var ba=null;function Wx(e,t){var l=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Ut(t,e),Ht(e),s&4&&(hl(3,e,e.return),On(3,e),hl(5,e,e.return));break;case 1:Ut(t,e),Ht(e),s&512&&(xt||l===null||Ma(l,l.return)),s&64&&Ya&&(e=e.updateQueue,e!==null&&(s=e.callbacks,s!==null&&(l=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=l===null?s:l.concat(s))));break;case 26:var r=ba;if(Ut(t,e),Ht(e),s&512&&(xt||l===null||Ma(l,l.return)),s&4){var i=l!==null?l.memoizedState:null;if(s=e.memoizedState,l===null)if(s===null)if(e.stateNode===null){e:{s=e.type,l=e.memoizedProps,r=r.ownerDocument||r;t:switch(s){case"title":i=r.getElementsByTagName("title")[0],(!i||i[xe]||i[pt]||i.namespaceURI==="http://www.w3.org/2000/svg"||i.hasAttribute("itemprop"))&&(i=r.createElement(s),r.head.insertBefore(i,r.querySelector("head > title"))),Ct(i,s,l),i[pt]=e,vt(i),s=i;break e;case"link":var b=eh("link","href",r).get(s+(l.href||""));if(b){for(var C=0;C<b.length;C++)if(i=b[C],i.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&i.getAttribute("rel")===(l.rel==null?null:l.rel)&&i.getAttribute("title")===(l.title==null?null:l.title)&&i.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){b.splice(C,1);break t}}i=r.createElement(s),Ct(i,s,l),r.head.appendChild(i);break;case"meta":if(b=eh("meta","content",r).get(s+(l.content||""))){for(C=0;C<b.length;C++)if(i=b[C],i.getAttribute("content")===(l.content==null?null:""+l.content)&&i.getAttribute("name")===(l.name==null?null:l.name)&&i.getAttribute("property")===(l.property==null?null:l.property)&&i.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&i.getAttribute("charset")===(l.charSet==null?null:l.charSet)){b.splice(C,1);break t}}i=r.createElement(s),Ct(i,s,l),r.head.appendChild(i);break;default:throw Error(u(468,s))}i[pt]=e,vt(i),s=i}e.stateNode=s}else th(r,e.type,e.stateNode);else e.stateNode=Wf(r,s,e.memoizedProps);else i!==s?(i===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):i.count--,s===null?th(r,e.type,e.stateNode):Wf(r,s,e.memoizedProps)):s===null&&e.stateNode!==null&&Gc(e,e.memoizedProps,l.memoizedProps)}break;case 27:Ut(t,e),Ht(e),s&512&&(xt||l===null||Ma(l,l.return)),l!==null&&s&4&&Gc(e,e.memoizedProps,l.memoizedProps);break;case 5:if(Ut(t,e),Ht(e),s&512&&(xt||l===null||Ma(l,l.return)),e.flags&32){r=e.stateNode;try{cs(r,"")}catch(ge){Ve(e,e.return,ge)}}s&4&&e.stateNode!=null&&(r=e.memoizedProps,Gc(e,r,l!==null?l.memoizedProps:r)),s&1024&&(Qc=!0);break;case 6:if(Ut(t,e),Ht(e),s&4){if(e.stateNode===null)throw Error(u(162));s=e.memoizedProps,l=e.stateNode;try{l.nodeValue=s}catch(ge){Ve(e,e.return,ge)}}break;case 3:if(wi=null,r=ba,ba=Ni(t.containerInfo),Ut(t,e),ba=r,Ht(e),s&4&&l!==null&&l.memoizedState.isDehydrated)try{Hs(t.containerInfo)}catch(ge){Ve(e,e.return,ge)}Qc&&(Qc=!1,ef(e));break;case 4:s=ba,ba=Ni(e.stateNode.containerInfo),Ut(t,e),Ht(e),ba=s;break;case 12:Ut(t,e),Ht(e);break;case 31:Ut(t,e),Ht(e),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,oi(e,s)));break;case 13:Ut(t,e),Ht(e),e.child.flags&8192&&e.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(ui=Ke()),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,oi(e,s)));break;case 22:r=e.memoizedState!==null;var L=l!==null&&l.memoizedState!==null,Y=Ya,ae=xt;if(Ya=Y||r,xt=ae||L,Ut(t,e),xt=ae,Ya=Y,Ht(e),s&8192)e:for(t=e.stateNode,t._visibility=r?t._visibility&-2:t._visibility|1,r&&(l===null||L||Ya||xt||Ql(e)),l=null,t=e;;){if(t.tag===5||t.tag===26){if(l===null){L=l=t;try{if(i=L.stateNode,r)b=i.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none";else{C=L.stateNode;var re=L.memoizedProps.style,Q=re!=null&&re.hasOwnProperty("display")?re.display:null;C.style.display=Q==null||typeof Q=="boolean"?"":(""+Q).trim()}}catch(ge){Ve(L,L.return,ge)}}}else if(t.tag===6){if(l===null){L=t;try{L.stateNode.nodeValue=r?"":L.memoizedProps}catch(ge){Ve(L,L.return,ge)}}}else if(t.tag===18){if(l===null){L=t;try{var K=L.stateNode;r?Pf(K,!0):Pf(L.stateNode,!1)}catch(ge){Ve(L,L.return,ge)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;l===t&&(l=null),t=t.return}l===t&&(l=null),t.sibling.return=t.return,t=t.sibling}s&4&&(s=e.updateQueue,s!==null&&(l=s.retryQueue,l!==null&&(s.retryQueue=null,oi(e,l))));break;case 19:Ut(t,e),Ht(e),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,oi(e,s)));break;case 30:break;case 21:break;default:Ut(t,e),Ht(e)}}function Ht(e){var t=e.flags;if(t&2){try{for(var l,s=e.return;s!==null;){if(Gx(s)){l=s;break}s=s.return}if(l==null)throw Error(u(160));switch(l.tag){case 27:var r=l.stateNode,i=Vc(e);ii(e,i,r);break;case 5:var b=l.stateNode;l.flags&32&&(cs(b,""),l.flags&=-33);var C=Vc(e);ii(e,C,b);break;case 3:case 4:var L=l.stateNode.containerInfo,Y=Vc(e);Yc(e,Y,L);break;default:throw Error(u(161))}}catch(ae){Ve(e,e.return,ae)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function ef(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;ef(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function Xa(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)Qx(e,t.alternate,t),t=t.sibling}function Ql(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:hl(4,t,t.return),Ql(t);break;case 1:Ma(t,t.return);var l=t.stateNode;typeof l.componentWillUnmount=="function"&&$x(t,t.return,l),Ql(t);break;case 27:Pn(t.stateNode);case 26:case 5:Ma(t,t.return),Ql(t);break;case 22:t.memoizedState===null&&Ql(t);break;case 30:Ql(t);break;default:Ql(t)}e=e.sibling}}function Za(e,t,l){for(l=l&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var s=t.alternate,r=e,i=t,b=i.flags;switch(i.tag){case 0:case 11:case 15:Za(r,i,l),On(4,i);break;case 1:if(Za(r,i,l),s=i,r=s.stateNode,typeof r.componentDidMount=="function")try{r.componentDidMount()}catch(Y){Ve(s,s.return,Y)}if(s=i,r=s.updateQueue,r!==null){var C=s.stateNode;try{var L=r.shared.hiddenCallbacks;if(L!==null)for(r.shared.hiddenCallbacks=null,r=0;r<L.length;r++)Dm(L[r],C)}catch(Y){Ve(s,s.return,Y)}}l&&b&64&&qx(i),Ln(i,i.return);break;case 27:Vx(i);case 26:case 5:Za(r,i,l),l&&s===null&&b&4&&Px(i),Ln(i,i.return);break;case 12:Za(r,i,l);break;case 31:Za(r,i,l),l&&b&4&&Kx(r,i);break;case 13:Za(r,i,l),l&&b&4&&Jx(r,i);break;case 22:i.memoizedState===null&&Za(r,i,l),Ln(i,i.return);break;case 30:break;default:Za(r,i,l)}t=t.sibling}}function Xc(e,t){var l=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(l=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==l&&(e!=null&&e.refCount++,l!=null&&jn(l))}function Zc(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&jn(e))}function va(e,t,l,s){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)tf(e,t,l,s),t=t.sibling}function tf(e,t,l,s){var r=t.flags;switch(t.tag){case 0:case 11:case 15:va(e,t,l,s),r&2048&&On(9,t);break;case 1:va(e,t,l,s);break;case 3:va(e,t,l,s),r&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&jn(e)));break;case 12:if(r&2048){va(e,t,l,s),e=t.stateNode;try{var i=t.memoizedProps,b=i.id,C=i.onPostCommit;typeof C=="function"&&C(b,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(L){Ve(t,t.return,L)}}else va(e,t,l,s);break;case 31:va(e,t,l,s);break;case 13:va(e,t,l,s);break;case 23:break;case 22:i=t.stateNode,b=t.alternate,t.memoizedState!==null?i._visibility&2?va(e,t,l,s):_n(e,t):i._visibility&2?va(e,t,l,s):(i._visibility|=2,ks(e,t,l,s,(t.subtreeFlags&10256)!==0||!1)),r&2048&&Xc(b,t);break;case 24:va(e,t,l,s),r&2048&&Zc(t.alternate,t);break;default:va(e,t,l,s)}}function ks(e,t,l,s,r){for(r=r&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var i=e,b=t,C=l,L=s,Y=b.flags;switch(b.tag){case 0:case 11:case 15:ks(i,b,C,L,r),On(8,b);break;case 23:break;case 22:var ae=b.stateNode;b.memoizedState!==null?ae._visibility&2?ks(i,b,C,L,r):_n(i,b):(ae._visibility|=2,ks(i,b,C,L,r)),r&&Y&2048&&Xc(b.alternate,b);break;case 24:ks(i,b,C,L,r),r&&Y&2048&&Zc(b.alternate,b);break;default:ks(i,b,C,L,r)}t=t.sibling}}function _n(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var l=e,s=t,r=s.flags;switch(s.tag){case 22:_n(l,s),r&2048&&Xc(s.alternate,s);break;case 24:_n(l,s),r&2048&&Zc(s.alternate,s);break;default:_n(l,s)}t=t.sibling}}var In=8192;function Es(e,t,l){if(e.subtreeFlags&In)for(e=e.child;e!==null;)af(e,t,l),e=e.sibling}function af(e,t,l){switch(e.tag){case 26:Es(e,t,l),e.flags&In&&e.memoizedState!==null&&eg(l,ba,e.memoizedState,e.memoizedProps);break;case 5:Es(e,t,l);break;case 3:case 4:var s=ba;ba=Ni(e.stateNode.containerInfo),Es(e,t,l),ba=s;break;case 22:e.memoizedState===null&&(s=e.alternate,s!==null&&s.memoizedState!==null?(s=In,In=16777216,Es(e,t,l),In=s):Es(e,t,l));break;default:Es(e,t,l)}}function lf(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Bn(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var l=0;l<t.length;l++){var s=t[l];gt=s,nf(s,e)}lf(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)sf(e),e=e.sibling}function sf(e){switch(e.tag){case 0:case 11:case 15:Bn(e),e.flags&2048&&hl(9,e,e.return);break;case 3:Bn(e);break;case 12:Bn(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,ci(e)):Bn(e);break;default:Bn(e)}}function ci(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var l=0;l<t.length;l++){var s=t[l];gt=s,nf(s,e)}lf(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:hl(8,t,t.return),ci(t);break;case 22:l=t.stateNode,l._visibility&2&&(l._visibility&=-3,ci(t));break;default:ci(t)}e=e.sibling}}function nf(e,t){for(;gt!==null;){var l=gt;switch(l.tag){case 0:case 11:case 15:hl(8,l,t);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var s=l.memoizedState.cachePool.pool;s!=null&&s.refCount++}break;case 24:jn(l.memoizedState.cache)}if(s=l.child,s!==null)s.return=l,gt=s;else e:for(l=e;gt!==null;){s=gt;var r=s.sibling,i=s.return;if(Xx(s),s===l){gt=null;break e}if(r!==null){r.return=i,gt=r;break e}gt=i}}}var hv={getCacheForType:function(e){var t=St(ut),l=t.data.get(e);return l===void 0&&(l=e(),t.data.set(e,l)),l},cacheSignal:function(){return St(ut).controller.signal}},pv=typeof WeakMap=="function"?WeakMap:Map,qe=0,Je=null,De=null,Le=0,Ge=0,Zt=null,pl=!1,Ds=!1,Kc=!1,Ka=0,it=0,bl=0,Xl=0,Jc=0,Kt=0,zs=0,Un=null,Ft=null,Wc=!1,ui=0,rf=0,di=1/0,mi=null,vl=null,bt=0,gl=null,Rs=null,Ja=0,eu=0,tu=null,of=null,Hn=0,au=null;function Jt(){return(qe&2)!==0&&Le!==0?Le&-Le:F.T!==null?ou():jr()}function cf(){if(Kt===0)if((Le&536870912)===0||Be){var e=as;as<<=1,(as&3932160)===0&&(as=262144),Kt=e}else Kt=536870912;return e=Qt.current,e!==null&&(e.flags|=32),Kt}function qt(e,t,l){(e===Je&&(Ge===2||Ge===9)||e.cancelPendingCommit!==null)&&(Os(e,0),yl(e,Le,Kt,!1)),zl(e,l),((qe&2)===0||e!==Je)&&(e===Je&&((qe&2)===0&&(Xl|=l),it===4&&yl(e,Le,Kt,!1)),Ta(e))}function uf(e,t,l){if((qe&6)!==0)throw Error(u(327));var s=!l&&(t&127)===0&&(t&e.expiredLanes)===0||Dl(e,t),r=s?gv(e,t):su(e,t,!0),i=s;do{if(r===0){Ds&&!s&&yl(e,t,0,!1);break}else{if(l=e.current.alternate,i&&!bv(l)){r=su(e,t,!1),i=!1;continue}if(r===2){if(i=t,e.errorRecoveryDisabledLanes&i)var b=0;else b=e.pendingLanes&-536870913,b=b!==0?b:b&536870912?536870912:0;if(b!==0){t=b;e:{var C=e;r=Un;var L=C.current.memoizedState.isDehydrated;if(L&&(Os(C,b).flags|=256),b=su(C,b,!1),b!==2){if(Kc&&!L){C.errorRecoveryDisabledLanes|=i,Xl|=i,r=4;break e}i=Ft,Ft=r,i!==null&&(Ft===null?Ft=i:Ft.push.apply(Ft,i))}r=b}if(i=!1,r!==2)continue}}if(r===1){Os(e,0),yl(e,t,0,!0);break}e:{switch(s=e,i=r,i){case 0:case 1:throw Error(u(345));case 4:if((t&4194048)!==t)break;case 6:yl(s,t,Kt,!pl);break e;case 2:Ft=null;break;case 3:case 5:break;default:throw Error(u(329))}if((t&62914560)===t&&(r=ui+300-Ke(),10<r)){if(yl(s,t,Kt,!pl),ss(s,0,!0)!==0)break e;Ja=t,s.timeoutHandle=Ff(df.bind(null,s,l,Ft,mi,Wc,t,Kt,Xl,zs,pl,i,"Throttled",-0,0),r);break e}df(s,l,Ft,mi,Wc,t,Kt,Xl,zs,pl,i,null,-0,0)}}break}while(!0);Ta(e)}function df(e,t,l,s,r,i,b,C,L,Y,ae,re,Q,K){if(e.timeoutHandle=-1,re=t.subtreeFlags,re&8192||(re&16785408)===16785408){re={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ia},af(t,i,re);var ge=(i&62914560)===i?ui-Ke():(i&4194048)===i?rf-Ke():0;if(ge=tg(re,ge),ge!==null){Ja=i,e.cancelPendingCommit=ge(gf.bind(null,e,t,i,l,s,r,b,C,L,ae,re,null,Q,K)),yl(e,i,b,!Y);return}}gf(e,t,i,l,s,r,b,C,L)}function bv(e){for(var t=e;;){var l=t.tag;if((l===0||l===11||l===15)&&t.flags&16384&&(l=t.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var s=0;s<l.length;s++){var r=l[s],i=r.getSnapshot;r=r.value;try{if(!Vt(i(),r))return!1}catch{return!1}}if(l=t.child,t.subtreeFlags&16384&&l!==null)l.return=t,t=l;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function yl(e,t,l,s){t&=~Jc,t&=~Xl,e.suspendedLanes|=t,e.pingedLanes&=~t,s&&(e.warmLanes|=t),s=e.expirationTimes;for(var r=t;0<r;){var i=31-Ot(r),b=1<<i;s[i]=-1,r&=~b}l!==0&&vr(e,l,t)}function xi(){return(qe&6)===0?(Fn(0),!1):!0}function lu(){if(De!==null){if(Ge===0)var e=De.return;else e=De,Fa=Hl=null,gc(e),ws=null,Sn=0,e=De;for(;e!==null;)Fx(e.alternate,e),e=e.return;De=null}}function Os(e,t){var l=e.timeoutHandle;l!==-1&&(e.timeoutHandle=-1,Iv(l)),l=e.cancelPendingCommit,l!==null&&(e.cancelPendingCommit=null,l()),Ja=0,lu(),Je=e,De=l=Ua(e.current,null),Le=t,Ge=0,Zt=null,pl=!1,Ds=Dl(e,t),Kc=!1,zs=Kt=Jc=Xl=bl=it=0,Ft=Un=null,Wc=!1,(t&8)!==0&&(t|=t&32);var s=e.entangledLanes;if(s!==0)for(e=e.entanglements,s&=t;0<s;){var r=31-Ot(s),i=1<<r;t|=e[r],s&=~i}return Ka=t,Or(),l}function mf(e,t){ke=null,F.H=Dn,t===Ss||t===qr?(t=Mm(),Ge=3):t===ic?(t=Mm(),Ge=4):Ge=t===Lc?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Zt=t,De===null&&(it=1,ai(e,ra(t,e.current)))}function xf(){var e=Qt.current;return e===null?!0:(Le&4194048)===Le?ua===null:(Le&62914560)===Le||(Le&536870912)!==0?e===ua:!1}function ff(){var e=F.H;return F.H=Dn,e===null?Dn:e}function hf(){var e=F.A;return F.A=hv,e}function fi(){it=4,pl||(Le&4194048)!==Le&&Qt.current!==null||(Ds=!0),(bl&134217727)===0&&(Xl&134217727)===0||Je===null||yl(Je,Le,Kt,!1)}function su(e,t,l){var s=qe;qe|=2;var r=ff(),i=hf();(Je!==e||Le!==t)&&(mi=null,Os(e,t)),t=!1;var b=it;e:do try{if(Ge!==0&&De!==null){var C=De,L=Zt;switch(Ge){case 8:lu(),b=6;break e;case 3:case 2:case 9:case 6:Qt.current===null&&(t=!0);var Y=Ge;if(Ge=0,Zt=null,Ls(e,C,L,Y),l&&Ds){b=0;break e}break;default:Y=Ge,Ge=0,Zt=null,Ls(e,C,L,Y)}}vv(),b=it;break}catch(ae){mf(e,ae)}while(!0);return t&&e.shellSuspendCounter++,Fa=Hl=null,qe=s,F.H=r,F.A=i,De===null&&(Je=null,Le=0,Or()),b}function vv(){for(;De!==null;)pf(De)}function gv(e,t){var l=qe;qe|=2;var s=ff(),r=hf();Je!==e||Le!==t?(mi=null,di=Ke()+500,Os(e,t)):Ds=Dl(e,t);e:do try{if(Ge!==0&&De!==null){t=De;var i=Zt;t:switch(Ge){case 1:Ge=0,Zt=null,Ls(e,t,i,1);break;case 2:case 9:if(Cm(i)){Ge=0,Zt=null,bf(t);break}t=function(){Ge!==2&&Ge!==9||Je!==e||(Ge=7),Ta(e)},i.then(t,t);break e;case 3:Ge=7;break e;case 4:Ge=5;break e;case 7:Cm(i)?(Ge=0,Zt=null,bf(t)):(Ge=0,Zt=null,Ls(e,t,i,7));break;case 5:var b=null;switch(De.tag){case 26:b=De.memoizedState;case 5:case 27:var C=De;if(b?ah(b):C.stateNode.complete){Ge=0,Zt=null;var L=C.sibling;if(L!==null)De=L;else{var Y=C.return;Y!==null?(De=Y,hi(Y)):De=null}break t}}Ge=0,Zt=null,Ls(e,t,i,5);break;case 6:Ge=0,Zt=null,Ls(e,t,i,6);break;case 8:lu(),it=6;break e;default:throw Error(u(462))}}yv();break}catch(ae){mf(e,ae)}while(!0);return Fa=Hl=null,F.H=s,F.A=r,qe=l,De!==null?0:(Je=null,Le=0,Or(),it)}function yv(){for(;De!==null&&!Ce();)pf(De)}function pf(e){var t=Ux(e.alternate,e,Ka);e.memoizedProps=e.pendingProps,t===null?hi(e):De=t}function bf(e){var t=e,l=t.alternate;switch(t.tag){case 15:case 0:t=Rx(l,t,t.pendingProps,t.type,void 0,Le);break;case 11:t=Rx(l,t,t.pendingProps,t.type.render,t.ref,Le);break;case 5:gc(t);default:Fx(l,t),t=De=fm(t,Ka),t=Ux(l,t,Ka)}e.memoizedProps=e.pendingProps,t===null?hi(e):De=t}function Ls(e,t,l,s){Fa=Hl=null,gc(t),ws=null,Sn=0;var r=t.return;try{if(ov(e,r,t,l,Le)){it=1,ai(e,ra(l,e.current)),De=null;return}}catch(i){if(r!==null)throw De=r,i;it=1,ai(e,ra(l,e.current)),De=null;return}t.flags&32768?(Be||s===1?e=!0:Ds||(Le&536870912)!==0?e=!1:(pl=e=!0,(s===2||s===9||s===3||s===6)&&(s=Qt.current,s!==null&&s.tag===13&&(s.flags|=16384))),vf(t,e)):hi(t)}function hi(e){var t=e;do{if((t.flags&32768)!==0){vf(t,pl);return}e=t.return;var l=dv(t.alternate,t,Ka);if(l!==null){De=l;return}if(t=t.sibling,t!==null){De=t;return}De=t=e}while(t!==null);it===0&&(it=5)}function vf(e,t){do{var l=mv(e.alternate,e);if(l!==null){l.flags&=32767,De=l;return}if(l=e.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!t&&(e=e.sibling,e!==null)){De=e;return}De=e=l}while(e!==null);it=6,De=null}function gf(e,t,l,s,r,i,b,C,L){e.cancelPendingCommit=null;do pi();while(bt!==0);if((qe&6)!==0)throw Error(u(327));if(t!==null){if(t===e.current)throw Error(u(177));if(i=t.lanes|t.childLanes,i|=Vo,No(e,l,i,b,C,L),e===Je&&(De=Je=null,Le=0),Rs=t,gl=e,Ja=l,eu=i,tu=r,of=s,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,wv(Na,function(){return wf(),null})):(e.callbackNode=null,e.callbackPriority=0),s=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||s){s=F.T,F.T=null,r=T.p,T.p=2,b=qe,qe|=4;try{xv(e,t,l)}finally{qe=b,T.p=r,F.T=s}}bt=1,yf(),jf(),Nf()}}function yf(){if(bt===1){bt=0;var e=gl,t=Rs,l=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||l){l=F.T,F.T=null;var s=T.p;T.p=2;var r=qe;qe|=4;try{Wx(t,e);var i=pu,b=nm(e.containerInfo),C=i.focusedElem,L=i.selectionRange;if(b!==C&&C&&C.ownerDocument&&sm(C.ownerDocument.documentElement,C)){if(L!==null&&Fo(C)){var Y=L.start,ae=L.end;if(ae===void 0&&(ae=Y),"selectionStart"in C)C.selectionStart=Y,C.selectionEnd=Math.min(ae,C.value.length);else{var re=C.ownerDocument||document,Q=re&&re.defaultView||window;if(Q.getSelection){var K=Q.getSelection(),ge=C.textContent.length,we=Math.min(L.start,ge),Xe=L.end===void 0?we:Math.min(L.end,ge);!K.extend&&we>Xe&&(b=Xe,Xe=we,we=b);var H=lm(C,we),B=lm(C,Xe);if(H&&B&&(K.rangeCount!==1||K.anchorNode!==H.node||K.anchorOffset!==H.offset||K.focusNode!==B.node||K.focusOffset!==B.offset)){var V=re.createRange();V.setStart(H.node,H.offset),K.removeAllRanges(),we>Xe?(K.addRange(V),K.extend(B.node,B.offset)):(V.setEnd(B.node,B.offset),K.addRange(V))}}}}for(re=[],K=C;K=K.parentNode;)K.nodeType===1&&re.push({element:K,left:K.scrollLeft,top:K.scrollTop});for(typeof C.focus=="function"&&C.focus(),C=0;C<re.length;C++){var ne=re[C];ne.element.scrollLeft=ne.left,ne.element.scrollTop=ne.top}}Ti=!!hu,pu=hu=null}finally{qe=r,T.p=s,F.T=l}}e.current=t,bt=2}}function jf(){if(bt===2){bt=0;var e=gl,t=Rs,l=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||l){l=F.T,F.T=null;var s=T.p;T.p=2;var r=qe;qe|=4;try{Qx(e,t.alternate,t)}finally{qe=r,T.p=s,F.T=l}}bt=3}}function Nf(){if(bt===4||bt===3){bt=0,Ze();var e=gl,t=Rs,l=Ja,s=of;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?bt=5:(bt=0,Rs=gl=null,Sf(e,e.pendingLanes));var r=e.pendingLanes;if(r===0&&(vl=null),rn(l),t=t.stateNode,Rt&&typeof Rt.onCommitFiberRoot=="function")try{Rt.onCommitFiberRoot(El,t,void 0,(t.current.flags&128)===128)}catch{}if(s!==null){t=F.T,r=T.p,T.p=2,F.T=null;try{for(var i=e.onRecoverableError,b=0;b<s.length;b++){var C=s[b];i(C.value,{componentStack:C.stack})}}finally{F.T=t,T.p=r}}(Ja&3)!==0&&pi(),Ta(e),r=e.pendingLanes,(l&261930)!==0&&(r&42)!==0?e===au?Hn++:(Hn=0,au=e):Hn=0,Fn(0)}}function Sf(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,jn(t)))}function pi(){return yf(),jf(),Nf(),wf()}function wf(){if(bt!==5)return!1;var e=gl,t=eu;eu=0;var l=rn(Ja),s=F.T,r=T.p;try{T.p=32>l?32:l,F.T=null,l=tu,tu=null;var i=gl,b=Ja;if(bt=0,Rs=gl=null,Ja=0,(qe&6)!==0)throw Error(u(331));var C=qe;if(qe|=4,sf(i.current),tf(i,i.current,b,l),qe=C,Fn(0,!1),Rt&&typeof Rt.onPostCommitFiberRoot=="function")try{Rt.onPostCommitFiberRoot(El,i)}catch{}return!0}finally{T.p=r,F.T=s,Sf(e,t)}}function Cf(e,t,l){t=ra(l,t),t=Oc(e.stateNode,t,2),e=ml(e,t,2),e!==null&&(zl(e,2),Ta(e))}function Ve(e,t,l){if(e.tag===3)Cf(e,e,l);else for(;t!==null;){if(t.tag===3){Cf(t,e,l);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(vl===null||!vl.has(s))){e=ra(l,e),l=Cx(2),s=ml(t,l,2),s!==null&&(Ax(l,s,t,e),zl(s,2),Ta(s));break}}t=t.return}}function nu(e,t,l){var s=e.pingCache;if(s===null){s=e.pingCache=new pv;var r=new Set;s.set(t,r)}else r=s.get(t),r===void 0&&(r=new Set,s.set(t,r));r.has(l)||(Kc=!0,r.add(l),e=jv.bind(null,e,t,l),t.then(e,e))}function jv(e,t,l){var s=e.pingCache;s!==null&&s.delete(t),e.pingedLanes|=e.suspendedLanes&l,e.warmLanes&=~l,Je===e&&(Le&l)===l&&(it===4||it===3&&(Le&62914560)===Le&&300>Ke()-ui?(qe&2)===0&&Os(e,0):Jc|=l,zs===Le&&(zs=0)),Ta(e)}function Af(e,t){t===0&&(t=br()),e=Il(e,t),e!==null&&(zl(e,t),Ta(e))}function Nv(e){var t=e.memoizedState,l=0;t!==null&&(l=t.retryLane),Af(e,l)}function Sv(e,t){var l=0;switch(e.tag){case 31:case 13:var s=e.stateNode,r=e.memoizedState;r!==null&&(l=r.retryLane);break;case 19:s=e.stateNode;break;case 22:s=e.stateNode._retryCache;break;default:throw Error(u(314))}s!==null&&s.delete(t),Af(e,l)}function wv(e,t){return yt(e,t)}var bi=null,_s=null,ru=!1,vi=!1,iu=!1,jl=0;function Ta(e){e!==_s&&e.next===null&&(_s===null?bi=_s=e:_s=_s.next=e),vi=!0,ru||(ru=!0,Av())}function Fn(e,t){if(!iu&&vi){iu=!0;do for(var l=!1,s=bi;s!==null;){if(e!==0){var r=s.pendingLanes;if(r===0)var i=0;else{var b=s.suspendedLanes,C=s.pingedLanes;i=(1<<31-Ot(42|e)+1)-1,i&=r&~(b&~C),i=i&201326741?i&201326741|1:i?i|2:0}i!==0&&(l=!0,Ef(s,i))}else i=Le,i=ss(s,s===Je?i:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),(i&3)===0||Dl(s,i)||(l=!0,Ef(s,i));s=s.next}while(l);iu=!1}}function Cv(){Mf()}function Mf(){vi=ru=!1;var e=0;jl!==0&&_v()&&(e=jl);for(var t=Ke(),l=null,s=bi;s!==null;){var r=s.next,i=Tf(s,t);i===0?(s.next=null,l===null?bi=r:l.next=r,r===null&&(_s=l)):(l=s,(e!==0||(i&3)!==0)&&(vi=!0)),s=r}bt!==0&&bt!==5||Fn(e),jl!==0&&(jl=0)}function Tf(e,t){for(var l=e.suspendedLanes,s=e.pingedLanes,r=e.expirationTimes,i=e.pendingLanes&-62914561;0<i;){var b=31-Ot(i),C=1<<b,L=r[b];L===-1?((C&l)===0||(C&s)!==0)&&(r[b]=jo(C,t)):L<=t&&(e.expiredLanes|=C),i&=~C}if(t=Je,l=Le,l=ss(e,e===t?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),s=e.callbackNode,l===0||e===t&&(Ge===2||Ge===9)||e.cancelPendingCommit!==null)return s!==null&&s!==null&&fa(s),e.callbackNode=null,e.callbackPriority=0;if((l&3)===0||Dl(e,l)){if(t=l&-l,t===e.callbackPriority)return t;switch(s!==null&&fa(s),rn(l)){case 2:case 8:l=Mt;break;case 32:l=Na;break;case 268435456:l=pr;break;default:l=Na}return s=kf.bind(null,e),l=yt(l,s),e.callbackPriority=t,e.callbackNode=l,t}return s!==null&&s!==null&&fa(s),e.callbackPriority=2,e.callbackNode=null,2}function kf(e,t){if(bt!==0&&bt!==5)return e.callbackNode=null,e.callbackPriority=0,null;var l=e.callbackNode;if(pi()&&e.callbackNode!==l)return null;var s=Le;return s=ss(e,e===Je?s:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),s===0?null:(uf(e,s,t),Tf(e,Ke()),e.callbackNode!=null&&e.callbackNode===l?kf.bind(null,e):null)}function Ef(e,t){if(pi())return null;uf(e,t,!0)}function Av(){Bv(function(){(qe&6)!==0?yt(ht,Cv):Mf()})}function ou(){if(jl===0){var e=js;e===0&&(e=ts,ts<<=1,(ts&261888)===0&&(ts=256)),jl=e}return jl}function Df(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Ar(""+e)}function zf(e,t){var l=t.ownerDocument.createElement("input");return l.name=t.name,l.value=t.value,e.id&&l.setAttribute("form",e.id),t.parentNode.insertBefore(l,t),e=new FormData(e),l.parentNode.removeChild(l),e}function Mv(e,t,l,s,r){if(t==="submit"&&l&&l.stateNode===r){var i=Df((r[Tt]||null).action),b=s.submitter;b&&(t=(t=b[Tt]||null)?Df(t.formAction):b.getAttribute("formAction"),t!==null&&(i=t,b=null));var C=new Er("action","action",null,s,r);e.push({event:C,listeners:[{instance:null,listener:function(){if(s.defaultPrevented){if(jl!==0){var L=b?zf(r,b):new FormData(r);Tc(l,{pending:!0,data:L,method:r.method,action:i},null,L)}}else typeof i=="function"&&(C.preventDefault(),L=b?zf(r,b):new FormData(r),Tc(l,{pending:!0,data:L,method:r.method,action:i},i,L))},currentTarget:r}]})}}for(var cu=0;cu<Go.length;cu++){var uu=Go[cu],Tv=uu.toLowerCase(),kv=uu[0].toUpperCase()+uu.slice(1);pa(Tv,"on"+kv)}pa(om,"onAnimationEnd"),pa(cm,"onAnimationIteration"),pa(um,"onAnimationStart"),pa("dblclick","onDoubleClick"),pa("focusin","onFocus"),pa("focusout","onBlur"),pa(Gb,"onTransitionRun"),pa(Vb,"onTransitionStart"),pa(Yb,"onTransitionCancel"),pa(dm,"onTransitionEnd"),is("onMouseEnter",["mouseout","mouseover"]),is("onMouseLeave",["mouseout","mouseover"]),is("onPointerEnter",["pointerout","pointerover"]),is("onPointerLeave",["pointerout","pointerover"]),Rl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Rl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Rl("onBeforeInput",["compositionend","keypress","textInput","paste"]),Rl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Rl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Rl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var qn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ev=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(qn));function Rf(e,t){t=(t&4)!==0;for(var l=0;l<e.length;l++){var s=e[l],r=s.event;s=s.listeners;e:{var i=void 0;if(t)for(var b=s.length-1;0<=b;b--){var C=s[b],L=C.instance,Y=C.currentTarget;if(C=C.listener,L!==i&&r.isPropagationStopped())break e;i=C,r.currentTarget=Y;try{i(r)}catch(ae){Rr(ae)}r.currentTarget=null,i=L}else for(b=0;b<s.length;b++){if(C=s[b],L=C.instance,Y=C.currentTarget,C=C.listener,L!==i&&r.isPropagationStopped())break e;i=C,r.currentTarget=Y;try{i(r)}catch(ae){Rr(ae)}r.currentTarget=null,i=L}}}}function ze(e,t){var l=t[on];l===void 0&&(l=t[on]=new Set);var s=e+"__bubble";l.has(s)||(Of(t,e,2,!1),l.add(s))}function du(e,t,l){var s=0;t&&(s|=4),Of(l,e,s,t)}var gi="_reactListening"+Math.random().toString(36).slice(2);function mu(e){if(!e[gi]){e[gi]=!0,Ad.forEach(function(l){l!=="selectionchange"&&(Ev.has(l)||du(l,!1,e),du(l,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[gi]||(t[gi]=!0,du("selectionchange",!1,t))}}function Of(e,t,l,s){switch(ch(t)){case 2:var r=sg;break;case 8:r=ng;break;default:r=Mu}l=r.bind(null,t,l,e),r=void 0,!zo||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(r=!0),s?r!==void 0?e.addEventListener(t,l,{capture:!0,passive:r}):e.addEventListener(t,l,!0):r!==void 0?e.addEventListener(t,l,{passive:r}):e.addEventListener(t,l,!1)}function xu(e,t,l,s,r){var i=s;if((t&1)===0&&(t&2)===0&&s!==null)e:for(;;){if(s===null)return;var b=s.tag;if(b===3||b===4){var C=s.stateNode.containerInfo;if(C===r)break;if(b===4)for(b=s.return;b!==null;){var L=b.tag;if((L===3||L===4)&&b.stateNode.containerInfo===r)return;b=b.return}for(;C!==null;){if(b=ha(C),b===null)return;if(L=b.tag,L===5||L===6||L===26||L===27){s=i=b;continue e}C=C.parentNode}}s=s.return}Bd(function(){var Y=i,ae=Eo(l),re=[];e:{var Q=mm.get(e);if(Q!==void 0){var K=Er,ge=e;switch(e){case"keypress":if(Tr(l)===0)break e;case"keydown":case"keyup":K=Sb;break;case"focusin":ge="focus",K=_o;break;case"focusout":ge="blur",K=_o;break;case"beforeblur":case"afterblur":K=_o;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":K=Fd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":K=db;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":K=Ab;break;case om:case cm:case um:K=fb;break;case dm:K=Tb;break;case"scroll":case"scrollend":K=cb;break;case"wheel":K=Eb;break;case"copy":case"cut":case"paste":K=pb;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":K=$d;break;case"toggle":case"beforetoggle":K=zb}var we=(t&4)!==0,Xe=!we&&(e==="scroll"||e==="scrollend"),H=we?Q!==null?Q+"Capture":null:Q;we=[];for(var B=Y,V;B!==null;){var ne=B;if(V=ne.stateNode,ne=ne.tag,ne!==5&&ne!==26&&ne!==27||V===null||H===null||(ne=un(B,H),ne!=null&&we.push($n(B,ne,V))),Xe)break;B=B.return}0<we.length&&(Q=new K(Q,ge,null,l,ae),re.push({event:Q,listeners:we}))}}if((t&7)===0){e:{if(Q=e==="mouseover"||e==="pointerover",K=e==="mouseout"||e==="pointerout",Q&&l!==ko&&(ge=l.relatedTarget||l.fromElement)&&(ha(ge)||ge[sl]))break e;if((K||Q)&&(Q=ae.window===ae?ae:(Q=ae.ownerDocument)?Q.defaultView||Q.parentWindow:window,K?(ge=l.relatedTarget||l.toElement,K=Y,ge=ge?ha(ge):null,ge!==null&&(Xe=m(ge),we=ge.tag,ge!==Xe||we!==5&&we!==27&&we!==6)&&(ge=null)):(K=null,ge=Y),K!==ge)){if(we=Fd,ne="onMouseLeave",H="onMouseEnter",B="mouse",(e==="pointerout"||e==="pointerover")&&(we=$d,ne="onPointerLeave",H="onPointerEnter",B="pointer"),Xe=K==null?Q:cn(K),V=ge==null?Q:cn(ge),Q=new we(ne,B+"leave",K,l,ae),Q.target=Xe,Q.relatedTarget=V,ne=null,ha(ae)===Y&&(we=new we(H,B+"enter",ge,l,ae),we.target=V,we.relatedTarget=Xe,ne=we),Xe=ne,K&&ge)t:{for(we=Dv,H=K,B=ge,V=0,ne=H;ne;ne=we(ne))V++;ne=0;for(var Ne=B;Ne;Ne=we(Ne))ne++;for(;0<V-ne;)H=we(H),V--;for(;0<ne-V;)B=we(B),ne--;for(;V--;){if(H===B||B!==null&&H===B.alternate){we=H;break t}H=we(H),B=we(B)}we=null}else we=null;K!==null&&Lf(re,Q,K,we,!1),ge!==null&&Xe!==null&&Lf(re,Xe,ge,we,!0)}}e:{if(Q=Y?cn(Y):window,K=Q.nodeName&&Q.nodeName.toLowerCase(),K==="select"||K==="input"&&Q.type==="file")var He=Kd;else if(Xd(Q))if(Jd)He=qb;else{He=Hb;var ye=Ub}else K=Q.nodeName,!K||K.toLowerCase()!=="input"||Q.type!=="checkbox"&&Q.type!=="radio"?Y&&To(Y.elementType)&&(He=Kd):He=Fb;if(He&&(He=He(e,Y))){Zd(re,He,l,ae);break e}ye&&ye(e,Q,Y),e==="focusout"&&Y&&Q.type==="number"&&Y.memoizedProps.value!=null&&Mo(Q,"number",Q.value)}switch(ye=Y?cn(Y):window,e){case"focusin":(Xd(ye)||ye.contentEditable==="true")&&(xs=ye,qo=Y,vn=null);break;case"focusout":vn=qo=xs=null;break;case"mousedown":$o=!0;break;case"contextmenu":case"mouseup":case"dragend":$o=!1,rm(re,l,ae);break;case"selectionchange":if(Pb)break;case"keydown":case"keyup":rm(re,l,ae)}var Ee;if(Bo)e:{switch(e){case"compositionstart":var _e="onCompositionStart";break e;case"compositionend":_e="onCompositionEnd";break e;case"compositionupdate":_e="onCompositionUpdate";break e}_e=void 0}else ms?Yd(e,l)&&(_e="onCompositionEnd"):e==="keydown"&&l.keyCode===229&&(_e="onCompositionStart");_e&&(Pd&&l.locale!=="ko"&&(ms||_e!=="onCompositionStart"?_e==="onCompositionEnd"&&ms&&(Ee=Ud()):(nl=ae,Ro="value"in nl?nl.value:nl.textContent,ms=!0)),ye=yi(Y,_e),0<ye.length&&(_e=new qd(_e,e,null,l,ae),re.push({event:_e,listeners:ye}),Ee?_e.data=Ee:(Ee=Qd(l),Ee!==null&&(_e.data=Ee)))),(Ee=Ob?Lb(e,l):_b(e,l))&&(_e=yi(Y,"onBeforeInput"),0<_e.length&&(ye=new qd("onBeforeInput","beforeinput",null,l,ae),re.push({event:ye,listeners:_e}),ye.data=Ee)),Mv(re,e,Y,l,ae)}Rf(re,t)})}function $n(e,t,l){return{instance:e,listener:t,currentTarget:l}}function yi(e,t){for(var l=t+"Capture",s=[];e!==null;){var r=e,i=r.stateNode;if(r=r.tag,r!==5&&r!==26&&r!==27||i===null||(r=un(e,l),r!=null&&s.unshift($n(e,r,i)),r=un(e,t),r!=null&&s.push($n(e,r,i))),e.tag===3)return s;e=e.return}return[]}function Dv(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Lf(e,t,l,s,r){for(var i=t._reactName,b=[];l!==null&&l!==s;){var C=l,L=C.alternate,Y=C.stateNode;if(C=C.tag,L!==null&&L===s)break;C!==5&&C!==26&&C!==27||Y===null||(L=Y,r?(Y=un(l,i),Y!=null&&b.unshift($n(l,Y,L))):r||(Y=un(l,i),Y!=null&&b.push($n(l,Y,L)))),l=l.return}b.length!==0&&e.push({event:t,listeners:b})}var zv=/\r\n?/g,Rv=/\u0000|\uFFFD/g;function _f(e){return(typeof e=="string"?e:""+e).replace(zv,`
`).replace(Rv,"")}function If(e,t){return t=_f(t),_f(e)===t}function Qe(e,t,l,s,r,i){switch(l){case"children":typeof s=="string"?t==="body"||t==="textarea"&&s===""||cs(e,s):(typeof s=="number"||typeof s=="bigint")&&t!=="body"&&cs(e,""+s);break;case"className":wr(e,"class",s);break;case"tabIndex":wr(e,"tabindex",s);break;case"dir":case"role":case"viewBox":case"width":case"height":wr(e,l,s);break;case"style":_d(e,s,i);break;case"data":if(t!=="object"){wr(e,"data",s);break}case"src":case"href":if(s===""&&(t!=="a"||l!=="href")){e.removeAttribute(l);break}if(s==null||typeof s=="function"||typeof s=="symbol"||typeof s=="boolean"){e.removeAttribute(l);break}s=Ar(""+s),e.setAttribute(l,s);break;case"action":case"formAction":if(typeof s=="function"){e.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof i=="function"&&(l==="formAction"?(t!=="input"&&Qe(e,t,"name",r.name,r,null),Qe(e,t,"formEncType",r.formEncType,r,null),Qe(e,t,"formMethod",r.formMethod,r,null),Qe(e,t,"formTarget",r.formTarget,r,null)):(Qe(e,t,"encType",r.encType,r,null),Qe(e,t,"method",r.method,r,null),Qe(e,t,"target",r.target,r,null)));if(s==null||typeof s=="symbol"||typeof s=="boolean"){e.removeAttribute(l);break}s=Ar(""+s),e.setAttribute(l,s);break;case"onClick":s!=null&&(e.onclick=Ia);break;case"onScroll":s!=null&&ze("scroll",e);break;case"onScrollEnd":s!=null&&ze("scrollend",e);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(u(61));if(l=s.__html,l!=null){if(r.children!=null)throw Error(u(60));e.innerHTML=l}}break;case"multiple":e.multiple=s&&typeof s!="function"&&typeof s!="symbol";break;case"muted":e.muted=s&&typeof s!="function"&&typeof s!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(s==null||typeof s=="function"||typeof s=="boolean"||typeof s=="symbol"){e.removeAttribute("xlink:href");break}l=Ar(""+s),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":s!=null&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(l,""+s):e.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":s&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(l,""):e.removeAttribute(l);break;case"capture":case"download":s===!0?e.setAttribute(l,""):s!==!1&&s!=null&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(l,s):e.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":s!=null&&typeof s!="function"&&typeof s!="symbol"&&!isNaN(s)&&1<=s?e.setAttribute(l,s):e.removeAttribute(l);break;case"rowSpan":case"start":s==null||typeof s=="function"||typeof s=="symbol"||isNaN(s)?e.removeAttribute(l):e.setAttribute(l,s);break;case"popover":ze("beforetoggle",e),ze("toggle",e),Sr(e,"popover",s);break;case"xlinkActuate":_a(e,"http://www.w3.org/1999/xlink","xlink:actuate",s);break;case"xlinkArcrole":_a(e,"http://www.w3.org/1999/xlink","xlink:arcrole",s);break;case"xlinkRole":_a(e,"http://www.w3.org/1999/xlink","xlink:role",s);break;case"xlinkShow":_a(e,"http://www.w3.org/1999/xlink","xlink:show",s);break;case"xlinkTitle":_a(e,"http://www.w3.org/1999/xlink","xlink:title",s);break;case"xlinkType":_a(e,"http://www.w3.org/1999/xlink","xlink:type",s);break;case"xmlBase":_a(e,"http://www.w3.org/XML/1998/namespace","xml:base",s);break;case"xmlLang":_a(e,"http://www.w3.org/XML/1998/namespace","xml:lang",s);break;case"xmlSpace":_a(e,"http://www.w3.org/XML/1998/namespace","xml:space",s);break;case"is":Sr(e,"is",s);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=ib.get(l)||l,Sr(e,l,s))}}function fu(e,t,l,s,r,i){switch(l){case"style":_d(e,s,i);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(u(61));if(l=s.__html,l!=null){if(r.children!=null)throw Error(u(60));e.innerHTML=l}}break;case"children":typeof s=="string"?cs(e,s):(typeof s=="number"||typeof s=="bigint")&&cs(e,""+s);break;case"onScroll":s!=null&&ze("scroll",e);break;case"onScrollEnd":s!=null&&ze("scrollend",e);break;case"onClick":s!=null&&(e.onclick=Ia);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Md.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(r=l.endsWith("Capture"),t=l.slice(2,r?l.length-7:void 0),i=e[Tt]||null,i=i!=null?i[l]:null,typeof i=="function"&&e.removeEventListener(t,i,r),typeof s=="function")){typeof i!="function"&&i!==null&&(l in e?e[l]=null:e.hasAttribute(l)&&e.removeAttribute(l)),e.addEventListener(t,s,r);break e}l in e?e[l]=s:s===!0?e.setAttribute(l,""):Sr(e,l,s)}}}function Ct(e,t,l){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ze("error",e),ze("load",e);var s=!1,r=!1,i;for(i in l)if(l.hasOwnProperty(i)){var b=l[i];if(b!=null)switch(i){case"src":s=!0;break;case"srcSet":r=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(u(137,t));default:Qe(e,t,i,b,l,null)}}r&&Qe(e,t,"srcSet",l.srcSet,l,null),s&&Qe(e,t,"src",l.src,l,null);return;case"input":ze("invalid",e);var C=i=b=r=null,L=null,Y=null;for(s in l)if(l.hasOwnProperty(s)){var ae=l[s];if(ae!=null)switch(s){case"name":r=ae;break;case"type":b=ae;break;case"checked":L=ae;break;case"defaultChecked":Y=ae;break;case"value":i=ae;break;case"defaultValue":C=ae;break;case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(u(137,t));break;default:Qe(e,t,s,ae,l,null)}}zd(e,i,C,L,Y,b,r,!1);return;case"select":ze("invalid",e),s=b=i=null;for(r in l)if(l.hasOwnProperty(r)&&(C=l[r],C!=null))switch(r){case"value":i=C;break;case"defaultValue":b=C;break;case"multiple":s=C;default:Qe(e,t,r,C,l,null)}t=i,l=b,e.multiple=!!s,t!=null?os(e,!!s,t,!1):l!=null&&os(e,!!s,l,!0);return;case"textarea":ze("invalid",e),i=r=s=null;for(b in l)if(l.hasOwnProperty(b)&&(C=l[b],C!=null))switch(b){case"value":s=C;break;case"defaultValue":r=C;break;case"children":i=C;break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(u(91));break;default:Qe(e,t,b,C,l,null)}Od(e,s,r,i);return;case"option":for(L in l)l.hasOwnProperty(L)&&(s=l[L],s!=null)&&(L==="selected"?e.selected=s&&typeof s!="function"&&typeof s!="symbol":Qe(e,t,L,s,l,null));return;case"dialog":ze("beforetoggle",e),ze("toggle",e),ze("cancel",e),ze("close",e);break;case"iframe":case"object":ze("load",e);break;case"video":case"audio":for(s=0;s<qn.length;s++)ze(qn[s],e);break;case"image":ze("error",e),ze("load",e);break;case"details":ze("toggle",e);break;case"embed":case"source":case"link":ze("error",e),ze("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Y in l)if(l.hasOwnProperty(Y)&&(s=l[Y],s!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":throw Error(u(137,t));default:Qe(e,t,Y,s,l,null)}return;default:if(To(t)){for(ae in l)l.hasOwnProperty(ae)&&(s=l[ae],s!==void 0&&fu(e,t,ae,s,l,void 0));return}}for(C in l)l.hasOwnProperty(C)&&(s=l[C],s!=null&&Qe(e,t,C,s,l,null))}function Ov(e,t,l,s){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var r=null,i=null,b=null,C=null,L=null,Y=null,ae=null;for(K in l){var re=l[K];if(l.hasOwnProperty(K)&&re!=null)switch(K){case"checked":break;case"value":break;case"defaultValue":L=re;default:s.hasOwnProperty(K)||Qe(e,t,K,null,s,re)}}for(var Q in s){var K=s[Q];if(re=l[Q],s.hasOwnProperty(Q)&&(K!=null||re!=null))switch(Q){case"type":i=K;break;case"name":r=K;break;case"checked":Y=K;break;case"defaultChecked":ae=K;break;case"value":b=K;break;case"defaultValue":C=K;break;case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(u(137,t));break;default:K!==re&&Qe(e,t,Q,K,s,re)}}Ao(e,b,C,L,Y,ae,i,r);return;case"select":K=b=C=Q=null;for(i in l)if(L=l[i],l.hasOwnProperty(i)&&L!=null)switch(i){case"value":break;case"multiple":K=L;default:s.hasOwnProperty(i)||Qe(e,t,i,null,s,L)}for(r in s)if(i=s[r],L=l[r],s.hasOwnProperty(r)&&(i!=null||L!=null))switch(r){case"value":Q=i;break;case"defaultValue":C=i;break;case"multiple":b=i;default:i!==L&&Qe(e,t,r,i,s,L)}t=C,l=b,s=K,Q!=null?os(e,!!l,Q,!1):!!s!=!!l&&(t!=null?os(e,!!l,t,!0):os(e,!!l,l?[]:"",!1));return;case"textarea":K=Q=null;for(C in l)if(r=l[C],l.hasOwnProperty(C)&&r!=null&&!s.hasOwnProperty(C))switch(C){case"value":break;case"children":break;default:Qe(e,t,C,null,s,r)}for(b in s)if(r=s[b],i=l[b],s.hasOwnProperty(b)&&(r!=null||i!=null))switch(b){case"value":Q=r;break;case"defaultValue":K=r;break;case"children":break;case"dangerouslySetInnerHTML":if(r!=null)throw Error(u(91));break;default:r!==i&&Qe(e,t,b,r,s,i)}Rd(e,Q,K);return;case"option":for(var ge in l)Q=l[ge],l.hasOwnProperty(ge)&&Q!=null&&!s.hasOwnProperty(ge)&&(ge==="selected"?e.selected=!1:Qe(e,t,ge,null,s,Q));for(L in s)Q=s[L],K=l[L],s.hasOwnProperty(L)&&Q!==K&&(Q!=null||K!=null)&&(L==="selected"?e.selected=Q&&typeof Q!="function"&&typeof Q!="symbol":Qe(e,t,L,Q,s,K));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var we in l)Q=l[we],l.hasOwnProperty(we)&&Q!=null&&!s.hasOwnProperty(we)&&Qe(e,t,we,null,s,Q);for(Y in s)if(Q=s[Y],K=l[Y],s.hasOwnProperty(Y)&&Q!==K&&(Q!=null||K!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(u(137,t));break;default:Qe(e,t,Y,Q,s,K)}return;default:if(To(t)){for(var Xe in l)Q=l[Xe],l.hasOwnProperty(Xe)&&Q!==void 0&&!s.hasOwnProperty(Xe)&&fu(e,t,Xe,void 0,s,Q);for(ae in s)Q=s[ae],K=l[ae],!s.hasOwnProperty(ae)||Q===K||Q===void 0&&K===void 0||fu(e,t,ae,Q,s,K);return}}for(var H in l)Q=l[H],l.hasOwnProperty(H)&&Q!=null&&!s.hasOwnProperty(H)&&Qe(e,t,H,null,s,Q);for(re in s)Q=s[re],K=l[re],!s.hasOwnProperty(re)||Q===K||Q==null&&K==null||Qe(e,t,re,Q,s,K)}function Bf(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Lv(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,l=performance.getEntriesByType("resource"),s=0;s<l.length;s++){var r=l[s],i=r.transferSize,b=r.initiatorType,C=r.duration;if(i&&C&&Bf(b)){for(b=0,C=r.responseEnd,s+=1;s<l.length;s++){var L=l[s],Y=L.startTime;if(Y>C)break;var ae=L.transferSize,re=L.initiatorType;ae&&Bf(re)&&(L=L.responseEnd,b+=ae*(L<C?1:(C-Y)/(L-Y)))}if(--s,t+=8*(i+b)/(r.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var hu=null,pu=null;function ji(e){return e.nodeType===9?e:e.ownerDocument}function Uf(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Hf(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function bu(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var vu=null;function _v(){var e=window.event;return e&&e.type==="popstate"?e===vu?!1:(vu=e,!0):(vu=null,!1)}var Ff=typeof setTimeout=="function"?setTimeout:void 0,Iv=typeof clearTimeout=="function"?clearTimeout:void 0,qf=typeof Promise=="function"?Promise:void 0,Bv=typeof queueMicrotask=="function"?queueMicrotask:typeof qf<"u"?function(e){return qf.resolve(null).then(e).catch(Uv)}:Ff;function Uv(e){setTimeout(function(){throw e})}function Nl(e){return e==="head"}function $f(e,t){var l=t,s=0;do{var r=l.nextSibling;if(e.removeChild(l),r&&r.nodeType===8)if(l=r.data,l==="/$"||l==="/&"){if(s===0){e.removeChild(r),Hs(t);return}s--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")s++;else if(l==="html")Pn(e.ownerDocument.documentElement);else if(l==="head"){l=e.ownerDocument.head,Pn(l);for(var i=l.firstChild;i;){var b=i.nextSibling,C=i.nodeName;i[xe]||C==="SCRIPT"||C==="STYLE"||C==="LINK"&&i.rel.toLowerCase()==="stylesheet"||l.removeChild(i),i=b}}else l==="body"&&Pn(e.ownerDocument.body);l=r}while(l);Hs(t)}function Pf(e,t){var l=e;e=0;do{var s=l.nextSibling;if(l.nodeType===1?t?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(t?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),s&&s.nodeType===8)if(l=s.data,l==="/$"){if(e===0)break;e--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||e++;l=s}while(l)}function gu(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var l=t;switch(t=t.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":gu(l),jt(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}e.removeChild(l)}}function Hv(e,t,l,s){for(;e.nodeType===1;){var r=l;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!s&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(s){if(!e[xe])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(i=e.getAttribute("rel"),i==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(i!==r.rel||e.getAttribute("href")!==(r.href==null||r.href===""?null:r.href)||e.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin)||e.getAttribute("title")!==(r.title==null?null:r.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(i=e.getAttribute("src"),(i!==(r.src==null?null:r.src)||e.getAttribute("type")!==(r.type==null?null:r.type)||e.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin))&&i&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var i=r.name==null?null:""+r.name;if(r.type==="hidden"&&e.getAttribute("name")===i)return e}else return e;if(e=da(e.nextSibling),e===null)break}return null}function Fv(e,t,l){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!l||(e=da(e.nextSibling),e===null))return null;return e}function Gf(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=da(e.nextSibling),e===null))return null;return e}function yu(e){return e.data==="$?"||e.data==="$~"}function ju(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function qv(e,t){var l=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||l.readyState!=="loading")t();else{var s=function(){t(),l.removeEventListener("DOMContentLoaded",s)};l.addEventListener("DOMContentLoaded",s),e._reactRetry=s}}function da(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var Nu=null;function Vf(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var l=e.data;if(l==="/$"||l==="/&"){if(t===0)return da(e.nextSibling);t--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||t++}e=e.nextSibling}return null}function Yf(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var l=e.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(t===0)return e;t--}else l!=="/$"&&l!=="/&"||t++}e=e.previousSibling}return null}function Qf(e,t,l){switch(t=ji(l),e){case"html":if(e=t.documentElement,!e)throw Error(u(452));return e;case"head":if(e=t.head,!e)throw Error(u(453));return e;case"body":if(e=t.body,!e)throw Error(u(454));return e;default:throw Error(u(451))}}function Pn(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);jt(e)}var ma=new Map,Xf=new Set;function Ni(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Wa=T.d;T.d={f:$v,r:Pv,D:Gv,C:Vv,L:Yv,m:Qv,X:Zv,S:Xv,M:Kv};function $v(){var e=Wa.f(),t=xi();return e||t}function Pv(e){var t=ns(e);t!==null&&t.tag===5&&t.type==="form"?dx(t):Wa.r(e)}var Is=typeof document>"u"?null:document;function Zf(e,t,l){var s=Is;if(s&&typeof t=="string"&&t){var r=sa(t);r='link[rel="'+e+'"][href="'+r+'"]',typeof l=="string"&&(r+='[crossorigin="'+l+'"]'),Xf.has(r)||(Xf.add(r),e={rel:e,crossOrigin:l,href:t},s.querySelector(r)===null&&(t=s.createElement("link"),Ct(t,"link",e),vt(t),s.head.appendChild(t)))}}function Gv(e){Wa.D(e),Zf("dns-prefetch",e,null)}function Vv(e,t){Wa.C(e,t),Zf("preconnect",e,t)}function Yv(e,t,l){Wa.L(e,t,l);var s=Is;if(s&&e&&t){var r='link[rel="preload"][as="'+sa(t)+'"]';t==="image"&&l&&l.imageSrcSet?(r+='[imagesrcset="'+sa(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(r+='[imagesizes="'+sa(l.imageSizes)+'"]')):r+='[href="'+sa(e)+'"]';var i=r;switch(t){case"style":i=Bs(e);break;case"script":i=Us(e)}ma.has(i)||(e=S({rel:"preload",href:t==="image"&&l&&l.imageSrcSet?void 0:e,as:t},l),ma.set(i,e),s.querySelector(r)!==null||t==="style"&&s.querySelector(Gn(i))||t==="script"&&s.querySelector(Vn(i))||(t=s.createElement("link"),Ct(t,"link",e),vt(t),s.head.appendChild(t)))}}function Qv(e,t){Wa.m(e,t);var l=Is;if(l&&e){var s=t&&typeof t.as=="string"?t.as:"script",r='link[rel="modulepreload"][as="'+sa(s)+'"][href="'+sa(e)+'"]',i=r;switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":i=Us(e)}if(!ma.has(i)&&(e=S({rel:"modulepreload",href:e},t),ma.set(i,e),l.querySelector(r)===null)){switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(Vn(i)))return}s=l.createElement("link"),Ct(s,"link",e),vt(s),l.head.appendChild(s)}}}function Xv(e,t,l){Wa.S(e,t,l);var s=Is;if(s&&e){var r=rs(s).hoistableStyles,i=Bs(e);t=t||"default";var b=r.get(i);if(!b){var C={loading:0,preload:null};if(b=s.querySelector(Gn(i)))C.loading=5;else{e=S({rel:"stylesheet",href:e,"data-precedence":t},l),(l=ma.get(i))&&Su(e,l);var L=b=s.createElement("link");vt(L),Ct(L,"link",e),L._p=new Promise(function(Y,ae){L.onload=Y,L.onerror=ae}),L.addEventListener("load",function(){C.loading|=1}),L.addEventListener("error",function(){C.loading|=2}),C.loading|=4,Si(b,t,s)}b={type:"stylesheet",instance:b,count:1,state:C},r.set(i,b)}}}function Zv(e,t){Wa.X(e,t);var l=Is;if(l&&e){var s=rs(l).hoistableScripts,r=Us(e),i=s.get(r);i||(i=l.querySelector(Vn(r)),i||(e=S({src:e,async:!0},t),(t=ma.get(r))&&wu(e,t),i=l.createElement("script"),vt(i),Ct(i,"link",e),l.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},s.set(r,i))}}function Kv(e,t){Wa.M(e,t);var l=Is;if(l&&e){var s=rs(l).hoistableScripts,r=Us(e),i=s.get(r);i||(i=l.querySelector(Vn(r)),i||(e=S({src:e,async:!0,type:"module"},t),(t=ma.get(r))&&wu(e,t),i=l.createElement("script"),vt(i),Ct(i,"link",e),l.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},s.set(r,i))}}function Kf(e,t,l,s){var r=(r=_.current)?Ni(r):null;if(!r)throw Error(u(446));switch(e){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(t=Bs(l.href),l=rs(r).hoistableStyles,s=l.get(t),s||(s={type:"style",instance:null,count:0,state:null},l.set(t,s)),s):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){e=Bs(l.href);var i=rs(r).hoistableStyles,b=i.get(e);if(b||(r=r.ownerDocument||r,b={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},i.set(e,b),(i=r.querySelector(Gn(e)))&&!i._p&&(b.instance=i,b.state.loading=5),ma.has(e)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},ma.set(e,l),i||Jv(r,e,l,b.state))),t&&s===null)throw Error(u(528,""));return b}if(t&&s!==null)throw Error(u(529,""));return null;case"script":return t=l.async,l=l.src,typeof l=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=Us(l),l=rs(r).hoistableScripts,s=l.get(t),s||(s={type:"script",instance:null,count:0,state:null},l.set(t,s)),s):{type:"void",instance:null,count:0,state:null};default:throw Error(u(444,e))}}function Bs(e){return'href="'+sa(e)+'"'}function Gn(e){return'link[rel="stylesheet"]['+e+"]"}function Jf(e){return S({},e,{"data-precedence":e.precedence,precedence:null})}function Jv(e,t,l,s){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?s.loading=1:(t=e.createElement("link"),s.preload=t,t.addEventListener("load",function(){return s.loading|=1}),t.addEventListener("error",function(){return s.loading|=2}),Ct(t,"link",l),vt(t),e.head.appendChild(t))}function Us(e){return'[src="'+sa(e)+'"]'}function Vn(e){return"script[async]"+e}function Wf(e,t,l){if(t.count++,t.instance===null)switch(t.type){case"style":var s=e.querySelector('style[data-href~="'+sa(l.href)+'"]');if(s)return t.instance=s,vt(s),s;var r=S({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return s=(e.ownerDocument||e).createElement("style"),vt(s),Ct(s,"style",r),Si(s,l.precedence,e),t.instance=s;case"stylesheet":r=Bs(l.href);var i=e.querySelector(Gn(r));if(i)return t.state.loading|=4,t.instance=i,vt(i),i;s=Jf(l),(r=ma.get(r))&&Su(s,r),i=(e.ownerDocument||e).createElement("link"),vt(i);var b=i;return b._p=new Promise(function(C,L){b.onload=C,b.onerror=L}),Ct(i,"link",s),t.state.loading|=4,Si(i,l.precedence,e),t.instance=i;case"script":return i=Us(l.src),(r=e.querySelector(Vn(i)))?(t.instance=r,vt(r),r):(s=l,(r=ma.get(i))&&(s=S({},l),wu(s,r)),e=e.ownerDocument||e,r=e.createElement("script"),vt(r),Ct(r,"link",s),e.head.appendChild(r),t.instance=r);case"void":return null;default:throw Error(u(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(s=t.instance,t.state.loading|=4,Si(s,l.precedence,e));return t.instance}function Si(e,t,l){for(var s=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),r=s.length?s[s.length-1]:null,i=r,b=0;b<s.length;b++){var C=s[b];if(C.dataset.precedence===t)i=C;else if(i!==r)break}i?i.parentNode.insertBefore(e,i.nextSibling):(t=l.nodeType===9?l.head:l,t.insertBefore(e,t.firstChild))}function Su(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function wu(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var wi=null;function eh(e,t,l){if(wi===null){var s=new Map,r=wi=new Map;r.set(l,s)}else r=wi,s=r.get(l),s||(s=new Map,r.set(l,s));if(s.has(e))return s;for(s.set(e,null),l=l.getElementsByTagName(e),r=0;r<l.length;r++){var i=l[r];if(!(i[xe]||i[pt]||e==="link"&&i.getAttribute("rel")==="stylesheet")&&i.namespaceURI!=="http://www.w3.org/2000/svg"){var b=i.getAttribute(t)||"";b=e+b;var C=s.get(b);C?C.push(i):s.set(b,[i])}}return s}function th(e,t,l){e=e.ownerDocument||e,e.head.insertBefore(l,t==="title"?e.querySelector("head > title"):null)}function Wv(e,t,l){if(l===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;return t.rel==="stylesheet"?(e=t.disabled,typeof t.precedence=="string"&&e==null):!0;case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function ah(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function eg(e,t,l,s){if(l.type==="stylesheet"&&(typeof s.media!="string"||matchMedia(s.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var r=Bs(s.href),i=t.querySelector(Gn(r));if(i){t=i._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=Ci.bind(e),t.then(e,e)),l.state.loading|=4,l.instance=i,vt(i);return}i=t.ownerDocument||t,s=Jf(s),(r=ma.get(r))&&Su(s,r),i=i.createElement("link"),vt(i);var b=i;b._p=new Promise(function(C,L){b.onload=C,b.onerror=L}),Ct(i,"link",s),l.instance=i}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(l,t),(t=l.state.preload)&&(l.state.loading&3)===0&&(e.count++,l=Ci.bind(e),t.addEventListener("load",l),t.addEventListener("error",l))}}var Cu=0;function tg(e,t){return e.stylesheets&&e.count===0&&Mi(e,e.stylesheets),0<e.count||0<e.imgCount?function(l){var s=setTimeout(function(){if(e.stylesheets&&Mi(e,e.stylesheets),e.unsuspend){var i=e.unsuspend;e.unsuspend=null,i()}},6e4+t);0<e.imgBytes&&Cu===0&&(Cu=62500*Lv());var r=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Mi(e,e.stylesheets),e.unsuspend)){var i=e.unsuspend;e.unsuspend=null,i()}},(e.imgBytes>Cu?50:800)+t);return e.unsuspend=l,function(){e.unsuspend=null,clearTimeout(s),clearTimeout(r)}}:null}function Ci(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Mi(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Ai=null;function Mi(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Ai=new Map,t.forEach(ag,e),Ai=null,Ci.call(e))}function ag(e,t){if(!(t.state.loading&4)){var l=Ai.get(e);if(l)var s=l.get(null);else{l=new Map,Ai.set(e,l);for(var r=e.querySelectorAll("link[data-precedence],style[data-precedence]"),i=0;i<r.length;i++){var b=r[i];(b.nodeName==="LINK"||b.getAttribute("media")!=="not all")&&(l.set(b.dataset.precedence,b),s=b)}s&&l.set(null,s)}r=t.instance,b=r.getAttribute("data-precedence"),i=l.get(b)||s,i===s&&l.set(null,r),l.set(b,r),this.count++,s=Ci.bind(this),r.addEventListener("load",s),r.addEventListener("error",s),i?i.parentNode.insertBefore(r,i.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(r,e.firstChild)),t.state.loading|=4}}var Yn={$$typeof:p,Provider:null,Consumer:null,_currentValue:O,_currentValue2:O,_threadCount:0};function lg(e,t,l,s,r,i,b,C,L){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=sn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=sn(0),this.hiddenUpdates=sn(null),this.identifierPrefix=s,this.onUncaughtError=r,this.onCaughtError=i,this.onRecoverableError=b,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=L,this.incompleteTransitions=new Map}function lh(e,t,l,s,r,i,b,C,L,Y,ae,re){return e=new lg(e,t,l,b,L,Y,ae,re,C),t=1,i===!0&&(t|=24),i=Yt(3,null,null,t),e.current=i,i.stateNode=e,t=sc(),t.refCount++,e.pooledCache=t,t.refCount++,i.memoizedState={element:s,isDehydrated:l,cache:t},oc(i),e}function sh(e){return e?(e=ps,e):ps}function nh(e,t,l,s,r,i){r=sh(r),s.context===null?s.context=r:s.pendingContext=r,s=dl(t),s.payload={element:l},i=i===void 0?null:i,i!==null&&(s.callback=i),l=ml(e,s,t),l!==null&&(qt(l,e,t),Cn(l,e,t))}function rh(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var l=e.retryLane;e.retryLane=l!==0&&l<t?l:t}}function Au(e,t){rh(e,t),(e=e.alternate)&&rh(e,t)}function ih(e){if(e.tag===13||e.tag===31){var t=Il(e,67108864);t!==null&&qt(t,e,67108864),Au(e,67108864)}}function oh(e){if(e.tag===13||e.tag===31){var t=Jt();t=nn(t);var l=Il(e,t);l!==null&&qt(l,e,t),Au(e,t)}}var Ti=!0;function sg(e,t,l,s){var r=F.T;F.T=null;var i=T.p;try{T.p=2,Mu(e,t,l,s)}finally{T.p=i,F.T=r}}function ng(e,t,l,s){var r=F.T;F.T=null;var i=T.p;try{T.p=8,Mu(e,t,l,s)}finally{T.p=i,F.T=r}}function Mu(e,t,l,s){if(Ti){var r=Tu(s);if(r===null)xu(e,t,s,ki,l),uh(e,s);else if(ig(r,e,t,l,s))s.stopPropagation();else if(uh(e,s),t&4&&-1<rg.indexOf(e)){for(;r!==null;){var i=ns(r);if(i!==null)switch(i.tag){case 3:if(i=i.stateNode,i.current.memoizedState.isDehydrated){var b=La(i.pendingLanes);if(b!==0){var C=i;for(C.pendingLanes|=2,C.entangledLanes|=2;b;){var L=1<<31-Ot(b);C.entanglements[1]|=L,b&=~L}Ta(i),(qe&6)===0&&(di=Ke()+500,Fn(0))}}break;case 31:case 13:C=Il(i,2),C!==null&&qt(C,i,2),xi(),Au(i,2)}if(i=Tu(s),i===null&&xu(e,t,s,ki,l),i===r)break;r=i}r!==null&&s.stopPropagation()}else xu(e,t,s,null,l)}}function Tu(e){return e=Eo(e),ku(e)}var ki=null;function ku(e){if(ki=null,e=ha(e),e!==null){var t=m(e);if(t===null)e=null;else{var l=t.tag;if(l===13){if(e=h(t),e!==null)return e;e=null}else if(l===31){if(e=f(t),e!==null)return e;e=null}else if(l===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return ki=e,null}function ch(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(_t()){case ht:return 2;case Mt:return 8;case Na:case ho:return 32;case pr:return 268435456;default:return 32}default:return 32}}var Eu=!1,Sl=null,wl=null,Cl=null,Qn=new Map,Xn=new Map,Al=[],rg="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function uh(e,t){switch(e){case"focusin":case"focusout":Sl=null;break;case"dragenter":case"dragleave":wl=null;break;case"mouseover":case"mouseout":Cl=null;break;case"pointerover":case"pointerout":Qn.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xn.delete(t.pointerId)}}function Zn(e,t,l,s,r,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:l,eventSystemFlags:s,nativeEvent:i,targetContainers:[r]},t!==null&&(t=ns(t),t!==null&&ih(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,r!==null&&t.indexOf(r)===-1&&t.push(r),e)}function ig(e,t,l,s,r){switch(t){case"focusin":return Sl=Zn(Sl,e,t,l,s,r),!0;case"dragenter":return wl=Zn(wl,e,t,l,s,r),!0;case"mouseover":return Cl=Zn(Cl,e,t,l,s,r),!0;case"pointerover":var i=r.pointerId;return Qn.set(i,Zn(Qn.get(i)||null,e,t,l,s,r)),!0;case"gotpointercapture":return i=r.pointerId,Xn.set(i,Zn(Xn.get(i)||null,e,t,l,s,r)),!0}return!1}function dh(e){var t=ha(e.target);if(t!==null){var l=m(t);if(l!==null){if(t=l.tag,t===13){if(t=h(l),t!==null){e.blockedOn=t,Nr(e.priority,function(){oh(l)});return}}else if(t===31){if(t=f(l),t!==null){e.blockedOn=t,Nr(e.priority,function(){oh(l)});return}}else if(t===3&&l.stateNode.current.memoizedState.isDehydrated){e.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Ei(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var l=Tu(e.nativeEvent);if(l===null){l=e.nativeEvent;var s=new l.constructor(l.type,l);ko=s,l.target.dispatchEvent(s),ko=null}else return t=ns(l),t!==null&&ih(t),e.blockedOn=l,!1;t.shift()}return!0}function mh(e,t,l){Ei(e)&&l.delete(t)}function og(){Eu=!1,Sl!==null&&Ei(Sl)&&(Sl=null),wl!==null&&Ei(wl)&&(wl=null),Cl!==null&&Ei(Cl)&&(Cl=null),Qn.forEach(mh),Xn.forEach(mh)}function Di(e,t){e.blockedOn===t&&(e.blockedOn=null,Eu||(Eu=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,og)))}var zi=null;function xh(e){zi!==e&&(zi=e,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){zi===e&&(zi=null);for(var t=0;t<e.length;t+=3){var l=e[t],s=e[t+1],r=e[t+2];if(typeof s!="function"){if(ku(s||l)===null)continue;break}var i=ns(l);i!==null&&(e.splice(t,3),t-=3,Tc(i,{pending:!0,data:r,method:l.method,action:s},s,r))}}))}function Hs(e){function t(L){return Di(L,e)}Sl!==null&&Di(Sl,e),wl!==null&&Di(wl,e),Cl!==null&&Di(Cl,e),Qn.forEach(t),Xn.forEach(t);for(var l=0;l<Al.length;l++){var s=Al[l];s.blockedOn===e&&(s.blockedOn=null)}for(;0<Al.length&&(l=Al[0],l.blockedOn===null);)dh(l),l.blockedOn===null&&Al.shift();if(l=(e.ownerDocument||e).$$reactFormReplay,l!=null)for(s=0;s<l.length;s+=3){var r=l[s],i=l[s+1],b=r[Tt]||null;if(typeof i=="function")b||xh(l);else if(b){var C=null;if(i&&i.hasAttribute("formAction")){if(r=i,b=i[Tt]||null)C=b.formAction;else if(ku(r)!==null)continue}else C=b.action;typeof C=="function"?l[s+1]=C:(l.splice(s,3),s-=3),xh(l)}}}function fh(){function e(i){i.canIntercept&&i.info==="react-transition"&&i.intercept({handler:function(){return new Promise(function(b){return r=b})},focusReset:"manual",scroll:"manual"})}function t(){r!==null&&(r(),r=null),s||setTimeout(l,20)}function l(){if(!s&&!navigation.transition){var i=navigation.currentEntry;i&&i.url!=null&&navigation.navigate(i.url,{state:i.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var s=!1,r=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(l,100),function(){s=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),r!==null&&(r(),r=null)}}}function Du(e){this._internalRoot=e}Ri.prototype.render=Du.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(u(409));var l=t.current,s=Jt();nh(l,s,e,t,null,null)},Ri.prototype.unmount=Du.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;nh(e.current,2,null,e,null,null),xi(),t[sl]=null}};function Ri(e){this._internalRoot=e}Ri.prototype.unstable_scheduleHydration=function(e){if(e){var t=jr();e={blockedOn:null,target:e,priority:t};for(var l=0;l<Al.length&&t!==0&&t<Al[l].priority;l++);Al.splice(l,0,e),l===0&&dh(e)}};var hh=o.version;if(hh!=="19.2.4")throw Error(u(527,hh,"19.2.4"));T.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(u(188)):(e=Object.keys(e).join(","),Error(u(268,e)));return e=d(t),e=e!==null?j(e):null,e=e===null?null:e.stateNode,e};var cg={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:F,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Oi=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Oi.isDisabled&&Oi.supportsFiber)try{El=Oi.inject(cg),Rt=Oi}catch{}}return Jn.createRoot=function(e,t){if(!x(e))throw Error(u(299));var l=!1,s="",r=jx,i=Nx,b=Sx;return t!=null&&(t.unstable_strictMode===!0&&(l=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onUncaughtError!==void 0&&(r=t.onUncaughtError),t.onCaughtError!==void 0&&(i=t.onCaughtError),t.onRecoverableError!==void 0&&(b=t.onRecoverableError)),t=lh(e,1,!1,null,null,l,s,null,r,i,b,fh),e[sl]=t.current,mu(e),new Du(t)},Jn.hydrateRoot=function(e,t,l){if(!x(e))throw Error(u(299));var s=!1,r="",i=jx,b=Nx,C=Sx,L=null;return l!=null&&(l.unstable_strictMode===!0&&(s=!0),l.identifierPrefix!==void 0&&(r=l.identifierPrefix),l.onUncaughtError!==void 0&&(i=l.onUncaughtError),l.onCaughtError!==void 0&&(b=l.onCaughtError),l.onRecoverableError!==void 0&&(C=l.onRecoverableError),l.formState!==void 0&&(L=l.formState)),t=lh(e,1,!0,t,l??null,s,r,L,i,b,C,fh),t.context=sh(null),l=t.current,s=Jt(),s=nn(s),r=dl(s),r.callback=null,ml(l,r,s),l=s,t.current.lanes=l,zl(t,l),Ta(t),e[sl]=t.current,mu(e),new Ri(t)},Jn.version="19.2.4",Jn}var Ch;function gg(){if(Ch)return Ou.exports;Ch=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(o){console.error(o)}}return n(),Ou.exports=vg(),Ou.exports}var yg=gg();var Ah="popstate";function jg(n={}){function o(u,x){let{pathname:m,search:h,hash:f}=u.location;return Ku("",{pathname:m,search:h,hash:f},x.state&&x.state.usr||null,x.state&&x.state.key||"default")}function c(u,x){return typeof x=="string"?x:cr(x)}return Sg(o,c,null,n)}function lt(n,o){if(n===!1||n===null||typeof n>"u")throw new Error(o)}function ya(n,o){if(!n){typeof console<"u"&&console.warn(o);try{throw new Error(o)}catch{}}}function Ng(){return Math.random().toString(36).substring(2,10)}function Mh(n,o){return{usr:n.state,key:n.key,idx:o}}function Ku(n,o,c=null,u){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof o=="string"?Js(o):o,state:c,key:o&&o.key||u||Ng()}}function cr({pathname:n="/",search:o="",hash:c=""}){return o&&o!=="?"&&(n+=o.charAt(0)==="?"?o:"?"+o),c&&c!=="#"&&(n+=c.charAt(0)==="#"?c:"#"+c),n}function Js(n){let o={};if(n){let c=n.indexOf("#");c>=0&&(o.hash=n.substring(c),n=n.substring(0,c));let u=n.indexOf("?");u>=0&&(o.search=n.substring(u),n=n.substring(0,u)),n&&(o.pathname=n)}return o}function Sg(n,o,c,u={}){let{window:x=document.defaultView,v5Compat:m=!1}=u,h=x.history,f="POP",v=null,d=j();d==null&&(d=0,h.replaceState({...h.state,idx:d},""));function j(){return(h.state||{idx:null}).idx}function S(){f="POP";let N=j(),y=N==null?null:N-d;d=N,v&&v({action:f,location:A.location,delta:y})}function M(N,y){f="PUSH";let w=Ku(A.location,N,y);d=j()+1;let p=Mh(w,d),I=A.createHref(w);try{h.pushState(p,"",I)}catch(J){if(J instanceof DOMException&&J.name==="DataCloneError")throw J;x.location.assign(I)}m&&v&&v({action:f,location:A.location,delta:1})}function k(N,y){f="REPLACE";let w=Ku(A.location,N,y);d=j();let p=Mh(w,d),I=A.createHref(w);h.replaceState(p,"",I),m&&v&&v({action:f,location:A.location,delta:0})}function z(N){return wg(N)}let A={get action(){return f},get location(){return n(x,h)},listen(N){if(v)throw new Error("A history only accepts one active listener");return x.addEventListener(Ah,S),v=N,()=>{x.removeEventListener(Ah,S),v=null}},createHref(N){return o(x,N)},createURL:z,encodeLocation(N){let y=z(N);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:M,replace:k,go(N){return h.go(N)}};return A}function wg(n,o=!1){let c="http://localhost";typeof window<"u"&&(c=window.location.origin!=="null"?window.location.origin:window.location.href),lt(c,"No window.location.(origin|href) available to create URL");let u=typeof n=="string"?n:cr(n);return u=u.replace(/ $/,"%20"),!o&&u.startsWith("//")&&(u=c+u),new URL(u,c)}function Ap(n,o,c="/"){return Cg(n,o,c,!1)}function Cg(n,o,c,u){let x=typeof o=="string"?Js(o):o,m=tl(x.pathname||"/",c);if(m==null)return null;let h=Mp(n);Ag(h);let f=null;for(let v=0;f==null&&v<h.length;++v){let d=Ig(m);f=Lg(h[v],d,u)}return f}function Mp(n,o=[],c=[],u="",x=!1){let m=(h,f,v=x,d)=>{let j={relativePath:d===void 0?h.path||"":d,caseSensitive:h.caseSensitive===!0,childrenIndex:f,route:h};if(j.relativePath.startsWith("/")){if(!j.relativePath.startsWith(u)&&v)return;lt(j.relativePath.startsWith(u),`Absolute route path "${j.relativePath}" nested under path "${u}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),j.relativePath=j.relativePath.slice(u.length)}let S=el([u,j.relativePath]),M=c.concat(j);h.children&&h.children.length>0&&(lt(h.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${S}".`),Mp(h.children,o,M,S,v)),!(h.path==null&&!h.index)&&o.push({path:S,score:Rg(S,h.index),routesMeta:M})};return n.forEach((h,f)=>{if(h.path===""||!h.path?.includes("?"))m(h,f);else for(let v of Tp(h.path))m(h,f,!0,v)}),o}function Tp(n){let o=n.split("/");if(o.length===0)return[];let[c,...u]=o,x=c.endsWith("?"),m=c.replace(/\?$/,"");if(u.length===0)return x?[m,""]:[m];let h=Tp(u.join("/")),f=[];return f.push(...h.map(v=>v===""?m:[m,v].join("/"))),x&&f.push(...h),f.map(v=>n.startsWith("/")&&v===""?"/":v)}function Ag(n){n.sort((o,c)=>o.score!==c.score?c.score-o.score:Og(o.routesMeta.map(u=>u.childrenIndex),c.routesMeta.map(u=>u.childrenIndex)))}var Mg=/^:[\w-]+$/,Tg=3,kg=2,Eg=1,Dg=10,zg=-2,Th=n=>n==="*";function Rg(n,o){let c=n.split("/"),u=c.length;return c.some(Th)&&(u+=zg),o&&(u+=kg),c.filter(x=>!Th(x)).reduce((x,m)=>x+(Mg.test(m)?Tg:m===""?Eg:Dg),u)}function Og(n,o){return n.length===o.length&&n.slice(0,-1).every((u,x)=>u===o[x])?n[n.length-1]-o[o.length-1]:0}function Lg(n,o,c=!1){let{routesMeta:u}=n,x={},m="/",h=[];for(let f=0;f<u.length;++f){let v=u[f],d=f===u.length-1,j=m==="/"?o:o.slice(m.length)||"/",S=Wi({path:v.relativePath,caseSensitive:v.caseSensitive,end:d},j),M=v.route;if(!S&&d&&c&&!u[u.length-1].route.index&&(S=Wi({path:v.relativePath,caseSensitive:v.caseSensitive,end:!1},j)),!S)return null;Object.assign(x,S.params),h.push({params:x,pathname:el([m,S.pathname]),pathnameBase:Fg(el([m,S.pathnameBase])),route:M}),S.pathnameBase!=="/"&&(m=el([m,S.pathnameBase]))}return h}function Wi(n,o){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[c,u]=_g(n.path,n.caseSensitive,n.end),x=o.match(c);if(!x)return null;let m=x[0],h=m.replace(/(.)\/+$/,"$1"),f=x.slice(1);return{params:u.reduce((d,{paramName:j,isOptional:S},M)=>{if(j==="*"){let z=f[M]||"";h=m.slice(0,m.length-z.length).replace(/(.)\/+$/,"$1")}const k=f[M];return S&&!k?d[j]=void 0:d[j]=(k||"").replace(/%2F/g,"/"),d},{}),pathname:m,pathnameBase:h,pattern:n}}function _g(n,o=!1,c=!0){ya(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let u=[],x="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,f,v)=>(u.push({paramName:f,isOptional:v!=null}),v?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(u.push({paramName:"*"}),x+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):c?x+="\\/*$":n!==""&&n!=="/"&&(x+="(?:(?=\\/|$))"),[new RegExp(x,o?void 0:"i"),u]}function Ig(n){try{return n.split("/").map(o=>decodeURIComponent(o).replace(/\//g,"%2F")).join("/")}catch(o){return ya(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${o}).`),n}}function tl(n,o){if(o==="/")return n;if(!n.toLowerCase().startsWith(o.toLowerCase()))return null;let c=o.endsWith("/")?o.length-1:o.length,u=n.charAt(c);return u&&u!=="/"?null:n.slice(c)||"/"}var Bg=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function Ug(n,o="/"){let{pathname:c,search:u="",hash:x=""}=typeof n=="string"?Js(n):n,m;return c?(c=c.replace(/\/\/+/g,"/"),c.startsWith("/")?m=kh(c.substring(1),"/"):m=kh(c,o)):m=o,{pathname:m,search:qg(u),hash:$g(x)}}function kh(n,o){let c=o.replace(/\/+$/,"").split("/");return n.split("/").forEach(x=>{x===".."?c.length>1&&c.pop():x!=="."&&c.push(x)}),c.length>1?c.join("/"):"/"}function Bu(n,o,c,u){return`Cannot include a '${n}' character in a manually specified \`to.${o}\` field [${JSON.stringify(u)}].  Please separate it out to the \`to.${c}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Hg(n){return n.filter((o,c)=>c===0||o.route.path&&o.route.path.length>0)}function cd(n){let o=Hg(n);return o.map((c,u)=>u===o.length-1?c.pathname:c.pathnameBase)}function ud(n,o,c,u=!1){let x;typeof n=="string"?x=Js(n):(x={...n},lt(!x.pathname||!x.pathname.includes("?"),Bu("?","pathname","search",x)),lt(!x.pathname||!x.pathname.includes("#"),Bu("#","pathname","hash",x)),lt(!x.search||!x.search.includes("#"),Bu("#","search","hash",x)));let m=n===""||x.pathname==="",h=m?"/":x.pathname,f;if(h==null)f=c;else{let S=o.length-1;if(!u&&h.startsWith("..")){let M=h.split("/");for(;M[0]==="..";)M.shift(),S-=1;x.pathname=M.join("/")}f=S>=0?o[S]:"/"}let v=Ug(x,f),d=h&&h!=="/"&&h.endsWith("/"),j=(m||h===".")&&c.endsWith("/");return!v.pathname.endsWith("/")&&(d||j)&&(v.pathname+="/"),v}var el=n=>n.join("/").replace(/\/\/+/g,"/"),Fg=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),qg=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,$g=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n,Pg=class{constructor(n,o,c,u=!1){this.status=n,this.statusText=o||"",this.internal=u,c instanceof Error?(this.data=c.toString(),this.error=c):this.data=c}};function Gg(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}function Vg(n){return n.map(o=>o.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var kp=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Ep(n,o){let c=n;if(typeof c!="string"||!Bg.test(c))return{absoluteURL:void 0,isExternal:!1,to:c};let u=c,x=!1;if(kp)try{let m=new URL(window.location.href),h=c.startsWith("//")?new URL(m.protocol+c):new URL(c),f=tl(h.pathname,o);h.origin===m.origin&&f!=null?c=f+h.search+h.hash:x=!0}catch{ya(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:u,isExternal:x,to:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Dp=["POST","PUT","PATCH","DELETE"];new Set(Dp);var Yg=["GET",...Dp];new Set(Yg);var Ws=g.createContext(null);Ws.displayName="DataRouter";var co=g.createContext(null);co.displayName="DataRouterState";var Qg=g.createContext(!1),zp=g.createContext({isTransitioning:!1});zp.displayName="ViewTransition";var Xg=g.createContext(new Map);Xg.displayName="Fetchers";var Zg=g.createContext(null);Zg.displayName="Await";var ta=g.createContext(null);ta.displayName="Navigation";var mr=g.createContext(null);mr.displayName="Location";var ja=g.createContext({outlet:null,matches:[],isDataRoute:!1});ja.displayName="Route";var dd=g.createContext(null);dd.displayName="RouteError";var Rp="REACT_ROUTER_ERROR",Kg="REDIRECT",Jg="ROUTE_ERROR_RESPONSE";function Wg(n){if(n.startsWith(`${Rp}:${Kg}:{`))try{let o=JSON.parse(n.slice(28));if(typeof o=="object"&&o&&typeof o.status=="number"&&typeof o.statusText=="string"&&typeof o.location=="string"&&typeof o.reloadDocument=="boolean"&&typeof o.replace=="boolean")return o}catch{}}function ey(n){if(n.startsWith(`${Rp}:${Jg}:{`))try{let o=JSON.parse(n.slice(40));if(typeof o=="object"&&o&&typeof o.status=="number"&&typeof o.statusText=="string")return new Pg(o.status,o.statusText,o.data)}catch{}}function ty(n,{relative:o}={}){lt(en(),"useHref() may be used only in the context of a <Router> component.");let{basename:c,navigator:u}=g.useContext(ta),{hash:x,pathname:m,search:h}=xr(n,{relative:o}),f=m;return c!=="/"&&(f=m==="/"?c:el([c,m])),u.createHref({pathname:f,search:h,hash:x})}function en(){return g.useContext(mr)!=null}function xa(){return lt(en(),"useLocation() may be used only in the context of a <Router> component."),g.useContext(mr).location}var Op="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Lp(n){g.useContext(ta).static||g.useLayoutEffect(n)}function Wl(){let{isDataRoute:n}=g.useContext(ja);return n?py():ay()}function ay(){lt(en(),"useNavigate() may be used only in the context of a <Router> component.");let n=g.useContext(Ws),{basename:o,navigator:c}=g.useContext(ta),{matches:u}=g.useContext(ja),{pathname:x}=xa(),m=JSON.stringify(cd(u)),h=g.useRef(!1);return Lp(()=>{h.current=!0}),g.useCallback((v,d={})=>{if(ya(h.current,Op),!h.current)return;if(typeof v=="number"){c.go(v);return}let j=ud(v,JSON.parse(m),x,d.relative==="path");n==null&&o!=="/"&&(j.pathname=j.pathname==="/"?o:el([o,j.pathname])),(d.replace?c.replace:c.push)(j,d.state,d)},[o,c,m,x,n])}var ly=g.createContext(null);function sy(n){let o=g.useContext(ja).outlet;return g.useMemo(()=>o&&g.createElement(ly.Provider,{value:n},o),[o,n])}function xr(n,{relative:o}={}){let{matches:c}=g.useContext(ja),{pathname:u}=xa(),x=JSON.stringify(cd(c));return g.useMemo(()=>ud(n,JSON.parse(x),u,o==="path"),[n,x,u,o])}function ny(n,o){return _p(n,o)}function _p(n,o,c,u,x){lt(en(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:m}=g.useContext(ta),{matches:h}=g.useContext(ja),f=h[h.length-1],v=f?f.params:{},d=f?f.pathname:"/",j=f?f.pathnameBase:"/",S=f&&f.route;{let w=S&&S.path||"";Bp(d,!S||w.endsWith("*")||w.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${w}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${w}"> to <Route path="${w==="/"?"*":`${w}/*`}">.`)}let M=xa(),k;if(o){let w=typeof o=="string"?Js(o):o;lt(j==="/"||w.pathname?.startsWith(j),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${j}" but pathname "${w.pathname}" was given in the \`location\` prop.`),k=w}else k=M;let z=k.pathname||"/",A=z;if(j!=="/"){let w=j.replace(/^\//,"").split("/");A="/"+z.replace(/^\//,"").split("/").slice(w.length).join("/")}let N=Ap(n,{pathname:A});ya(S||N!=null,`No routes matched location "${k.pathname}${k.search}${k.hash}" `),ya(N==null||N[N.length-1].route.element!==void 0||N[N.length-1].route.Component!==void 0||N[N.length-1].route.lazy!==void 0,`Matched leaf route at location "${k.pathname}${k.search}${k.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let y=uy(N&&N.map(w=>Object.assign({},w,{params:Object.assign({},v,w.params),pathname:el([j,m.encodeLocation?m.encodeLocation(w.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?j:el([j,m.encodeLocation?m.encodeLocation(w.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:w.pathnameBase])})),h,c,u,x);return o&&y?g.createElement(mr.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...k},navigationType:"POP"}},y):y}function ry(){let n=hy(),o=Gg(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),c=n instanceof Error?n.stack:null,u="rgba(200,200,200, 0.5)",x={padding:"0.5rem",backgroundColor:u},m={padding:"2px 4px",backgroundColor:u},h=null;return console.error("Error handled by React Router default ErrorBoundary:",n),h=g.createElement(g.Fragment,null,g.createElement("p",null," Hey developer "),g.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",g.createElement("code",{style:m},"ErrorBoundary")," or"," ",g.createElement("code",{style:m},"errorElement")," prop on your route.")),g.createElement(g.Fragment,null,g.createElement("h2",null,"Unexpected Application Error!"),g.createElement("h3",{style:{fontStyle:"italic"}},o),c?g.createElement("pre",{style:x},c):null,h)}var iy=g.createElement(ry,null),Ip=class extends g.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,o){return o.location!==n.location||o.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:o.error,location:o.location,revalidation:n.revalidation||o.revalidation}}componentDidCatch(n,o){this.props.onError?this.props.onError(n,o):console.error("React Router caught the following error during render",n)}render(){let n=this.state.error;if(this.context&&typeof n=="object"&&n&&"digest"in n&&typeof n.digest=="string"){const c=ey(n.digest);c&&(n=c)}let o=n!==void 0?g.createElement(ja.Provider,{value:this.props.routeContext},g.createElement(dd.Provider,{value:n,children:this.props.component})):this.props.children;return this.context?g.createElement(oy,{error:n},o):o}};Ip.contextType=Qg;var Uu=new WeakMap;function oy({children:n,error:o}){let{basename:c}=g.useContext(ta);if(typeof o=="object"&&o&&"digest"in o&&typeof o.digest=="string"){let u=Wg(o.digest);if(u){let x=Uu.get(o);if(x)throw x;let m=Ep(u.location,c);if(kp&&!Uu.get(o))if(m.isExternal||u.reloadDocument)window.location.href=m.absoluteURL||m.to;else{const h=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(m.to,{replace:u.replace}));throw Uu.set(o,h),h}return g.createElement("meta",{httpEquiv:"refresh",content:`0;url=${m.absoluteURL||m.to}`})}}return n}function cy({routeContext:n,match:o,children:c}){let u=g.useContext(Ws);return u&&u.static&&u.staticContext&&(o.route.errorElement||o.route.ErrorBoundary)&&(u.staticContext._deepestRenderedBoundaryId=o.route.id),g.createElement(ja.Provider,{value:n},c)}function uy(n,o=[],c=null,u=null,x=null){if(n==null){if(!c)return null;if(c.errors)n=c.matches;else if(o.length===0&&!c.initialized&&c.matches.length>0)n=c.matches;else return null}let m=n,h=c?.errors;if(h!=null){let j=m.findIndex(S=>S.route.id&&h?.[S.route.id]!==void 0);lt(j>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(h).join(",")}`),m=m.slice(0,Math.min(m.length,j+1))}let f=!1,v=-1;if(c)for(let j=0;j<m.length;j++){let S=m[j];if((S.route.HydrateFallback||S.route.hydrateFallbackElement)&&(v=j),S.route.id){let{loaderData:M,errors:k}=c,z=S.route.loader&&!M.hasOwnProperty(S.route.id)&&(!k||k[S.route.id]===void 0);if(S.route.lazy||z){f=!0,v>=0?m=m.slice(0,v+1):m=[m[0]];break}}}let d=c&&u?(j,S)=>{u(j,{location:c.location,params:c.matches?.[0]?.params??{},unstable_pattern:Vg(c.matches),errorInfo:S})}:void 0;return m.reduceRight((j,S,M)=>{let k,z=!1,A=null,N=null;c&&(k=h&&S.route.id?h[S.route.id]:void 0,A=S.route.errorElement||iy,f&&(v<0&&M===0?(Bp("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),z=!0,N=null):v===M&&(z=!0,N=S.route.hydrateFallbackElement||null)));let y=o.concat(m.slice(0,M+1)),w=()=>{let p;return k?p=A:z?p=N:S.route.Component?p=g.createElement(S.route.Component,null):S.route.element?p=S.route.element:p=j,g.createElement(cy,{match:S,routeContext:{outlet:j,matches:y,isDataRoute:c!=null},children:p})};return c&&(S.route.ErrorBoundary||S.route.errorElement||M===0)?g.createElement(Ip,{location:c.location,revalidation:c.revalidation,component:A,error:k,children:w(),routeContext:{outlet:null,matches:y,isDataRoute:!0},onError:d}):w()},null)}function md(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function dy(n){let o=g.useContext(Ws);return lt(o,md(n)),o}function my(n){let o=g.useContext(co);return lt(o,md(n)),o}function xy(n){let o=g.useContext(ja);return lt(o,md(n)),o}function xd(n){let o=xy(n),c=o.matches[o.matches.length-1];return lt(c.route.id,`${n} can only be used on routes that contain a unique "id"`),c.route.id}function fy(){return xd("useRouteId")}function hy(){let n=g.useContext(dd),o=my("useRouteError"),c=xd("useRouteError");return n!==void 0?n:o.errors?.[c]}function py(){let{router:n}=dy("useNavigate"),o=xd("useNavigate"),c=g.useRef(!1);return Lp(()=>{c.current=!0}),g.useCallback(async(x,m={})=>{ya(c.current,Op),c.current&&(typeof x=="number"?await n.navigate(x):await n.navigate(x,{fromRouteId:o,...m}))},[n,o])}var Eh={};function Bp(n,o,c){!o&&!Eh[n]&&(Eh[n]=!0,ya(!1,c))}g.memo(by);function by({routes:n,future:o,state:c,onError:u}){return _p(n,void 0,c,u,o)}function eo({to:n,replace:o,state:c,relative:u}){lt(en(),"<Navigate> may be used only in the context of a <Router> component.");let{static:x}=g.useContext(ta);ya(!x,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:m}=g.useContext(ja),{pathname:h}=xa(),f=Wl(),v=ud(n,cd(m),h,u==="path"),d=JSON.stringify(v);return g.useEffect(()=>{f(JSON.parse(d),{replace:o,state:c,relative:u})},[f,d,u,o,c]),null}function Up(n){return sy(n.context)}function at(n){lt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function vy({basename:n="/",children:o=null,location:c,navigationType:u="POP",navigator:x,static:m=!1,unstable_useTransitions:h}){lt(!en(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let f=n.replace(/^\/*/,"/"),v=g.useMemo(()=>({basename:f,navigator:x,static:m,unstable_useTransitions:h,future:{}}),[f,x,m,h]);typeof c=="string"&&(c=Js(c));let{pathname:d="/",search:j="",hash:S="",state:M=null,key:k="default"}=c,z=g.useMemo(()=>{let A=tl(d,f);return A==null?null:{location:{pathname:A,search:j,hash:S,state:M,key:k},navigationType:u}},[f,d,j,S,M,k,u]);return ya(z!=null,`<Router basename="${f}"> is not able to match the URL "${d}${j}${S}" because it does not start with the basename, so the <Router> won't render anything.`),z==null?null:g.createElement(ta.Provider,{value:v},g.createElement(mr.Provider,{children:o,value:z}))}function gy({children:n,location:o}){return ny(Ju(n),o)}function Ju(n,o=[]){let c=[];return g.Children.forEach(n,(u,x)=>{if(!g.isValidElement(u))return;let m=[...o,x];if(u.type===g.Fragment){c.push.apply(c,Ju(u.props.children,m));return}lt(u.type===at,`[${typeof u.type=="string"?u.type:u.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),lt(!u.props.index||!u.props.children,"An index route cannot have child routes.");let h={id:u.props.id||m.join("-"),caseSensitive:u.props.caseSensitive,element:u.props.element,Component:u.props.Component,index:u.props.index,path:u.props.path,middleware:u.props.middleware,loader:u.props.loader,action:u.props.action,hydrateFallbackElement:u.props.hydrateFallbackElement,HydrateFallback:u.props.HydrateFallback,errorElement:u.props.errorElement,ErrorBoundary:u.props.ErrorBoundary,hasErrorBoundary:u.props.hasErrorBoundary===!0||u.props.ErrorBoundary!=null||u.props.errorElement!=null,shouldRevalidate:u.props.shouldRevalidate,handle:u.props.handle,lazy:u.props.lazy};u.props.children&&(h.children=Ju(u.props.children,m)),c.push(h)}),c}var Qi="get",Xi="application/x-www-form-urlencoded";function uo(n){return typeof HTMLElement<"u"&&n instanceof HTMLElement}function yy(n){return uo(n)&&n.tagName.toLowerCase()==="button"}function jy(n){return uo(n)&&n.tagName.toLowerCase()==="form"}function Ny(n){return uo(n)&&n.tagName.toLowerCase()==="input"}function Sy(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function wy(n,o){return n.button===0&&(!o||o==="_self")&&!Sy(n)}var Li=null;function Cy(){if(Li===null)try{new FormData(document.createElement("form"),0),Li=!1}catch{Li=!0}return Li}var Ay=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Hu(n){return n!=null&&!Ay.has(n)?(ya(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Xi}"`),null):n}function My(n,o){let c,u,x,m,h;if(jy(n)){let f=n.getAttribute("action");u=f?tl(f,o):null,c=n.getAttribute("method")||Qi,x=Hu(n.getAttribute("enctype"))||Xi,m=new FormData(n)}else if(yy(n)||Ny(n)&&(n.type==="submit"||n.type==="image")){let f=n.form;if(f==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let v=n.getAttribute("formaction")||f.getAttribute("action");if(u=v?tl(v,o):null,c=n.getAttribute("formmethod")||f.getAttribute("method")||Qi,x=Hu(n.getAttribute("formenctype"))||Hu(f.getAttribute("enctype"))||Xi,m=new FormData(f,n),!Cy()){let{name:d,type:j,value:S}=n;if(j==="image"){let M=d?`${d}.`:"";m.append(`${M}x`,"0"),m.append(`${M}y`,"0")}else d&&m.append(d,S)}}else{if(uo(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');c=Qi,u=null,x=Xi,h=n}return m&&x==="text/plain"&&(h=m,m=void 0),{action:u,method:c.toLowerCase(),encType:x,formData:m,body:h}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function fd(n,o){if(n===!1||n===null||typeof n>"u")throw new Error(o)}function Ty(n,o,c,u){let x=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return c?x.pathname.endsWith("/")?x.pathname=`${x.pathname}_.${u}`:x.pathname=`${x.pathname}.${u}`:x.pathname==="/"?x.pathname=`_root.${u}`:o&&tl(x.pathname,o)==="/"?x.pathname=`${o.replace(/\/$/,"")}/_root.${u}`:x.pathname=`${x.pathname.replace(/\/$/,"")}.${u}`,x}async function ky(n,o){if(n.id in o)return o[n.id];try{let c=await import(n.module);return o[n.id]=c,c}catch(c){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(c),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Ey(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function Dy(n,o,c){let u=await Promise.all(n.map(async x=>{let m=o.routes[x.route.id];if(m){let h=await ky(m,c);return h.links?h.links():[]}return[]}));return Ly(u.flat(1).filter(Ey).filter(x=>x.rel==="stylesheet"||x.rel==="preload").map(x=>x.rel==="stylesheet"?{...x,rel:"prefetch",as:"style"}:{...x,rel:"prefetch"}))}function Dh(n,o,c,u,x,m){let h=(v,d)=>c[d]?v.route.id!==c[d].route.id:!0,f=(v,d)=>c[d].pathname!==v.pathname||c[d].route.path?.endsWith("*")&&c[d].params["*"]!==v.params["*"];return m==="assets"?o.filter((v,d)=>h(v,d)||f(v,d)):m==="data"?o.filter((v,d)=>{let j=u.routes[v.route.id];if(!j||!j.hasLoader)return!1;if(h(v,d)||f(v,d))return!0;if(v.route.shouldRevalidate){let S=v.route.shouldRevalidate({currentUrl:new URL(x.pathname+x.search+x.hash,window.origin),currentParams:c[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:v.params,defaultShouldRevalidate:!0});if(typeof S=="boolean")return S}return!0}):[]}function zy(n,o,{includeHydrateFallback:c}={}){return Ry(n.map(u=>{let x=o.routes[u.route.id];if(!x)return[];let m=[x.module];return x.clientActionModule&&(m=m.concat(x.clientActionModule)),x.clientLoaderModule&&(m=m.concat(x.clientLoaderModule)),c&&x.hydrateFallbackModule&&(m=m.concat(x.hydrateFallbackModule)),x.imports&&(m=m.concat(x.imports)),m}).flat(1))}function Ry(n){return[...new Set(n)]}function Oy(n){let o={},c=Object.keys(n).sort();for(let u of c)o[u]=n[u];return o}function Ly(n,o){let c=new Set;return new Set(o),n.reduce((u,x)=>{let m=JSON.stringify(Oy(x));return c.has(m)||(c.add(m),u.push({key:m,link:x})),u},[])}function Hp(){let n=g.useContext(Ws);return fd(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function _y(){let n=g.useContext(co);return fd(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var hd=g.createContext(void 0);hd.displayName="FrameworkContext";function Fp(){let n=g.useContext(hd);return fd(n,"You must render this element inside a <HydratedRouter> element"),n}function Iy(n,o){let c=g.useContext(hd),[u,x]=g.useState(!1),[m,h]=g.useState(!1),{onFocus:f,onBlur:v,onMouseEnter:d,onMouseLeave:j,onTouchStart:S}=o,M=g.useRef(null);g.useEffect(()=>{if(n==="render"&&h(!0),n==="viewport"){let A=y=>{y.forEach(w=>{h(w.isIntersecting)})},N=new IntersectionObserver(A,{threshold:.5});return M.current&&N.observe(M.current),()=>{N.disconnect()}}},[n]),g.useEffect(()=>{if(u){let A=setTimeout(()=>{h(!0)},100);return()=>{clearTimeout(A)}}},[u]);let k=()=>{x(!0)},z=()=>{x(!1),h(!1)};return c?n!=="intent"?[m,M,{}]:[m,M,{onFocus:Wn(f,k),onBlur:Wn(v,z),onMouseEnter:Wn(d,k),onMouseLeave:Wn(j,z),onTouchStart:Wn(S,k)}]:[!1,M,{}]}function Wn(n,o){return c=>{n&&n(c),c.defaultPrevented||o(c)}}function By({page:n,...o}){let{router:c}=Hp(),u=g.useMemo(()=>Ap(c.routes,n,c.basename),[c.routes,n,c.basename]);return u?g.createElement(Hy,{page:n,matches:u,...o}):null}function Uy(n){let{manifest:o,routeModules:c}=Fp(),[u,x]=g.useState([]);return g.useEffect(()=>{let m=!1;return Dy(n,o,c).then(h=>{m||x(h)}),()=>{m=!0}},[n,o,c]),u}function Hy({page:n,matches:o,...c}){let u=xa(),{future:x,manifest:m,routeModules:h}=Fp(),{basename:f}=Hp(),{loaderData:v,matches:d}=_y(),j=g.useMemo(()=>Dh(n,o,d,m,u,"data"),[n,o,d,m,u]),S=g.useMemo(()=>Dh(n,o,d,m,u,"assets"),[n,o,d,m,u]),M=g.useMemo(()=>{if(n===u.pathname+u.search+u.hash)return[];let A=new Set,N=!1;if(o.forEach(w=>{let p=m.routes[w.route.id];!p||!p.hasLoader||(!j.some(I=>I.route.id===w.route.id)&&w.route.id in v&&h[w.route.id]?.shouldRevalidate||p.hasClientLoader?N=!0:A.add(w.route.id))}),A.size===0)return[];let y=Ty(n,f,x.unstable_trailingSlashAwareDataRequests,"data");return N&&A.size>0&&y.searchParams.set("_routes",o.filter(w=>A.has(w.route.id)).map(w=>w.route.id).join(",")),[y.pathname+y.search]},[f,x.unstable_trailingSlashAwareDataRequests,v,u,m,j,o,n,h]),k=g.useMemo(()=>zy(S,m),[S,m]),z=Uy(S);return g.createElement(g.Fragment,null,M.map(A=>g.createElement("link",{key:A,rel:"prefetch",as:"fetch",href:A,...c})),k.map(A=>g.createElement("link",{key:A,rel:"modulepreload",href:A,...c})),z.map(({key:A,link:N})=>g.createElement("link",{key:A,nonce:c.nonce,...N,crossOrigin:N.crossOrigin??c.crossOrigin})))}function Fy(...n){return o=>{n.forEach(c=>{typeof c=="function"?c(o):c!=null&&(c.current=o)})}}var qy=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{qy&&(window.__reactRouterVersion="7.13.0")}catch{}function $y({basename:n,children:o,unstable_useTransitions:c,window:u}){let x=g.useRef();x.current==null&&(x.current=jg({window:u,v5Compat:!0}));let m=x.current,[h,f]=g.useState({action:m.action,location:m.location}),v=g.useCallback(d=>{c===!1?f(d):g.startTransition(()=>f(d))},[c]);return g.useLayoutEffect(()=>m.listen(v),[m,v]),g.createElement(vy,{basename:n,children:o,location:h.location,navigationType:h.action,navigator:m,unstable_useTransitions:c})}var qp=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Gs=g.forwardRef(function({onClick:o,discover:c="render",prefetch:u="none",relative:x,reloadDocument:m,replace:h,state:f,target:v,to:d,preventScrollReset:j,viewTransition:S,unstable_defaultShouldRevalidate:M,...k},z){let{basename:A,unstable_useTransitions:N}=g.useContext(ta),y=typeof d=="string"&&qp.test(d),w=Ep(d,A);d=w.to;let p=ty(d,{relative:x}),[I,J,q]=Iy(u,k),Z=Vy(d,{replace:h,state:f,target:v,preventScrollReset:j,relative:x,viewTransition:S,unstable_defaultShouldRevalidate:M,unstable_useTransitions:N});function D(P){o&&o(P),P.defaultPrevented||Z(P)}let $=g.createElement("a",{...k,...q,href:w.absoluteURL||p,onClick:w.isExternal||m?o:D,ref:Fy(z,J),target:v,"data-discover":!y&&c==="render"?"true":void 0});return I&&!y?g.createElement(g.Fragment,null,$,g.createElement(By,{page:p})):$});Gs.displayName="Link";var pd=g.forwardRef(function({"aria-current":o="page",caseSensitive:c=!1,className:u="",end:x=!1,style:m,to:h,viewTransition:f,children:v,...d},j){let S=xr(h,{relative:d.relative}),M=xa(),k=g.useContext(co),{navigator:z,basename:A}=g.useContext(ta),N=k!=null&&Ky(S)&&f===!0,y=z.encodeLocation?z.encodeLocation(S).pathname:S.pathname,w=M.pathname,p=k&&k.navigation&&k.navigation.location?k.navigation.location.pathname:null;c||(w=w.toLowerCase(),p=p?p.toLowerCase():null,y=y.toLowerCase()),p&&A&&(p=tl(p,A)||p);const I=y!=="/"&&y.endsWith("/")?y.length-1:y.length;let J=w===y||!x&&w.startsWith(y)&&w.charAt(I)==="/",q=p!=null&&(p===y||!x&&p.startsWith(y)&&p.charAt(y.length)==="/"),Z={isActive:J,isPending:q,isTransitioning:N},D=J?o:void 0,$;typeof u=="function"?$=u(Z):$=[u,J?"active":null,q?"pending":null,N?"transitioning":null].filter(Boolean).join(" ");let P=typeof m=="function"?m(Z):m;return g.createElement(Gs,{...d,"aria-current":D,className:$,ref:j,style:P,to:h,viewTransition:f},typeof v=="function"?v(Z):v)});pd.displayName="NavLink";var Py=g.forwardRef(({discover:n="render",fetcherKey:o,navigate:c,reloadDocument:u,replace:x,state:m,method:h=Qi,action:f,onSubmit:v,relative:d,preventScrollReset:j,viewTransition:S,unstable_defaultShouldRevalidate:M,...k},z)=>{let{unstable_useTransitions:A}=g.useContext(ta),N=Xy(),y=Zy(f,{relative:d}),w=h.toLowerCase()==="get"?"get":"post",p=typeof f=="string"&&qp.test(f),I=J=>{if(v&&v(J),J.defaultPrevented)return;J.preventDefault();let q=J.nativeEvent.submitter,Z=q?.getAttribute("formmethod")||h,D=()=>N(q||J.currentTarget,{fetcherKey:o,method:Z,navigate:c,replace:x,state:m,relative:d,preventScrollReset:j,viewTransition:S,unstable_defaultShouldRevalidate:M});A&&c!==!1?g.startTransition(()=>D()):D()};return g.createElement("form",{ref:z,method:w,action:y,onSubmit:u?v:I,...k,"data-discover":!p&&n==="render"?"true":void 0})});Py.displayName="Form";function Gy(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function $p(n){let o=g.useContext(Ws);return lt(o,Gy(n)),o}function Vy(n,{target:o,replace:c,state:u,preventScrollReset:x,relative:m,viewTransition:h,unstable_defaultShouldRevalidate:f,unstable_useTransitions:v}={}){let d=Wl(),j=xa(),S=xr(n,{relative:m});return g.useCallback(M=>{if(wy(M,o)){M.preventDefault();let k=c!==void 0?c:cr(j)===cr(S),z=()=>d(n,{replace:k,state:u,preventScrollReset:x,relative:m,viewTransition:h,unstable_defaultShouldRevalidate:f});v?g.startTransition(()=>z()):z()}},[j,d,S,c,u,o,n,x,m,h,f,v])}var Yy=0,Qy=()=>`__${String(++Yy)}__`;function Xy(){let{router:n}=$p("useSubmit"),{basename:o}=g.useContext(ta),c=fy(),u=n.fetch,x=n.navigate;return g.useCallback(async(m,h={})=>{let{action:f,method:v,encType:d,formData:j,body:S}=My(m,o);if(h.navigate===!1){let M=h.fetcherKey||Qy();await u(M,c,h.action||f,{unstable_defaultShouldRevalidate:h.unstable_defaultShouldRevalidate,preventScrollReset:h.preventScrollReset,formData:j,body:S,formMethod:h.method||v,formEncType:h.encType||d,flushSync:h.flushSync})}else await x(h.action||f,{unstable_defaultShouldRevalidate:h.unstable_defaultShouldRevalidate,preventScrollReset:h.preventScrollReset,formData:j,body:S,formMethod:h.method||v,formEncType:h.encType||d,replace:h.replace,state:h.state,fromRouteId:c,flushSync:h.flushSync,viewTransition:h.viewTransition})},[u,x,o,c])}function Zy(n,{relative:o}={}){let{basename:c}=g.useContext(ta),u=g.useContext(ja);lt(u,"useFormAction must be used inside a RouteContext");let[x]=u.matches.slice(-1),m={...xr(n||".",{relative:o})},h=xa();if(n==null){m.search=h.search;let f=new URLSearchParams(m.search),v=f.getAll("index");if(v.some(j=>j==="")){f.delete("index"),v.filter(S=>S).forEach(S=>f.append("index",S));let j=f.toString();m.search=j?`?${j}`:""}}return(!n||n===".")&&x.route.index&&(m.search=m.search?m.search.replace(/^\?/,"?index&"):"?index"),c!=="/"&&(m.pathname=m.pathname==="/"?c:el([c,m.pathname])),cr(m)}function Ky(n,{relative:o}={}){let c=g.useContext(zp);lt(c!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:u}=$p("useViewTransitionState"),x=xr(n,{relative:o});if(!c.isTransitioning)return!1;let m=tl(c.currentLocation.pathname,u)||c.currentLocation.pathname,h=tl(c.nextLocation.pathname,u)||c.nextLocation.pathname;return Wi(x.pathname,h)!=null||Wi(x.pathname,m)!=null}const Jy="AKfycbx41pXUwRKfjJTHb34C_mSSshatbk36lmmiD-deeaovUA3vVvjumu0sxMVsRUaQiEo",bd="cf_access_token",vd="cf_token_expiry",gd="cf_user_name";function to(){const n=localStorage.getItem(vd);return n&&Date.now()>Number(n)?(Zi(),null):localStorage.getItem(bd)}function zh(n,o=3500){localStorage.setItem(bd,n),localStorage.setItem(vd,String(Date.now()+o*1e3))}function Zi(){localStorage.removeItem(bd),localStorage.removeItem(vd),localStorage.removeItem(gd)}function Rh(){return!!to()}function Oh(n){localStorage.setItem(gd,n)}function Wy(){return localStorage.getItem(gd)||""}let Wu=null;function e1(n){Wu=n}async function be(n,o={},c=!0){const u=to();if(!u)throw new Error("Not authenticated. Please sign in.");const f=await(await fetch(`https://script.googleapis.com/v1/scripts/${Jy}:run`,{method:"POST",headers:{Authorization:`Bearer ${u}`,"Content-Type":"application/json"},body:JSON.stringify({function:"apiRouter",devMode:!1,parameters:[{action:n,params:o,userName:Wy()}]})})).json();if(f.error){if(c&&(f.error.code===401||f.error.code===403||f.error.status==="UNAUTHENTICATED"||f.error.status==="PERMISSION_DENIED")&&Wu)try{return await Wu(),be(n,o,!1)}catch{}if(f.error.details&&f.error.details.length>0){const v=f.error.details[0];throw new Error(v.errorMessage||"Script execution error")}throw new Error(f.error.message||"API error")}if(f.response&&f.response.result!==void 0){const v=f.response.result;if(v&&!v.success){const j=new Error(v.error||"Unknown error");throw j.code=v.code,j}const d=v?v.data:null;if(d&&d.success===!1)throw new Error(d.message||"Operation failed");return d}throw new Error("Unexpected response format")}const Lh=()=>be("auth:me"),t1=(n,o)=>be("auth:invite",{email:n,name:o}),ao=()=>be("data:load-all"),Pp=()=>be("members:list"),Gp=n=>be("member:create",n),Vp=n=>be("member:update",n),Yp=n=>be("member:delete",{memberId:n}),Qp=()=>be("banks:list"),Xp=n=>be("bank:create",n),a1=n=>be("bank:update",n),Zp=n=>be("bank:delete",{accountId:n}),Kp=()=>be("invaccounts:list"),Jp=n=>be("invacct:create",n),l1=n=>be("invacct:update",n),Wp=n=>be("invacct:delete",{accountId:n}),s1=()=>be("portfolios:list"),n1=n=>be("portfolio:create",n),r1=n=>be("portfolio:update",n),i1=n=>be("portfolio:delete",{portfolioId:n}),o1=n=>be("mf:invest",n),c1=n=>be("mf:redeem",n),u1=n=>be("mf:switch",n),d1=(n,o)=>be("mf:allocations-update",{portfolioId:n,allocations:o}),m1=()=>be("funds:all"),e0=()=>be("goals:list"),t0=n=>be("goal:create",n),x1=(n,o)=>be("goal:update",{goalId:n,...o}),a0=n=>be("goal:delete",{goalId:n}),f1=()=>be("goal:mappings-list"),h1=(n,o)=>be("goal:mappings-update",{goalId:n,mappings:o}),l0=()=>be("insurance:list"),s0=n=>be("insurance:create",n),p1=n=>be("insurance:update",n),n0=n=>be("insurance:delete",{policyId:n}),r0=()=>be("liabilities:list"),i0=n=>be("liability:create",n),b1=n=>be("liability:update",n),o0=n=>be("liability:delete",{liabilityId:n}),c0=()=>be("otherinv:list"),u0=n=>be("otherinv:create",n),v1=n=>be("otherinv:update",n),d0=n=>be("otherinv:delete",{investmentId:n}),m0=()=>be("stock-portfolios:list"),x0=n=>be("stock-portfolio:create",n),g1=n=>be("stock-portfolio:update",n),f0=n=>be("stock-portfolio:delete",{portfolioId:n}),y1=n=>be("stock:buy",n),j1=n=>be("stock:sell",n),N1=()=>be("mf-holdings:list"),S1=()=>be("mf-transactions:list"),w1=()=>be("stock-holdings:list-all"),C1=()=>be("stock-transactions:list-all"),h0=()=>be("reminders:list"),p0=n=>be("reminder:create",n),A1=n=>be("reminder:update",n),b0=n=>be("reminder:delete",{reminderId:n}),M1=n=>be("healthcheck:save",n),v0=()=>be("healthcheck:get"),T1=()=>be("settings:list"),k1=n=>be("settings:update",n),E1=()=>be("market:data"),D1=()=>be("data:refresh-master");typeof window<"u"&&(window._cf={callAPI:be,checkTriggers:()=>be("test:triggers"),diagnose:()=>be("test:diagnose")});const z1="capital-friends",R1=1,Gt="cache";let er=null;function tn(){return er||(er=new Promise((n,o)=>{const c=indexedDB.open(z1,R1);c.onupgradeneeded=u=>{const x=u.target.result;x.objectStoreNames.contains(Gt)||x.createObjectStore(Gt,{keyPath:"key"})},c.onsuccess=()=>n(c.result),c.onerror=()=>{console.warn("[idb] Failed to open database:",c.error),er=null,o(c.error)}}),er)}async function g0(n){try{const o=await tn();return new Promise(c=>{const x=o.transaction(Gt,"readonly").objectStore(Gt).get(n);x.onsuccess=()=>c(x.result?x.result.data:null),x.onerror=()=>c(null)})}catch{return null}}async function O1(n){try{const o=await tn();return new Promise(c=>{const x=o.transaction(Gt,"readonly").objectStore(Gt).get(n);x.onsuccess=()=>c(x.result||null),x.onerror=()=>c(null)})}catch{return null}}async function Pt(n,o){try{const c=await tn();return new Promise(u=>{const x=c.transaction(Gt,"readwrite");x.objectStore(Gt).put({key:n,data:o,updatedAt:Date.now()}),x.oncomplete=()=>u(),x.onerror=()=>u()})}catch{}}async function L1(){try{const n=await tn();return new Promise(o=>{const u=n.transaction(Gt,"readonly").objectStore(Gt).getAll();u.onsuccess=()=>{const x={};for(const m of u.result||[])x[m.key]=m.data;o(x)},u.onerror=()=>o({})})}catch{return{}}}async function Fu(n){try{const o=await tn();return new Promise(c=>{const u=o.transaction(Gt,"readwrite"),x=u.objectStore(Gt),m=Date.now();for(const[h,f]of Object.entries(n))x.put({key:h,data:f,updatedAt:m});u.oncomplete=()=>c(),u.onerror=()=>c()})}catch{}}async function _1(){try{const n=await tn();return new Promise(o=>{const c=n.transaction(Gt,"readwrite");c.objectStore(Gt).clear(),c.oncomplete=()=>o(),c.onerror=()=>o()})}catch{}}const y0=g.createContext(null),I1="868467315292-7hfrvkh8pq8f1e2l3v38m6qrupboa295.apps.googleusercontent.com",B1=["https://www.googleapis.com/auth/spreadsheets","https://www.googleapis.com/auth/drive","https://www.googleapis.com/auth/gmail.send","https://www.googleapis.com/auth/script.scriptapp","openid","email","profile"].join(" "),yd="cf_user_profile";function _h(){try{const n=localStorage.getItem(yd);return n?JSON.parse(n):null}catch{return null}}function U1(n){try{localStorage.setItem(yd,JSON.stringify(n))}catch{}}function Ih(){localStorage.removeItem(yd)}function H1({children:n}){const o=Rh()?_h():null,[c,u]=g.useState(o),[x,m]=g.useState(!o),[h,f]=g.useState(null),v=g.useRef(null);function d(y){u(y),y?U1(y):Ih()}g.useEffect(()=>{const y=()=>{if(!window.google?.accounts?.oauth2){setTimeout(y,200);return}v.current=window.google.accounts.oauth2.initTokenClient({client_id:I1,scope:B1,callback:j}),e1(k),Rh()?M():m(!1)};y()},[]);async function j(y){if(y.error){f(y.error_description||y.error),m(!1);return}try{m(!0),f(null),zh(y.access_token,y.expires_in);const w=await S(y.access_token);Oh(w.name||"");const p=await Lh();d({email:p.email||w.email,name:p.name||w.name,role:p.role,picture:w.picture||""})}catch(w){f(w.message),Zi(),d(null)}finally{m(!1)}}async function S(y){const w=await fetch("https://www.googleapis.com/oauth2/v3/userinfo",{headers:{Authorization:`Bearer ${y}`}});if(!w.ok)throw new Error("Failed to fetch user profile");return w.json()}async function M(){const y=!!_h();try{const w=to(),p=await S(w);Oh(p.name||"");const I=await Lh();d({email:I.email||p.email,name:I.name||p.name,role:I.role,picture:p.picture||""})}catch{Zi(),d(null)}finally{y||m(!1)}}function k(){return new Promise((y,w)=>{if(!v.current){w(new Error("Token client not initialized"));return}const p=v.current,I=p.callback;p.callback=J=>{p.callback=I,J.error?w(new Error(J.error)):(zh(J.access_token,J.expires_in),y())},p.requestAccessToken({prompt:""})})}const z=g.useCallback(()=>{v.current&&(f(null),v.current.requestAccessToken())},[]),A=g.useCallback(()=>{const y=to();y&&window.google?.accounts?.oauth2&&window.google.accounts.oauth2.revoke(y),Zi(),Ih(),_1(),sessionStorage.removeItem("cf_health_check"),u(null)},[]),N={user:c,loading:x,error:h,isAuthenticated:!!c,isOwner:c?.role==="owner",signIn:z,signOut:A};return a.jsx(y0.Provider,{value:N,children:n})}function es(){const n=g.useContext(y0);if(!n)throw new Error("useAuth must be used within AuthProvider");return n}const j0=g.createContext();function F1({children:n}){const[o,c]=g.useState(()=>{const x=localStorage.getItem("cf-theme");return x||(window.matchMedia("(prefers-color-scheme: light)").matches?"light":"dark")});g.useEffect(()=>{localStorage.setItem("cf-theme",o),document.documentElement.setAttribute("data-theme",o)},[o]);const u=()=>c(x=>x==="dark"?"light":"dark");return a.jsx(j0.Provider,{value:{theme:o,toggle:u},children:n})}function N0(){return g.useContext(j0)}const S0=g.createContext(),w0="cf_hc_done";function q1(){try{return sessionStorage.getItem(w0)==="1"?!0:null}catch{return null}}function Fs(n){try{sessionStorage.setItem(w0,n?"1":"0")}catch{}}function $1({children:n}){const{isAuthenticated:o}=es(),c=o?q1():null,[u,x]=g.useState(!0),[m,h]=g.useState(!1),[f,v]=g.useState(null),[d,j]=g.useState(null),[S,M]=g.useState(null),[k,z]=g.useState(null),[A,N]=g.useState(null),[y,w]=g.useState(null),[p,I]=g.useState(null),[J,q]=g.useState(null),[Z,D]=g.useState(null),[$,P]=g.useState(null),[le,E]=g.useState(null),[fe,W]=g.useState(null),[se,F]=g.useState(null),[T,O]=g.useState(null),[ie,ue]=g.useState(null),[R,ee]=g.useState(null),[oe,de]=g.useState(null),[je,_]=g.useState(c!==null?c:null),te=g.useRef(!1),he=g.useCallback(U=>{U&&("members"in U&&j(U.members||[]),"bankAccounts"in U&&M(U.bankAccounts||[]),"investments"in U&&z(U.investments||[]),"insurancePolicies"in U&&N(U.insurancePolicies||[]),"liabilities"in U&&w(U.liabilities||[]),"otherInvestments"in U&&I(U.otherInvestments||[]),"stockPortfolios"in U&&q(U.stockPortfolios||[]),"stockHoldings"in U&&D(U.stockHoldings||[]),"stockTransactions"in U&&P(U.stockTransactions||[]),"mfPortfolios"in U&&E(U.mfPortfolios||[]),"mfHoldings"in U&&W(U.mfHoldings||[]),"mfTransactions"in U&&F(U.mfTransactions||[]),"goals"in U&&O(U.goals||[]),"reminders"in U&&ue(U.reminders||[]),"goalPortfolioMappings"in U&&ee(U.goalPortfolioMappings||[]),"settings"in U&&de(U.settings||{}))},[]),pe=g.useCallback(U=>{Fu({members:U.members||[],bankAccounts:U.bankAccounts||[],investments:U.investments||[],insurancePolicies:U.insurancePolicies||[],liabilities:U.liabilities||[],otherInvestments:U.otherInvestments||[],stockPortfolios:U.stockPortfolios||[],stockHoldings:U.stockHoldings||[],stockTransactions:U.stockTransactions||[],mfPortfolios:U.mfPortfolios||[],mfHoldings:U.mfHoldings||[],mfTransactions:U.mfTransactions||[],goals:U.goals||[],reminders:U.reminders||[],goalPortfolioMappings:U.goalPortfolioMappings||[]})},[]),me=g.useCallback(async(U=!1)=>{try{U?h(!0):x(!0),v(null);const xe=await ao();he(xe),pe(xe)}catch(xe){v(xe.message)}finally{x(!1),h(!1)}},[he,pe]),Se=g.useCallback(async()=>{const U=await Pp();j(U||[]),Pt("members",U||[])},[]),Oe=g.useCallback(async()=>{const U=await Qp();M(U||[]),Pt("bankAccounts",U||[])},[]),Ue=g.useCallback(async()=>{const U=await Kp();z(U||[]),Pt("investments",U||[])},[]),$e=g.useCallback(async()=>{const U=await l0();N(U||[]),Pt("insurancePolicies",U||[])},[]),st=g.useCallback(async()=>{const U=await r0();w(U||[]),Pt("liabilities",U||[])},[]),nt=g.useCallback(async()=>{const U=await c0();I(U||[]),Pt("otherInvestments",U||[])},[]),zt=g.useCallback(async()=>{const[U,xe]=await Promise.all([e0(),f1()]);O(U||[]),ee(xe||[]),Pt("goals",U||[]),Pt("goalPortfolioMappings",xe||[])},[]),Pe=g.useCallback(async()=>{const U=await h0();ue(U||[]),Pt("reminders",U||[])},[]),Ie=g.useCallback(async()=>{const[U,xe,jt]=await Promise.all([s1(),N1(),S1()]);E(U||[]),W(xe||[]),F(jt||[]),Fu({mfPortfolios:U||[],mfHoldings:xe||[],mfTransactions:jt||[]})},[]),yt=g.useCallback(async()=>{const[U,xe,jt]=await Promise.all([m0(),w1(),C1()]);q(U||[]),D(xe||[]),P(jt||[]),Fu({stockPortfolios:U||[],stockHoldings:xe||[],stockTransactions:jt||[]})},[]),fa=g.useCallback(async()=>{const U=await T1();de(U||{}),Pt("settings",U||{})},[]),Ce=g.useCallback(async U=>{await k1(U),await fa()},[fa]),Ze=g.useCallback(async()=>{try{const U=await g0("healthCheckAnswers");if(U&&Object.keys(U).length>0){_(!0),Fs(!0);return}const xe=await v0();xe&&Object.keys(xe).length>0?(_(!0),Fs(!0),Pt("healthCheckAnswers",xe)):(_(!1),Fs(!1))}catch{_(!1),Fs(!1)}},[]),Ke=g.useCallback(async U=>{const xe=await M1(U);return xe?.success&&(_(!0),Fs(!0),Pt("healthCheckAnswers",U)),xe},[]);g.useEffect(()=>{if(!o){x(!1);return}if(te.current)return;te.current=!0;async function U(){const xe=await L1(),jt=Object.keys(xe).length>0;jt&&(he(xe),xe.healthCheckAnswers&&Object.keys(xe.healthCheckAnswers).length>0&&(_(!0),Fs(!0)),x(!1));try{jt&&h(!0);const ha=await ao();he(ha),pe(ha)}catch(ha){jt||v(ha.message)}finally{x(!1),h(!1)}}U(),fa().catch(()=>{}),c===null&&Ze().catch(()=>{})},[o,he,pe,fa,Ze]),g.useEffect(()=>{o||(te.current=!1)},[o]);const _t=g.useCallback(async U=>{const xe=await Gp(U);if(U.email)try{await t1(U.email,U.memberName)}catch(jt){console.warn("Auto-invite failed (non-blocking):",jt.message)}return await Se(),xe},[Se]),ht=g.useCallback(async(U,xe)=>{await Vp({memberId:U,...xe}),await Se()},[Se]),Mt=g.useCallback(async U=>{await Yp(U),await Se()},[Se]),Na=g.useCallback(async U=>{const xe=await Xp(U);return await Oe(),xe},[Oe]),ho=g.useCallback(async(U,xe)=>{await a1({accountId:U,...xe}),await Oe()},[Oe]),pr=g.useCallback(async U=>{await Zp(U),await Oe()},[Oe]),po=g.useCallback(async U=>{const xe=await Jp(U);return await Ue(),xe},[Ue]),bo=g.useCallback(async(U,xe)=>{await l1({accountId:U,...xe}),await Ue()},[Ue]),El=g.useCallback(async U=>{await Wp(U),await Ue()},[Ue]),Rt=g.useCallback(async U=>{const xe=await s0(U);return await $e(),xe},[$e]),Sa=g.useCallback(async(U,xe)=>{await p1({policyId:U,...xe}),await $e()},[$e]),Ot=g.useCallback(async U=>{await n0(U),await $e()},[$e]),vo=g.useCallback(async U=>{const xe=await i0(U);return await st(),xe},[st]),go=g.useCallback(async(U,xe)=>{await b1({liabilityId:U,...xe}),await st()},[st]),yo=g.useCallback(async U=>{await o0(U),await st()},[st]),ts=g.useCallback(async U=>{const xe=await u0(U);return await nt(),U.quickLoan&&await st(),xe},[nt,st]),as=g.useCallback(async(U,xe)=>{await v1({investmentId:U,...xe}),await nt()},[nt]),ls=g.useCallback(async U=>{await d0(U),await nt()},[nt]),La=g.useCallback(async U=>{const xe=await t0(U);return await zt(),xe},[zt]),ss=g.useCallback(async(U,xe)=>{await x1(U,xe),await zt()},[zt]),Dl=g.useCallback(async U=>{await a0(U),await zt()},[zt]),jo=g.useCallback(async U=>{const xe=await p0(U);return await Pe(),xe},[Pe]),br=g.useCallback(async(U,xe)=>{await A1({reminderId:U,...xe}),await Pe()},[Pe]),sn=g.useCallback(async U=>{await b0(U),await Pe()},[Pe]),zl=g.useCallback(async(U,xe)=>{await h1(U,xe),await zt()},[zt]),No=g.useCallback(async U=>{const xe=await x0(U);return await yt(),xe},[yt]),vr=g.useCallback(async(U,xe)=>{await g1({portfolioId:U,...xe}),await yt()},[yt]),gr=g.useCallback(async U=>{await f0(U),await yt()},[yt]),yr=g.useCallback(async U=>{const xe=await y1(U);return await yt(),xe},[yt]),nn=g.useCallback(async U=>{const xe=await j1(U);return await yt(),xe},[yt]),rn=g.useCallback(async U=>{const xe=await n1(U);return await Ie(),xe},[Ie]),jr=g.useCallback(async(U,xe)=>{await r1({portfolioId:U,...xe}),await Ie()},[Ie]),Nr=g.useCallback(async U=>{await i1(U),await Ie()},[Ie]),wa=g.useCallback(async(U,xe)=>{const jt=await o1({...U,transactionType:xe});return await Ie(),jt},[Ie]),pt=g.useCallback(async U=>{const xe=await c1(U);return await Ie(),xe},[Ie]),Tt=g.useCallback(async U=>{const xe=await u1(U);return await Ie(),xe},[Ie]),sl=g.useCallback(async(U,xe)=>{await d1(U,xe),await Ie()},[Ie]),on=(d||[]).filter(U=>U.status==="Active"),So=(S||[]).filter(U=>U.status==="Active"),wo=(k||[]).filter(U=>U.status==="Active");return a.jsx(S0.Provider,{value:{loading:u,isRefreshing:m,error:f,refreshData:me,members:d,banks:S,investmentAccounts:k,insurancePolicies:A,liabilityList:y,otherInvList:p,activeMembers:on,activeBanks:So,activeInvestmentAccounts:wo,addMember:_t,updateMember:ht,deleteMember:Mt,addBankAccount:Na,updateBankAccount:ho,deleteBankAccount:pr,addInvestmentAccount:po,updateInvestmentAccount:bo,deleteInvestmentAccount:El,addInsurance:Rt,updateInsurance:Sa,deleteInsurance:Ot,addLiability:vo,updateLiability:go,deleteLiability:yo,addOtherInvestment:ts,updateOtherInvestment:as,deleteOtherInvestment:ls,goalList:T,addGoal:La,updateGoal:ss,deleteGoal:Dl,reminderList:ie,addReminder:jo,updateReminder:br,deleteReminder:sn,goalPortfolioMappings:R,updateGoalMappings:zl,stockPortfolios:J,stockHoldings:Z,stockTransactions:$,addStockPortfolio:No,updateStockPortfolio:vr,deleteStockPortfolio:gr,buyStock:yr,sellStock:nn,mfPortfolios:le,mfHoldings:fe,mfTransactions:se,addMFPortfolio:rn,updateMFPortfolio:jr,deleteMFPortfolio:Nr,investMF:wa,redeemMF:pt,switchMF:Tt,updateHoldingAllocations:sl,settings:oe,updateSettings:Ce,refreshSettings:fa,healthCheckCompleted:je,completeHealthCheck:Ke},children:n})}function Re(){return g.useContext(S0)}const C0=g.createContext();function P1({children:n}){const{activeMembers:o}=Re(),[c,u]=g.useState("all"),x=o.find(m=>m.memberId===c)||null;return a.jsx(C0.Provider,{value:{selectedMember:c,setSelectedMember:u,member:x,familyMembers:o},children:n})}function At(){return g.useContext(C0)}const A0=(...n)=>n.filter((o,c,u)=>!!o&&o.trim()!==""&&u.indexOf(o)===c).join(" ").trim();const G1=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();const V1=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(o,c,u)=>u?u.toUpperCase():c.toLowerCase());const Bh=n=>{const o=V1(n);return o.charAt(0).toUpperCase()+o.slice(1)};var Y1={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Q1=n=>{for(const o in n)if(o.startsWith("aria-")||o==="role"||o==="title")return!0;return!1};const X1=g.forwardRef(({color:n="currentColor",size:o=24,strokeWidth:c=2,absoluteStrokeWidth:u,className:x="",children:m,iconNode:h,...f},v)=>g.createElement("svg",{ref:v,...Y1,width:o,height:o,stroke:n,strokeWidth:u?Number(c)*24/Number(o):c,className:A0("lucide",x),...!m&&!Q1(f)&&{"aria-hidden":"true"},...f},[...h.map(([d,j])=>g.createElement(d,j)),...Array.isArray(m)?m:[m]]));const ve=(n,o)=>{const c=g.forwardRef(({className:u,...x},m)=>g.createElement(X1,{ref:m,iconNode:o,className:A0(`lucide-${G1(Bh(n))}`,`lucide-${n}`,u),...x}));return c.displayName=Bh(n),c};const Z1=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],K1=ve("arrow-down",Z1);const J1=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],W1=ve("arrow-right",J1);const ej=[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]],tj=ve("arrow-up-down",ej);const aj=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M17 17H4a1 1 0 0 1-.74-1.673C4.59 13.956 6 12.499 6 8a6 6 0 0 1 .258-1.742",key:"178tsu"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M8.668 3.01A6 6 0 0 1 18 8c0 2.687.77 4.653 1.707 6.05",key:"1hqiys"}]],lj=ve("bell-off",aj);const sj=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],mo=ve("bell",sj);const nj=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],M0=ve("briefcase",nj);const rj=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],rr=ve("chart-column",rj);const ij=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Uh=ve("check",ij);const oj=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Qs=ve("chevron-down",oj);const cj=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],T0=ve("chevron-left",cj);const uj=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],ir=ve("chevron-right",uj);const dj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 8v8",key:"napkw2"}],["path",{d:"m8 12 4 4 4-4",key:"k98ssh"}]],k0=ve("circle-arrow-down",dj);const mj=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],xj=ve("circle-check-big",mj);const fj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],an=ve("circle-check",fj);const hj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],E0=ve("circle-x",hj);const pj=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]],D0=ve("clipboard-check",pj);const bj=[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]],vj=ve("coffee",bj);const gj=[["rect",{x:"2",y:"6",width:"20",height:"8",rx:"1",key:"1estib"}],["path",{d:"M17 14v7",key:"7m2elx"}],["path",{d:"M7 14v7",key:"1cm7wv"}],["path",{d:"M17 3v3",key:"1v4jwn"}],["path",{d:"M7 3v3",key:"7o6guu"}],["path",{d:"M10 14 2.3 6.3",key:"1023jk"}],["path",{d:"m14 6 7.7 7.7",key:"1s8pl2"}],["path",{d:"m8 6 8 8",key:"hl96qh"}]],yj=ve("construction",gj);const jj=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],ur=ve("credit-card",jj);const Nj=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],Sj=ve("database",Nj);const wj=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],Cj=ve("dollar-sign",wj);const Aj=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],Mj=ve("ellipsis",Aj);const Tj=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],jd=ve("eye",Tj);const kj=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Ki=ve("eye-off",kj);const Ej=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]],Dj=ve("file-spreadsheet",Ej);const zj=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],z0=ve("file-text",zj);const Rj=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],Oj=ve("funnel",Rj);const Lj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],_j=ve("globe",Lj);const Ij=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],lo=ve("heart",Ij);const Bj=[["path",{d:"M6 3h12",key:"ggurg9"}],["path",{d:"M6 8h12",key:"6g4wlu"}],["path",{d:"m6 13 8.5 8",key:"u1kupk"}],["path",{d:"M6 13h3",key:"wdp6ag"}],["path",{d:"M9 13c6.667 0 6.667-10 0-10",key:"1nkvk2"}]],Uj=ve("indian-rupee",Bj);const Hj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Fj=ve("info",Hj);const qj=[["path",{d:"M10 18v-7",key:"wt116b"}],["path",{d:"M11.12 2.198a2 2 0 0 1 1.76.006l7.866 3.847c.476.233.31.949-.22.949H3.474c-.53 0-.695-.716-.22-.949z",key:"1m329m"}],["path",{d:"M14 18v-7",key:"vav6t3"}],["path",{d:"M18 18v-7",key:"aexdmj"}],["path",{d:"M3 22h18",key:"8prr45"}],["path",{d:"M6 18v-7",key:"1ivflk"}]],R0=ve("landmark",qj);const $j=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],O0=ve("layers",$j);const Pj=[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]],so=ve("link-2",Pj);const Gj=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],no=ve("list",Gj);const Vj=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],L0=ve("loader-circle",Vj);const Yj=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],qu=ve("lock",Yj);const Qj=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],Xj=ve("log-in",Qj);const Zj=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],_0=ve("log-out",Zj);const Kj=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Jj=ve("mail",Kj);const Wj=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],eN=ve("menu",Wj);const tN=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],I0=ve("moon",tN);const aN=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],B0=ve("package",aN);const lN=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],Da=ve("pencil",lN);const sN=[["path",{d:"M11 17h3v2a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-3a3.16 3.16 0 0 0 2-2h1a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1h-1a5 5 0 0 0-2-4V3a4 4 0 0 0-3.2 1.6l-.3.4H11a6 6 0 0 0-6 6v1a5 5 0 0 0 2 4v3a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1z",key:"1piglc"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M2 8v1a2 2 0 0 0 2 2h1",key:"1env43"}]],nN=ve("piggy-bank",sN);const rN=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],aa=ve("plus",rN);const iN=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],dr=ve("refresh-cw",iN);const oN=[["path",{d:"m2 9 3-3 3 3",key:"1ltn5i"}],["path",{d:"M13 18H7a2 2 0 0 1-2-2V6",key:"1r6tfw"}],["path",{d:"m22 15-3 3-3-3",key:"4rnwn2"}],["path",{d:"M11 6h6a2 2 0 0 1 2 2v10",key:"2f72bc"}]],cN=ve("repeat-2",oN);const uN=[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]],dN=ve("repeat",uN);const mN=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],xN=ve("save",mN);const fN=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],hN=ve("search",fN);const pN=[["path",{d:"M14 17H5",key:"gfn3mx"}],["path",{d:"M19 7h-9",key:"6i9tg"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]],bN=ve("settings-2",pN);const vN=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Nd=ve("settings",vN);const gN=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],or=ve("shield",gN);const yN=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],ed=ve("sun",yN);const jN=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],fr=ve("target",jN);const NN=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Sd=ve("trash-2",NN);const SN=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],xo=ve("trending-down",SN);const wN=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],Xs=ve("trending-up",wN);const CN=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],fo=ve("triangle-alert",CN);const AN=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],Hh=ve("trophy",AN);const MN=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],TN=ve("user",MN);const kN=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Zs=ve("users",kN);const EN=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],Ys=ve("wallet",EN);const DN=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],hr=ve("x",DN);const zN=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],td=ve("zap",zN),U0=g.createContext();function RN({children:n}){const[o,c]=g.useState([]),[u,x]=g.useState(null),m=g.useRef(0),h=g.useCallback((j,S="success")=>{const M=++m.current;c(k=>[...k,{id:M,message:j,type:S}]),setTimeout(()=>c(k=>k.filter(z=>z.id!==M)),3e3)},[]),f=g.useCallback(j=>{c(S=>S.filter(M=>M.id!==j))},[]),v=g.useCallback((j="Saving...")=>{x(j)},[]),d=g.useCallback(()=>{x(null)},[]);return a.jsxs(U0.Provider,{value:{showToast:h,showBlockUI:v,hideBlockUI:d},children:[n,u&&a.jsx("div",{className:"fixed inset-0 z-[200] bg-black/50 backdrop-blur-sm flex items-center justify-center",children:a.jsxs("div",{className:"flex flex-col items-center gap-3 bg-[var(--bg-card)] rounded-xl px-8 py-6 border border-[var(--border)] shadow-2xl",children:[a.jsx("span",{className:"w-7 h-7 border-[2.5px] border-violet-400/30 border-t-violet-400 rounded-full animate-spin"}),a.jsx("span",{className:"text-sm font-semibold text-[var(--text-primary)]",children:u})]})}),o.length>0&&a.jsx("div",{className:"fixed bottom-20 sm:bottom-6 left-1/2 -translate-x-1/2 z-[100] flex flex-col gap-2 items-center pointer-events-none",children:o.map(j=>a.jsxs("div",{className:`pointer-events-auto flex items-center gap-2 px-4 py-2.5 rounded-lg shadow-xl border text-sm font-medium animate-fade-in ${j.type==="error"?"bg-rose-500/15 border-rose-500/30 text-[var(--accent-rose)]":"bg-emerald-500/15 border-emerald-500/30 text-emerald-400"}`,style:{backdropFilter:"blur(12px)"},children:[j.type==="error"?a.jsx(E0,{size:16}):a.jsx(an,{size:16}),a.jsx("span",{children:j.message}),a.jsx("button",{onClick:()=>f(j.id),className:"ml-1 opacity-60 hover:opacity-100 transition-opacity",children:a.jsx(hr,{size:14})})]},j.id))})]})}function za(){return g.useContext(U0)}const H0=g.createContext(),Fh="cf-mask-data";function ON(n){return!n||n.length<4?"":""+n.slice(-4)}function LN(n){return!n||n.length<4?"  ":"  "+n.slice(-4)}function _N(n){return!n||n.length<3?"":""+n.slice(-3)}function IN(n){if(!n)return"@";const[o,c]=n.split("@");if(!c)return"@";const u=o.charAt(0)+"",x=c.split("."),m=x[0].charAt(0)+""+(x.length>1?"."+x.slice(1).join("."):"");return u+"@"+m}function BN(n){return!n||n.length<4?"":""+n.slice(-4)}function UN(n){return!n||n.length<3?"":""+n.slice(-3)}function HN(n){return!n||n.length<4?"":""+n.slice(-4)}const FN={pan:ON,aadhaar:LN,mobile:_N,email:IN,account:BN,clientId:UN,policy:HN};function qN({children:n}){const[o,c]=g.useState(()=>{try{return localStorage.getItem(Fh)==="true"}catch{return!1}});g.useEffect(()=>{try{localStorage.setItem(Fh,String(o))}catch{}},[o]);const u=g.useCallback(()=>c(m=>!m),[]),x=g.useCallback((m,h)=>{if(!o||m==null||m==="")return m;const f=FN[h];return f?f(String(m)):m},[o]);return a.jsx(H0.Provider,{value:{masked:o,toggleMask:u,mv:x},children:n})}function Ra(){return g.useContext(H0)}const qh=[{label:"Family",icon:Zs,path:"/family"},{label:"Accounts",icon:ur,children:[{label:"Bank Accounts",icon:R0,path:"/accounts/bank"},{label:"Investment A/c",icon:M0,path:"/accounts/investment"}]},{label:"Insurance",icon:or,path:"/insurance"},{label:"Investments",icon:Ys,children:[{label:"Mutual Funds",icon:Ys,path:"/investments/mutual-funds"},{label:"Stocks",icon:rr,path:"/investments/stocks"},{label:"Other Investments",icon:B0,path:"/investments/other"}]},{label:"Liabilities",icon:ur,path:"/liabilities"},{label:"Goals",icon:fr,path:"/goals"},{label:"Settings",icon:Nd,path:"/settings"}];function $N({open:n,onClose:o}){const c=xa(),u=qh.filter(f=>f.children?.some(v=>c.pathname.startsWith(v.path))).map(f=>f.label),[x,m]=g.useState(new Set(u));function h(f){m(v=>{const d=new Set(v);return d.has(f)?d.delete(f):d.add(f),d})}return a.jsxs(a.Fragment,{children:[n&&a.jsx("div",{className:"fixed inset-0 bg-black/60 z-40 lg:hidden",onClick:o}),a.jsxs("aside",{className:`
        fixed top-0 left-0 z-50 h-full w-56
        bg-[var(--bg-sidebar)] border-r border-[var(--border)]
        flex flex-col transition-transform duration-300
        lg:hidden
        ${n?"translate-x-0":"-translate-x-full"}
      `,children:[a.jsxs("div",{className:"flex items-center justify-between px-3 h-12 border-b border-[var(--border)] shrink-0",children:[a.jsx("p",{className:"text-xs font-bold text-[var(--text-muted)] uppercase tracking-wider",children:"Menu"}),a.jsx("button",{onClick:o,className:"p-1.5 rounded-md text-[var(--text-dim)] hover:text-[var(--text-primary)]",children:a.jsx(hr,{size:16})})]}),a.jsx("nav",{className:"flex-1 py-2 overflow-y-auto overflow-x-hidden",children:qh.map(f=>f.children?a.jsx(PN,{item:f,isOpen:x.has(f.label),onToggle:()=>h(f.label),onNavigate:o,currentPath:c.pathname},f.label):a.jsx(F0,{item:f,onNavigate:o},f.path))})]})]})}function F0({item:n,onNavigate:o,nested:c}){const{label:u,icon:x,path:m}=n;return a.jsx(pd,{to:m,onClick:o,end:m==="/",className:({isActive:h})=>`group flex items-center gap-2.5 ${c?"pl-11 pr-4 py-[7px]":"px-4 py-2.5"} text-[13px] font-medium transition-all border-r-2 ${h?"bg-[var(--sidebar-active-bg)] text-[var(--sidebar-active-text)] border-[var(--sidebar-active-text)]":"text-[var(--text-muted)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-hover)] border-transparent"}`,children:({isActive:h})=>a.jsxs(a.Fragment,{children:[a.jsx(x,{size:c?14:17,strokeWidth:h?2.2:1.7}),a.jsx("span",{children:u})]})})}function PN({item:n,isOpen:o,onToggle:c,onNavigate:u,currentPath:x}){const{label:m,icon:h,children:f}=n,v=f.some(d=>x.startsWith(d.path));return a.jsxs("div",{children:[a.jsxs("button",{onClick:c,className:`w-full group flex items-center gap-2.5 px-4 py-2.5 text-[13px] font-medium transition-all border-r-2 border-transparent ${v?"text-[var(--sidebar-active-text)]":"text-[var(--text-muted)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-hover)]"}`,children:[a.jsx(h,{size:17,strokeWidth:v?2.2:1.7}),a.jsx("span",{className:"flex-1 text-left",children:m}),a.jsx(Qs,{size:13,className:`text-[var(--text-dim)] transition-transform duration-200 ${o?"rotate-180":""}`})]}),o&&a.jsx("div",{className:"py-0.5",children:f.map(d=>a.jsx(F0,{item:d,onNavigate:u,nested:!0},d.path))})]})}function G(n){return n>=1e7?`${(n/1e7).toFixed(2)} Cr`:n>=1e5?`${(n/1e5).toFixed(2)} L`:n>=1e3?`${(n/1e3).toFixed(0)}K`:`${n.toLocaleString("en-IN")}`}const q0="cf_market_data",GN=300*1e3,$h=300*1e3;function VN(){try{const n=sessionStorage.getItem(q0);if(!n)return null;const o=JSON.parse(n);return Date.now()-o._ts>GN?null:o}catch{return null}}function YN(n){try{sessionStorage.setItem(q0,JSON.stringify({...n,_ts:Date.now()}))}catch{}}function QN(){const[n,o]=g.useState(()=>VN()),[c,u]=g.useState([]),x=g.useRef(null),[m,h]=g.useState(!1),[f,v]=g.useState(!1);g.useEffect(()=>{let S=!1;async function M(){try{const z=await E1();if(!S&&z){const A={...z,_ts:Date.now()};o(A),YN(A)}}catch{}}M();const k=setInterval(M,$h);return()=>{S=!0,clearInterval(k)}},[]),g.useEffect(()=>{let S=!1;async function M(){try{const z=await fetch("https://api.coingecko.com/api/v3/simple/price?ids=bitcoin,ethereum&vs_currencies=inr&include_24hr_change=true");if(!S&&z.ok){const A=await z.json(),N=[];A.bitcoin&&N.push({name:"BTC",price:A.bitcoin.inr,changePct:A.bitcoin.inr_24h_change||0,type:"crypto"}),A.ethereum&&N.push({name:"ETH",price:A.ethereum.inr,changePct:A.ethereum.inr_24h_change||0,type:"crypto"}),u(N)}}catch{}}M();const k=setInterval(M,$h);return()=>{S=!0,clearInterval(k)}},[]);const d=[];if(n?.indices&&d.push(...n.indices),n?.metals&&d.push(...n.metals),c.length>0&&d.push(...c),g.useEffect(()=>{if(!x.current)return;const S=x.current,M=S.parentElement;h(S.scrollWidth>M.clientWidth)},[d.length]),d.length===0)return null;const j=d.length*3;return a.jsxs("div",{className:"bg-[var(--bg-card)]/80 backdrop-blur-sm border-b border-[var(--border-light)] overflow-hidden",onMouseEnter:()=>v(!0),onMouseLeave:()=>v(!1),onTouchStart:()=>v(!0),onTouchEnd:()=>v(!1),children:[a.jsx("div",{className:"overflow-hidden",children:a.jsxs("div",{ref:x,className:"flex items-stretch w-max",style:m?{animation:`ticker-scroll ${j}s linear infinite`,animationPlayState:f?"paused":"running"}:{margin:"0 auto"},children:[d.map((S,M)=>a.jsx(Ph,{item:S},S.name+M)),m&&d.map((S,M)=>a.jsx(Ph,{item:S},"dup-"+S.name+M))]})}),a.jsx("style",{children:`
        @keyframes ticker-scroll {
          0% { transform: translateX(0); }
          100% { transform: translateX(-50%); }
        }
      `})]})}function Ph({item:n}){const o=n.changePct>=0,c=o?a.jsx(Xs,{size:10}):a.jsx(xo,{size:10}),u=o?"text-emerald-400":"text-[var(--accent-rose)]",x=m=>m>=1e5?`${(m/1e5).toFixed(2)}L`:m>=1e3?`${m.toLocaleString("en-IN",{maximumFractionDigits:0})}`:`${m.toLocaleString("en-IN",{maximumFractionDigits:2})}`;return a.jsxs("div",{className:"flex items-center gap-1.5 px-3 py-1.5 border-r border-[var(--border-light)] last:border-0 shrink-0",children:[a.jsx("span",{className:"text-[10px] font-semibold text-[var(--text-dim)] uppercase whitespace-nowrap",children:n.name}),a.jsx("span",{className:"text-[11px] font-bold text-[var(--text-primary)] tabular-nums whitespace-nowrap",children:n.unit?`${x(n.price)}`:x(n.price)}),n.changePct!==void 0&&n.changePct!==null&&a.jsxs("span",{className:`flex items-center gap-0.5 text-[10px] font-bold tabular-nums ${u}`,children:[c,o?"+":"",n.changePct.toFixed(2),"%"]})]})}function XN(){const{selectedMember:n}=At(),{mfPortfolios:o,mfHoldings:c,insurancePolicies:u,goalList:x,reminderList:m}=Re(),h=(M,k)=>{const z=M||[];return n==="all"?z:z.filter(A=>A[k]===n)},f=g.useMemo(()=>{let M=0,k=0;return h((o||[]).filter(A=>A.status!=="Inactive"),"ownerId").forEach(A=>{const N=(c||[]).filter(p=>p.portfolioId===A.portfolioId&&p.units>0),y=N.reduce((p,I)=>p+I.currentValue,0),w=(A.rebalanceThreshold||.05)*100;N.forEach(p=>{if(p.athNav>0&&p.belowATHPct>=5&&M++,p.targetAllocationPct>0&&y>0){const I=p.currentValue/y*100;Math.abs(I-p.targetAllocationPct)>w&&k++}})}),{buyOppCount:M,rebalanceCount:k}},[n,o,c]),v=g.useMemo(()=>{const M=[],k=h((u||[]).filter(p=>p.status==="Active"),"memberId");k.some(p=>p.policyType==="Term Life")||M.push({type:"critical",title:"Missing Term Life Insurance",badge:"Add Policy",navigateTo:"/insurance"});const A=k.filter(p=>p.policyType==="Health").reduce((p,I)=>p+I.sumAssured,0);return A===0?M.push({type:"critical",title:"No Health Insurance",badge:"Add Policy",navigateTo:"/insurance"}):A<5e5&&M.push({type:"warning",title:"Inadequate Health Insurance",badge:G(A),navigateTo:"/insurance"}),h((x||[]).filter(p=>p.isActive!==!1&&p.goalType==="Emergency Fund"),"familyMemberId").forEach(p=>{const I=p.targetAmount>0?p.currentValue/p.targetAmount*100:0;I<100&&M.push({type:I>=75?"info":"warning",title:`Emergency Fund at ${I.toFixed(0)}%`,badge:G(p.targetAmount-p.currentValue)+" left",navigateTo:"/goals"})}),h((m||[]).filter(p=>p.isActive!==!1),"familyMemberId").filter(p=>new Date(p.dueDate)<new Date).forEach(p=>{const I=Math.ceil((new Date-new Date(p.dueDate))/864e5);M.push({type:"critical",title:p.title,badge:`${I}d overdue`,navigateTo:"/reminders"})}),h((x||[]).filter(p=>p.isActive!==!1&&p.status==="Needs Attention"),"familyMemberId").forEach(p=>{M.push({type:"warning",title:`${p.goalName} needs attention`,badge:p.priority,navigateTo:"/goals"})}),M},[n,u,x,m]),d=g.useMemo(()=>{const M=h((m||[]).filter(z=>z.isActive!==!1&&z.status!=="Completed"),"familyMemberId"),k=new Date;return M.map(z=>{const A=new Date(z.dueDate)-k,N=Math.ceil(A/(1440*60*1e3)),y=new Date(z.dueDate).toLocaleDateString("en-IN",{day:"2-digit",month:"short"});return{...z,days:N,dateStr:y}}).filter(z=>z.days>=0&&z.days<=30).sort((z,A)=>z.days-A.days).slice(0,5)},[n,m]),j=v.length+f.buyOppCount+f.rebalanceCount+d.length,S=v.filter(M=>M.type==="critical").length;return{criticalAlerts:v,investmentSignals:f,upcomingReminders:d,totalCount:j,criticalCount:S}}function Gh(n){return n>=20?"bg-rose-500/20 text-[var(--accent-rose)]":n>=10?"bg-orange-500/20 text-[var(--accent-orange)]":n>=5?"bg-amber-500/20 text-[var(--accent-amber)]":"bg-slate-500/20 text-[var(--text-muted)]"}function $0(){const{mfHoldings:n,mfPortfolios:o}=Re(),c=g.useMemo(()=>o.filter(x=>x.status!=="Inactive").map(x=>{const m=n.filter(v=>v.portfolioId===x.portfolioId&&v.units>0),h=m.reduce((v,d)=>v+d.currentValue,0),f=m.filter(v=>v.athNav>0&&v.belowATHPct>=1).sort((v,d)=>d.belowATHPct-v.belowATHPct).map(v=>({...v,currentPct:h>0?v.currentValue/h*100:0}));return{...x,totalValue:h,opportunities:f}}).filter(x=>x.opportunities.length>0),[o,n]);return c.reduce((x,m)=>x+m.opportunities.length,0)===0?a.jsxs("div",{className:"py-8 text-center",children:[a.jsx("p",{className:"text-sm text-[var(--text-muted)]",children:"No buy opportunities right now"}),a.jsx("p",{className:"text-xs text-[var(--text-dim)] mt-1",children:"All funds are near their all-time highs"})]}):a.jsxs("div",{className:"space-y-4",children:[a.jsx("p",{className:"text-xs text-[var(--text-dim)] px-1",children:"Funds below their All-Time High NAV. Higher discount = better opportunity."}),c.map((x,m)=>a.jsxs("div",{className:"border border-[var(--border-light)] border-l-2 border-l-emerald-500/50 rounded-lg overflow-hidden",children:[a.jsxs("div",{className:"flex items-center gap-2 px-3 py-2.5 bg-[var(--bg-inset)]",children:[a.jsx("span",{className:"text-xs font-bold text-emerald-400 bg-emerald-500/15 w-5 h-5 rounded flex items-center justify-center",children:m+1}),a.jsx("p",{className:"text-sm font-bold text-[var(--text-primary)]",children:x.portfolioName}),a.jsx("span",{className:"text-xs text-[var(--text-muted)]",children:x.ownerName}),a.jsxs("span",{className:"text-xs font-bold px-1.5 py-0.5 rounded-full bg-emerald-500/15 text-emerald-400",children:[x.opportunities.length," funds"]})]}),a.jsx("div",{className:"hidden sm:block overflow-x-auto",children:a.jsxs("table",{className:"w-full text-sm",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b border-[var(--border-light)] bg-[var(--bg-inset)]",children:[a.jsx("th",{className:"text-left py-1.5 px-2 text-xs text-[var(--text-muted)] font-semibold uppercase",children:"Fund"}),a.jsx("th",{className:"text-right py-1.5 px-2 text-xs text-[var(--text-muted)] font-semibold uppercase",children:"ATH NAV"}),a.jsx("th",{className:"text-right py-1.5 px-2 text-xs text-[var(--text-muted)] font-semibold uppercase",children:"Current"}),a.jsx("th",{className:"text-right py-1.5 px-2 text-xs text-[var(--text-muted)] font-semibold uppercase",children:"Below ATH"}),a.jsx("th",{className:"text-right py-1.5 px-2 text-xs text-[var(--text-muted)] font-semibold uppercase",children:"Alloc"}),a.jsx("th",{className:"text-right py-1.5 px-2 text-xs text-[var(--text-muted)] font-semibold uppercase",children:"Value"})]})}),a.jsx("tbody",{children:x.opportunities.map(h=>a.jsxs("tr",{className:"border-b border-[var(--border-light)] last:border-0",children:[a.jsx("td",{className:"py-2 px-2 text-[var(--text-secondary)] max-w-[200px] truncate",children:h.fundName}),a.jsxs("td",{className:"py-2 px-2 text-right text-[var(--text-dim)] tabular-nums",children:["",h.athNav.toFixed(2)]}),a.jsxs("td",{className:"py-2 px-2 text-right text-[var(--text-muted)] tabular-nums",children:["",h.currentNav.toFixed(2)]}),a.jsx("td",{className:"py-2 px-2 text-right",children:a.jsxs("span",{className:`inline-block text-xs font-semibold px-1.5 py-0.5 rounded-full ${Gh(h.belowATHPct)}`,children:["",h.belowATHPct.toFixed(1),"%"]})}),a.jsxs("td",{className:"py-2 px-2 text-right text-[var(--text-muted)] tabular-nums",children:[h.currentPct.toFixed(1),"% / ",h.targetAllocationPct.toFixed(1),"%"]}),a.jsx("td",{className:"py-2 px-2 text-right text-[var(--text-primary)] font-semibold tabular-nums",children:G(h.currentValue)})]},h.holdingId))})]})}),a.jsx("div",{className:"sm:hidden divide-y divide-[var(--border-light)]",children:x.opportunities.map(h=>a.jsxs("div",{className:"px-3 py-2.5",children:[a.jsxs("div",{className:"flex items-start justify-between mb-1",children:[a.jsx("p",{className:"text-xs text-[var(--text-primary)] leading-tight flex-1 mr-2",children:h.fundName}),a.jsxs("span",{className:`shrink-0 text-xs font-semibold px-1.5 py-0.5 rounded-full ${Gh(h.belowATHPct)}`,children:["",h.belowATHPct.toFixed(1),"%"]})]}),a.jsxs("div",{className:"flex items-center gap-3 text-xs text-[var(--text-dim)]",children:[a.jsxs("span",{children:["ATH ",h.athNav.toFixed(2),"  ",h.currentNav.toFixed(2)]}),a.jsxs("span",{children:["Alloc: ",h.currentPct.toFixed(1),"%"]}),a.jsx("span",{className:"font-semibold text-[var(--text-primary)]",children:G(h.currentValue)})]})]},h.holdingId))})]},x.portfolioId))]})}function ft({open:n,onClose:o,title:c,children:u,wide:x}){const m=g.useRef(null);return g.useEffect(()=>(n?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[n]),g.useEffect(()=>{function h(f){f.key==="Escape"&&o()}return n&&window.addEventListener("keydown",h),()=>window.removeEventListener("keydown",h)},[n,o]),n?a.jsxs("div",{ref:m,className:"fixed inset-0 z-50 flex items-start justify-center pt-[5vh] sm:pt-[10vh] px-4",onClick:h=>{h.target===m.current&&o()},children:[a.jsx("div",{className:"fixed inset-0 bg-black/60"}),a.jsxs("div",{className:`relative bg-[var(--bg-card)] border border-[var(--border)] rounded-xl shadow-2xl w-full ${x?"max-w-2xl":"max-w-lg"} max-h-[80vh] flex flex-col animate-fade-in`,children:[a.jsxs("div",{className:"flex items-center justify-between px-5 py-4 border-b border-[var(--border-light)] shrink-0",children:[a.jsx("h2",{className:"text-sm font-bold text-[var(--text-primary)]",children:c}),a.jsx("button",{onClick:o,className:"p-1.5 rounded-lg text-[var(--text-dim)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-hover)] transition-colors",children:a.jsx(hr,{size:16})})]}),a.jsx("div",{className:"flex-1 overflow-y-auto px-5 py-4",children:u})]})]}):null}function X({label:n,required:o,error:c,children:u}){return a.jsxs("div",{children:[a.jsxs("label",{className:"block text-xs font-semibold text-[var(--text-muted)] mb-1.5",children:[n,o&&a.jsx("span",{className:"text-rose-500 ml-0.5",children:"*"})]}),u,c&&a.jsx("p",{className:"text-xs text-rose-500 mt-1",children:c})]})}function ce({value:n,onChange:o,placeholder:c,type:u="text",sensitive:x,...m}){const{masked:h}=Ra();return a.jsx("input",{type:u,value:n,onChange:f=>o(f.target.value),placeholder:c,className:`w-full px-3 py-2 text-sm bg-[var(--bg-input)] border border-[var(--border-input)] rounded-lg text-[var(--text-primary)] placeholder:text-[var(--text-dim)] focus:outline-none focus:border-[var(--sidebar-active-text)] focus:ring-1 focus:ring-[var(--sidebar-active-text)] transition-colors ${x&&h?"sensitive-blur":""}`,...m})}function Me({value:n,onChange:o,options:c,placeholder:u}){return a.jsxs("select",{value:n,onChange:x=>o(x.target.value),className:"w-full px-3 py-2 text-sm bg-[var(--bg-input)] border border-[var(--border-input)] rounded-lg text-[var(--text-primary)] focus:outline-none focus:border-[var(--sidebar-active-text)] focus:ring-1 focus:ring-[var(--sidebar-active-text)] transition-colors",children:[u&&a.jsx("option",{value:"",children:u}),c.map(x=>a.jsx("option",{value:x.value,children:x.label},x.value))]})}function Ks({value:n,onChange:o,placeholder:c,rows:u=3}){return a.jsx("textarea",{value:n,onChange:x=>o(x.target.value),placeholder:c,rows:u,className:"w-full px-3 py-2 text-sm bg-[var(--bg-input)] border border-[var(--border-input)] rounded-lg text-[var(--text-primary)] placeholder:text-[var(--text-dim)] focus:outline-none focus:border-[var(--sidebar-active-text)] focus:ring-1 focus:ring-[var(--sidebar-active-text)] transition-colors resize-none"})}function ZN({checked:n,onChange:o,label:c}){return a.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:n,onChange:u=>o(u.target.checked),className:"w-4 h-4 rounded border-[var(--border-input)] bg-[var(--bg-input)] text-violet-500 focus:ring-violet-500"}),a.jsx("span",{className:"text-sm text-[var(--text-secondary)]",children:c})]})}function Dt({onCancel:n,onSubmit:o,submitLabel:c="Save",loading:u}){return a.jsxs("div",{className:"flex items-center justify-end gap-2 pt-4 mt-4 border-t border-[var(--border-light)]",children:[a.jsx("button",{onClick:n,disabled:u,className:"px-4 py-2 text-xs font-semibold text-[var(--text-muted)] hover:text-[var(--text-primary)] rounded-lg hover:bg-[var(--bg-hover)] transition-colors disabled:opacity-40",children:"Cancel"}),a.jsxs("button",{onClick:o,disabled:u,className:"px-5 py-2 text-xs font-semibold text-white bg-violet-600 hover:bg-violet-500 rounded-lg transition-colors disabled:opacity-50 flex items-center gap-1.5",children:[u&&a.jsx("span",{className:"w-3.5 h-3.5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),u?"Saving...":c]})]})}function Oa({onClick:n,label:o="Deactivate"}){return a.jsx("button",{onClick:n,className:"px-4 py-2 text-xs font-semibold text-rose-400 hover:text-rose-300 hover:bg-rose-500/10 rounded-lg transition-colors",children:o})}const Vh=[{key:"sip",label:"Adjust SIP",icon:dN,color:"text-blue-400",dimColor:"text-blue-400/60 hover:text-blue-400",activeBg:"bg-blue-500/20 border border-blue-500/40"},{key:"lumpsum",label:"Lumpsum",icon:Uj,color:"text-emerald-400",dimColor:"text-emerald-400/60 hover:text-emerald-400",activeBg:"bg-emerald-500/20 border border-emerald-500/40"},{key:"buysell",label:"Buy / Sell",icon:tj,color:"text-amber-400",dimColor:"text-amber-400/60 hover:text-amber-400",activeBg:"bg-amber-500/20 border border-amber-500/40"}];function Vs(n){return n>=1e5?`${(n/1e5).toFixed(1)}L`:n>=1e3?`${(n/1e3).toFixed(0)}K`:`${Math.round(n)}`}function KN({portfolio:n,holdings:o,totalValue:c}){const u=n.sipTarget||0;if(u<=0)return a.jsx("p",{className:"text-xs text-[var(--text-dim)] py-2",children:"No SIP target set"});const x=o.filter(d=>d.targetAllocationPct>0).map(d=>{const j=c>0?d.currentValue/c*100:0,M=d.targetAllocationPct/100*c-d.currentValue,k=d.targetAllocationPct/100*u;return{...d,currentPct:j,gap:M,normalSIP:k}}),h=x.filter(d=>d.gap>0).reduce((d,j)=>d+j.gap,0),f=x.map(d=>({...d,suggestedSIP:d.gap>0&&h>0?d.gap/h*u:0}));return f.some(d=>Math.abs(d.suggestedSIP-d.normalSIP)>10)?a.jsxs("div",{className:"space-y-2",children:[a.jsx("p",{className:"text-xs text-[var(--text-dim)] px-1",children:"Overweight funds get 0 SIP. All SIP goes to underweight funds to rebalance over time."}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full text-sm",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b border-[var(--border-light)]",children:[a.jsx("th",{className:"text-left py-1.5 px-2 text-xs text-[var(--text-muted)] font-semibold uppercase",children:"Fund"}),a.jsx("th",{className:"text-right py-1.5 px-2 text-xs text-[var(--text-muted)] font-semibold uppercase",children:"Allocation"}),a.jsx("th",{className:"text-right py-1.5 px-2 text-xs text-[var(--text-muted)] font-semibold uppercase",children:"Normal SIP"}),a.jsx("th",{className:"text-right py-1.5 px-2 text-xs text-[var(--text-muted)] font-semibold uppercase",children:"Rebalance SIP"})]})}),a.jsx("tbody",{children:f.map(d=>{const j=d.gap<=0;return a.jsxs("tr",{className:`border-b border-[var(--border-light)] last:border-0 ${j?"opacity-60":""}`,children:[a.jsx("td",{className:"py-2 px-2 text-[var(--text-secondary)] max-w-[180px] truncate",children:d.fundName}),a.jsxs("td",{className:"py-2 px-2 text-right tabular-nums",children:[a.jsxs("span",{className:j?"text-amber-400":"text-[var(--text-dim)]",children:[d.currentPct.toFixed(1),"%"]}),a.jsxs("span",{className:"text-[var(--text-dim)]",children:[" / ",d.targetAllocationPct.toFixed(1),"%"]})]}),a.jsx("td",{className:"py-2 px-2 text-right text-[var(--text-muted)] tabular-nums",children:Vs(d.normalSIP)}),a.jsx("td",{className:"py-2 px-2 text-right font-semibold tabular-nums",children:j?a.jsx("span",{className:"text-amber-400/70",children:"0"}):a.jsx("span",{className:"text-blue-400",children:Vs(d.suggestedSIP)})})]},d.holdingId)})}),a.jsx("tfoot",{children:a.jsxs("tr",{className:"border-t border-[var(--border)]",children:[a.jsx("td",{className:"py-1.5 px-2 text-xs font-bold text-[var(--text-primary)]",colSpan:2,children:"Total"}),a.jsx("td",{className:"py-1.5 px-2 text-right text-xs font-bold text-[var(--text-primary)] tabular-nums",children:Vs(u)}),a.jsx("td",{className:"py-1.5 px-2 text-right text-xs font-bold text-blue-400 tabular-nums",children:Vs(u)})]})})]})})]}):a.jsx("p",{className:"text-xs text-[var(--text-dim)] py-2",children:"SIPs are balanced"})}function JN({portfolio:n,holdings:o,totalValue:c}){const[u,x]=g.useState("");(n.rebalanceThreshold||.05)*100;const m=Number(u)||n.lumpsumTarget||0,h=o.map(v=>{const d=c>0?v.currentValue/c*100:0;return{...v,currentPct:d}}),f=g.useMemo(()=>{if(m<=0)return[];const v=c+m,d=h.map(S=>{const M=S.targetAllocationPct/100*v,k=Math.max(0,M-S.currentValue),z=v>0?(S.currentValue+k)/v*100:0;return{...S,invest:k,newPct:z}}).filter(S=>S.invest>0),j=d.reduce((S,M)=>S+M.invest,0);if(j>0&&Math.abs(j-m)>1){const S=m/j;return d.map(M=>({...M,invest:M.invest*S,newPct:c+m>0?(M.currentValue+M.invest*S)/(c+m)*100:0}))}return d},[h,m,c]);return a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-end gap-3",children:[a.jsx("div",{className:"flex-1 max-w-[200px]",children:a.jsx(X,{label:"Amount ()",children:a.jsx(ce,{type:"number",value:u,onChange:x,placeholder:n.lumpsumTarget?`Default: ${G(n.lumpsumTarget)}`:"Enter amount..."})})}),n.lumpsumTarget>0&&!u&&a.jsx("p",{className:"text-xs text-[var(--text-dim)] pb-2.5",children:"Using target"})]}),m>0&&f.length>0?a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full text-sm",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b border-[var(--border-light)]",children:[a.jsx("th",{className:"text-left py-1.5 px-2 text-xs text-[var(--text-muted)] font-semibold uppercase",children:"Fund"}),a.jsx("th",{className:"text-right py-1.5 px-2 text-xs text-[var(--text-muted)] font-semibold uppercase",children:"Drift"}),a.jsx("th",{className:"text-right py-1.5 px-2 text-xs text-[var(--text-muted)] font-semibold uppercase",children:"Invest"})]})}),a.jsx("tbody",{children:f.map(v=>a.jsxs("tr",{className:"border-b border-[var(--border-light)] last:border-0",children:[a.jsx("td",{className:"py-2 px-2 text-[var(--text-secondary)] max-w-[180px] truncate",children:v.fundName}),a.jsxs("td",{className:"py-2 px-2 text-right text-[var(--text-dim)] tabular-nums",children:[v.currentPct.toFixed(1),"%  ",v.newPct.toFixed(1),"%"]}),a.jsx("td",{className:"py-2 px-2 text-right font-semibold text-emerald-400 tabular-nums",children:Vs(v.invest)})]},v.holdingId))}),a.jsx("tfoot",{children:a.jsxs("tr",{className:"border-t border-[var(--border)]",children:[a.jsx("td",{className:"py-1.5 px-2 text-xs font-bold text-[var(--text-primary)]",colSpan:2,children:"Total"}),a.jsx("td",{className:"py-1.5 px-2 text-right text-xs font-bold text-emerald-400 tabular-nums",children:G(m)})]})})]})}):m>0?a.jsx("p",{className:"text-xs text-[var(--text-dim)] py-2 text-center",children:"Balanced  distributes proportionally"}):null]})}function WN({portfolio:n,holdings:o,totalValue:c}){const u=(n.rebalanceThreshold||.05)*100,x=o.map(m=>{const h=c>0?m.currentValue/c*100:0,f=Math.abs(h-m.targetAllocationPct)>u,v=m.targetAllocationPct/100*c,d=f?v-m.currentValue:0;return{...m,currentPct:h,amount:d}}).filter(m=>Math.abs(m.amount)>=500);return x.length===0?a.jsx("p",{className:"text-xs text-[var(--text-dim)] py-2",children:"Portfolio is balanced"}):a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full text-sm",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b border-[var(--border-light)]",children:[a.jsx("th",{className:"text-left py-1.5 px-2 text-xs text-[var(--text-muted)] font-semibold uppercase",children:"Fund"}),a.jsx("th",{className:"text-right py-1.5 px-2 text-xs text-[var(--text-muted)] font-semibold uppercase",children:"Drift"}),a.jsx("th",{className:"text-right py-1.5 px-2 text-xs text-[var(--text-muted)] font-semibold uppercase",children:"Action"})]})}),a.jsx("tbody",{children:x.map(m=>{const h=m.amount>0;return a.jsxs("tr",{className:"border-b border-[var(--border-light)] last:border-0",children:[a.jsx("td",{className:"py-2 px-2 text-[var(--text-secondary)] max-w-[180px] truncate",children:m.fundName}),a.jsxs("td",{className:"py-2 px-2 text-right text-[var(--text-dim)] tabular-nums",children:[m.currentPct.toFixed(1),"%  ",m.targetAllocationPct.toFixed(1),"%"]}),a.jsx("td",{className:"py-2 px-2 text-right",children:a.jsxs("span",{className:`text-xs font-semibold px-2 py-0.5 rounded-full ${h?"bg-emerald-500/20 text-emerald-400":"bg-rose-500/20 text-[var(--accent-rose)]"}`,children:[h?"Buy":"Sell"," ",Vs(Math.abs(m.amount))]})})]},m.holdingId)})})]})})}function P0(){const{mfHoldings:n,mfPortfolios:o}=Re(),[c,u]=g.useState("sip"),x=g.useMemo(()=>o.filter(m=>m.status!=="Inactive").map(m=>{const h=n.filter(j=>j.portfolioId===m.portfolioId&&j.units>0),f=h.reduce((j,S)=>j+S.currentValue,0),v=(m.rebalanceThreshold||.05)*100,d=h.filter(j=>{const S=f>0?j.currentValue/f*100:0;return Math.abs(S-j.targetAllocationPct)>v}).length;return{...m,holdings:h,totalValue:f,driftedCount:d}}).filter(m=>m.driftedCount>0),[o,n]);return x.length===0?a.jsxs("div",{className:"py-8 text-center",children:[a.jsx("p",{className:"text-sm text-[var(--text-muted)]",children:"All portfolios are balanced"}),a.jsx("p",{className:"text-xs text-[var(--text-dim)] mt-1",children:"No funds exceed their rebalance threshold"})]}):(Vh.find(m=>m.key===c),a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"flex bg-[var(--bg-inset)] rounded-lg p-0.5",children:Vh.map(({key:m,label:h,icon:f,color:v,dimColor:d,activeBg:j})=>a.jsxs("button",{onClick:()=>u(m),className:`flex-1 flex items-center justify-center gap-1.5 py-2 rounded-md text-xs font-semibold transition-colors ${c===m?`${j} ${v} shadow-sm`:d}`,children:[a.jsx(f,{size:13})," ",h]},m))}),x.map((m,h)=>a.jsxs("div",{className:"border border-[var(--border-light)] border-l-2 border-l-violet-500/50 rounded-lg overflow-hidden",children:[a.jsxs("div",{className:"flex items-center justify-between px-3 py-2.5 bg-[var(--bg-inset)]",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-xs font-bold text-violet-400 bg-violet-500/15 w-5 h-5 rounded flex items-center justify-center",children:h+1}),a.jsx("p",{className:"text-sm font-bold text-[var(--text-primary)]",children:m.portfolioName}),a.jsx("span",{className:"text-xs text-[var(--text-muted)]",children:m.ownerName}),a.jsxs("span",{className:"text-xs font-bold px-1.5 py-0.5 rounded-full bg-amber-500/15 text-amber-400",children:[m.driftedCount," drifted"]})]}),a.jsxs("div",{className:"flex items-center gap-3 text-xs text-[var(--text-muted)]",children:[a.jsx("span",{className:"font-semibold text-[var(--text-secondary)]",children:G(m.totalValue)}),a.jsxs("span",{children:["Threshold: ",((m.rebalanceThreshold||.05)*100).toFixed(0),"%"]}),m.sipTarget>0&&a.jsxs("span",{children:["SIP: ",G(m.sipTarget),"/mo"]})]})]}),a.jsxs("div",{className:"px-3 py-2",children:[c==="sip"&&a.jsx(KN,{portfolio:m,holdings:m.holdings,totalValue:m.totalValue}),c==="lumpsum"&&a.jsx(JN,{portfolio:m,holdings:m.holdings,totalValue:m.totalValue}),c==="buysell"&&a.jsx(WN,{portfolio:m,holdings:m.holdings,totalValue:m.totalValue})]})]},m.portfolioId))]}))}const e2="https://raw.githubusercontent.com/jagadeeshkmanne/capital-friends/main/logo.png",Yh={mf:{label:"Mutual Funds",color:"bg-violet-500",order:1,route:"/investments/mutual-funds"},stocks:{label:"Stocks",color:"bg-blue-500",order:2,route:"/investments/stocks"},Debt:{label:"Debt",color:"bg-cyan-500",order:3,route:"/investments/other"},Gold:{label:"Gold",color:"bg-amber-500",order:4,route:"/investments/other"},Silver:{label:"Silver",color:"bg-slate-400",order:5,route:"/investments/other"},Property:{label:"Real Estate",color:"bg-orange-500",order:6,route:"/investments/other"},Alternative:{label:"Alternative",color:"bg-violet-400",order:7,route:"/investments/other"},Equity:{label:"Equity",color:"bg-emerald-500",order:8,route:"/investments/other"},Other:{label:"Other",color:"bg-gray-500",order:9,route:"/investments/other"}},_i=["from-violet-500 to-indigo-500","from-rose-500 to-pink-500","from-blue-500 to-cyan-500","from-amber-500 to-orange-500","from-emerald-500 to-teal-500"],Qh=["bg-violet-500","bg-rose-500","bg-blue-500","bg-amber-500","bg-emerald-500"],t2=[{label:"Family Members",path:"/family",match:"/family"},{label:"Bank Accounts",path:"/accounts/bank",match:"/accounts/bank"},{label:"Investment Accounts",path:"/accounts/investment",match:"/accounts/investment"},{label:"Insurance",path:"/insurance",match:"/insurance"},{label:"Mutual Funds",path:"/investments/mutual-funds",match:"/investments/mutual-funds"},{label:"Stocks",path:"/investments/stocks",match:"/investments/stocks"},{label:"Other Investments",path:"/investments/other",match:"/investments/other"},{label:"Goals",path:"/goals",match:"/goals"}],a2={buyopp:"Buying Opportunities",rebalance:"Rebalance Alerts"};function l2({onMenuClick:n}){const{theme:o,toggle:c}=N0(),{selectedMember:u,setSelectedMember:x,familyMembers:m}=At(),{mfPortfolios:h,mfHoldings:f,stockPortfolios:v,stockHoldings:d,otherInvList:j,liabilityList:S}=Re(),{user:M,signOut:k}=es(),{masked:z,toggleMask:A,mv:N}=Ra(),y=Wl(),w=xa(),{criticalAlerts:p,upcomingReminders:I,investmentSignals:J}=XN(),[q,Z]=g.useState(!1),[D,$]=g.useState(!1),[P,le]=g.useState(null),[E,fe]=g.useState(!1),[W,se]=g.useState(!1),[F,T]=g.useState(!0),O=g.useRef(null),ie=g.useRef(null),ue=g.useRef(null),R=p.length+I.length,{buyOppCount:ee,rebalanceCount:oe}=J;g.useEffect(()=>{function me(Se){O.current&&!O.current.contains(Se.target)&&Z(!1),ie.current&&!ie.current.contains(Se.target)&&$(!1)}return(q||D)&&document.addEventListener("mousedown",me),()=>document.removeEventListener("mousedown",me)},[q,D]);const de=m.findIndex(me=>me.memberId===u),je=de>=0?m[de]:null,_=g.useMemo(()=>{const me=(Ce,Ze)=>u==="all"?Ce:Ce.filter(Ke=>Ke[Ze]===u),Se={},Oe=(Ce,Ze,Ke,_t)=>{Se[Ce]||(Se[Ce]={items:[],invested:0}),Se[Ce].items.push({label:Ze,value:Ke}),Se[Ce].invested+=_t};me((h||[]).filter(Ce=>Ce.status==="Active"),"ownerId").forEach(Ce=>{const Ze=(f||[]).filter(ht=>ht.portfolioId===Ce.portfolioId&&ht.units>0),Ke=Ze.reduce((ht,Mt)=>ht+Mt.currentValue,0),_t=Ze.reduce((ht,Mt)=>ht+Mt.investment,0);Ke>0&&Oe("mf",Ce.portfolioName?.replace(/^PFL-/,"")||Ce.portfolioName,Ke,_t)}),me((v||[]).filter(Ce=>Ce.status==="Active"),"ownerId").forEach(Ce=>{const Ze=(d||[]).filter(ht=>ht.portfolioId===Ce.portfolioId),Ke=Ze.reduce((ht,Mt)=>ht+Mt.currentValue,0),_t=Ze.reduce((ht,Mt)=>ht+Mt.totalInvestment,0);Ke>0&&Oe("stocks",Ce.portfolioName,Ke,_t)}),me((j||[]).filter(Ce=>Ce.status==="Active"),"familyMemberId").forEach(Ce=>{const Ze=Ce.investmentCategory||"Other";Oe(Ze,Ce.investmentName||Ce.investmentType||"Other",Ce.currentValue,Ce.investedAmount||0)});const nt=Object.entries(Se).map(([Ce,{items:Ze,invested:Ke}])=>{const _t=Yh[Ce]||Yh.Other,ht=Ze.reduce((Mt,Na)=>Mt+Na.value,0);return{key:Ce,label:_t.label,color:_t.color,order:_t.order,route:_t.route,total:ht,invested:Ke,items:Ze.sort((Mt,Na)=>Na.value-Mt.value)}}).filter(Ce=>Ce.total>0).sort((Ce,Ze)=>Ce.order-Ze.order),zt=me((S||[]).filter(Ce=>Ce.status==="Active"),"familyMemberId"),Pe=zt.map(Ce=>({label:Ce.liabilityName||Ce.liabilityType||"Loan",value:Ce.outstandingBalance})),Ie=zt.reduce((Ce,Ze)=>Ce+Ze.outstandingBalance,0),yt=nt.reduce((Ce,Ze)=>Ce+Ze.total,0),fa=nt.reduce((Ce,Ze)=>Ce+Ze.invested,0);return{netWorth:yt-Ie,totalInv:yt,totalInvested:fa,sections:nt,totalLiab:Ie,liabilities:Pe}},[u,h,f,v,d,j,S]);function te(){Z(!1),$(!1)}function he(){if(!ue.current)return;const{scrollLeft:me,scrollWidth:Se,clientWidth:Oe}=ue.current;se(me>5),T(me+Oe<Se-5)}function pe(me){if(!ue.current)return;const Oe=(ue.current.querySelector("a")?.offsetWidth||240)+12;ue.current.scrollBy({left:me*Oe,behavior:"smooth"})}return g.useEffect(()=>{he()},[_,E]),a.jsxs("header",{className:"sticky top-0 z-30 shrink-0",children:[a.jsx("style",{children:`
        @keyframes glow-emerald {
          0%, 100% { box-shadow: 0 0 6px rgba(16,185,129,0.3), 0 0 12px rgba(16,185,129,0.15); }
          50% { box-shadow: 0 0 12px rgba(16,185,129,0.5), 0 0 24px rgba(16,185,129,0.25); }
        }
        @keyframes glow-violet {
          0%, 100% { box-shadow: 0 0 6px rgba(139,92,246,0.3), 0 0 12px rgba(139,92,246,0.15); }
          50% { box-shadow: 0 0 12px rgba(139,92,246,0.5), 0 0 24px rgba(139,92,246,0.25); }
        }
        .glow-emerald { animation: glow-emerald 2s ease-in-out infinite; }
        .glow-violet { animation: glow-violet 2s ease-in-out infinite; }
      `}),a.jsx("div",{className:"relative z-10 bg-[var(--bg-header)]/95 backdrop-blur-sm border-b border-[var(--border)]",children:a.jsxs("div",{className:"flex items-center justify-between px-3 sm:px-4 h-14",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:n,className:"lg:hidden p-2 -ml-1.5 rounded-lg text-[var(--text-muted)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-hover)] transition-colors",children:a.jsx(eN,{size:20})}),a.jsx("img",{src:e2,alt:"Capital Friends",className:"h-10"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[ee>0&&a.jsxs("button",{onClick:()=>{le(P==="buyopp"?null:"buyopp"),te()},className:`glow-emerald flex items-center gap-1.5 text-xs font-bold whitespace-nowrap px-3 py-1.5 rounded-full transition-all ${P==="buyopp"?"bg-emerald-500/30 text-emerald-300 ring-1 ring-emerald-400/50":"bg-emerald-500/15 text-emerald-400 hover:bg-emerald-500/25"}`,children:[a.jsx(xo,{size:13,strokeWidth:2.5}),a.jsx("span",{className:"hidden sm:inline",children:"Buying Opportunities"}),a.jsx("span",{className:"text-[11px] bg-emerald-500/30 px-1.5 py-0.5 rounded-full",children:ee})]}),oe>0&&a.jsxs("button",{onClick:()=>{le(P==="rebalance"?null:"rebalance"),te()},className:`glow-violet flex items-center gap-1.5 text-xs font-bold whitespace-nowrap px-3 py-1.5 rounded-full transition-all ${P==="rebalance"?"bg-violet-500/30 text-violet-300 ring-1 ring-violet-400/50":"bg-violet-500/15 text-violet-400 hover:bg-violet-500/25"}`,children:[a.jsx(dr,{size:13,strokeWidth:2.5}),a.jsx("span",{className:"hidden sm:inline",children:"Rebalance Alerts"}),a.jsx("span",{className:"text-[11px] bg-violet-500/30 px-1.5 py-0.5 rounded-full",children:oe})]}),a.jsx("button",{onClick:A,className:`p-2 rounded-lg transition-colors ${z?"text-amber-400 bg-amber-500/10":"text-[var(--text-muted)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-hover)]"}`,title:z?"Data masked  click to reveal":"Mask sensitive data",children:z?a.jsx(Ki,{size:18}):a.jsx(jd,{size:18})}),a.jsx("button",{onClick:c,className:"p-2 rounded-lg text-[var(--text-muted)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-hover)] transition-colors",title:`Switch to ${o==="dark"?"light":"dark"} mode`,children:o==="dark"?a.jsx(ed,{size:18}):a.jsx(I0,{size:18})}),R>0&&a.jsxs("div",{className:"relative",ref:ie,children:[a.jsxs("button",{onClick:()=>{$(!D),Z(!1)},className:"relative p-2 rounded-lg text-[var(--text-muted)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-hover)] transition-colors",children:[a.jsx(mo,{size:18}),a.jsx("span",{className:"absolute -top-0.5 -right-0.5 min-w-[16px] h-4 flex items-center justify-center text-[9px] font-bold text-white bg-rose-500 rounded-full px-1",children:R})]}),D&&a.jsxs("div",{className:"absolute right-0 top-full mt-2 w-72 rounded-xl bg-[var(--bg-card)] border border-[var(--border)] shadow-xl shadow-black/20 overflow-hidden animate-in fade-in slide-in-from-top-2 duration-200 z-50",children:[a.jsx("div",{className:"px-3 py-2 border-b border-[var(--border-light)]",children:a.jsx("p",{className:"text-[11px] font-semibold uppercase tracking-wider text-[var(--text-muted)]",children:"Notifications"})}),a.jsxs("div",{className:"max-h-[300px] overflow-y-auto py-1",children:[p.map((me,Se)=>{const Oe={critical:"bg-rose-500",warning:"bg-amber-500",info:"bg-blue-500"}[me.type],Ue={critical:"bg-rose-500/15 text-rose-400",warning:"bg-amber-500/15 text-amber-400",info:"bg-blue-500/15 text-blue-400"}[me.type];return a.jsxs("button",{onClick:()=>{$(!1),y(me.navigateTo)},className:"w-full flex items-center gap-2 px-3 py-2 hover:bg-[var(--bg-hover)] transition-colors",children:[a.jsx("span",{className:`w-2 h-2 rounded-full shrink-0 ${Oe}`}),a.jsx("span",{className:"text-xs text-[var(--text-secondary)] flex-1 text-left truncate",children:me.title}),a.jsx("span",{className:`text-[10px] font-semibold px-1.5 py-0.5 rounded-full shrink-0 ${Ue}`,children:me.badge})]},`c-${Se}`)}),p.length>0&&I.length>0&&a.jsx("div",{className:"mx-3 my-1 border-t border-[var(--border-light)]"}),I.map(me=>{const Se=me.days<=7?"bg-rose-500/15 text-rose-400":me.days<=15?"bg-amber-500/15 text-amber-400":"bg-slate-500/15 text-[var(--text-muted)]";return a.jsxs("button",{onClick:()=>{$(!1),y("/reminders")},className:"w-full flex items-center gap-2 px-3 py-2 hover:bg-[var(--bg-hover)] transition-colors text-left",children:[a.jsx("span",{className:"w-2 h-2 rounded-full shrink-0 bg-amber-500"}),a.jsx("span",{className:"text-xs text-[var(--text-secondary)] flex-1 truncate",children:me.title}),a.jsx("span",{className:`text-[10px] font-semibold px-1.5 py-0.5 rounded-full shrink-0 ${Se}`,children:me.days===0?"Today":me.days<=30?`${me.days}d`:me.dateStr})]},`r-${me.reminderId}`)})]})]})]}),a.jsxs("div",{className:"relative",ref:O,children:[a.jsxs("button",{onClick:()=>{Z(!q),$(!1)},className:"flex items-center gap-1.5 pl-1 pr-2 py-1 rounded-full hover:bg-[var(--bg-hover)] transition-colors",children:[je?a.jsx("div",{className:`w-8 h-8 rounded-full bg-gradient-to-br ${_i[de%_i.length]} flex items-center justify-center text-white text-xs font-bold shadow-sm`,children:je.memberName.charAt(0)}):a.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-violet-500 to-indigo-500 flex items-center justify-center text-white shadow-sm",children:a.jsx(Zs,{size:14})}),a.jsx(Qs,{size:14,className:`text-[var(--text-muted)] transition-transform ${q?"rotate-180":""}`})]}),q&&a.jsxs("div",{className:"absolute right-0 top-full mt-2 w-56 rounded-xl bg-[var(--bg-card)] border border-[var(--border)] shadow-xl shadow-black/20 overflow-hidden animate-in fade-in slide-in-from-top-2 duration-200 z-50",children:[a.jsx("div",{className:"px-4 py-2.5 border-b border-[var(--border-light)]",children:a.jsx("p",{className:"text-[11px] font-semibold uppercase tracking-wider text-[var(--text-muted)]",children:"Viewing as"})}),a.jsxs("div",{className:"py-1.5",children:[a.jsxs("button",{onClick:()=>{x("all"),Z(!1)},className:`w-full flex items-center gap-3 px-4 py-2.5 text-left transition-colors ${u==="all"?"bg-violet-500/10":"hover:bg-[var(--bg-hover)]"}`,children:[a.jsx("div",{className:"w-9 h-9 rounded-full bg-gradient-to-br from-violet-500 to-indigo-500 flex items-center justify-center text-white shadow-sm shrink-0",children:a.jsx(Zs,{size:15})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:`text-sm font-semibold truncate ${u==="all"?"text-violet-400":"text-[var(--text-primary)]"}`,children:"Everyone"}),a.jsx("p",{className:"text-[11px] text-[var(--text-muted)]",children:"All family members"})]}),u==="all"&&a.jsx(Uh,{size:16,className:"text-violet-400 shrink-0"})]}),m.length>0&&a.jsx("div",{className:"mx-4 my-1 border-t border-[var(--border-light)]"}),m.map((me,Se)=>{const Oe=u===me.memberId;return a.jsxs("button",{onClick:()=>{x(me.memberId),Z(!1)},className:`w-full flex items-center gap-3 px-4 py-2.5 text-left transition-colors ${Oe?`${Qh[Se%Qh.length]}/10`:"hover:bg-[var(--bg-hover)]"}`,children:[a.jsx("div",{className:`w-9 h-9 rounded-full bg-gradient-to-br ${_i[Se%_i.length]} flex items-center justify-center text-white text-sm font-bold shadow-sm shrink-0`,children:me.memberName.charAt(0)}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-semibold truncate text-[var(--text-primary)]",children:me.memberName}),a.jsx("p",{className:"text-[11px] text-[var(--text-muted)]",children:me.relationship||"Family member"})]}),Oe&&a.jsx(Uh,{size:16,className:"text-emerald-400 shrink-0"})]},me.memberId)})]}),a.jsxs("div",{className:"border-t border-[var(--border-light)] py-1.5",children:[a.jsxs(Gs,{to:"/settings",onClick:()=>Z(!1),className:"w-full flex items-center gap-3 px-4 py-2.5 text-[var(--text-muted)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-hover)] transition-colors",children:[a.jsx(Nd,{size:16}),a.jsx("span",{className:"text-sm font-medium",children:"Settings"})]}),M&&a.jsx("div",{className:"px-4 py-1.5",children:a.jsx("p",{className:"text-[11px] text-[var(--text-muted)] truncate",children:N(M.email,"email")})}),a.jsxs("button",{onClick:()=>{k(),Z(!1)},className:"w-full flex items-center gap-3 px-4 py-2.5 text-left text-rose-400 hover:bg-rose-500/10 transition-colors",children:[a.jsx(_0,{size:16}),a.jsx("span",{className:"text-sm font-medium",children:"Sign out"})]})]})]})]})]})]})}),a.jsx(QN,{}),a.jsx("nav",{className:"bg-[var(--bg-header)]/90 backdrop-blur-sm border-b border-[var(--border)]",children:a.jsxs("div",{className:"flex items-center px-3 sm:px-4 py-1.5",children:[a.jsx("div",{className:"flex items-center gap-1 overflow-x-auto no-scrollbar flex-1 min-w-0",children:t2.map(me=>{const Se=w.pathname.startsWith(me.match);return a.jsx(Gs,{to:me.path,className:`whitespace-nowrap px-3 py-1.5 rounded-lg text-[13px] font-medium transition-colors ${Se?"bg-violet-500/15 text-violet-400":"text-[var(--text-muted)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-hover)]"}`,children:me.label},me.path)})}),a.jsxs("button",{onClick:()=>fe(!E),className:"shrink-0 ml-3 flex items-center gap-1.5 px-3 py-1.5 rounded-lg bg-emerald-500/10 border border-emerald-500/20 hover:bg-emerald-500/15 transition-colors",children:[a.jsx("span",{className:"text-[10px] font-bold uppercase tracking-wider text-emerald-400/70",children:"Net Worth"}),a.jsx("span",{className:"text-sm font-extrabold text-emerald-400 tabular-nums",children:G(_.netWorth)}),a.jsx(Qs,{size:12,className:`text-emerald-400/60 transition-transform duration-200 ${E?"rotate-180":""}`})]})]})}),E&&a.jsx("div",{className:"bg-[var(--bg-card)]/90 backdrop-blur-sm border-b border-[var(--border-light)] animate-in slide-in-from-top-2 fade-in duration-200",children:a.jsxs("div",{className:"relative max-w-7xl mx-auto",children:[W&&a.jsx("button",{onClick:()=>pe(-1),className:"absolute left-2 sm:left-3 top-1/2 -translate-y-1/2 z-10 w-7 h-7 flex items-center justify-center rounded-full bg-[var(--bg-card)] border border-[var(--border)] shadow-lg text-[var(--text-muted)] hover:text-[var(--text-primary)] transition-colors",children:a.jsx(T0,{size:14})}),a.jsxs("div",{ref:ue,onScroll:he,className:"flex gap-3 px-12 sm:px-14 py-3 overflow-x-auto scroll-smooth snap-x snap-mandatory no-scrollbar",children:[_.sections?.map(me=>a.jsxs(Gs,{to:me.route,className:"group snap-start shrink-0 w-[calc(50%-6px)] sm:w-[calc(33.333%-8px)] lg:w-[calc(25%-9px)] rounded-lg p-3 bg-[var(--bg-inset)] hover:bg-[var(--bg-hover)] border border-[var(--border-light)] transition-colors",children:[a.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[a.jsxs("span",{className:"flex items-center gap-1.5 text-[10px] font-bold uppercase tracking-wider text-[var(--text-muted)]",children:[a.jsx("span",{className:`w-1.5 h-1.5 rounded-full ${me.color}`}),me.label]}),a.jsx(ir,{size:10,className:"text-[var(--text-dim)] opacity-0 group-hover:opacity-100 transition-opacity"})]}),a.jsx("p",{className:"text-base font-bold text-[var(--text-primary)] tabular-nums mb-1",children:G(me.total)}),me.items.length>0&&a.jsx("div",{className:"space-y-0.5",children:me.items.map(Se=>a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-[11px] text-[var(--text-dim)] truncate mr-2",children:Se.label}),a.jsx("span",{className:"text-[11px] text-[var(--text-muted)] tabular-nums shrink-0",children:G(Se.value)})]},Se.label))})]},me.key)),_.totalLiab>0&&a.jsxs(Gs,{to:"/liabilities",className:"group snap-start shrink-0 w-[calc(50%-6px)] sm:w-[calc(33.333%-8px)] lg:w-[calc(25%-9px)] rounded-lg p-3 bg-[var(--bg-inset)] hover:bg-[var(--bg-hover)] border border-[var(--border-light)] transition-colors",children:[a.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[a.jsxs("span",{className:"flex items-center gap-1.5 text-[10px] font-bold uppercase tracking-wider text-[var(--text-muted)]",children:[a.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-rose-500"}),"Liabilities"]}),a.jsx(ir,{size:10,className:"text-[var(--text-dim)] opacity-0 group-hover:opacity-100 transition-opacity"})]}),a.jsxs("p",{className:"text-base font-bold text-[var(--accent-rose)] tabular-nums mb-1",children:["",G(_.totalLiab)]}),_.liabilities?.length>0&&a.jsx("div",{className:"space-y-0.5",children:_.liabilities.map(me=>a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-[11px] text-[var(--text-dim)] truncate mr-2",children:me.label}),a.jsx("span",{className:"text-[11px] text-[var(--accent-rose)]/70 tabular-nums shrink-0",children:G(me.value)})]},me.label))})]})]}),F&&a.jsx("button",{onClick:()=>pe(1),className:"absolute right-2 sm:right-3 top-1/2 -translate-y-1/2 z-10 w-7 h-7 flex items-center justify-center rounded-full bg-[var(--bg-card)] border border-[var(--border)] shadow-lg text-[var(--text-muted)] hover:text-[var(--text-primary)] transition-colors",children:a.jsx(ir,{size:14})})]})}),P&&a.jsxs("div",{className:"fixed inset-0 z-50 flex items-start justify-center pt-16 sm:pt-24 px-3",children:[a.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:()=>le(null)}),a.jsxs("div",{className:"relative w-full max-w-3xl max-h-[75vh] rounded-xl bg-[var(--bg-card)] border border-[var(--border)] shadow-2xl shadow-black/40 overflow-hidden flex flex-col animate-in fade-in slide-in-from-top-4 duration-200",children:[a.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-[var(--border-light)] shrink-0",children:[a.jsx("h2",{className:"text-sm font-bold text-[var(--text-primary)]",children:a2[P]}),a.jsx("button",{onClick:()=>le(null),className:"p-1.5 rounded-lg hover:bg-[var(--bg-hover)] text-[var(--text-dim)] transition-colors",children:a.jsx(hr,{size:16})})]}),a.jsxs("div",{className:"overflow-y-auto p-4",children:[P==="buyopp"&&a.jsx($0,{}),P==="rebalance"&&a.jsx(P0,{})]})]})]})]})}const s2=[{label:"Invest",icon:Ys,path:"/investments/mutual-funds"},{label:"Accounts",icon:ur,path:"/accounts/bank"},{label:"Goals",icon:fr,path:"/goals"},{label:"Reminders",icon:mo,path:"/reminders"},{label:"More",icon:Mj,path:"/more"}];function n2(){return a.jsx("nav",{className:"lg:hidden fixed bottom-0 left-0 right-0 z-40 bg-[var(--bg-sidebar)] border-t border-[var(--border)] safe-bottom",children:a.jsx("div",{className:"flex items-center justify-around h-[56px]",children:s2.map(({label:n,icon:o,path:c})=>a.jsx(pd,{to:c,className:({isActive:u})=>`relative flex flex-col items-center justify-center gap-0.5 w-full h-full text-xs font-medium transition-colors ${u?"text-[var(--sidebar-active-text)]":"text-[var(--text-dim)]"}`,children:({isActive:u})=>a.jsxs(a.Fragment,{children:[u&&a.jsx("span",{className:"absolute top-0 w-10 h-[2.5px] bg-[var(--sidebar-active-text)] rounded-b-full"}),a.jsx("div",{className:`flex items-center justify-center w-9 h-9 rounded-xl transition-colors ${u?"bg-[var(--sidebar-active-bg)]":""}`,children:a.jsx(o,{size:19,strokeWidth:u?2.2:1.5})}),a.jsx("span",{className:u?"font-semibold":"",children:n})]})},c))})})}const r2="/logo-small.png",$u=[{key:"auth",label:"Signing in"},{key:"data",label:"Loading your data"},{key:"health",label:"Checking health status"},{key:"ready",label:"Almost ready"}];function ro({phase:n="auth"}){const[o,c]=g.useState("");g.useEffect(()=>{const x=setInterval(()=>{c(m=>m.length>=3?"":m+".")},500);return()=>clearInterval(x)},[]);const u=$u.findIndex(x=>x.key===n);return a.jsx("div",{className:"flex h-dvh items-center justify-center bg-[var(--bg-base)]",children:a.jsxs("div",{className:"flex flex-col items-center gap-8",children:[a.jsx("img",{src:r2,alt:"Capital Friends",className:"h-16 w-16 animate-pulse"}),a.jsxs("div",{className:"flex flex-col items-center gap-4 min-w-[220px]",children:[$u.map((x,m)=>{const h=m===u,f=m<u;return a.jsxs("div",{className:"flex items-center gap-3 w-full",children:[a.jsx("div",{className:`flex-shrink-0 w-5 h-5 rounded-full flex items-center justify-center text-xs font-medium transition-all duration-300 ${f?"bg-green-500 text-white":h?"bg-violet-500 text-white animate-pulse":"bg-[var(--border)] text-[var(--text-muted)]"}`,children:f?"":m+1}),a.jsxs("span",{className:`text-sm transition-all duration-300 ${f?"text-green-400":h?"text-[var(--text-primary)] font-medium":"text-[var(--text-muted)]"}`,children:[x.label,h?o:""]})]},x.key)}),a.jsx("div",{className:"w-full h-1 rounded-full bg-[var(--border)] overflow-hidden mt-2",children:a.jsx("div",{className:"h-full rounded-full bg-gradient-to-r from-violet-500 to-cyan-500 transition-all duration-500 ease-out",style:{width:`${(u+1)/$u.length*100}%`}})})]})]})})}function i2(){const[n,o]=g.useState(!1),{loading:c,error:u}=Re();return c?a.jsx(ro,{}):u?a.jsx("div",{className:"flex h-dvh items-center justify-center bg-[var(--bg-base)]",children:a.jsxs("div",{className:"flex flex-col items-center gap-4 text-center px-6",children:[a.jsx("img",{src:"/logo-small.png",alt:"Capital Friends",className:"h-16 w-16 opacity-50"}),a.jsx("p",{className:"text-rose-400 text-sm font-medium",children:u}),a.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 text-sm font-medium rounded-lg bg-violet-600 hover:bg-violet-500 text-white transition-colors",children:"Retry"})]})}):a.jsxs("div",{className:"flex flex-col h-dvh bg-[var(--bg-base)] overflow-hidden",children:[a.jsx(l2,{onMenuClick:()=>o(!0)}),a.jsx($N,{open:n,onClose:()=>o(!1)}),a.jsx("main",{className:"flex-1 overflow-y-auto overscroll-contain pb-20 lg:pb-0",children:a.jsx("div",{className:"px-3 sm:px-4 py-3 sm:py-4 w-full max-w-7xl mx-auto",children:a.jsx(Up,{})})}),a.jsx(n2,{})]})}function o2(){const{isAuthenticated:n,loading:o}=es(),{healthCheckCompleted:c,loading:u}=Re(),x=xa();return o&&!n?a.jsx(ro,{phase:"auth"}):!n&&!o?a.jsx(eo,{to:"/",replace:!0}):u?a.jsx(ro,{phase:"data"}):c===!1&&x.pathname!=="/health-check"?a.jsx(eo,{to:"/health-check",replace:!0}):a.jsx(Up,{})}const Xh="https://raw.githubusercontent.com/jagadeeshkmanne/capital-friends/main/logo.png";function G0(){const{isAuthenticated:n,loading:o,error:c,signIn:u}=es(),x=Wl(),[m,h]=g.useState(0),[f,v]=g.useState(!1),d=g.useRef(null),j=g.useCallback(()=>{d.current&&clearInterval(d.current),d.current=setInterval(()=>{v(z=>(z||h(A=>(A+1)%4),z))},5e3)},[]);g.useEffect(()=>(j(),()=>{d.current&&clearInterval(d.current)}),[j]);function S(z){h(z),j()}if(g.useEffect(()=>{n&&x("/dashboard",{replace:!0})},[n,x]),o)return a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-[#080d1a]",children:a.jsx("img",{src:"/logo-small.png",alt:"",className:"h-16 w-16 animate-pulse"})});const M=[{id:"ath",label:"ATH Tracking",icon:a.jsx(Xs,{size:18}),color:"emerald",tagline:"Spot Buying Opportunities",desc:"See how far each mutual fund is from its All-Time High NAV. When a quality fund dips 10-20% below ATH, it's your signal to invest more  via SIP increase or lumpsum.",mock:a.jsx(u2,{})},{id:"rebalance",label:"Rebalancing",icon:a.jsx(dr,{size:18}),color:"violet",tagline:"Know Exactly What to Buy or Sell",desc:"Set target allocation for each fund. When your portfolio drifts, Capital Friends tells you exactly how much to adjust  via SIP changes, lumpsum top-ups, or buy/sell actions.",mock:a.jsx(d2,{})},{id:"goals",label:"Goal Linking",icon:a.jsx(fr,{size:18}),color:"cyan",tagline:"Link Portfolios to Goals",desc:"Create goals like retirement, child education, or emergency fund. Link MF portfolios with allocation percentages. Goal progress updates automatically as NAVs change daily.",mock:a.jsx(m2,{})},{id:"dashboard",label:"Family View",icon:a.jsx(Zs,{size:18}),color:"amber",tagline:"Everyone's Wealth, One Dashboard",desc:"Switch between family members in one click. See combined or individual net worth, investments, insurance, loans  everything your family owns, in one place.",mock:a.jsx(c2,{})}],k=M[m];return a.jsxs("div",{className:"min-h-screen bg-[#080d1a] text-slate-200",children:[a.jsx("header",{className:"sticky top-0 z-50 bg-[#0a0f1f]/95 backdrop-blur-sm border-b border-white/[0.06]",children:a.jsxs("div",{className:"flex items-center justify-between px-3 sm:px-4 h-14",children:[a.jsx("img",{src:Xh,alt:"Capital Friends",className:"h-12"}),a.jsxs("button",{onClick:u,className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-gradient-to-r from-violet-600 to-cyan-600 text-white text-sm font-semibold hover:from-violet-500 hover:to-cyan-500 transition-all cursor-pointer",children:[a.jsx(Kh,{s:14})," Sign In"]})]})}),a.jsxs("section",{className:"relative px-5 sm:px-8 lg:px-16 pt-10 sm:pt-14 pb-8 sm:pb-10 overflow-hidden",children:[a.jsx("div",{className:"absolute top-0 left-1/4 w-[600px] h-[400px] bg-violet-600/8 rounded-full blur-[120px] pointer-events-none"}),a.jsx("div",{className:"absolute top-20 right-1/4 w-[400px] h-[300px] bg-cyan-600/6 rounded-full blur-[100px] pointer-events-none"}),a.jsxs("div",{className:"relative text-center",children:[a.jsx("span",{className:"inline-block text-xs font-bold uppercase tracking-[0.2em] text-violet-400 bg-violet-500/10 border border-violet-500/20 rounded-full px-4 py-1.5 mb-5",children:"Always Free  100% Private  Your Google Sheet"}),a.jsxs("h1",{className:"text-3xl sm:text-4xl lg:text-5xl font-extrabold leading-[1.1] tracking-tight text-white",children:["One dashboard for your family's"," ",a.jsx("span",{className:"bg-gradient-to-r from-violet-400 to-cyan-400 bg-clip-text text-transparent",children:"entire wealth"})]}),a.jsxs("p",{className:"mt-5 text-base sm:text-lg text-slate-400 leading-relaxed max-w-2xl mx-auto",children:["Mutual funds, stocks, FDs, gold, insurance, loans  track everything for every family member. Manual entry means ",a.jsx("strong",{className:"text-white",children:"no bank credentials, no privacy risk"}),"."]}),c&&a.jsx("p",{className:"mt-5 text-sm text-rose-400",children:c})]})]}),a.jsxs("section",{className:"bg-gradient-to-b from-[#0d0a1a] to-[#0a0e1c] border-y border-white/[0.06] px-5 sm:px-8 lg:px-16 py-10 sm:py-14",children:[a.jsxs("div",{className:"text-center mb-10",children:[a.jsxs("h2",{className:"text-2xl sm:text-3xl lg:text-4xl font-extrabold text-white inline-flex items-center gap-3 flex-wrap justify-center",children:[a.jsx(fo,{size:28,className:"text-amber-400 shrink-0"}),a.jsxs("span",{children:["What happens if something happens to ",a.jsx("span",{className:"text-amber-400",children:"you"}),"?"]})]}),a.jsxs("p",{className:"mt-4 text-lg text-slate-400 leading-relaxed",children:["Your family should know about every investment, every policy, every loan. Not someday. ",a.jsx("strong",{className:"text-white",children:"Right now."})]})]}),a.jsxs("div",{className:"grid sm:grid-cols-2 gap-4",children:[a.jsx(Zh,{icon:a.jsx(jd,{size:20}),color:"rose",title:"Without Capital Friends",items:["Scattered investments across 10+ platforms","Family has no idea what you own or owe","Insurance policies lost in email threads","Months of confusion, missed renewals, lost money"],bad:!0}),a.jsx(Zh,{icon:a.jsx(or,{size:20}),color:"emerald",title:"With Capital Friends",items:["One sheet  every investment, policy, and loan","Family receives email reports with full portfolio details","Reminders for SIPs, renewals, EMI payments","Complete clarity, instantly  when it matters most"]})]}),a.jsxs("p",{className:"text-center mt-8 text-base text-slate-500",children:["Built for ",a.jsx("strong",{className:"text-white",children:"you"})," to manage your wealth  and for your ",a.jsx("strong",{className:"text-white",children:"family"})," to access it when they need to."]})]}),a.jsxs("section",{className:"bg-[#0a0e1c] border-y border-white/[0.06] px-5 sm:px-8 lg:px-16 py-14 sm:py-20",children:[a.jsxs("div",{className:"text-center mb-12",children:[a.jsx("h2",{className:"text-2xl sm:text-3xl lg:text-4xl font-extrabold text-white mb-2",children:"How it Works"}),a.jsx("p",{className:"text-base text-slate-500",children:"Set up in 2 minutes  no bank credentials, no downloads"})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 lg:gap-4",children:[a.jsx(Ii,{num:1,icon:a.jsx(Xj,{size:24}),color:"violet",title:"Sign In with Google",desc:"Go to capitalfriends.in and sign in with your Google account. That's all  no registration form, no passwords."}),a.jsx(Ii,{num:2,icon:a.jsx(Dj,{size:24}),color:"emerald",title:"App Creates Your Sheet",desc:"The app creates a private Google Sheet in your own Google Drive. This sheet stores all your financial data. Only you can see it  not even the developer."}),a.jsx(Ii,{num:3,icon:a.jsx(D0,{size:24}),color:"cyan",title:"Financial Health Check",desc:"Answer 7 simple yes/no questions about your financial health. Get your score and personalized recommendations instantly."}),a.jsx(Ii,{num:4,icon:a.jsx(Xs,{size:24}),color:"amber",title:"Start Tracking",desc:"Add family members, portfolios, goals, insurance, and loans. The app connects to AMFI for live mutual fund prices automatically."})]}),a.jsxs("p",{className:"text-center mt-10 text-sm text-slate-600",children:["Your sheet is named ",a.jsx("strong",{className:"text-slate-400",children:"Capital Friends - Your Name"})," and lives in your Google Drive. The web app is just a beautiful dashboard to view and manage it."]})]}),a.jsxs("section",{id:"features",className:"bg-[#0b1022] border-y border-white/[0.06] px-5 sm:px-8 lg:px-16 py-14 sm:py-20",onMouseEnter:()=>v(!0),onMouseLeave:()=>{v(!1),j()},children:[a.jsxs("div",{className:"text-center mb-10",children:[a.jsx("h2",{className:"text-2xl sm:text-3xl lg:text-4xl font-extrabold text-white mb-2",children:"Features That Set Us Apart"}),a.jsx("p",{className:"text-base text-slate-500",children:"Things you won't find on other portfolio trackers"})]}),a.jsx("div",{className:"flex justify-center gap-2 sm:gap-3 mb-10 flex-wrap",children:M.map((z,A)=>{const N=A===m,y={emerald:"border-emerald-500",violet:"border-violet-500",cyan:"border-cyan-500",amber:"border-amber-500"},w={emerald:"text-emerald-400",violet:"text-violet-400",cyan:"text-cyan-400",amber:"text-amber-400"};return a.jsxs("button",{onClick:()=>S(A),className:`relative flex items-center gap-2 px-5 py-2.5 rounded-full border text-sm font-semibold transition-all cursor-pointer ${N?`${y[z.color]} bg-white/[0.05] ${w[z.color]}`:"border-white/[0.08] text-slate-500 hover:border-white/[0.15] hover:text-slate-300"}`,children:[a.jsx("span",{className:"shrink-0",children:z.icon}),z.label,N&&a.jsx("div",{className:"absolute bottom-0 left-4 right-4 h-0.5 bg-white/[0.06] rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full rounded-full bg-current",style:{animation:"featureProgress 5s linear",animationPlayState:f?"paused":"running"}})})]},z.id)})}),a.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center gap-8 lg:gap-12",children:[a.jsxs("div",{className:"lg:flex-1 min-h-[280px]",children:[a.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white",children:k.tagline}),a.jsx("p",{className:"mt-3 text-base text-slate-400 leading-relaxed",children:k.desc}),k.id==="ath"&&a.jsxs("div",{className:"mt-6 space-y-5",children:[a.jsx(Et,{c:"emerald",t:"ATH tracking only for funds in your portfolios"}),a.jsx(Et,{c:"emerald",t:"Color-coded signals: watch, consider, buy, strong buy"}),a.jsx(Et,{c:"emerald",t:"Increase SIP or invest lumpsum when funds dip"}),a.jsx(Et,{c:"emerald",t:"Daily NAV updates from AMFI data"})]}),k.id==="rebalance"&&a.jsxs("div",{className:"mt-6 space-y-5",children:[a.jsx(Et,{c:"violet",t:"Adjust monthly SIP to rebalance gradually"}),a.jsx(Et,{c:"violet",t:"Lumpsum top-up for quick rebalance"}),a.jsx(Et,{c:"violet",t:"Buy/Sell amounts to match target"}),a.jsx(Et,{c:"violet",t:"Configurable threshold per portfolio"})]}),k.id==="goals"&&a.jsxs("div",{className:"mt-6 space-y-5",children:[a.jsx(Et,{c:"cyan",t:"Link multiple MF portfolios to each goal"}),a.jsx(Et,{c:"cyan",t:"Built-in SIP + lumpsum calculator with inflation"}),a.jsx(Et,{c:"cyan",t:"Auto-status: On Track, Needs Attention, Achieved"}),a.jsx(Et,{c:"cyan",t:"Withdrawal planning for retirement goals"})]}),k.id==="dashboard"&&a.jsxs("div",{className:"mt-6 space-y-5",children:[a.jsx(Et,{c:"amber",t:"One-click switch between family members"}),a.jsx(Et,{c:"amber",t:"Combined net worth across everyone"}),a.jsx(Et,{c:"amber",t:"MF, stocks, FD, gold, PPF, NPS, insurance"}),a.jsx(Et,{c:"amber",t:"Email reports sent to family automatically"})]})]}),a.jsx("div",{className:"lg:flex-1 min-w-0 min-h-[380px] flex flex-col justify-center",children:k.mock})]}),a.jsx("style",{children:`
          @keyframes featureProgress {
            from { width: 0% }
            to { width: 100% }
          }
        `})]}),a.jsxs("section",{className:"bg-[#0a0e1c] border-y border-white/[0.06] px-5 sm:px-8 lg:px-16 py-14 sm:py-20",children:[a.jsxs("div",{className:"text-center mb-10",children:[a.jsx("h2",{className:"text-2xl sm:text-3xl lg:text-4xl font-extrabold text-white mb-2",children:"Everything You Need"}),a.jsx("p",{className:"text-base text-slate-500",children:"One dashboard for your entire financial life"})]}),a.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-4",children:[a.jsx(Tl,{icon:a.jsx(rr,{size:20}),c:"rose",t:"Stock Portfolios",d:"Buy/sell tracking, average cost, P&L with live NSE prices"}),a.jsx(Tl,{icon:a.jsx(nN,{size:20}),c:"orange",t:"FD, Gold, PPF, NPS",d:"Track any investment type  all counted in net worth"}),a.jsx(Tl,{icon:a.jsx(or,{size:20}),c:"teal",t:"Insurance Tracker",d:"Life, health, term policies with premiums & renewal dates"}),a.jsx(Tl,{icon:a.jsx(ur,{size:20}),c:"red",t:"Liabilities",d:"Loans & EMIs. Net worth = total assets minus debts"}),a.jsx(Tl,{icon:a.jsx(mo,{size:20}),c:"yellow",t:"Smart Reminders",d:"SIP dates, renewals, EMI payments, maturity alerts"}),a.jsx(Tl,{icon:a.jsx(Zs,{size:20}),c:"pink",t:"Family Sharing",d:"Invite family with Google accounts  shared dashboard"}),a.jsx(Tl,{icon:a.jsx(dr,{size:20}),c:"blue",t:"Daily Auto-Refresh",d:"NAVs and stock prices update automatically every day"}),a.jsx(Tl,{icon:a.jsx(qu,{size:20}),c:"emerald",t:"Complete Privacy",d:"No servers, no database, no tracking  your Sheet only"})]})]}),a.jsxs("section",{className:"border-y border-white/[0.06]",children:[a.jsxs("div",{className:"bg-[#0b1022] px-5 sm:px-8 lg:px-16 py-10 sm:py-14 text-center",children:[a.jsxs("h2",{className:"text-2xl sm:text-3xl lg:text-4xl font-extrabold text-white inline-flex items-center gap-3",children:[a.jsx(qu,{size:28,className:"text-emerald-400 shrink-0"}),"Your Data Never Leaves Google"]}),a.jsxs("p",{className:"mt-3 text-base sm:text-lg text-slate-400 leading-relaxed",children:["No backend server. No database. No tracking. The web app is a static site. Your spreadsheet lives in ",a.jsx("strong",{className:"text-white",children:"your Google Drive"}),". We literally cannot access your financial data."]})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row",children:[a.jsx(Vu,{icon:a.jsx(or,{size:20}),t:"Manual Entry Only",d:"No bank linking, no credentials shared. You type your data  no one else has access.",bg:"bg-[#0d1326]",c:"emerald"}),a.jsx(Vu,{icon:a.jsx(qu,{size:20}),t:"Your Google Sheet",d:"A private spreadsheet in your Drive. Share only with family you choose.",bg:"bg-[#0f1530]",c:"violet"}),a.jsx(Vu,{icon:a.jsx(lo,{size:20}),t:"Always Free",d:"No premium tier, no hidden fees, no ads. Free today, free forever.",bg:"bg-[#111838]",c:"amber"})]})]}),a.jsxs("section",{className:"bg-gradient-to-t from-[#080d1a] to-[#0d1128] border-t border-white/[0.06] px-5 sm:px-8 lg:px-16 py-16 text-center",children:[a.jsx("h2",{className:"text-3xl sm:text-4xl font-extrabold text-white",children:"Start managing your family's wealth today"}),a.jsx("p",{className:"mt-3 text-base text-slate-500",children:"Always free. No credit card. No bank linking. Just your Google account."}),a.jsxs("button",{onClick:u,className:"mt-8 inline-flex items-center gap-2.5 px-8 py-3.5 bg-gradient-to-r from-violet-600 to-cyan-600 text-white font-bold text-base rounded-xl hover:from-violet-500 hover:to-cyan-500 shadow-lg shadow-violet-900/30 transition-all hover:scale-[1.02] cursor-pointer",children:[a.jsx(Kh,{s:20})," Sign in with Google  It's Free"]}),c&&a.jsx("p",{className:"mt-3 text-sm text-rose-400",children:c})]}),a.jsxs("footer",{className:"border-t border-white/[0.04] px-5 sm:px-8 lg:px-16 py-5 flex items-center justify-between",children:[a.jsx("img",{src:Xh,alt:"",className:"h-5 opacity-30"}),a.jsx("p",{className:"text-xs text-slate-600",children:"Your data. Your Google Drive. Your control."})]})]})}function Zh({icon:n,title:o,items:c,bad:u}){const x=u?"border-rose-500/15":"border-emerald-500/15",m=u?"bg-rose-500/[0.04]":"bg-emerald-500/[0.04]",h=u?"bg-rose-500/10 text-rose-400":"bg-emerald-500/10 text-emerald-400",f=u?"text-rose-400":"text-emerald-400";return a.jsxs("div",{className:`rounded-2xl border ${x} ${m} p-6`,children:[a.jsxs("h3",{className:`text-lg font-bold ${f} mb-4 flex items-center gap-2.5`,children:[a.jsx("span",{className:`flex items-center justify-center w-8 h-8 rounded-lg ${h} shrink-0`,children:n}),o]}),a.jsx("ul",{className:"space-y-3",children:c.map((v,d)=>a.jsxs("li",{className:"flex items-start gap-2.5",children:[u?a.jsx("span",{className:"text-rose-500/60 mt-0.5 shrink-0",children:""}):a.jsx(an,{size:16,className:"text-emerald-500 mt-0.5 shrink-0"}),a.jsx("span",{className:"text-sm text-slate-300 leading-relaxed",children:v})]},d))})]})}function c2(){return a.jsxs("div",{className:"rounded-xl border border-white/[0.06] bg-[#0d1326] overflow-hidden shadow-2xl shadow-black/40",children:[a.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-white/[0.04] bg-[#0a0f1f]",children:[a.jsx("span",{className:"text-sm text-slate-400 font-medium",children:"Dashboard"}),a.jsx("div",{className:"flex gap-1.5",children:["Everyone","Jagadeesh","Priya","Arjun"].map((n,o)=>a.jsx("span",{className:`text-xs px-2.5 py-1 rounded-full font-medium ${o===0?"bg-violet-500/20 text-violet-300":"text-slate-600"}`,children:n},n))})]}),a.jsxs("div",{className:"grid grid-cols-3 divide-x divide-white/[0.04]",children:[a.jsx(Pu,{l:"Net Worth",v:"45.2L",lc:"text-violet-400",vc:"text-white"}),a.jsx(Pu,{l:"Invested",v:"38.7L",lc:"text-slate-500",vc:"text-slate-300"}),a.jsx(Pu,{l:"P&L",v:"+6.5L",lc:"text-slate-500",vc:"text-emerald-400",extra:"+16.8%"})]}),a.jsxs("div",{className:"border-t border-white/[0.04]",children:[a.jsx(Gu,{n:"Axis Bluechip Fund",alloc:"30% / 25%",cur:"6.2L",pl:"+24.0%",ath:"5.2%",athC:"text-[#e67e00]",up:!0}),a.jsx(Gu,{n:"Parag Parikh Flexi Cap",alloc:"35% / 40%",cur:"4.8L",pl:"+37.1%",ath:"At ATH",athC:"text-emerald-500",up:!0}),a.jsx(Gu,{n:"SBI Small Cap Fund",alloc:"20% / 15%",cur:"1.8L",pl:"-10.0%",ath:"18.3%",athC:"text-[#d84315]",last:!0})]})]})}function u2(){const n=[{n:"HDFC Mid-Cap Opportunities",nav:"142.35",ath:"168.50",pct:"15.5%",color:"text-[#d84315]",signal:"Good Buy Signal",sigC:"text-[#d84315] bg-[#d84315]/15"},{n:"Axis Small Cap Fund",nav:"38.22",ath:"52.10",pct:"26.6%",color:"text-[#c62828]",signal:"Strong Buy",sigC:"text-[#c62828] bg-[#c62828]/15 font-bold"},{n:"Kotak Emerging Equity",nav:"89.10",ath:"92.40",pct:"3.6%",color:"text-[#b8860b]",signal:"Watch",sigC:"text-[#b8860b] bg-[#b8860b]/15"},{n:"Mirae Asset Large Cap",nav:"105.80",ath:"106.20",pct:"0.4%",color:"text-slate-500",signal:"Near ATH",sigC:"text-slate-500 bg-white/[0.04]"}];return a.jsxs("div",{className:"rounded-xl border border-white/[0.06] bg-[#0d1326] overflow-hidden shadow-2xl shadow-black/40",children:[a.jsxs("div",{className:"px-4 py-3 border-b border-white/[0.04] bg-[#0a0f1f] flex items-center justify-between",children:[a.jsx("span",{className:"text-sm font-semibold text-white",children:"Buy Opportunities"}),a.jsx("span",{className:"text-xs text-emerald-400 font-semibold bg-emerald-500/10 px-2.5 py-1 rounded-full",children:"2 signals"})]}),n.map((o,c)=>a.jsxs("div",{className:`flex items-center justify-between px-4 py-3 ${c<n.length-1?"border-b border-white/[0.03]":""}`,children:[a.jsxs("div",{className:"min-w-0 flex-1",children:[a.jsx("p",{className:"text-sm font-medium text-slate-300 truncate",children:o.n}),a.jsxs("p",{className:"text-xs text-slate-600 mt-0.5",children:["NAV ","",o.nav,"  ATH ","",o.ath]})]}),a.jsxs("div",{className:"text-right shrink-0 ml-3",children:[a.jsxs("p",{className:`text-base font-bold tabular-nums ${o.color}`,children:[a.jsx(K1,{size:13,className:"inline -mt-0.5"})," ",o.pct]}),a.jsx("span",{className:`text-[10px] font-semibold px-2 py-0.5 rounded ${o.sigC}`,children:o.signal})]})]},c))]})}function d2(){const[n,o]=g.useState(0),c=["SIP Adjust","Lumpsum","Buy / Sell"],u=["New SIP","Lumpsum Top-up","Action"],m=[[{n:"Axis Bluechip",val:"SIP 6,000",cur:"30%",tgt:"25%",action:"Stop SIP",actionC:"text-amber-400"},{n:"Parag Parikh Flexi",val:"SIP 7,000",cur:"35%",tgt:"40%",action:"12,000/mo",actionC:"text-emerald-400"},{n:"SBI Small Cap",val:"SIP 4,000",cur:"20%",tgt:"15%",action:"Stop SIP",actionC:"text-amber-400"},{n:"HDFC Large Cap",val:"SIP 3,000",cur:"15%",tgt:"20%",action:"8,000/mo",actionC:"text-emerald-400"}],[{n:"Axis Bluechip",val:"3,00,000",cur:"30%",tgt:"25%",action:"No action",actionC:"text-slate-600"},{n:"Parag Parikh Flexi",val:"3,50,000",cur:"35%",tgt:"40%",action:"Invest 55,000",actionC:"text-emerald-400"},{n:"SBI Small Cap",val:"2,00,000",cur:"20%",tgt:"15%",action:"No action",actionC:"text-slate-600"},{n:"HDFC Large Cap",val:"1,50,000",cur:"15%",tgt:"20%",action:"Invest 45,000",actionC:"text-emerald-400"}],[{n:"Axis Bluechip",val:"3,00,000",cur:"30%",tgt:"25%",action:"Sell 50,000",actionC:"text-rose-400"},{n:"Parag Parikh Flexi",val:"3,50,000",cur:"35%",tgt:"40%",action:"Buy 50,000",actionC:"text-emerald-400"},{n:"SBI Small Cap",val:"2,00,000",cur:"20%",tgt:"15%",action:"Sell 50,000",actionC:"text-rose-400"},{n:"HDFC Large Cap",val:"1,50,000",cur:"15%",tgt:"20%",action:"Buy 50,000",actionC:"text-emerald-400"}]][n];return a.jsxs("div",{className:"rounded-xl border border-white/[0.06] bg-[#0d1326] overflow-hidden shadow-2xl shadow-black/40",children:[a.jsxs("div",{className:"px-4 py-3 border-b border-white/[0.04] bg-[#0a0f1f] flex items-center justify-between",children:[a.jsx("span",{className:"text-sm font-semibold text-white",children:"Rebalance Portfolio"}),a.jsx("span",{className:"text-xs text-violet-400 font-semibold bg-violet-500/10 px-2.5 py-1 rounded-full",children:"4 off-target"})]}),a.jsx("div",{className:"flex border-b border-white/[0.04]",children:c.map((h,f)=>a.jsx("button",{onClick:()=>o(f),className:`flex-1 text-xs font-semibold py-2.5 text-center cursor-pointer transition-colors ${f===n?"text-violet-400 border-b-2 border-violet-400":"text-slate-600 hover:text-slate-400"}`,children:h},h))}),a.jsxs("div",{className:"flex items-center gap-3 px-4 py-2.5 border-b border-white/[0.04] bg-[#0a0f1f]/50 flex-wrap",children:[a.jsx("span",{className:"text-xs text-slate-500",children:"Portfolio Value"}),a.jsxs("span",{className:"text-sm text-white font-semibold tabular-nums",children:["","10,00,000"]}),n===0&&a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"text-xs text-slate-600",children:"|"}),a.jsx("span",{className:"text-xs text-slate-500",children:"Total SIP"}),a.jsxs("span",{className:"text-sm text-white font-semibold tabular-nums",children:["","20,000"]})]}),n===1&&a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"text-xs text-slate-600",children:"|"}),a.jsx("span",{className:"text-xs text-slate-500",children:"Lumpsum"}),a.jsx("input",{type:"text",readOnly:!0,value:"1,00,000",className:"bg-white/[0.04] border border-white/[0.08] rounded-md px-2 py-1 text-sm text-white font-semibold tabular-nums w-24 text-right cursor-default outline-none"})]})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"grid grid-cols-[1fr_50px_50px_1fr] gap-1 px-4 py-2.5 text-xs text-slate-600 font-semibold border-b border-white/[0.03]",children:[a.jsx("span",{children:"Fund / Value"}),a.jsx("span",{className:"text-center",children:"Current"}),a.jsx("span",{className:"text-center",children:"Target"}),a.jsx("span",{className:"text-right",children:u[n]})]}),m.map((h,f)=>a.jsxs("div",{className:`grid grid-cols-[1fr_50px_50px_1fr] gap-1 px-4 py-2.5 items-center ${f<m.length-1?"border-b border-white/[0.03]":""}`,children:[a.jsxs("div",{className:"min-w-0",children:[a.jsx("span",{className:"text-sm text-slate-300 truncate block",children:h.n}),a.jsxs("span",{className:"text-[10px] text-slate-600",children:["",h.val]})]}),a.jsx("span",{className:"text-sm text-center text-slate-400 tabular-nums",children:h.cur}),a.jsx("span",{className:"text-sm text-center text-slate-400 tabular-nums",children:h.tgt}),a.jsx("span",{className:`text-sm text-right font-semibold ${h.actionC}`,children:h.action})]},`${n}-${f}`))]})]})}function m2(){const n=[{n:"Retirement",tgt:"2Cr",cur:"28.5L",pct:14,sip:"45,000",yrs:"18 yrs",status:"On Track",sc:"text-blue-400 bg-blue-500/15",bc:"bg-blue-500"},{n:"Child Education",tgt:"50L",cur:"12.2L",pct:24,sip:"15,000",yrs:"12 yrs",status:"On Track",sc:"text-blue-400 bg-blue-500/15",bc:"bg-blue-500"},{n:"New Car",tgt:"15L",cur:"4.1L",pct:27,sip:"12,000",yrs:"3 yrs",status:"Needs Attention",sc:"text-amber-400 bg-amber-500/15",bc:"bg-amber-500"}];return a.jsxs("div",{className:"rounded-xl border border-white/[0.06] bg-[#0d1326] overflow-hidden shadow-2xl shadow-black/40",children:[a.jsxs("div",{className:"px-4 py-3 border-b border-white/[0.04] bg-[#0a0f1f] flex items-center justify-between",children:[a.jsx("span",{className:"text-sm font-semibold text-white",children:"Goals"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-xs text-slate-500",children:"2 On Track"}),a.jsx("span",{className:"text-xs text-amber-400",children:"1 Needs Attention"})]})]}),n.map((o,c)=>a.jsxs("div",{className:`px-4 py-3.5 ${c<n.length-1?"border-b border-white/[0.03]":""}`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sm font-semibold text-white",children:o.n}),a.jsx("span",{className:`text-[10px] font-semibold px-2 py-0.5 rounded-full ${o.sc}`,children:o.status})]}),a.jsxs("span",{className:"text-xs text-slate-500",children:["",o.sip,"/mo  ",o.yrs]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"flex-1 h-2.5 rounded-full bg-white/[0.06] overflow-hidden",children:a.jsx("div",{className:`h-full rounded-full ${o.bc}`,style:{width:`${o.pct}%`}})}),a.jsxs("span",{className:"text-sm font-semibold text-slate-300 tabular-nums w-10 text-right",children:[o.pct,"%"]})]}),a.jsxs("div",{className:"flex justify-between mt-1.5 text-xs text-slate-600",children:[a.jsxs("span",{children:["",o.cur," of ","",o.tgt]}),a.jsxs("span",{className:"flex items-center gap-1 text-slate-500",children:[a.jsx(so,{size:10})," 2 portfolios linked"]})]})]},c))]})}function Kh({s:n=16}){return a.jsxs("svg",{viewBox:"0 0 24 24",width:n,height:n,className:"shrink-0",children:[a.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92a5.06 5.06 0 01-2.2 3.32v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.1z",fill:"#4285F4"}),a.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),a.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z",fill:"#FBBC05"}),a.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]})}function Pu({l:n,v:o,lc:c,vc:u,extra:x}){return a.jsxs("div",{className:"py-3.5 text-center",children:[a.jsx("p",{className:`text-xs font-semibold uppercase tracking-wider ${c}`,children:n}),a.jsxs("p",{className:`text-lg font-bold tabular-nums mt-0.5 ${u}`,children:[o,x&&a.jsx("span",{className:"text-sm ml-1 text-emerald-400",children:x})]})]})}function Gu({n,alloc:o,cur:c,pl:u,ath:x,athC:m,up:h,last:f}){return a.jsxs("div",{className:`flex items-center justify-between px-4 py-3 ${f?"":"border-b border-white/[0.03]"}`,children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-slate-300",children:n}),a.jsxs("p",{className:"text-xs text-slate-600",children:["Alloc ",o,"  ",a.jsx("span",{className:m,children:x!=="At ATH"?`${x} below ATH`:x})]})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-sm font-semibold text-slate-200 tabular-nums",children:c}),a.jsx("p",{className:`text-sm font-semibold tabular-nums ${h?"text-emerald-400":"text-rose-400"}`,children:u})]})]})}function Et({c:n,t:o}){const c={violet:"text-violet-400",cyan:"text-cyan-400",amber:"text-amber-400",emerald:"text-emerald-400"};return a.jsxs("div",{className:"flex items-center gap-2.5",children:[a.jsx(an,{size:16,className:`${c[n]} shrink-0`}),a.jsx("span",{className:"text-sm text-slate-300",children:o})]})}function Ii({num:n,icon:o,color:c,title:u,desc:x}){const m={violet:["text-violet-400","bg-violet-500/10","border-violet-500/20","from-violet-500/20 to-violet-500/5"],emerald:["text-emerald-400","bg-emerald-500/10","border-emerald-500/20","from-emerald-500/20 to-emerald-500/5"],cyan:["text-cyan-400","bg-cyan-500/10","border-cyan-500/20","from-cyan-500/20 to-cyan-500/5"],amber:["text-amber-400","bg-amber-500/10","border-amber-500/20","from-amber-500/20 to-amber-500/5"]},[h,f,v,d]=m[c]||m.violet;return a.jsxs("div",{className:`relative rounded-2xl border ${v} bg-gradient-to-b ${d} p-6 text-center`,children:[a.jsx("span",{className:`inline-flex items-center justify-center w-12 h-12 rounded-xl ${f} ${h} mb-4`,children:o}),a.jsxs("span",{className:`absolute top-4 right-4 text-xs font-bold ${h} opacity-40`,children:["0",n]}),a.jsx("h3",{className:"text-base font-bold text-white mb-2",children:u}),a.jsx("p",{className:"text-sm text-slate-400 leading-relaxed",children:x})]})}function Vu({icon:n,t:o,d:c,bg:u,c:x}){const m={emerald:"text-emerald-400",violet:"text-violet-400",amber:"text-amber-400"};return a.jsxs("div",{className:`flex-1 ${u} px-5 sm:px-8 lg:px-10 py-6 sm:py-8 border-b sm:border-b-0 sm:border-r border-white/[0.04] last:border-0`,children:[a.jsxs("p",{className:"text-base font-bold text-white flex items-center gap-2",children:[a.jsx("span",{className:`${m[x]} shrink-0`,children:n}),o]}),a.jsx("p",{className:"text-sm text-slate-500 mt-1.5 leading-relaxed",children:c})]})}const Jh={violet:["text-violet-400","bg-violet-500/8","border-violet-500/10"],blue:["text-blue-400","bg-blue-500/8","border-blue-500/10"],emerald:["text-emerald-400","bg-emerald-500/8","border-emerald-500/10"],cyan:["text-cyan-400","bg-cyan-500/8","border-cyan-500/10"],rose:["text-rose-400","bg-rose-500/8","border-rose-500/10"],orange:["text-orange-400","bg-orange-500/8","border-orange-500/10"],teal:["text-teal-400","bg-teal-500/8","border-teal-500/10"],red:["text-red-400","bg-red-500/8","border-red-500/10"],yellow:["text-yellow-400","bg-yellow-500/8","border-yellow-500/10"],pink:["text-pink-400","bg-pink-500/8","border-pink-500/10"]};function Tl({icon:n,c:o,t:c,d:u}){const[x,m,h]=Jh[o]||Jh.violet;return a.jsxs("div",{className:`rounded-xl border ${h} ${m} p-5`,children:[a.jsxs("p",{className:"text-base font-bold text-white flex items-center gap-2",children:[a.jsx("span",{className:`${x} shrink-0`,children:n}),c]}),a.jsx("p",{className:"text-sm text-slate-500 mt-1.5 leading-relaxed",children:u})]})}function x2(){const{isAuthenticated:n,loading:o}=es();return o?a.jsx(ro,{}):n?a.jsx(eo,{to:"/investments/mutual-funds",replace:!0}):a.jsx(G0,{})}function f2(){const n=xa();return a.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-center",children:[a.jsx("div",{className:"w-16 h-16 bg-violet-500/15 rounded-2xl flex items-center justify-center mb-4",children:a.jsx(yj,{size:32,className:"text-violet-400"})}),a.jsx("h3",{className:"text-xl font-semibold text-[var(--text-primary)] mb-2",children:"Coming Soon"}),a.jsx("p",{className:"text-[var(--text-muted)] text-sm max-w-sm",children:"This page is under construction. Navigate using the sidebar to explore available sections."}),a.jsx("p",{className:"text-xs text-[var(--text-dim)] mt-3 font-mono",children:n.pathname})]})}const h2=["Savings Account","Current Account","Fixed Deposit (FD)","Recurring Deposit (RD)","NRE Account","NRO Account","Minor Account"].map(n=>({value:n,label:n}));function p2({initial:n,onSave:o,onDelete:c,onCancel:u}){const{activeMembers:x}=Re(),m=!!n,[h,f]=g.useState({accountName:n?.accountName||"",memberId:n?.memberId||"",bankName:n?.bankName||"",accountNumber:n?.accountNumber||"",ifscCode:n?.ifscCode||"",branchName:n?.branchName||"",accountType:n?.accountType||"",status:n?.status||"Active"}),[v,d]=g.useState({}),[j,S]=g.useState(!1);function M(N,y){f(w=>({...w,[N]:y})),d(w=>({...w,[N]:void 0}))}function k(){const N={};return h.accountName.trim()||(N.accountName="Required"),h.memberId||(N.memberId="Required"),h.bankName.trim()||(N.bankName="Required"),String(h.accountNumber||"").trim()||(N.accountNumber="Required"),h.ifscCode.trim()||(N.ifscCode="Required"),h.branchName.trim()||(N.branchName="Required"),h.accountType||(N.accountType="Required"),d(N),Object.keys(N).length===0}async function z(){if(k()){S(!0);try{await o({...h,ifscCode:h.ifscCode.toUpperCase()})}finally{S(!1)}}}const A=x.map(N=>({value:N.memberId,label:`${N.memberName} (${N.relationship})`}));return a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsx(X,{label:"Account Name",required:!0,error:v.accountName,children:a.jsx(ce,{value:h.accountName,onChange:N=>M("accountName",N),placeholder:"e.g., HDFC Savings"})}),a.jsx(X,{label:"Family Member",required:!0,error:v.memberId,children:a.jsx(Me,{value:h.memberId,onChange:N=>M("memberId",N),options:A,placeholder:"Select member..."})})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsx(X,{label:"Bank Name",required:!0,error:v.bankName,children:a.jsx(ce,{value:h.bankName,onChange:N=>M("bankName",N),placeholder:"e.g., HDFC Bank"})}),a.jsx(X,{label:"Account Type",required:!0,error:v.accountType,children:a.jsx(Me,{value:h.accountType,onChange:N=>M("accountType",N),options:h2,placeholder:"Select type..."})})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsx(X,{label:"Account Number",required:!0,error:v.accountNumber,children:a.jsx(ce,{sensitive:!0,value:h.accountNumber,onChange:N=>M("accountNumber",N),placeholder:"e.g., 1234567890"})}),a.jsx(X,{label:"IFSC Code",required:!0,error:v.ifscCode,children:a.jsx(ce,{value:h.ifscCode,onChange:N=>M("ifscCode",N.toUpperCase()),placeholder:"e.g., HDFC0001234",maxLength:11})})]}),a.jsx(X,{label:"Branch Name",required:!0,error:v.branchName,children:a.jsx(ce,{value:h.branchName,onChange:N=>M("branchName",N),placeholder:"e.g., Hyderabad - Kondapur"})}),m&&a.jsx(X,{label:"Status",children:a.jsx(Me,{value:h.status,onChange:N=>M("status",N),options:[{value:"Active",label:"Active"},{value:"Inactive",label:"Inactive"}]})}),a.jsxs("div",{className:"flex items-center justify-between",children:[m&&c?a.jsx(Oa,{onClick:c}):a.jsx("div",{}),a.jsx(Dt,{onCancel:u,onSubmit:z,submitLabel:m?"Update":"Add Account",loading:j})]})]})}function ll({title:n="Loading"}){return a.jsxs("div",{className:"flex flex-col items-center justify-center py-32 gap-3",children:[a.jsx("span",{className:"w-7 h-7 border-[2.5px] border-violet-400/30 border-t-violet-400 rounded-full animate-spin"}),a.jsxs("span",{className:"text-sm font-semibold text-[var(--text-primary)]",children:[n,"..."]})]})}const Wh={"Savings Account":"bg-blue-500/15 text-[var(--accent-blue)]",Savings:"bg-blue-500/15 text-[var(--accent-blue)]",Salary:"bg-emerald-500/15 text-emerald-400","Current Account":"bg-violet-500/15 text-[var(--accent-violet)]","Fixed Deposit":"bg-amber-500/15 text-[var(--accent-amber)]","Fixed Deposit (FD)":"bg-amber-500/15 text-[var(--accent-amber)]"};function ep(){const{selectedMember:n,member:o}=At(),{banks:c,addBankAccount:u,updateBankAccount:x,deleteBankAccount:m}=Re(),{showToast:h,showBlockUI:f,hideBlockUI:v}=za(),{mv:d}=Ra(),[j,S]=g.useState(null);if(c===null)return a.jsx(ll,{title:"Loading bank accounts",cards:3});const M=g.useMemo(()=>{const y=c.filter(w=>w.status!=="Inactive");return n==="all"?y:y.filter(w=>w.memberId===n)},[c,n]),k=g.useMemo(()=>new Set(M.map(y=>y.bankName)).size,[M]),z=g.useMemo(()=>M.filter(y=>y.accountType==="Savings"||y.accountType==="Savings Account"||y.accountType==="Salary").length,[M]);async function A(y){f("Saving...");try{j?.edit?await x(j.edit.accountId,y):await u(y),h(j?.edit?"Bank account updated":"Bank account added"),S(null)}catch(w){h(w.message||"Failed to save bank account","error")}finally{v()}}async function N(){if(j?.edit&&confirm("Deactivate this bank account?")){f("Deactivating...");try{await m(j.edit.accountId),h("Bank account deactivated"),S(null)}catch(y){h(y.message||"Failed to deactivate bank account","error")}finally{v()}}}return a.jsxs("div",{className:"space-y-4",children:[M.length===0?a.jsxs("div",{className:"bg-[var(--bg-card)] rounded-xl border border-[var(--border)] py-12 flex flex-col items-center gap-3",children:[a.jsx(R0,{size:32,className:"text-[var(--text-dim)]"}),a.jsxs("p",{className:"text-sm text-[var(--text-muted)]",children:["No bank accounts",o?` for ${o.memberName}`:""]}),a.jsx("button",{onClick:()=>S("add"),className:"text-xs font-semibold text-violet-400 hover:text-violet-300",children:"Add your first bank account"})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[a.jsx(Yu,{label:"Total Accounts",value:M.length}),a.jsx(Yu,{label:"Banks",value:k}),a.jsx(Yu,{label:"Savings / Salary",value:z})]}),a.jsx("div",{className:"flex items-center justify-end px-1",children:a.jsxs("button",{onClick:()=>S("add"),className:"flex items-center gap-1.5 px-3 py-2 text-xs font-semibold text-violet-400 hover:text-violet-300 bg-[var(--bg-card)] border border-[var(--border)] rounded-lg transition-colors",children:[a.jsx(aa,{size:14})," Add Account"]})}),a.jsxs("div",{className:"bg-[var(--bg-card)] rounded-xl border border-[var(--border)] overflow-hidden",children:[a.jsx("div",{className:"hidden sm:block overflow-x-auto",children:a.jsxs("table",{className:"w-full text-sm min-w-[580px]",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b border-[var(--border-light)] bg-[var(--bg-inset)]",children:[a.jsx("th",{className:"text-left py-2.5 px-4 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Account"}),a.jsx("th",{className:"text-left py-2.5 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Bank"}),!o&&a.jsx("th",{className:"text-left py-2.5 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Member"}),a.jsx("th",{className:"text-left py-2.5 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Type"}),a.jsx("th",{className:"text-left py-2.5 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Account No."}),a.jsx("th",{className:"text-left py-2.5 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Branch"}),a.jsx("th",{className:"w-8 py-2.5 px-2"})]})}),a.jsx("tbody",{children:M.map(y=>a.jsxs("tr",{className:"border-b border-[var(--border-light)] last:border-0 hover:bg-[var(--bg-hover)] transition-colors group",children:[a.jsx("td",{className:"py-2.5 px-4",children:a.jsx("p",{className:"text-sm font-medium text-[var(--text-primary)]",children:y.accountName})}),a.jsx("td",{className:"py-2.5 px-3 text-xs text-[var(--text-secondary)]",children:y.bankName}),!o&&a.jsx("td",{className:"py-2.5 px-3 text-xs text-[var(--text-secondary)]",children:y.memberName}),a.jsx("td",{className:"py-2.5 px-3",children:a.jsx("span",{className:`text-xs font-semibold px-2 py-0.5 rounded-full ${Wh[y.accountType]||"bg-slate-500/15 text-[var(--text-muted)]"}`,children:y.accountType})}),a.jsx("td",{className:"py-2.5 px-3 text-xs text-[var(--text-muted)] tabular-nums",children:d(y.accountNumber,"account")}),a.jsx("td",{className:"py-2.5 px-3 text-xs text-[var(--text-dim)]",children:y.branchName}),a.jsx("td",{className:"py-2.5 px-2",children:a.jsx("button",{onClick:()=>S({edit:y}),className:"opacity-0 group-hover:opacity-100 p-1 rounded text-[var(--text-dim)] hover:text-[var(--text-primary)] transition-all",children:a.jsx(Da,{size:12})})})]},y.accountId))})]})}),a.jsx("div",{className:"sm:hidden divide-y divide-[var(--border-light)]",children:M.map(y=>a.jsxs("div",{onClick:()=>S({edit:y}),className:"px-4 py-3.5 hover:bg-[var(--bg-hover)] transition-colors cursor-pointer",children:[a.jsxs("div",{className:"flex items-center justify-between mb-1",children:[a.jsx("p",{className:"text-sm font-medium text-[var(--text-primary)]",children:y.accountName}),a.jsx("span",{className:`text-xs font-semibold px-2 py-0.5 rounded-full ${Wh[y.accountType]||"bg-slate-500/15 text-[var(--text-muted)]"}`,children:y.accountType})]}),a.jsxs("p",{className:"text-xs text-[var(--text-muted)]",children:[y.bankName,o?"":`  ${y.memberName}`]}),a.jsxs("div",{className:"flex items-center justify-between mt-1",children:[a.jsx("p",{className:"text-xs text-[var(--text-dim)] tabular-nums",children:d(y.accountNumber,"account")}),a.jsx("p",{className:"text-xs text-[var(--text-dim)]",children:y.branchName})]})]},y.accountId))})]})]}),a.jsx(ft,{open:!!j,onClose:()=>S(null),title:j?.edit?"Edit Bank Account":"Add Bank Account",children:a.jsx(p2,{initial:j?.edit||void 0,onSave:A,onDelete:j?.edit?N:void 0,onCancel:()=>S(null)})})]})}function Yu({label:n,value:o}){return a.jsxs("div",{className:"bg-[var(--bg-card)] rounded-xl border border-[var(--border)] px-4 py-3",children:[a.jsx("p",{className:"text-xs text-[var(--text-dim)] uppercase tracking-wider mb-1",children:n}),a.jsx("p",{className:"text-sm font-bold text-[var(--text-primary)] tabular-nums",children:o})]})}const b2=["Demat + Trading","Mutual Fund","Trading","Direct AMC","Broker"].map(n=>({value:n,label:n}));function v2({initial:n,onSave:o,onDelete:c,onCancel:u}){const{activeMembers:x,activeBanks:m}=Re(),h=!!n,[f,v]=g.useState({accountName:n?.accountName||"",memberId:n?.memberId||"",bankAccountId:n?.bankAccountId||"",accountType:n?.accountType||"",platformBroker:n?.platformBroker||"",accountClientId:n?.accountClientId||"",dematDpId:n?.dematDpId||"",registeredEmail:n?.registeredEmail||"",registeredPhone:n?.registeredPhone||"",status:n?.status||"Active"}),[d,j]=g.useState({}),[S,M]=g.useState(!1);function k(p,I){v(J=>({...J,[p]:I})),j(J=>({...J,[p]:void 0}))}function z(p){v(I=>({...I,memberId:p,bankAccountId:""})),j(I=>({...I,memberId:void 0}))}function A(){const p={};return f.accountName.trim()||(p.accountName="Required"),f.memberId||(p.memberId="Required"),f.bankAccountId||(p.bankAccountId="Required"),f.accountType||(p.accountType="Required"),f.platformBroker.trim()||(p.platformBroker="Required"),f.registeredEmail.trim()||(p.registeredEmail="Required"),f.registeredPhone.trim()||(p.registeredPhone="Required"),j(p),Object.keys(p).length===0}async function N(){if(A()){M(!0);try{await o(f)}finally{M(!1)}}}const y=x.map(p=>({value:p.memberId,label:`${p.memberName} (${p.relationship})`})),w=g.useMemo(()=>f.memberId?m.filter(p=>p.memberId===f.memberId).map(p=>({value:p.accountId,label:`${p.accountName} - ${p.bankName}`})):[],[m,f.memberId]);return a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsx(X,{label:"Account Name",required:!0,error:d.accountName,children:a.jsx(ce,{value:f.accountName,onChange:p=>k("accountName",p),placeholder:"e.g., Zerodha Demat"})}),a.jsx(X,{label:"Family Member",required:!0,error:d.memberId,children:a.jsx(Me,{value:f.memberId,onChange:z,options:y,placeholder:"Select member..."})})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsx(X,{label:"Linked Bank Account",required:!0,error:d.bankAccountId,children:a.jsx(Me,{value:f.bankAccountId,onChange:p=>k("bankAccountId",p),options:w,placeholder:f.memberId?w.length?"Select bank account...":"No bank accounts for this member":"Select member first..."})}),a.jsx(X,{label:"Account Type",required:!0,error:d.accountType,children:a.jsx(Me,{value:f.accountType,onChange:p=>k("accountType",p),options:b2,placeholder:"Select type..."})})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsx(X,{label:"Platform / Broker",required:!0,error:d.platformBroker,children:a.jsx(ce,{value:f.platformBroker,onChange:p=>k("platformBroker",p),placeholder:"e.g., Zerodha, Groww"})}),a.jsx(X,{label:"Account / Client ID",error:d.accountClientId,children:a.jsx(ce,{sensitive:!0,value:f.accountClientId,onChange:p=>k("accountClientId",p),placeholder:"e.g., ZR1234 (optional)"})})]}),a.jsx(X,{label:"Demat DP ID",error:d.dematDpId,children:a.jsx(ce,{sensitive:!0,value:f.dematDpId,onChange:p=>k("dematDpId",p),placeholder:"16-digit DP ID (optional)",maxLength:16})}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsx(X,{label:"Registered Email",required:!0,error:d.registeredEmail,children:a.jsx(ce,{sensitive:!0,type:"email",value:f.registeredEmail,onChange:p=>k("registeredEmail",p),placeholder:"email@example.com"})}),a.jsx(X,{label:"Registered Phone",required:!0,error:d.registeredPhone,children:a.jsx(ce,{sensitive:!0,value:f.registeredPhone,onChange:p=>k("registeredPhone",p),placeholder:"9876543210"})})]}),h&&a.jsx(X,{label:"Status",children:a.jsx(Me,{value:f.status,onChange:p=>k("status",p),options:[{value:"Active",label:"Active"},{value:"Inactive",label:"Inactive"}]})}),a.jsxs("div",{className:"flex items-center justify-between",children:[h&&c?a.jsx(Oa,{onClick:c}):a.jsx("div",{}),a.jsx(Dt,{onCancel:u,onSubmit:N,submitLabel:h?"Update":"Add Account",loading:S})]})]})}const tp={"Demat + Trading":"bg-violet-500/15 text-[var(--accent-violet)]","Mutual Fund":"bg-blue-500/15 text-[var(--accent-blue)]",Trading:"bg-orange-500/15 text-[var(--accent-orange)]",Demat:"bg-amber-500/15 text-[var(--accent-amber)]","Direct AMC":"bg-emerald-500/15 text-emerald-400",Broker:"bg-rose-500/15 text-[var(--accent-rose)]"};function g2(){const{selectedMember:n,member:o}=At(),{investmentAccounts:c,addInvestmentAccount:u,updateInvestmentAccount:x,deleteInvestmentAccount:m}=Re(),{showToast:h,showBlockUI:f,hideBlockUI:v}=za(),{mv:d}=Ra(),[j,S]=g.useState(null);if(c===null)return a.jsx(ll,{title:"Loading investment accounts",cards:4});const M=g.useMemo(()=>{const w=c.filter(p=>p.status!=="Inactive");return n==="all"?w:w.filter(p=>p.memberId===n)},[c,n]),k=g.useMemo(()=>new Set(M.map(w=>w.platformBroker)).size,[M]),z=M.filter(w=>w.accountType==="Demat + Trading"||w.accountType==="Demat"||w.accountType==="Trading").length,A=M.filter(w=>w.accountType==="Mutual Fund"||w.accountType==="Direct AMC").length;async function N(w){f("Saving...");try{j?.edit?await x(j.edit.accountId,w):await u(w),h(j?.edit?"Investment account updated":"Investment account added"),S(null)}catch(p){h(p.message||"Failed to save investment account","error")}finally{v()}}async function y(){if(j?.edit&&confirm("Deactivate this investment account?")){f("Deactivating...");try{await m(j.edit.accountId),h("Investment account deactivated"),S(null)}catch(w){h(w.message||"Failed to deactivate investment account","error")}finally{v()}}}return a.jsxs("div",{className:"space-y-4",children:[M.length===0?a.jsxs("div",{className:"bg-[var(--bg-card)] rounded-xl border border-[var(--border)] py-12 flex flex-col items-center gap-3",children:[a.jsx(M0,{size:32,className:"text-[var(--text-dim)]"}),a.jsxs("p",{className:"text-sm text-[var(--text-muted)]",children:["No investment accounts",o?` for ${o.memberName}`:""]}),a.jsx("button",{onClick:()=>S("add"),className:"text-xs font-semibold text-violet-400 hover:text-violet-300",children:"Add your first investment account"})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:[a.jsx(Bi,{label:"Total Accounts",value:M.length}),a.jsx(Bi,{label:"Platforms",value:k}),a.jsx(Bi,{label:"Demat / Trading",value:z}),a.jsx(Bi,{label:"Mutual Fund",value:A})]}),a.jsx("div",{className:"flex items-center justify-end px-1",children:a.jsxs("button",{onClick:()=>S("add"),className:"flex items-center gap-1.5 px-3 py-2 text-xs font-semibold text-violet-400 hover:text-violet-300 bg-[var(--bg-card)] border border-[var(--border)] rounded-lg transition-colors",children:[a.jsx(aa,{size:14})," Add Account"]})}),a.jsxs("div",{className:"bg-[var(--bg-card)] rounded-xl border border-[var(--border)] overflow-hidden",children:[a.jsx("div",{className:"hidden sm:block overflow-x-auto",children:a.jsxs("table",{className:"w-full text-sm min-w-[620px]",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b border-[var(--border-light)] bg-[var(--bg-inset)]",children:[a.jsx("th",{className:"text-left py-2.5 px-4 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Account"}),a.jsx("th",{className:"text-left py-2.5 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Platform"}),!o&&a.jsx("th",{className:"text-left py-2.5 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Member"}),a.jsx("th",{className:"text-left py-2.5 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Type"}),a.jsx("th",{className:"text-left py-2.5 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Client ID"}),a.jsx("th",{className:"text-left py-2.5 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Linked Bank"}),a.jsx("th",{className:"w-8 py-2.5 px-2"})]})}),a.jsx("tbody",{children:M.map(w=>a.jsxs("tr",{className:"border-b border-[var(--border-light)] last:border-0 hover:bg-[var(--bg-hover)] transition-colors group",children:[a.jsx("td",{className:"py-2.5 px-4",children:a.jsx("p",{className:"text-sm font-medium text-[var(--text-primary)]",children:w.accountName})}),a.jsx("td",{className:"py-2.5 px-3 text-xs text-[var(--text-secondary)]",children:w.platformBroker}),!o&&a.jsx("td",{className:"py-2.5 px-3 text-xs text-[var(--text-secondary)]",children:w.memberName}),a.jsx("td",{className:"py-2.5 px-3",children:a.jsx("span",{className:`text-xs font-semibold px-2 py-0.5 rounded-full ${tp[w.accountType]||"bg-slate-500/15 text-[var(--text-muted)]"}`,children:w.accountType})}),a.jsx("td",{className:"py-2.5 px-3 text-xs text-[var(--text-muted)] tabular-nums",children:d(w.accountClientId,"clientId")}),a.jsx("td",{className:"py-2.5 px-3 text-xs text-[var(--text-dim)]",children:w.bankAccountName}),a.jsx("td",{className:"py-2.5 px-2",children:a.jsx("button",{onClick:()=>S({edit:w}),className:"opacity-0 group-hover:opacity-100 p-1 rounded text-[var(--text-dim)] hover:text-[var(--text-primary)] transition-all",children:a.jsx(Da,{size:12})})})]},w.accountId))})]})}),a.jsx("div",{className:"sm:hidden divide-y divide-[var(--border-light)]",children:M.map(w=>a.jsxs("div",{onClick:()=>S({edit:w}),className:"px-4 py-3.5 hover:bg-[var(--bg-hover)] transition-colors cursor-pointer",children:[a.jsxs("div",{className:"flex items-center justify-between mb-1",children:[a.jsx("p",{className:"text-sm font-medium text-[var(--text-primary)]",children:w.accountName}),a.jsx("span",{className:`text-xs font-semibold px-2 py-0.5 rounded-full ${tp[w.accountType]||"bg-slate-500/15 text-[var(--text-muted)]"}`,children:w.accountType})]}),a.jsxs("p",{className:"text-xs text-[var(--text-muted)]",children:[w.platformBroker,o?"":`  ${w.memberName}`]}),a.jsxs("div",{className:"flex items-center justify-between mt-1",children:[a.jsxs("p",{className:"text-xs text-[var(--text-dim)]",children:["Client: ",d(w.accountClientId,"clientId")]}),a.jsx("p",{className:"text-xs text-[var(--text-dim)]",children:w.bankAccountName})]})]},w.accountId))})]})]}),a.jsx(ft,{open:!!j,onClose:()=>S(null),title:j?.edit?"Edit Investment Account":"Add Investment Account",wide:!0,children:a.jsx(v2,{initial:j?.edit||void 0,onSave:N,onDelete:j?.edit?y:void 0,onCancel:()=>S(null)})})]})}function Bi({label:n,value:o}){return a.jsxs("div",{className:"bg-[var(--bg-card)] rounded-xl border border-[var(--border)] px-4 py-3",children:[a.jsx("p",{className:"text-xs text-[var(--text-dim)] uppercase tracking-wider mb-1",children:n}),a.jsx("p",{className:"text-sm font-bold text-[var(--text-primary)] tabular-nums",children:o})]})}const y2=["Term Life","Health","Motor","Home Insurance","Travel","Personal Accident","Life Insurance","Others"].map(n=>({value:n,label:n})),j2=[{value:"Active",label:"Active"},{value:"Expired",label:"Expired"},{value:"Surrendered",label:"Surrendered"},{value:"Lapsed",label:"Lapsed"},{value:"Inactive",label:"Inactive"}];function N2({initial:n,onSave:o,onDelete:c,onCancel:u}){const{activeMembers:x}=Re(),m=!!n,[h,f]=g.useState({policyType:n?.policyType||"",company:n?.company||"",policyNumber:n?.policyNumber||"",policyName:n?.policyName||"",insuredMember:n?.insuredMember||"",memberId:n?.memberId||"",sumAssured:n?.sumAssured||"",nominee:n?.nominee||"",premium:n?.premium||"",premiumFrequency:n?.premiumFrequency||"Annual",status:n?.status||"Active",notes:n?.notes||""}),[v,d]=g.useState({}),[j,S]=g.useState(!1);function M(y,w){f(p=>({...p,[y]:w})),d(p=>({...p,[y]:void 0}))}function k(y){const w=x.find(p=>p.memberId===y);f(p=>({...p,memberId:y,insuredMember:w?.memberName||""})),d(p=>({...p,memberId:void 0}))}function z(){const y={};return h.policyType||(y.policyType="Required"),h.company.trim()||(y.company="Required"),h.policyNumber.trim()||(y.policyNumber="Required"),h.policyName.trim()||(y.policyName="Required"),h.memberId||(y.memberId="Required"),(!h.sumAssured||Number(h.sumAssured)<=0)&&(y.sumAssured="Must be > 0"),d(y),Object.keys(y).length===0}async function A(){if(z()){S(!0);try{await o({...h,sumAssured:Number(h.sumAssured),premium:Number(h.premium)||0})}finally{S(!1)}}}const N=x.map(y=>({value:y.memberId,label:`${y.memberName} (${y.relationship})`}));return a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsx(X,{label:"Policy Type",required:!0,error:v.policyType,children:a.jsx(Me,{value:h.policyType,onChange:y=>M("policyType",y),options:y2,placeholder:"Select type..."})}),a.jsx(X,{label:"Insurance Company",required:!0,error:v.company,children:a.jsx(ce,{value:h.company,onChange:y=>M("company",y),placeholder:"e.g., HDFC Life"})})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsx(X,{label:"Policy Number",required:!0,error:v.policyNumber,children:a.jsx(ce,{sensitive:!0,value:h.policyNumber,onChange:y=>M("policyNumber",y),placeholder:"e.g., HL-2024-78901"})}),a.jsx(X,{label:"Policy Name",required:!0,error:v.policyName,children:a.jsx(ce,{value:h.policyName,onChange:y=>M("policyName",y),placeholder:"e.g., Click 2 Protect Life"})})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsx(X,{label:"Insured Member",required:!0,error:v.memberId,children:a.jsx(Me,{value:h.memberId,onChange:k,options:N,placeholder:"Select member..."})}),a.jsx(X,{label:"Nominee",children:a.jsx(Me,{value:h.nominee,onChange:y=>M("nominee",y),options:N.map(y=>({...y,label:y.label.split(" (")[0]})),placeholder:"Select nominee (optional)..."})})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[a.jsx(X,{label:"Sum Assured ()",required:!0,error:v.sumAssured,children:a.jsx(ce,{type:"number",value:h.sumAssured,onChange:y=>M("sumAssured",y),placeholder:"e.g., 10000000"})}),a.jsx(X,{label:"Premium ()",children:a.jsx(ce,{type:"number",value:h.premium,onChange:y=>M("premium",y),placeholder:"e.g., 12500"})}),a.jsx(X,{label:"Premium Frequency",children:a.jsx(Me,{value:h.premiumFrequency,onChange:y=>M("premiumFrequency",y),options:[{value:"Annual",label:"Annual"},{value:"Monthly",label:"Monthly"},{value:"Quarterly",label:"Quarterly"}]})})]}),m&&a.jsx(X,{label:"Status",children:a.jsx(Me,{value:h.status,onChange:y=>M("status",y),options:j2})}),a.jsx(X,{label:"Notes",children:a.jsx(Ks,{value:h.notes,onChange:y=>M("notes",y),placeholder:"Additional information..."})}),a.jsxs("div",{className:"flex items-center justify-between",children:[m&&c?a.jsx(Oa,{onClick:c}):a.jsx("div",{}),a.jsx(Dt,{onCancel:u,onSubmit:A,submitLabel:m?"Update":"Add Policy",loading:j})]})]})}const ap={"Term Life":"bg-rose-500/15 text-[var(--accent-rose)]",Health:"bg-emerald-500/15 text-emerald-400",Motor:"bg-blue-500/15 text-[var(--accent-blue)]","Home Insurance":"bg-amber-500/15 text-[var(--accent-amber)]",Travel:"bg-violet-500/15 text-[var(--accent-violet)]","Life Insurance":"bg-rose-500/15 text-[var(--accent-rose)]","Personal Accident":"bg-orange-500/15 text-[var(--accent-orange)]"};function S2(){const{selectedMember:n,member:o}=At(),{insurancePolicies:c,addInsurance:u,updateInsurance:x,deleteInsurance:m}=Re(),{showToast:h,showBlockUI:f,hideBlockUI:v}=za(),{mv:d}=Ra(),[j,S]=g.useState(null);if(c===null)return a.jsx(ll,{title:"Loading insurance",cards:5});const M=g.useMemo(()=>{const p=c.filter(I=>I.status!=="Inactive");return n==="all"?p:p.filter(I=>I.memberId===n)},[c,n]),k=M.reduce((p,I)=>p+(I.sumAssured||0),0),z=M.reduce((p,I)=>p+(I.premium||0),0),A=M.filter(p=>p.policyType==="Term Life"||p.policyType==="Life Insurance").reduce((p,I)=>p+(I.sumAssured||0),0),N=M.filter(p=>p.policyType==="Health").reduce((p,I)=>p+(I.sumAssured||0),0);async function y(p){f("Saving...");try{j?.edit?await x(j.edit.policyId,p):await u(p),h(j?.edit?"Insurance policy updated":"Insurance policy added"),S(null)}catch(I){h(I.message||"Failed to save insurance policy","error")}finally{v()}}async function w(){if(j?.edit&&confirm("Deactivate this insurance policy?")){f("Deactivating...");try{await m(j.edit.policyId),h("Insurance policy deactivated"),S(null)}catch(p){h(p.message||"Failed to deactivate insurance policy","error")}finally{v()}}}return a.jsxs("div",{className:"space-y-4",children:[M.length===0?a.jsxs("div",{className:"bg-[var(--bg-card)] rounded-xl border border-[var(--border)] py-12 flex flex-col items-center gap-3",children:[a.jsx(or,{size:32,className:"text-[var(--text-dim)]"}),a.jsxs("p",{className:"text-sm text-[var(--text-muted)]",children:["No insurance policies",o?` for ${o.memberName}`:""]}),a.jsx("button",{onClick:()=>S("add"),className:"text-xs font-semibold text-violet-400 hover:text-violet-300",children:"Add your first policy"})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-5 gap-3",children:[a.jsx(tr,{label:"Policies",value:M.length}),a.jsx(tr,{label:"Total Cover",value:G(k),bold:!0}),a.jsx(tr,{label:"Life Cover",value:G(A)}),a.jsx(tr,{label:"Health Cover",value:G(N)}),a.jsx(tr,{label:"Annual Premium",value:G(z)})]}),a.jsxs("div",{className:"bg-[var(--bg-card)] rounded-xl border border-[var(--border)] p-4",children:[a.jsx("p",{className:"text-xs font-bold text-[var(--text-secondary)] uppercase tracking-wider mb-3",children:"Coverage Adequacy"}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[a.jsx(lp,{label:"Life Insurance",current:A,recommended:"10-15x annual income",tip:"Term life cover should be 10-15x your annual income to protect dependents",icon:"heart"}),a.jsx(lp,{label:"Health Insurance",current:N,recommended:"50L - 1Cr family floater",tip:"Considering medical inflation, a 50L-1Cr family floater is recommended",icon:"shield"})]})]}),a.jsx("div",{className:"flex items-center justify-end px-1",children:a.jsxs("button",{onClick:()=>S("add"),className:"flex items-center gap-1.5 px-3 py-2 text-xs font-semibold text-violet-400 hover:text-violet-300 bg-[var(--bg-card)] border border-[var(--border)] rounded-lg transition-colors",children:[a.jsx(aa,{size:14})," Add Policy"]})}),a.jsxs("div",{className:"bg-[var(--bg-card)] rounded-xl border border-[var(--border)] overflow-hidden",children:[a.jsx("div",{className:"hidden sm:block overflow-x-auto",children:a.jsxs("table",{className:"w-full text-sm min-w-[700px]",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b border-[var(--border-light)] bg-[var(--bg-inset)]",children:[a.jsx("th",{className:"text-left py-2.5 px-4 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Policy"}),a.jsx("th",{className:"text-left py-2.5 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Type"}),a.jsx("th",{className:"text-left py-2.5 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Company"}),!o&&a.jsx("th",{className:"text-left py-2.5 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Insured"}),a.jsx("th",{className:"text-right py-2.5 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Sum Assured"}),a.jsx("th",{className:"text-right py-2.5 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Premium"}),a.jsx("th",{className:"w-8 py-2.5 px-2"})]})}),a.jsx("tbody",{children:M.map(p=>a.jsxs("tr",{className:"border-b border-[var(--border-light)] last:border-0 hover:bg-[var(--bg-hover)] transition-colors group",children:[a.jsxs("td",{className:"py-2.5 px-4",children:[a.jsx("p",{className:"text-sm font-medium text-[var(--text-primary)]",children:p.policyName}),a.jsx("p",{className:"text-xs text-[var(--text-dim)]",children:d(p.policyNumber,"policy")})]}),a.jsx("td",{className:"py-2.5 px-3",children:a.jsx("span",{className:`text-xs font-semibold px-2 py-0.5 rounded-full ${ap[p.policyType]||"bg-slate-500/15 text-[var(--text-muted)]"}`,children:p.policyType})}),a.jsx("td",{className:"py-2.5 px-3 text-xs text-[var(--text-secondary)]",children:p.company}),!o&&a.jsx("td",{className:"py-2.5 px-3 text-xs text-[var(--text-secondary)]",children:p.insuredMember}),a.jsx("td",{className:"py-2.5 px-3 text-right text-xs font-semibold text-[var(--text-primary)] tabular-nums",children:G(p.sumAssured)}),a.jsxs("td",{className:"py-2.5 px-3 text-right text-xs text-[var(--text-muted)] tabular-nums",children:[G(p.premium),"/",p.premiumFrequency==="Annual"?"yr":"mo"]}),a.jsx("td",{className:"py-2.5 px-2",children:a.jsx("button",{onClick:()=>S({edit:p}),className:"opacity-0 group-hover:opacity-100 p-1 rounded text-[var(--text-dim)] hover:text-[var(--text-primary)] transition-all",children:a.jsx(Da,{size:12})})})]},p.policyId))})]})}),a.jsx("div",{className:"sm:hidden divide-y divide-[var(--border-light)]",children:M.map(p=>a.jsxs("div",{onClick:()=>S({edit:p}),className:"px-4 py-3.5 hover:bg-[var(--bg-hover)] transition-colors cursor-pointer",children:[a.jsxs("div",{className:"flex items-center justify-between mb-1",children:[a.jsx("p",{className:"text-sm font-medium text-[var(--text-primary)] truncate mr-2",children:p.policyName}),a.jsx("span",{className:`text-xs font-semibold px-2 py-0.5 rounded-full shrink-0 ${ap[p.policyType]||"bg-slate-500/15 text-[var(--text-muted)]"}`,children:p.policyType})]}),a.jsxs("p",{className:"text-xs text-[var(--text-muted)]",children:[p.company,o?"":`  ${p.insuredMember}`]}),a.jsxs("div",{className:"flex items-center justify-between mt-1.5",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-[var(--text-dim)]",children:"Cover"}),a.jsx("p",{className:"text-xs font-semibold text-[var(--text-primary)] tabular-nums",children:G(p.sumAssured)})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-xs text-[var(--text-dim)]",children:"Premium"}),a.jsxs("p",{className:"text-xs text-[var(--text-muted)] tabular-nums",children:[G(p.premium),"/",p.premiumFrequency==="Annual"?"yr":"mo"]})]})]})]},p.policyId))})]})]}),a.jsx(ft,{open:!!j,onClose:()=>S(null),title:j?.edit?"Edit Insurance Policy":"Add Insurance Policy",wide:!0,children:a.jsx(N2,{initial:j?.edit||void 0,onSave:y,onDelete:j?.edit?w:void 0,onCancel:()=>S(null)})})]})}function lp({label:n,current:o,recommended:c,tip:u}){const x=o===0;return a.jsxs("div",{className:`rounded-lg border px-3 py-2.5 ${x?"border-rose-500/30 bg-rose-500/5":"border-[var(--border)] bg-[var(--bg-inset)]"}`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-1",children:[a.jsx("p",{className:"text-xs font-semibold text-[var(--text-primary)]",children:n}),x?a.jsx("span",{className:"text-xs font-bold text-[var(--accent-rose)]",children:"Not covered"}):a.jsx("span",{className:"text-xs font-semibold text-emerald-400",children:G(o)})]}),a.jsxs("p",{className:"text-xs text-[var(--text-dim)]",children:["Recommended: ",c]}),a.jsx("p",{className:"text-[10px] text-[var(--text-dim)] mt-0.5 italic",children:u})]})}function tr({label:n,value:o,bold:c}){return a.jsxs("div",{className:"bg-[var(--bg-card)] rounded-xl border border-[var(--border)] px-4 py-3",children:[a.jsx("p",{className:"text-xs text-[var(--text-dim)] uppercase tracking-wider mb-1",children:n}),a.jsx("p",{className:`text-sm tabular-nums ${c?"font-bold":"font-semibold"} text-[var(--text-primary)]`,children:o})]})}const w2=["Home Loan","Car Loan","Personal Loan","Education Loan","Gold Loan","Credit Card","Business Loan","Loan Against Property","Other"].map(n=>({value:n,label:n})),C2=[{value:"Active",label:"Active"},{value:"Closed",label:"Closed"},{value:"Inactive",label:"Inactive"}];function A2({initial:n,onSave:o,onDelete:c,onCancel:u}){const{activeMembers:x}=Re(),m=!!n,[h,f]=g.useState({liabilityType:n?.liabilityType||"",lenderName:n?.lenderName||"",familyMemberId:n?.familyMemberId||"",outstandingBalance:n?.outstandingBalance||"",emiAmount:n?.emiAmount||"",interestRate:n?.interestRate||"",status:n?.status||"Active",notes:n?.notes||""}),[v,d]=g.useState({}),[j,S]=g.useState(!1);function M(N,y){f(w=>({...w,[N]:y})),d(w=>({...w,[N]:void 0}))}function k(){const N={};return h.liabilityType||(N.liabilityType="Required"),h.lenderName.trim()||(N.lenderName="Required"),(!h.outstandingBalance||Number(h.outstandingBalance)<=0)&&(N.outstandingBalance="Must be > 0"),d(N),Object.keys(N).length===0}async function z(){if(k()){S(!0);try{await o({...h,outstandingBalance:Number(h.outstandingBalance),emiAmount:Number(h.emiAmount)||0,interestRate:Number(h.interestRate)||0})}finally{S(!1)}}}const A=x.map(N=>({value:N.memberId,label:`${N.memberName} (${N.relationship})`}));return a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsx(X,{label:"Liability Type",required:!0,error:v.liabilityType,children:a.jsx(Me,{value:h.liabilityType,onChange:N=>M("liabilityType",N),options:w2,placeholder:"Select type..."})}),a.jsx(X,{label:"Lender / Bank",required:!0,error:v.lenderName,children:a.jsx(ce,{value:h.lenderName,onChange:N=>M("lenderName",N),placeholder:"e.g., HDFC Bank"})})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsx(X,{label:"Family Member",children:a.jsx(Me,{value:h.familyMemberId,onChange:N=>M("familyMemberId",N),options:A,placeholder:"Select member (optional)..."})}),a.jsx(X,{label:"Outstanding Balance ()",required:!0,error:v.outstandingBalance,children:a.jsx(ce,{type:"number",value:h.outstandingBalance,onChange:N=>M("outstandingBalance",N),placeholder:"e.g., 3500000"})})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsx(X,{label:"EMI Amount ()",children:a.jsx(ce,{type:"number",value:h.emiAmount,onChange:N=>M("emiAmount",N),placeholder:"e.g., 32000"})}),a.jsx(X,{label:"Interest Rate (%)",children:a.jsx(ce,{type:"number",value:h.interestRate,onChange:N=>M("interestRate",N),placeholder:"e.g., 8.5",step:"0.01"})})]}),m&&a.jsx(X,{label:"Status",children:a.jsx(Me,{value:h.status,onChange:N=>M("status",N),options:C2})}),a.jsx(X,{label:"Notes",children:a.jsx(Ks,{value:h.notes,onChange:N=>M("notes",N),placeholder:"e.g., Flat in Kondapur"})}),a.jsxs("div",{className:"flex items-center justify-between",children:[m&&c?a.jsx(Oa,{onClick:c}):a.jsx("div",{}),a.jsx(Dt,{onCancel:u,onSubmit:z,submitLabel:m?"Update":"Add Liability",loading:j})]})]})}const sp={"Home Loan":"bg-blue-500/15 text-[var(--accent-blue)]","Car Loan":"bg-amber-500/15 text-[var(--accent-amber)]","Gold Loan":"bg-orange-500/15 text-[var(--accent-orange)]","Personal Loan":"bg-violet-500/15 text-[var(--accent-violet)]","Education Loan":"bg-emerald-500/15 text-emerald-400","Credit Card":"bg-rose-500/15 text-[var(--accent-rose)]"};function M2(){const{selectedMember:n,member:o}=At(),{liabilityList:c,addLiability:u,updateLiability:x,deleteLiability:m}=Re(),{showToast:h,showBlockUI:f,hideBlockUI:v}=za(),[d,j]=g.useState(null);if(c===null)return a.jsx(ll,{title:"Loading liabilities",cards:4});const S=g.useMemo(()=>{const y=c.filter(w=>w.status!=="Inactive");return n==="all"?y:y.filter(w=>w.familyMemberId===n)},[c,n]),M=S.reduce((y,w)=>y+(w.outstandingBalance||0),0),k=S.reduce((y,w)=>y+(w.emiAmount||0),0),z=S.filter(y=>y.status==="Active").length;async function A(y){f("Saving...");try{d?.edit?await x(d.edit.liabilityId,y):await u(y),h(d?.edit?"Liability updated":"Liability added"),j(null)}catch(w){h(w.message||"Failed to save liability","error")}finally{v()}}async function N(){if(d?.edit&&confirm("Deactivate this liability?")){f("Deactivating...");try{await m(d.edit.liabilityId),h("Liability deactivated"),j(null)}catch(y){h(y.message||"Failed to deactivate liability","error")}finally{v()}}}return a.jsxs("div",{className:"space-y-4",children:[S.length===0?a.jsxs("div",{className:"bg-[var(--bg-card)] rounded-xl border border-[var(--border)] py-12 flex flex-col items-center gap-3",children:[a.jsx(ur,{size:32,className:"text-[var(--text-dim)]"}),a.jsxs("p",{className:"text-sm text-[var(--text-muted)]",children:["No liabilities",o?` for ${o.memberName}`:""]}),a.jsx("button",{onClick:()=>j("add"),className:"text-xs font-semibold text-violet-400 hover:text-violet-300",children:"Add a liability"})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:[a.jsx(Ui,{label:"Liabilities",value:`${z} active`}),a.jsx(Ui,{label:"Outstanding",value:G(M),color:"rose",bold:!0}),a.jsx(Ui,{label:"Monthly EMI",value:G(k),color:"rose"}),a.jsx(Ui,{label:"Avg. Interest",value:S.length>0?`${(S.reduce((y,w)=>y+(w.interestRate||0),0)/S.length).toFixed(1)}%`:""})]}),a.jsx("div",{className:"flex items-center justify-end px-1",children:a.jsxs("button",{onClick:()=>j("add"),className:"flex items-center gap-1.5 px-3 py-2 text-xs font-semibold text-violet-400 hover:text-violet-300 bg-[var(--bg-card)] border border-[var(--border)] rounded-lg transition-colors",children:[a.jsx(aa,{size:14})," Add Liability"]})}),a.jsxs("div",{className:"bg-[var(--bg-card)] rounded-xl border border-[var(--border)] overflow-hidden",children:[a.jsx("div",{className:"hidden sm:block overflow-x-auto",children:a.jsxs("table",{className:"w-full text-sm min-w-[640px]",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b border-[var(--border-light)] bg-[var(--bg-inset)]",children:[a.jsx("th",{className:"text-left py-2.5 px-4 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Type"}),a.jsx("th",{className:"text-left py-2.5 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Lender"}),!o&&a.jsx("th",{className:"text-left py-2.5 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Member"}),a.jsx("th",{className:"text-right py-2.5 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Outstanding"}),a.jsx("th",{className:"text-right py-2.5 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"EMI"}),a.jsx("th",{className:"text-right py-2.5 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Interest"}),a.jsx("th",{className:"text-right py-2.5 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Remaining"}),a.jsx("th",{className:"w-8 py-2.5 px-2"})]})}),a.jsx("tbody",{children:S.map(y=>a.jsxs("tr",{className:"border-b border-[var(--border-light)] last:border-0 hover:bg-[var(--bg-hover)] transition-colors group",children:[a.jsxs("td",{className:"py-2.5 px-4",children:[a.jsx("span",{className:`text-xs font-semibold px-2 py-0.5 rounded-full ${sp[y.liabilityType]||"bg-slate-500/15 text-[var(--text-muted)]"}`,children:y.liabilityType}),y.notes&&a.jsx("p",{className:"text-xs text-[var(--text-dim)] mt-1",children:y.notes})]}),a.jsx("td",{className:"py-2.5 px-3 text-sm font-medium text-[var(--text-primary)]",children:y.lenderName}),!o&&a.jsx("td",{className:"py-2.5 px-3 text-xs text-[var(--text-secondary)]",children:y.familyMemberName}),a.jsx("td",{className:"py-2.5 px-3 text-right text-xs font-semibold text-[var(--accent-rose)] tabular-nums",children:G(y.outstandingBalance)}),a.jsx("td",{className:"py-2.5 px-3 text-right text-xs text-[var(--text-muted)] tabular-nums",children:y.emiAmount?`${G(y.emiAmount)}/mo`:""}),a.jsx("td",{className:"py-2.5 px-3 text-right text-xs text-[var(--text-muted)] tabular-nums",children:y.interestRate?`${y.interestRate}%`:""}),a.jsx("td",{className:"py-2.5 px-3 text-right text-xs text-[var(--text-muted)] tabular-nums",children:y.emiAmount>0&&y.outstandingBalance>0?`${Math.ceil(y.outstandingBalance/y.emiAmount)} mo`:""}),a.jsx("td",{className:"py-2.5 px-2",children:a.jsx("button",{onClick:()=>j({edit:y}),className:"opacity-0 group-hover:opacity-100 p-1 rounded text-[var(--text-dim)] hover:text-[var(--text-primary)] transition-all",children:a.jsx(Da,{size:12})})})]},y.liabilityId))})]})}),a.jsx("div",{className:"sm:hidden divide-y divide-[var(--border-light)]",children:S.map(y=>a.jsxs("div",{onClick:()=>j({edit:y}),className:"px-4 py-3.5 hover:bg-[var(--bg-hover)] transition-colors cursor-pointer",children:[a.jsxs("div",{className:"flex items-center justify-between mb-1",children:[a.jsx("span",{className:`text-xs font-semibold px-2 py-0.5 rounded-full ${sp[y.liabilityType]||"bg-slate-500/15 text-[var(--text-muted)]"}`,children:y.liabilityType}),a.jsx("p",{className:"text-xs font-semibold text-[var(--accent-rose)] tabular-nums",children:G(y.outstandingBalance)})]}),a.jsx("p",{className:"text-sm font-medium text-[var(--text-primary)]",children:y.lenderName}),a.jsxs("div",{className:"flex items-center justify-between mt-1",children:[a.jsxs("p",{className:"text-xs text-[var(--text-muted)]",children:[y.familyMemberName,y.notes?`  ${y.notes}`:""]}),a.jsxs("div",{className:"text-right",children:[y.emiAmount>0&&a.jsxs("p",{className:"text-xs text-[var(--text-dim)] tabular-nums",children:["EMI: ",G(y.emiAmount),"/mo"]}),y.emiAmount>0&&y.outstandingBalance>0&&a.jsxs("p",{className:"text-xs text-[var(--text-dim)] tabular-nums",children:[Math.ceil(y.outstandingBalance/y.emiAmount)," months left"]})]})]})]},y.liabilityId))})]})]}),a.jsx(ft,{open:!!d,onClose:()=>j(null),title:d?.edit?"Edit Liability":"Add Liability",children:a.jsx(A2,{initial:d?.edit||void 0,onSave:A,onDelete:d?.edit?N:void 0,onCancel:()=>j(null)})})]})}function Ui({label:n,value:o,color:c,bold:u}){const x=c==="rose"?"text-[var(--accent-rose)]":"text-[var(--text-primary)]";return a.jsxs("div",{className:"bg-[var(--bg-card)] rounded-xl border border-[var(--border)] px-4 py-3",children:[a.jsx("p",{className:"text-xs text-[var(--text-dim)] uppercase tracking-wider mb-1",children:n}),a.jsx("p",{className:`text-sm tabular-nums ${u?"font-bold":"font-semibold"} ${x}`,children:o})]})}const T2="cf_market_data",V0=[{value:"Fixed Deposit",category:"Debt"},{value:"PPF",category:"Debt"},{value:"EPF",category:"Debt"},{value:"NPS",category:"Debt"},{value:"Sovereign Gold Bond",category:"Gold"},{value:"Physical Gold",category:"Gold"},{value:"Digital Gold",category:"Gold"},{value:"Real Estate",category:"Property"},{value:"Bonds",category:"Debt"},{value:"Physical Silver",category:"Silver"},{value:"Digital Silver",category:"Silver"},{value:"Crypto",category:"Alternative"},{value:"Other",category:"Other"}],np={"Real Estate":"Home Loan","Physical Gold":"Gold Loan","Sovereign Gold Bond":"Gold Loan","Fixed Deposit":"Loan Against FD"},k2=V0.map(n=>({value:n.value,label:n.value})),E2=["Equity","Debt","Gold","Silver","Property","Alternative","Other"].map(n=>({value:n,label:n})),D2=[{value:"Active",label:"Active"},{value:"Sold",label:"Sold"},{value:"Matured",label:"Matured"},{value:"Inactive",label:"Inactive"}],rp=[{value:"24K",label:"24K (99.9%)",factor:.999},{value:"22K",label:"22K (91.6%)",factor:.916},{value:"18K",label:"18K (75.0%)",factor:.75}],ip=[{value:"999",label:"999 Fine (99.9%)",factor:.999},{value:"925",label:"925 Sterling (92.5%)",factor:.925}];function Ji(n){return["Physical Gold","Digital Gold","Sovereign Gold Bond"].includes(n)}function z2(n){return["Physical Silver","Digital Silver"].includes(n)||n&&n.toLowerCase().includes("silver")}function Qu(n){return Ji(n)||z2(n)}function R2(n){try{const o=sessionStorage.getItem(T2);if(!o)return null;const c=JSON.parse(o);if(!c.metals)return null;const u=n==="gold"?"Gold":"Silver",x=c.metals.find(m=>m.name.toLowerCase().includes(u.toLowerCase()));return x?x.price:null}catch{return null}}function O2({initial:n,onSave:o,onDelete:c,onCancel:u}){const{activeMembers:x,liabilityList:m}=Re(),h=!!n;function f(O){return V0.find(ie=>ie.value===O)?.category||"Other"}const v=n?.dynamicFields?typeof n.dynamicFields=="string"?JSON.parse(n.dynamicFields):n.dynamicFields:{},[d,j]=g.useState({investmentType:n?.investmentType||"",investmentCategory:n?.investmentCategory||"",investmentName:n?.investmentName||"",familyMemberId:n?.familyMemberId||"",investedAmount:n?.investedAmount||"",currentValue:n?.currentValue||"",linkedLiabilityId:n?.linkedLiabilityId||"",status:n?.status||"Active",notes:n?.notes||""}),[S,M]=g.useState(v.weightGrams||""),[k,z]=g.useState(v.purity||""),[A,N]=g.useState(null),[y,w]=g.useState(!1),[p,I]=g.useState({lenderName:"",outstandingBalance:"",emiAmount:"",interestRate:""});g.useEffect(()=>{if(!Qu(d.investmentType)||!S||Number(S)<=0){N(null);return}const O=Ji(d.investmentType)?"gold":"silver",ie=R2(O);if(!ie){N(null);return}const R=(O==="gold"?rp:ip).find(oe=>oe.value===k),ee=R?R.factor:1;N(Math.round(Number(S)*ie*ee))},[d.investmentType,S,k]);const[J,q]=g.useState({}),[Z,D]=g.useState(!1);function $(O,ie){j(ue=>({...ue,[O]:ie})),q(ue=>({...ue,[O]:void 0}))}function P(O){j(ie=>({...ie,investmentType:O,investmentCategory:f(O)})),q(ie=>({...ie,investmentType:void 0}))}function le(O,ie){I(ue=>({...ue,[O]:ie}))}function E(){const O={};return d.investmentType||(O.investmentType="Required"),d.investmentName.trim()||(O.investmentName="Required"),(!d.currentValue||Number(d.currentValue)<0)&&(O.currentValue="Required"),y&&(p.lenderName.trim()||(O.qlLender="Required"),(!p.outstandingBalance||Number(p.outstandingBalance)<=0)&&(O.qlOutstanding="Must be > 0")),q(O),Object.keys(O).length===0}async function fe(){if(!E())return;const O={...d,investedAmount:Number(d.investedAmount)||0,currentValue:Number(d.currentValue)||0};Qu(d.investmentType)&&(O.dynamicFields=JSON.stringify({weightGrams:Number(S)||0,purity:k||""})),y&&p.lenderName&&(O.quickLoan={liabilityType:np[d.investmentType]||"Personal Loan",lenderName:p.lenderName,outstandingBalance:Number(p.outstandingBalance)||0,emiAmount:Number(p.emiAmount)||0,interestRate:Number(p.interestRate)||0}),D(!0);try{await o(O)}finally{D(!1)}}const W=m.filter(O=>O.status!=="Inactive"),se=[{value:"",label:"None"},...W.map(O=>({value:O.liabilityId,label:`${O.liabilityType}  ${O.lenderName} (${G(O.outstandingBalance)})`}))],F=x.map(O=>({value:O.memberId,label:`${O.memberName} (${O.relationship})`})),T=np[d.investmentType];return a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsx(X,{label:"Investment Type",required:!0,error:J.investmentType,children:a.jsx(Me,{value:d.investmentType,onChange:P,options:k2,placeholder:"Select type..."})}),a.jsx(X,{label:"Category",children:a.jsx(Me,{value:d.investmentCategory,onChange:O=>$("investmentCategory",O),options:E2,placeholder:"Auto-selected..."})})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsx(X,{label:"Investment Name",required:!0,error:J.investmentName,children:a.jsx(ce,{value:d.investmentName,onChange:O=>$("investmentName",O),placeholder:"e.g., HDFC FD - 7.5%"})}),a.jsx(X,{label:"Family Member",children:a.jsx(Me,{value:d.familyMemberId,onChange:O=>$("familyMemberId",O),options:F,placeholder:"Select member (optional)..."})})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsx(X,{label:"Invested Amount",children:a.jsx(ce,{type:"number",value:d.investedAmount,onChange:O=>$("investedAmount",O),placeholder:"e.g., 500000"})}),a.jsx(X,{label:"Current Value",required:!0,error:J.currentValue,children:a.jsx(ce,{type:"number",value:d.currentValue,onChange:O=>$("currentValue",O),placeholder:"e.g., 537500"})})]}),Qu(d.investmentType)&&a.jsxs("div",{className:"p-3 bg-[var(--bg-inset)] rounded-lg space-y-3",children:[a.jsxs("p",{className:"text-xs font-semibold text-[var(--text-muted)] uppercase tracking-wider",children:[Ji(d.investmentType)?"Gold":"Silver"," Details"]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[a.jsx(X,{label:"Weight (grams)",children:a.jsx(ce,{type:"number",value:S,onChange:M,placeholder:"e.g., 50"})}),a.jsx(X,{label:"Purity",children:a.jsx(Me,{value:k,onChange:z,options:(Ji(d.investmentType)?rp:ip).map(O=>({value:O.value,label:O.label})),placeholder:"Select purity..."})})]}),A!==null&&a.jsxs("div",{className:"flex items-center justify-between bg-[var(--bg-card)] rounded-lg px-3 py-2 border border-[var(--border)]",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-[var(--text-dim)]",children:"Estimated market value"}),a.jsx("p",{className:"text-sm font-bold text-emerald-400 tabular-nums",children:G(A)})]}),a.jsx("button",{type:"button",onClick:()=>$("currentValue",String(A)),className:"text-xs font-semibold text-violet-400 hover:text-violet-300 px-3 py-1.5 rounded-lg bg-violet-500/10 border border-violet-500/20 transition-colors",children:"Use this value"})]})]}),a.jsxs("div",{className:"border-t border-[var(--border-light)] pt-4",children:[a.jsx(X,{label:"Linked Loan / Liability",children:a.jsx(Me,{value:d.linkedLiabilityId,onChange:O=>{$("linkedLiabilityId",O),O&&w(!1)},options:se})}),!d.linkedLiabilityId&&!h&&a.jsx("div",{className:"mt-2",children:a.jsx("button",{type:"button",onClick:()=>w(!y),className:"text-xs font-semibold text-violet-400 hover:text-violet-300 transition-colors",children:y?" Cancel quick loan":`+ Create new loan${T?` (${T})`:""}`})}),y&&a.jsxs("div",{className:"mt-3 p-3 bg-[var(--bg-inset)] rounded-lg space-y-3",children:[a.jsx("p",{className:"text-xs font-semibold text-[var(--text-muted)] uppercase tracking-wider",children:"Quick Loan"}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[a.jsx(X,{label:"Lender",required:!0,error:J.qlLender,children:a.jsx(ce,{value:p.lenderName,onChange:O=>le("lenderName",O),placeholder:"e.g., HDFC Bank"})}),a.jsx(X,{label:"Outstanding Balance",required:!0,error:J.qlOutstanding,children:a.jsx(ce,{type:"number",value:p.outstandingBalance,onChange:O=>le("outstandingBalance",O),placeholder:"e.g., 3500000"})})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[a.jsx(X,{label:"EMI (monthly)",children:a.jsx(ce,{type:"number",value:p.emiAmount,onChange:O=>le("emiAmount",O),placeholder:"e.g., 32000"})}),a.jsx(X,{label:"Interest Rate %",children:a.jsx(ce,{type:"number",value:p.interestRate,onChange:O=>le("interestRate",O),placeholder:"e.g., 8.5"})})]})]})]}),h&&a.jsx(X,{label:"Status",children:a.jsx(Me,{value:d.status,onChange:O=>$("status",O),options:D2})}),a.jsx(X,{label:"Notes",children:a.jsx(Ks,{value:d.notes,onChange:O=>$("notes",O),placeholder:"Additional information..."})}),a.jsxs("div",{className:"flex items-center justify-between",children:[h&&c?a.jsx(Oa,{onClick:c}):a.jsx("div",{}),a.jsx(Dt,{onCancel:u,onSubmit:fe,submitLabel:h?"Update":"Add Investment",loading:Z})]})]})}const op={Debt:"bg-blue-500/15 text-[var(--accent-blue)]",Gold:"bg-amber-500/15 text-[var(--accent-amber)]",Property:"bg-orange-500/15 text-[var(--accent-orange)]",Equity:"bg-emerald-500/15 text-emerald-400",Alternative:"bg-violet-500/15 text-[var(--accent-violet)]"};function L2(){const{selectedMember:n,member:o}=At(),{otherInvList:c,liabilityList:u,addOtherInvestment:x,updateOtherInvestment:m,deleteOtherInvestment:h}=Re(),{showToast:f,showBlockUI:v,hideBlockUI:d}=za(),[j,S]=g.useState(null);if(c===null)return a.jsx(ll,{title:"Loading investments",cards:5});const M=g.useMemo(()=>{const q=c.filter(Z=>Z.status!=="Inactive");return n==="all"?q:q.filter(Z=>Z.familyMemberId===n)},[c,n]),k=M.reduce((q,Z)=>q+(Z.investedAmount||0),0),z=M.reduce((q,Z)=>q+(Z.currentValue||0),0),A=z-k,N=A>=0,y=k>0?A/k*100:0,w=g.useMemo(()=>{const q={};return u.forEach(Z=>{q[Z.liabilityId]=Z}),q},[u]),p=M.reduce((q,Z)=>{const D=Z.linkedLiabilityId?w[Z.linkedLiabilityId]:null;return q+(D?.outstandingBalance||0)},0);async function I(q){v("Saving...");try{j?.edit?await m(j.edit.investmentId,q):await x(q),f(j?.edit?"Investment updated":"Investment added"),S(null)}catch(Z){f(Z.message||"Failed to save investment","error")}finally{d()}}async function J(){if(j?.edit&&confirm("Deactivate this investment?")){v("Deactivating...");try{await h(j.edit.investmentId),f("Investment deactivated"),S(null)}catch(q){f(q.message||"Failed to deactivate investment","error")}finally{d()}}}return a.jsxs("div",{className:"space-y-4",children:[M.length===0?a.jsxs("div",{className:"bg-[var(--bg-card)] rounded-xl border border-[var(--border)] py-12 flex flex-col items-center gap-3",children:[a.jsx(B0,{size:32,className:"text-[var(--text-dim)]"}),a.jsxs("p",{className:"text-sm text-[var(--text-muted)]",children:["No other investments",o?` for ${o.memberName}`:""]}),a.jsx("button",{onClick:()=>S("add"),className:"text-xs font-semibold text-violet-400 hover:text-violet-300",children:"Add an investment"})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-5 gap-3",children:[a.jsx(ar,{label:"Invested",value:G(k)}),a.jsx(ar,{label:"Current Value",value:G(z),bold:!0}),a.jsx(ar,{label:"P&L",value:`${N?"+":""}${G(Math.abs(A))}`,sub:`${N?"+":""}${y.toFixed(1)}%`,positive:N,bold:!0}),p>0&&a.jsx(ar,{label:"Linked Loans",value:G(p),color:"rose"}),a.jsx(ar,{label:"Holdings",value:M.length})]}),a.jsx("div",{className:"flex items-center justify-end px-1",children:a.jsxs("button",{onClick:()=>S("add"),className:"flex items-center gap-1.5 px-3 py-2 text-xs font-semibold text-violet-400 hover:text-violet-300 bg-[var(--bg-card)] border border-[var(--border)] rounded-lg transition-colors",children:[a.jsx(aa,{size:14})," Add Investment"]})}),a.jsxs("div",{className:"bg-[var(--bg-card)] rounded-xl border border-[var(--border)] overflow-hidden",children:[a.jsx("div",{className:"hidden sm:block overflow-x-auto",children:a.jsxs("table",{className:"w-full text-sm min-w-[720px]",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b border-[var(--border-light)] bg-[var(--bg-inset)]",children:[a.jsx("th",{className:"text-left py-2.5 px-4 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Investment"}),a.jsx("th",{className:"text-left py-2.5 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Category"}),!o&&a.jsx("th",{className:"text-left py-2.5 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Member"}),a.jsx("th",{className:"text-right py-2.5 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Invested"}),a.jsx("th",{className:"text-right py-2.5 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Current"}),a.jsx("th",{className:"text-right py-2.5 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"P&L"}),a.jsx("th",{className:"text-right py-2.5 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Linked Loan"}),a.jsx("th",{className:"w-8 py-2.5 px-2"})]})}),a.jsx("tbody",{children:M.map(q=>{const Z=(q.currentValue||0)-(q.investedAmount||0),D=Z>=0,$=q.linkedLiabilityId?w[q.linkedLiabilityId]:null;return a.jsxs("tr",{className:"border-b border-[var(--border-light)] last:border-0 hover:bg-[var(--bg-hover)] transition-colors group",children:[a.jsxs("td",{className:"py-2.5 px-4",children:[a.jsx("p",{className:"text-sm font-medium text-[var(--text-primary)]",children:q.investmentName}),a.jsx("p",{className:"text-xs text-[var(--text-dim)]",children:q.investmentType})]}),a.jsx("td",{className:"py-2.5 px-3",children:a.jsx("span",{className:`text-xs font-semibold px-2 py-0.5 rounded-full ${op[q.investmentCategory]||"bg-slate-500/15 text-[var(--text-muted)]"}`,children:q.investmentCategory})}),!o&&a.jsx("td",{className:"py-2.5 px-3 text-xs text-[var(--text-secondary)]",children:q.familyMemberName}),a.jsx("td",{className:"py-2.5 px-3 text-right text-xs text-[var(--text-muted)] tabular-nums",children:G(q.investedAmount)}),a.jsx("td",{className:"py-2.5 px-3 text-right text-xs font-semibold text-[var(--text-primary)] tabular-nums",children:G(q.currentValue)}),a.jsx("td",{className:"py-2.5 px-3 text-right",children:a.jsxs("span",{className:`text-xs font-semibold tabular-nums ${D?"text-emerald-400":"text-[var(--accent-rose)]"}`,children:[D?"+":"",G(Z)]})}),a.jsx("td",{className:"py-2.5 px-3 text-right",children:$?a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-semibold text-[var(--accent-rose)] tabular-nums",children:G($.outstandingBalance)}),a.jsx("p",{className:"text-xs text-[var(--text-dim)]",children:$.liabilityType})]}):a.jsx("span",{className:"text-xs text-[var(--text-dim)]",children:""})}),a.jsx("td",{className:"py-2.5 px-2",children:a.jsx("button",{onClick:()=>S({edit:q}),className:"opacity-0 group-hover:opacity-100 p-1 rounded text-[var(--text-dim)] hover:text-[var(--text-primary)] transition-all",children:a.jsx(Da,{size:12})})})]},q.investmentId)})})]})}),a.jsx("div",{className:"sm:hidden divide-y divide-[var(--border-light)]",children:M.map(q=>{const Z=(q.currentValue||0)-(q.investedAmount||0),D=Z>=0,$=q.linkedLiabilityId?w[q.linkedLiabilityId]:null;return a.jsxs("div",{onClick:()=>S({edit:q}),className:"px-4 py-3.5 hover:bg-[var(--bg-hover)] transition-colors cursor-pointer",children:[a.jsxs("div",{className:"flex items-center justify-between mb-1",children:[a.jsx("p",{className:"text-sm font-medium text-[var(--text-primary)] truncate mr-2",children:q.investmentName}),a.jsx("span",{className:`text-xs font-semibold px-2 py-0.5 rounded-full shrink-0 ${op[q.investmentCategory]||"bg-slate-500/15 text-[var(--text-muted)]"}`,children:q.investmentCategory})]}),a.jsxs("p",{className:"text-xs text-[var(--text-muted)]",children:[q.familyMemberName,"  ",q.investmentType]}),a.jsxs("div",{className:"flex items-center justify-between mt-1.5",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-[var(--text-dim)]",children:"Invested"}),a.jsx("p",{className:"text-xs text-[var(--text-muted)] tabular-nums",children:G(q.investedAmount)})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-xs text-[var(--text-dim)]",children:"Current"}),a.jsx("p",{className:"text-xs font-semibold text-[var(--text-primary)] tabular-nums",children:G(q.currentValue)})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-xs text-[var(--text-dim)]",children:"P&L"}),a.jsxs("p",{className:`text-xs font-semibold tabular-nums ${D?"text-emerald-400":"text-[var(--accent-rose)]"}`,children:[D?"+":"",G(Z)]})]})]}),$&&a.jsxs("div",{className:"mt-1.5 flex items-center justify-between bg-rose-500/5 rounded px-2 py-1",children:[a.jsx("span",{className:"text-xs text-[var(--text-dim)]",children:$.liabilityType}),a.jsx("span",{className:"text-xs font-semibold text-[var(--accent-rose)] tabular-nums",children:G($.outstandingBalance)})]})]},q.investmentId)})})]})]}),a.jsx(ft,{open:!!j,onClose:()=>S(null),title:j?.edit?"Edit Investment":"Add Investment",wide:!0,children:a.jsx(O2,{initial:j?.edit||void 0,onSave:I,onDelete:j?.edit?J:void 0,onCancel:()=>S(null)})})]})}function ar({label:n,value:o,sub:c,positive:u,bold:x,color:m}){const h=m==="rose"?"text-[var(--accent-rose)]":u===void 0?"text-[var(--text-primary)]":u?"text-emerald-400":"text-[var(--accent-rose)]";return a.jsxs("div",{className:"bg-[var(--bg-card)] rounded-xl border border-[var(--border)] px-4 py-3",children:[a.jsx("p",{className:"text-xs text-[var(--text-dim)] uppercase tracking-wider mb-1",children:n}),a.jsx("p",{className:`text-sm tabular-nums ${x?"font-bold":"font-semibold"} ${h}`,children:o}),c&&a.jsx("p",{className:`text-xs font-semibold tabular-nums mt-0.5 ${u?"text-emerald-400":"text-[var(--accent-rose)]"}`,children:c})]})}function _2({initial:n,onSave:o,onDelete:c,onCancel:u}){const{activeMembers:x,activeInvestmentAccounts:m}=Re(),h=!!n,[f,v]=g.useState({portfolioName:(n?.portfolioName||"").replace(/^PFL-/,""),investmentAccountId:n?.investmentAccountId||"",ownerId:n?.ownerId||"",initialInvestment:n?.initialInvestment||0,sipTarget:n?.sipTarget||"",lumpsumTarget:n?.lumpsumTarget||"",rebalanceThreshold:n?n.rebalanceThreshold*100:5}),[d,j]=g.useState({}),[S,M]=g.useState(!1);function k(p,I){v(J=>({...J,[p]:I})),j(J=>({...J,[p]:void 0}))}function z(p){v(I=>({...I,ownerId:p,investmentAccountId:""})),j(I=>({...I,ownerId:void 0}))}const A=m.filter(p=>f.ownerId?p.memberId===f.ownerId:!0).map(p=>({value:p.accountId,label:`${p.accountName} - ${p.platformBroker}`})),N=x.map(p=>({value:p.memberId,label:`${p.memberName} (${p.relationship})`}));function y(){const p={};return f.portfolioName.trim()||(p.portfolioName="Required"),f.ownerId||(p.ownerId="Required"),f.investmentAccountId||(p.investmentAccountId="Required"),j(p),Object.keys(p).length===0}async function w(){if(y()){M(!0);try{const p=m.find(J=>J.accountId===f.investmentAccountId),I=p?`${p.accountName} - ${p.platformBroker}`:f.investmentAccountId;await o({...f,investmentAccount:I,initialInvestment:Number(f.initialInvestment)||0,sipTarget:Number(f.sipTarget)||0,lumpsumTarget:Number(f.lumpsumTarget)||0,rebalanceThreshold:Number(f.rebalanceThreshold)})}finally{M(!1)}}}return a.jsxs("div",{className:"space-y-4",children:[a.jsx(X,{label:"Portfolio Name",required:!0,error:d.portfolioName,children:a.jsx(ce,{value:f.portfolioName,onChange:p=>k("portfolioName",p),placeholder:"e.g., Long Term Wealth"})}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsx(X,{label:"Owner",required:!0,error:d.ownerId,children:a.jsx(Me,{value:f.ownerId,onChange:z,options:N,placeholder:"Select member..."})}),a.jsx(X,{label:"Investment Account",required:!0,error:d.investmentAccountId,children:a.jsx(Me,{value:f.investmentAccountId,onChange:p=>k("investmentAccountId",p),options:A,placeholder:f.ownerId?A.length?"Select account...":"No MF accounts":"Select owner first..."})})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[a.jsx(X,{label:"SIP Target (/month)",children:a.jsx(ce,{type:"number",value:f.sipTarget,onChange:p=>k("sipTarget",p),placeholder:"e.g., 50000"})}),a.jsx(X,{label:"Lumpsum Target ()",children:a.jsx(ce,{type:"number",value:f.lumpsumTarget,onChange:p=>k("lumpsumTarget",p),placeholder:"e.g., 200000"})}),a.jsx(X,{label:"Rebalance Threshold (%)",children:a.jsx(ce,{type:"number",value:f.rebalanceThreshold,onChange:p=>k("rebalanceThreshold",p),placeholder:"e.g., 5"})})]}),!h&&a.jsx(X,{label:"Initial Investment ()",children:a.jsx(ce,{type:"number",value:f.initialInvestment,onChange:p=>k("initialInvestment",p),placeholder:"0 if unknown"})}),a.jsxs("div",{className:"flex items-center justify-between",children:[h&&c?a.jsx(Oa,{onClick:c}):a.jsx("div",{}),a.jsx(Dt,{onCancel:u,onSubmit:w,submitLabel:h?"Update":"Create Portfolio",loading:S})]})]})}function al(n){return Array.isArray?Array.isArray(n):X0(n)==="[object Array]"}function I2(n){if(typeof n=="string")return n;let o=n+"";return o=="0"&&1/n==-1/0?"-0":o}function B2(n){return n==null?"":I2(n)}function Ea(n){return typeof n=="string"}function Y0(n){return typeof n=="number"}function U2(n){return n===!0||n===!1||H2(n)&&X0(n)=="[object Boolean]"}function Q0(n){return typeof n=="object"}function H2(n){return Q0(n)&&n!==null}function ea(n){return n!=null}function Xu(n){return!n.trim().length}function X0(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}const F2="Incorrect 'index' type",q2=n=>`Invalid value for key ${n}`,$2=n=>`Pattern length exceeds max of ${n}.`,P2=n=>`Missing ${n} property in key`,G2=n=>`Property 'weight' in key '${n}' must be a positive integer`,cp=Object.prototype.hasOwnProperty;class V2{constructor(o){this._keys=[],this._keyMap={};let c=0;o.forEach(u=>{let x=Z0(u);this._keys.push(x),this._keyMap[x.id]=x,c+=x.weight}),this._keys.forEach(u=>{u.weight/=c})}get(o){return this._keyMap[o]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function Z0(n){let o=null,c=null,u=null,x=1,m=null;if(Ea(n)||al(n))u=n,o=up(n),c=ad(n);else{if(!cp.call(n,"name"))throw new Error(P2("name"));const h=n.name;if(u=h,cp.call(n,"weight")&&(x=n.weight,x<=0))throw new Error(G2(h));o=up(h),c=ad(h),m=n.getFn}return{path:o,id:c,weight:x,src:u,getFn:m}}function up(n){return al(n)?n:n.split(".")}function ad(n){return al(n)?n.join("."):n}function Y2(n,o){let c=[],u=!1;const x=(m,h,f)=>{if(ea(m))if(!h[f])c.push(m);else{let v=h[f];const d=m[v];if(!ea(d))return;if(f===h.length-1&&(Ea(d)||Y0(d)||U2(d)))c.push(B2(d));else if(al(d)){u=!0;for(let j=0,S=d.length;j<S;j+=1)x(d[j],h,f+1)}else h.length&&x(d,h,f+1)}};return x(n,Ea(o)?o.split("."):o,0),u?c:c[0]}const Q2={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},X2={isCaseSensitive:!1,ignoreDiacritics:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(n,o)=>n.score===o.score?n.idx<o.idx?-1:1:n.score<o.score?-1:1},Z2={location:0,threshold:.6,distance:100},K2={useExtendedSearch:!1,getFn:Y2,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var Ae={...X2,...Q2,...Z2,...K2};const J2=/[^ ]+/g;function W2(n=1,o=3){const c=new Map,u=Math.pow(10,o);return{get(x){const m=x.match(J2).length;if(c.has(m))return c.get(m);const h=1/Math.pow(m,.5*n),f=parseFloat(Math.round(h*u)/u);return c.set(m,f),f},clear(){c.clear()}}}class wd{constructor({getFn:o=Ae.getFn,fieldNormWeight:c=Ae.fieldNormWeight}={}){this.norm=W2(c,3),this.getFn=o,this.isCreated=!1,this.setIndexRecords()}setSources(o=[]){this.docs=o}setIndexRecords(o=[]){this.records=o}setKeys(o=[]){this.keys=o,this._keysMap={},o.forEach((c,u)=>{this._keysMap[c.id]=u})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,Ea(this.docs[0])?this.docs.forEach((o,c)=>{this._addString(o,c)}):this.docs.forEach((o,c)=>{this._addObject(o,c)}),this.norm.clear())}add(o){const c=this.size();Ea(o)?this._addString(o,c):this._addObject(o,c)}removeAt(o){this.records.splice(o,1);for(let c=o,u=this.size();c<u;c+=1)this.records[c].i-=1}getValueForItemAtKeyId(o,c){return o[this._keysMap[c]]}size(){return this.records.length}_addString(o,c){if(!ea(o)||Xu(o))return;let u={v:o,i:c,n:this.norm.get(o)};this.records.push(u)}_addObject(o,c){let u={i:c,$:{}};this.keys.forEach((x,m)=>{let h=x.getFn?x.getFn(o):this.getFn(o,x.path);if(ea(h)){if(al(h)){let f=[];const v=[{nestedArrIndex:-1,value:h}];for(;v.length;){const{nestedArrIndex:d,value:j}=v.pop();if(ea(j))if(Ea(j)&&!Xu(j)){let S={v:j,i:d,n:this.norm.get(j)};f.push(S)}else al(j)&&j.forEach((S,M)=>{v.push({nestedArrIndex:M,value:S})})}u.$[m]=f}else if(Ea(h)&&!Xu(h)){let f={v:h,n:this.norm.get(h)};u.$[m]=f}}}),this.records.push(u)}toJSON(){return{keys:this.keys,records:this.records}}}function K0(n,o,{getFn:c=Ae.getFn,fieldNormWeight:u=Ae.fieldNormWeight}={}){const x=new wd({getFn:c,fieldNormWeight:u});return x.setKeys(n.map(Z0)),x.setSources(o),x.create(),x}function e5(n,{getFn:o=Ae.getFn,fieldNormWeight:c=Ae.fieldNormWeight}={}){const{keys:u,records:x}=n,m=new wd({getFn:o,fieldNormWeight:c});return m.setKeys(u),m.setIndexRecords(x),m}function Hi(n,{errors:o=0,currentLocation:c=0,expectedLocation:u=0,distance:x=Ae.distance,ignoreLocation:m=Ae.ignoreLocation}={}){const h=o/n.length;if(m)return h;const f=Math.abs(u-c);return x?h+f/x:f?1:h}function t5(n=[],o=Ae.minMatchCharLength){let c=[],u=-1,x=-1,m=0;for(let h=n.length;m<h;m+=1){let f=n[m];f&&u===-1?u=m:!f&&u!==-1&&(x=m-1,x-u+1>=o&&c.push([u,x]),u=-1)}return n[m-1]&&m-u>=o&&c.push([u,m-1]),c}const Jl=32;function a5(n,o,c,{location:u=Ae.location,distance:x=Ae.distance,threshold:m=Ae.threshold,findAllMatches:h=Ae.findAllMatches,minMatchCharLength:f=Ae.minMatchCharLength,includeMatches:v=Ae.includeMatches,ignoreLocation:d=Ae.ignoreLocation}={}){if(o.length>Jl)throw new Error($2(Jl));const j=o.length,S=n.length,M=Math.max(0,Math.min(u,S));let k=m,z=M;const A=f>1||v,N=A?Array(S):[];let y;for(;(y=n.indexOf(o,z))>-1;){let Z=Hi(o,{currentLocation:y,expectedLocation:M,distance:x,ignoreLocation:d});if(k=Math.min(Z,k),z=y+j,A){let D=0;for(;D<j;)N[y+D]=1,D+=1}}z=-1;let w=[],p=1,I=j+S;const J=1<<j-1;for(let Z=0;Z<j;Z+=1){let D=0,$=I;for(;D<$;)Hi(o,{errors:Z,currentLocation:M+$,expectedLocation:M,distance:x,ignoreLocation:d})<=k?D=$:I=$,$=Math.floor((I-D)/2+D);I=$;let P=Math.max(1,M-$+1),le=h?S:Math.min(M+$,S)+j,E=Array(le+2);E[le+1]=(1<<Z)-1;for(let W=le;W>=P;W-=1){let se=W-1,F=c[n.charAt(se)];if(A&&(N[se]=+!!F),E[W]=(E[W+1]<<1|1)&F,Z&&(E[W]|=(w[W+1]|w[W])<<1|1|w[W+1]),E[W]&J&&(p=Hi(o,{errors:Z,currentLocation:se,expectedLocation:M,distance:x,ignoreLocation:d}),p<=k)){if(k=p,z=se,z<=M)break;P=Math.max(1,2*M-z)}}if(Hi(o,{errors:Z+1,currentLocation:M,expectedLocation:M,distance:x,ignoreLocation:d})>k)break;w=E}const q={isMatch:z>=0,score:Math.max(.001,p)};if(A){const Z=t5(N,f);Z.length?v&&(q.indices=Z):q.isMatch=!1}return q}function l5(n){let o={};for(let c=0,u=n.length;c<u;c+=1){const x=n.charAt(c);o[x]=(o[x]||0)|1<<u-c-1}return o}const io=String.prototype.normalize?(n=>n.normalize("NFD").replace(/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]/g,"")):(n=>n);class J0{constructor(o,{location:c=Ae.location,threshold:u=Ae.threshold,distance:x=Ae.distance,includeMatches:m=Ae.includeMatches,findAllMatches:h=Ae.findAllMatches,minMatchCharLength:f=Ae.minMatchCharLength,isCaseSensitive:v=Ae.isCaseSensitive,ignoreDiacritics:d=Ae.ignoreDiacritics,ignoreLocation:j=Ae.ignoreLocation}={}){if(this.options={location:c,threshold:u,distance:x,includeMatches:m,findAllMatches:h,minMatchCharLength:f,isCaseSensitive:v,ignoreDiacritics:d,ignoreLocation:j},o=v?o:o.toLowerCase(),o=d?io(o):o,this.pattern=o,this.chunks=[],!this.pattern.length)return;const S=(k,z)=>{this.chunks.push({pattern:k,alphabet:l5(k),startIndex:z})},M=this.pattern.length;if(M>Jl){let k=0;const z=M%Jl,A=M-z;for(;k<A;)S(this.pattern.substr(k,Jl),k),k+=Jl;if(z){const N=M-Jl;S(this.pattern.substr(N),N)}}else S(this.pattern,0)}searchIn(o){const{isCaseSensitive:c,ignoreDiacritics:u,includeMatches:x}=this.options;if(o=c?o:o.toLowerCase(),o=u?io(o):o,this.pattern===o){let A={isMatch:!0,score:0};return x&&(A.indices=[[0,o.length-1]]),A}const{location:m,distance:h,threshold:f,findAllMatches:v,minMatchCharLength:d,ignoreLocation:j}=this.options;let S=[],M=0,k=!1;this.chunks.forEach(({pattern:A,alphabet:N,startIndex:y})=>{const{isMatch:w,score:p,indices:I}=a5(o,A,N,{location:m+y,distance:h,threshold:f,findAllMatches:v,minMatchCharLength:d,includeMatches:x,ignoreLocation:j});w&&(k=!0),M+=p,w&&I&&(S=[...S,...I])});let z={isMatch:k,score:k?M/this.chunks.length:1};return k&&x&&(z.indices=S),z}}class kl{constructor(o){this.pattern=o}static isMultiMatch(o){return dp(o,this.multiRegex)}static isSingleMatch(o){return dp(o,this.singleRegex)}search(){}}function dp(n,o){const c=n.match(o);return c?c[1]:null}class s5 extends kl{constructor(o){super(o)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(o){const c=o===this.pattern;return{isMatch:c,score:c?0:1,indices:[0,this.pattern.length-1]}}}class n5 extends kl{constructor(o){super(o)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(o){const u=o.indexOf(this.pattern)===-1;return{isMatch:u,score:u?0:1,indices:[0,o.length-1]}}}class r5 extends kl{constructor(o){super(o)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(o){const c=o.startsWith(this.pattern);return{isMatch:c,score:c?0:1,indices:[0,this.pattern.length-1]}}}class i5 extends kl{constructor(o){super(o)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(o){const c=!o.startsWith(this.pattern);return{isMatch:c,score:c?0:1,indices:[0,o.length-1]}}}class o5 extends kl{constructor(o){super(o)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(o){const c=o.endsWith(this.pattern);return{isMatch:c,score:c?0:1,indices:[o.length-this.pattern.length,o.length-1]}}}class c5 extends kl{constructor(o){super(o)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(o){const c=!o.endsWith(this.pattern);return{isMatch:c,score:c?0:1,indices:[0,o.length-1]}}}class W0 extends kl{constructor(o,{location:c=Ae.location,threshold:u=Ae.threshold,distance:x=Ae.distance,includeMatches:m=Ae.includeMatches,findAllMatches:h=Ae.findAllMatches,minMatchCharLength:f=Ae.minMatchCharLength,isCaseSensitive:v=Ae.isCaseSensitive,ignoreDiacritics:d=Ae.ignoreDiacritics,ignoreLocation:j=Ae.ignoreLocation}={}){super(o),this._bitapSearch=new J0(o,{location:c,threshold:u,distance:x,includeMatches:m,findAllMatches:h,minMatchCharLength:f,isCaseSensitive:v,ignoreDiacritics:d,ignoreLocation:j})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(o){return this._bitapSearch.searchIn(o)}}class eb extends kl{constructor(o){super(o)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(o){let c=0,u;const x=[],m=this.pattern.length;for(;(u=o.indexOf(this.pattern,c))>-1;)c=u+m,x.push([u,c-1]);const h=!!x.length;return{isMatch:h,score:h?0:1,indices:x}}}const ld=[s5,eb,r5,i5,c5,o5,n5,W0],mp=ld.length,u5=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,d5="|";function m5(n,o={}){return n.split(d5).map(c=>{let u=c.trim().split(u5).filter(m=>m&&!!m.trim()),x=[];for(let m=0,h=u.length;m<h;m+=1){const f=u[m];let v=!1,d=-1;for(;!v&&++d<mp;){const j=ld[d];let S=j.isMultiMatch(f);S&&(x.push(new j(S,o)),v=!0)}if(!v)for(d=-1;++d<mp;){const j=ld[d];let S=j.isSingleMatch(f);if(S){x.push(new j(S,o));break}}}return x})}const x5=new Set([W0.type,eb.type]);class f5{constructor(o,{isCaseSensitive:c=Ae.isCaseSensitive,ignoreDiacritics:u=Ae.ignoreDiacritics,includeMatches:x=Ae.includeMatches,minMatchCharLength:m=Ae.minMatchCharLength,ignoreLocation:h=Ae.ignoreLocation,findAllMatches:f=Ae.findAllMatches,location:v=Ae.location,threshold:d=Ae.threshold,distance:j=Ae.distance}={}){this.query=null,this.options={isCaseSensitive:c,ignoreDiacritics:u,includeMatches:x,minMatchCharLength:m,findAllMatches:f,ignoreLocation:h,location:v,threshold:d,distance:j},o=c?o:o.toLowerCase(),o=u?io(o):o,this.pattern=o,this.query=m5(this.pattern,this.options)}static condition(o,c){return c.useExtendedSearch}searchIn(o){const c=this.query;if(!c)return{isMatch:!1,score:1};const{includeMatches:u,isCaseSensitive:x,ignoreDiacritics:m}=this.options;o=x?o:o.toLowerCase(),o=m?io(o):o;let h=0,f=[],v=0;for(let d=0,j=c.length;d<j;d+=1){const S=c[d];f.length=0,h=0;for(let M=0,k=S.length;M<k;M+=1){const z=S[M],{isMatch:A,indices:N,score:y}=z.search(o);if(A){if(h+=1,v+=y,u){const w=z.constructor.type;x5.has(w)?f=[...f,...N]:f.push(N)}}else{v=0,h=0,f.length=0;break}}if(h){let M={isMatch:!0,score:v/h};return u&&(M.indices=f),M}}return{isMatch:!1,score:1}}}const sd=[];function h5(...n){sd.push(...n)}function nd(n,o){for(let c=0,u=sd.length;c<u;c+=1){let x=sd[c];if(x.condition(n,o))return new x(n,o)}return new J0(n,o)}const oo={AND:"$and",OR:"$or"},rd={PATH:"$path",PATTERN:"$val"},id=n=>!!(n[oo.AND]||n[oo.OR]),p5=n=>!!n[rd.PATH],b5=n=>!al(n)&&Q0(n)&&!id(n),xp=n=>({[oo.AND]:Object.keys(n).map(o=>({[o]:n[o]}))});function tb(n,o,{auto:c=!0}={}){const u=x=>{let m=Object.keys(x);const h=p5(x);if(!h&&m.length>1&&!id(x))return u(xp(x));if(b5(x)){const v=h?x[rd.PATH]:m[0],d=h?x[rd.PATTERN]:x[v];if(!Ea(d))throw new Error(q2(v));const j={keyId:ad(v),pattern:d};return c&&(j.searcher=nd(d,o)),j}let f={children:[],operator:m[0]};return m.forEach(v=>{const d=x[v];al(d)&&d.forEach(j=>{f.children.push(u(j))})}),f};return id(n)||(n=xp(n)),u(n)}function v5(n,{ignoreFieldNorm:o=Ae.ignoreFieldNorm}){n.forEach(c=>{let u=1;c.matches.forEach(({key:x,norm:m,score:h})=>{const f=x?x.weight:null;u*=Math.pow(h===0&&f?Number.EPSILON:h,(f||1)*(o?1:m))}),c.score=u})}function g5(n,o){const c=n.matches;o.matches=[],ea(c)&&c.forEach(u=>{if(!ea(u.indices)||!u.indices.length)return;const{indices:x,value:m}=u;let h={indices:x,value:m};u.key&&(h.key=u.key.src),u.idx>-1&&(h.refIndex=u.idx),o.matches.push(h)})}function y5(n,o){o.score=n.score}function j5(n,o,{includeMatches:c=Ae.includeMatches,includeScore:u=Ae.includeScore}={}){const x=[];return c&&x.push(g5),u&&x.push(y5),n.map(m=>{const{idx:h}=m,f={item:o[h],refIndex:h};return x.length&&x.forEach(v=>{v(m,f)}),f})}class ln{constructor(o,c={},u){this.options={...Ae,...c},this.options.useExtendedSearch,this._keyStore=new V2(this.options.keys),this.setCollection(o,u)}setCollection(o,c){if(this._docs=o,c&&!(c instanceof wd))throw new Error(F2);this._myIndex=c||K0(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(o){ea(o)&&(this._docs.push(o),this._myIndex.add(o))}remove(o=()=>!1){const c=[];for(let u=0,x=this._docs.length;u<x;u+=1){const m=this._docs[u];o(m,u)&&(this.removeAt(u),u-=1,x-=1,c.push(m))}return c}removeAt(o){this._docs.splice(o,1),this._myIndex.removeAt(o)}getIndex(){return this._myIndex}search(o,{limit:c=-1}={}){const{includeMatches:u,includeScore:x,shouldSort:m,sortFn:h,ignoreFieldNorm:f}=this.options;let v=Ea(o)?Ea(this._docs[0])?this._searchStringList(o):this._searchObjectList(o):this._searchLogical(o);return v5(v,{ignoreFieldNorm:f}),m&&v.sort(h),Y0(c)&&c>-1&&(v=v.slice(0,c)),j5(v,this._docs,{includeMatches:u,includeScore:x})}_searchStringList(o){const c=nd(o,this.options),{records:u}=this._myIndex,x=[];return u.forEach(({v:m,i:h,n:f})=>{if(!ea(m))return;const{isMatch:v,score:d,indices:j}=c.searchIn(m);v&&x.push({item:m,idx:h,matches:[{score:d,value:m,norm:f,indices:j}]})}),x}_searchLogical(o){const c=tb(o,this.options),u=(f,v,d)=>{if(!f.children){const{keyId:S,searcher:M}=f,k=this._findMatches({key:this._keyStore.get(S),value:this._myIndex.getValueForItemAtKeyId(v,S),searcher:M});return k&&k.length?[{idx:d,item:v,matches:k}]:[]}const j=[];for(let S=0,M=f.children.length;S<M;S+=1){const k=f.children[S],z=u(k,v,d);if(z.length)j.push(...z);else if(f.operator===oo.AND)return[]}return j},x=this._myIndex.records,m={},h=[];return x.forEach(({$:f,i:v})=>{if(ea(f)){let d=u(c,f,v);d.length&&(m[v]||(m[v]={idx:v,item:f,matches:[]},h.push(m[v])),d.forEach(({matches:j})=>{m[v].matches.push(...j)}))}}),h}_searchObjectList(o){const c=nd(o,this.options),{keys:u,records:x}=this._myIndex,m=[];return x.forEach(({$:h,i:f})=>{if(!ea(h))return;let v=[];u.forEach((d,j)=>{v.push(...this._findMatches({key:d,value:h[j],searcher:c}))}),v.length&&m.push({idx:f,item:h,matches:v})}),m}_findMatches({key:o,value:c,searcher:u}){if(!ea(c))return[];let x=[];if(al(c))c.forEach(({v:m,i:h,n:f})=>{if(!ea(m))return;const{isMatch:v,score:d,indices:j}=u.searchIn(m);v&&x.push({score:d,key:o,value:m,idx:h,norm:f,indices:j})});else{const{v:m,n:h}=c,{isMatch:f,score:v,indices:d}=u.searchIn(m);f&&x.push({score:v,key:o,value:m,norm:h,indices:d})}return x}}ln.version="7.1.0";ln.createIndex=K0;ln.parseIndex=e5;ln.config=Ae;ln.parseQuery=tb;h5(f5);let ga=null,lr=null;function N5(n){if(!n)return!1;const o=new Date(n),c=new Date;return o.getFullYear()===c.getFullYear()&&o.getMonth()===c.getMonth()&&o.getDate()===c.getDate()}function S5(){return ga?Promise.resolve(ga):lr||(lr=O1("fundsList").then(n=>n&&Array.isArray(n.data)&&N5(n.updatedAt)?(ga=n.data,ga):m1().then(o=>(ga=Array.isArray(o)?o:[],Pt("fundsList",ga),ga))).catch(()=>(lr=null,[])),lr)}function Cd({value:n,onSelect:o,placeholder:c,disabled:u}){const[x,m]=g.useState(""),[h,f]=g.useState(ga||[]),[v,d]=g.useState(!ga),[j,S]=g.useState(!1),M=g.useRef(null);g.useEffect(()=>{if(ga){f(ga),d(!1);return}S5().then(w=>{f(w),d(!1)})},[]),g.useEffect(()=>{function w(p){M.current&&!M.current.contains(p.target)&&S(!1)}return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]);const k=g.useMemo(()=>h.length?new ln(h,{keys:["fundName"],threshold:.3,distance:50,minMatchCharLength:2,includeScore:!0,ignoreLocation:!1,findAllMatches:!0}):null,[h]),z=g.useMemo(()=>!k||x.length<2?[]:k.search(x).slice(0,50).map(w=>w.item),[k,x]);function A(w){m(w),S(w.length>=2)}function N(w){o({schemeCode:w.fundCode||w.schemeCode,fundName:w.fundName,nav:w.nav,navDate:w.navDate}),m(""),S(!1)}function y(){o({schemeCode:"",fundName:"",nav:0,navDate:""}),m("")}return n?.fundName?a.jsxs("div",{className:"flex items-center gap-2 bg-[var(--bg-inset)] border border-[var(--border)] rounded-lg px-3 py-2",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-xs font-medium text-[var(--text-primary)] truncate",children:n.fundName}),a.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[a.jsx("span",{className:"text-xs text-[var(--text-dim)]",children:n.schemeCode}),n.nav>0&&a.jsxs("span",{className:"text-xs font-medium text-emerald-400",children:["NAV: ",n.nav.toFixed(2),n.navDate?` (${n.navDate})`:""]})]})]}),a.jsx("button",{type:"button",onClick:y,className:"shrink-0 p-1 rounded-md hover:bg-[var(--bg-hover)] text-[var(--text-dim)] hover:text-[var(--text-secondary)] transition-colors",children:a.jsx(hr,{size:14})})]}):a.jsxs("div",{ref:M,className:"relative",children:[a.jsxs("div",{className:"relative",children:[v?a.jsx(L0,{size:14,className:"absolute left-3 top-1/2 -translate-y-1/2 text-violet-400 animate-spin"}):a.jsx(hN,{size:14,className:"absolute left-3 top-1/2 -translate-y-1/2 text-[var(--text-dim)]"}),a.jsx("input",{type:"text",value:x,onChange:w=>A(w.target.value),onFocus:()=>x.length>=2&&S(!0),placeholder:v?"Loading funds...":c||"Search fund name...",disabled:u||v,className:"w-full bg-[var(--bg-inset)] border border-[var(--border)] rounded-lg pl-9 pr-3 py-2 text-sm text-[var(--text-primary)] placeholder:text-[var(--text-dim)] focus:outline-none focus:border-violet-500/50 disabled:opacity-50 transition-colors"})]}),j&&z.length>0&&a.jsx("div",{className:"absolute left-0 right-0 top-full mt-1 z-50 bg-[var(--bg-card)] border border-[var(--border)] rounded-lg shadow-xl max-h-[240px] overflow-y-auto",children:z.map(w=>a.jsxs("button",{type:"button",onClick:()=>N(w),className:"w-full text-left px-3 py-2.5 hover:bg-[var(--bg-hover)] transition-colors border-b border-[var(--border-light)] last:border-0",children:[a.jsx("p",{className:"text-xs font-medium text-[var(--text-primary)] leading-tight",children:w.fundName}),a.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[a.jsx("span",{className:"text-xs text-[var(--text-dim)]",children:w.fundCode||w.schemeCode}),w.nav>0&&a.jsxs("span",{className:"text-xs text-emerald-400 tabular-nums",children:["NAV: ",w.nav.toFixed(2),w.navDate?` (${w.navDate})`:""]})]})]},w.fundCode||w.schemeCode))}),j&&x.length>=2&&z.length===0&&!v&&a.jsx("div",{className:"absolute left-0 right-0 top-full mt-1 z-50 bg-[var(--bg-card)] border border-[var(--border)] rounded-lg shadow-xl p-4 text-center",children:a.jsxs("p",{className:"text-xs text-[var(--text-muted)]",children:['No funds found for "',x,'"']})})]})}const w5=[{value:"INITIAL",label:"Add Existing Holdings"},{value:"SIP",label:"SIP Investment"},{value:"LUMPSUM",label:"Lumpsum Investment"}];function C5({portfolioId:n,transactionType:o,onSave:c,onCancel:u}){const{mfPortfolios:x,mfHoldings:m}=Re(),{selectedMember:h}=At(),f=g.useMemo(()=>{const q=x.filter(Z=>Z.status==="Active");return h==="all"?q:q.filter(Z=>Z.ownerId===h)},[x,h]),[v,d]=g.useState({portfolioId:n||"",fundCode:"",fundName:"",transactionType:o||"SIP",date:new Date().toISOString().split("T")[0],units:"",price:"",notes:""}),[j,S]=g.useState({}),[M,k]=g.useState(!1);function z(q,Z){d(D=>({...D,[q]:Z})),S(D=>({...D,[q]:void 0}))}function A({schemeCode:q,fundName:Z,nav:D,navDate:$}){d(P=>({...P,fundCode:q,fundName:Z,price:D>0?String(D):P.price})),S(P=>({...P,fundCode:void 0,fundName:void 0}))}const N=g.useMemo(()=>!v.portfolioId||!v.fundCode?null:m.find(q=>q.portfolioId===v.portfolioId&&q.schemeCode===v.fundCode),[m,v.portfolioId,v.fundCode]),y=v.fundCode&&!N,w=g.useMemo(()=>(Number(v.units)||0)*(Number(v.price)||0),[v.units,v.price]);function p(){const q={};return v.portfolioId||(q.portfolioId="Required"),v.fundCode||(q.fundCode="Select a fund"),v.date||(q.date="Required"),(!v.units||Number(v.units)<=0)&&(q.units="Must be > 0"),(!v.price||Number(v.price)<=0)&&(q.price="Must be > 0"),S(q),Object.keys(q).length===0}async function I(){if(p()){k(!0);try{await c({portfolioId:v.portfolioId,fundCode:v.fundCode,fundName:v.fundName,transactionType:v.transactionType,purchaseDate:v.date,units:v.units,avgPrice:v.price,notes:v.notes})}finally{k(!1)}}}const J=f.map(q=>({value:q.portfolioId,label:`${q.portfolioName} (${q.ownerName})`}));return a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsx(X,{label:"Portfolio",required:!0,error:j.portfolioId,children:a.jsx(Me,{value:v.portfolioId,onChange:q=>z("portfolioId",q),options:J,placeholder:"Select portfolio..."})}),a.jsx(X,{label:"Transaction Type",required:!0,children:a.jsx(Me,{value:v.transactionType,onChange:q=>z("transactionType",q),options:w5})})]}),a.jsx(X,{label:"Fund",required:!0,error:j.fundCode,children:a.jsx(Cd,{value:v.fundCode?{schemeCode:v.fundCode,fundName:v.fundName}:null,onSelect:A,placeholder:"Search fund by name, code, or category..."})}),N&&a.jsxs("div",{className:"bg-[var(--bg-inset)] rounded-lg px-3 py-2 border border-[var(--border-light)]",children:[a.jsx("p",{className:"text-xs text-[var(--text-dim)]",children:"Existing holding  will average out"}),a.jsxs("p",{className:"text-xs text-[var(--text-muted)]",children:["Current: ",a.jsx("span",{className:"font-semibold text-[var(--text-primary)]",children:N.units.toFixed(2)})," units @ ",N.avgNav.toFixed(2)," avg NAV | Value: ",G(N.currentValue),N.targetAllocationPct>0&&a.jsxs("span",{children:["  Target: ",N.targetAllocationPct.toFixed(1),"%"]})]})]}),y&&a.jsxs("div",{className:"bg-violet-500/10 rounded-lg px-3 py-2 border border-violet-500/20",children:[a.jsx("p",{className:"text-xs text-violet-400 font-semibold",children:"New fund  will be added to portfolio"}),a.jsx("p",{className:"text-xs text-violet-300/70 mt-0.5",children:"Use Allocations to plan how much to invest before buying"})]}),a.jsx(X,{label:"Date",required:!0,error:j.date,children:a.jsx(ce,{type:"date",value:v.date,onChange:q=>z("date",q)})}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsx(X,{label:"Units",required:!0,error:j.units,children:a.jsx(ce,{type:"number",value:v.units,onChange:q=>z("units",q),placeholder:"e.g., 150.50"})}),a.jsx(X,{label:"NAV ( per unit)",required:!0,error:j.price,children:a.jsx(ce,{type:"number",value:v.price,onChange:q=>z("price",q),placeholder:"e.g., 178.45"})})]}),w>0&&a.jsxs("div",{className:"bg-[var(--bg-inset)] rounded-lg px-3 py-2 border border-[var(--border-light)]",children:[a.jsx("p",{className:"text-xs text-[var(--text-dim)]",children:"Total Amount"}),a.jsx("p",{className:"text-sm font-bold text-[var(--text-primary)] tabular-nums",children:G(w)}),N&&a.jsxs("p",{className:"text-xs text-[var(--text-dim)] mt-0.5",children:["New avg NAV: ",((N.investment+w)/(N.units+Number(v.units))).toFixed(2)," Total units: ",(N.units+Number(v.units)).toFixed(2)]})]}),a.jsx(X,{label:"Notes",children:a.jsx(ce,{value:v.notes,onChange:q=>z("notes",q),placeholder:"Optional notes..."})}),a.jsx(Dt,{onCancel:u,onSubmit:I,submitLabel:v.transactionType==="SIP"?"Record SIP":v.transactionType==="LUMPSUM"?"Record Lumpsum":"Add Holdings",loading:M})]})}function A5({portfolioId:n,onSave:o,onCancel:c}){const{mfPortfolios:u,mfHoldings:x}=Re(),{selectedMember:m}=At(),h=g.useMemo(()=>{const D=u.filter($=>$.status==="Active");return m==="all"?D:D.filter($=>$.ownerId===m)},[u,m]),[f,v]=g.useState({portfolioId:n||"",fundCode:"",fundName:"",date:new Date().toISOString().split("T")[0],units:"",price:"",notes:""}),[d,j]=g.useState({}),[S,M]=g.useState(!1);function k(D,$){v(P=>({...P,[D]:$})),j(P=>({...P,[D]:void 0}))}const z=g.useMemo(()=>f.portfolioId?x.filter(D=>D.portfolioId===f.portfolioId&&D.units>0):[],[x,f.portfolioId]),A=z.find(D=>D.schemeCode===f.fundCode);function N(D){const $=z.find(P=>P.schemeCode===D);v(P=>({...P,fundCode:D,fundName:$?.fundName||"",price:$?.currentNav?.toString()||""})),j(P=>({...P,fundCode:void 0}))}function y(D){v($=>({...$,portfolioId:D,fundCode:"",fundName:"",units:"",price:""})),j($=>({...$,portfolioId:void 0}))}const w=g.useMemo(()=>(Number(f.units)||0)*(Number(f.price)||0),[f.units,f.price]),p=A?w-Number(f.units)*A.avgNav:0;function I(){const D={};return f.portfolioId||(D.portfolioId="Required"),f.fundCode||(D.fundCode="Required"),f.date||(D.date="Required"),(!f.units||Number(f.units)<=0)&&(D.units="Must be > 0"),A&&Number(f.units)>A.units&&(D.units=`Max ${A.units.toFixed(2)} units`),(!f.price||Number(f.price)<=0)&&(D.price="Must be > 0"),j(D),Object.keys(D).length===0}async function J(){if(I()){M(!0);try{await o(f)}finally{M(!1)}}}const q=h.map(D=>({value:D.portfolioId,label:`${D.portfolioName} (${D.ownerName})`})),Z=z.map(D=>({value:D.schemeCode,label:`${D.fundName}`}));return a.jsxs("div",{className:"space-y-4",children:[a.jsx(X,{label:"Portfolio",required:!0,error:d.portfolioId,children:a.jsx(Me,{value:f.portfolioId,onChange:y,options:q,placeholder:"Select portfolio..."})}),a.jsx(X,{label:"Fund to Redeem",required:!0,error:d.fundCode,children:a.jsx(Me,{value:f.fundCode,onChange:N,options:Z,placeholder:f.portfolioId?z.length?"Select fund...":"No holdings":"Select portfolio first..."})}),A&&a.jsxs("div",{className:"bg-[var(--bg-inset)] rounded-lg px-3 py-2 border border-[var(--border-light)]",children:[a.jsx("p",{className:"text-xs text-[var(--text-dim)]",children:A.fundName}),a.jsxs("p",{className:"text-xs text-[var(--text-muted)]",children:["Available: ",a.jsx("span",{className:"font-semibold text-[var(--text-primary)]",children:A.units.toFixed(2)})," units @ ",A.avgNav.toFixed(2)," avg | Current NAV: ",A.currentNav.toFixed(2)]})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsx(X,{label:"Redemption Date",required:!0,error:d.date,children:a.jsx(ce,{type:"date",value:f.date,onChange:D=>k("date",D)})}),a.jsx(X,{label:"Units to Redeem",required:!0,error:d.units,children:a.jsx(ce,{type:"number",value:f.units,onChange:D=>k("units",D),placeholder:A?`Max: ${A.units.toFixed(2)}`:""})})]}),a.jsx(X,{label:"Redemption NAV ()",required:!0,error:d.price,children:a.jsx(ce,{type:"number",value:f.price,onChange:D=>k("price",D),placeholder:"e.g., 178.45"})}),w>0&&a.jsx("div",{className:"bg-[var(--bg-inset)] rounded-lg px-3 py-2 border border-[var(--border-light)]",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-[var(--text-dim)]",children:"Redemption Amount"}),a.jsx("p",{className:"text-sm font-bold text-[var(--text-primary)] tabular-nums",children:G(w)})]}),A&&a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-xs text-[var(--text-dim)]",children:"Est. Gain/Loss"}),a.jsxs("p",{className:`text-sm font-bold tabular-nums ${p>=0?"text-emerald-400":"text-[var(--accent-rose)]"}`,children:[p>=0?"+":"",G(p)]})]})]})}),a.jsx(X,{label:"Notes",children:a.jsx(ce,{value:f.notes,onChange:D=>k("notes",D),placeholder:"Optional notes..."})}),a.jsx(Dt,{onCancel:c,onSubmit:J,submitLabel:"Redeem",loading:S})]})}function M5({portfolioId:n,onSave:o,onCancel:c}){const{mfPortfolios:u,mfHoldings:x}=Re(),{selectedMember:m}=At(),h=g.useMemo(()=>{const E=u.filter(fe=>fe.status==="Active");return m==="all"?E:E.filter(fe=>fe.ownerId===m)},[u,m]),[f,v]=g.useState({portfolioId:n||"",fromFundCode:"",fromFundName:"",toFundCode:"",toFundName:"",date:new Date().toISOString().split("T")[0],units:"",fromPrice:"",toPrice:"",targetAllocation:"",notes:""}),[d,j]=g.useState({}),[S,M]=g.useState(!1);function k(E,fe){v(W=>({...W,[E]:fe})),j(W=>({...W,[E]:void 0}))}function z(E){v(fe=>({...fe,portfolioId:E,fromFundCode:"",fromFundName:"",toFundCode:"",toFundName:"",units:"",fromPrice:"",toPrice:"",targetAllocation:""})),j(fe=>({...fe,portfolioId:void 0}))}const A=g.useMemo(()=>f.portfolioId?x.filter(E=>E.portfolioId===f.portfolioId&&E.units>0):[],[x,f.portfolioId]),N=A.find(E=>E.schemeCode===f.fromFundCode),y=g.useMemo(()=>!f.portfolioId||!f.toFundCode?null:x.find(E=>E.portfolioId===f.portfolioId&&E.schemeCode===f.toFundCode),[x,f.portfolioId,f.toFundCode]),w=f.toFundCode&&!y;function p(E){const fe=A.find(W=>W.schemeCode===E);v(W=>({...W,fromFundCode:E,fromFundName:fe?.fundName||"",fromPrice:fe?.currentNav?.toString()||""})),j(W=>({...W,fromFundCode:void 0}))}function I({schemeCode:E,fundName:fe}){const W=x.find(se=>se.portfolioId===f.portfolioId&&se.schemeCode===E);v(se=>({...se,toFundCode:E,toFundName:fe,toPrice:W?.currentNav?.toString()||se.toPrice,targetAllocation:""})),j(se=>({...se,toFundCode:void 0}))}const J=g.useMemo(()=>(Number(f.units)||0)*(Number(f.fromPrice)||0),[f.units,f.fromPrice]),q=J>0&&Number(f.toPrice)>0?J/Number(f.toPrice):0,Z=N?J-Number(f.units)*N.avgNav:0;function D(){const E={};return f.portfolioId||(E.portfolioId="Required"),f.fromFundCode||(E.fromFundCode="Required"),f.toFundCode||(E.toFundCode="Required"),f.fromFundCode&&f.toFundCode&&f.fromFundCode===f.toFundCode&&(E.toFundCode="Must be different from source fund"),f.date||(E.date="Required"),(!f.units||Number(f.units)<=0)&&(E.units="Must be > 0"),N&&Number(f.units)>N.units&&(E.units=`Max ${N.units.toFixed(2)} units`),(!f.fromPrice||Number(f.fromPrice)<=0)&&(E.fromPrice="Must be > 0"),(!f.toPrice||Number(f.toPrice)<=0)&&(E.toPrice="Must be > 0"),j(E),Object.keys(E).length===0}async function $(){if(D()){M(!0);try{await o(f)}finally{M(!1)}}}const P=h.map(E=>({value:E.portfolioId,label:`${E.portfolioName} (${E.ownerName})`})),le=A.map(E=>({value:E.schemeCode,label:E.fundName}));return a.jsxs("div",{className:"space-y-4",children:[a.jsx(X,{label:"Portfolio",required:!0,error:d.portfolioId,children:a.jsx(Me,{value:f.portfolioId,onChange:z,options:P,placeholder:"Select portfolio..."})}),a.jsx(X,{label:"Switch From (Sell)",required:!0,error:d.fromFundCode,children:a.jsx(Me,{value:f.fromFundCode,onChange:p,options:le,placeholder:f.portfolioId?A.length?"Select fund to switch from...":"No holdings":"Select portfolio first..."})}),N&&a.jsxs("div",{className:"bg-[var(--bg-inset)] rounded-lg px-3 py-2 border border-[var(--border-light)]",children:[a.jsx("p",{className:"text-xs text-[var(--text-dim)]",children:N.fundName}),a.jsxs("p",{className:"text-xs text-[var(--text-muted)]",children:["Available: ",a.jsx("span",{className:"font-semibold text-[var(--text-primary)]",children:N.units.toFixed(2)})," units @ ",N.avgNav.toFixed(2)," avg | Current NAV: ",N.currentNav.toFixed(2)]})]}),a.jsx(X,{label:"Switch To (Buy)",required:!0,error:d.toFundCode,children:a.jsx(Cd,{value:f.toFundCode?{schemeCode:f.toFundCode,fundName:f.toFundName}:null,onSelect:I,placeholder:"Search fund to switch into...",disabled:!f.portfolioId})}),y&&a.jsxs("div",{className:"bg-[var(--bg-inset)] rounded-lg px-3 py-2 border border-[var(--border-light)]",children:[a.jsx("p",{className:"text-xs text-[var(--text-dim)]",children:"Existing holding  units will be added, NAV averaged out"}),a.jsxs("p",{className:"text-xs text-[var(--text-muted)]",children:["Current: ",a.jsx("span",{className:"font-semibold text-[var(--text-primary)]",children:y.units.toFixed(2)})," units @ ",y.avgNav.toFixed(2)," avg | Alloc: ",y.targetAllocationPct.toFixed(1),"%"]})]}),w&&f.toFundCode&&a.jsx("div",{className:"bg-violet-500/10 rounded-lg px-3 py-2 border border-violet-500/20",children:a.jsx("p",{className:"text-xs text-violet-400 font-semibold",children:"New fund  will be added to portfolio"})}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsx(X,{label:"Switch Date",required:!0,error:d.date,children:a.jsx(ce,{type:"date",value:f.date,onChange:E=>k("date",E)})}),a.jsx(X,{label:"Units to Switch",required:!0,error:d.units,children:a.jsx(ce,{type:"number",value:f.units,onChange:E=>k("units",E),placeholder:N?`Max: ${N.units.toFixed(2)}`:""})})]}),a.jsxs("div",{className:`grid grid-cols-1 ${w?"sm:grid-cols-3":"sm:grid-cols-2"} gap-4`,children:[a.jsx(X,{label:"From Fund NAV ()",required:!0,error:d.fromPrice,children:a.jsx(ce,{type:"number",value:f.fromPrice,onChange:E=>k("fromPrice",E),placeholder:"e.g., 178.45"})}),a.jsx(X,{label:"To Fund NAV ()",required:!0,error:d.toPrice,children:a.jsx(ce,{type:"number",value:f.toPrice,onChange:E=>k("toPrice",E),placeholder:"e.g., 82.10"})}),w&&a.jsx(X,{label:"Target Allocation (%)",children:a.jsx(ce,{type:"number",value:f.targetAllocation,onChange:E=>k("targetAllocation",E),placeholder:"e.g., 20"})})]}),J>0&&a.jsxs("div",{className:"bg-[var(--bg-inset)] rounded-lg px-3 py-2 border border-[var(--border-light)]",children:[a.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-2",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-[var(--text-dim)]",children:"Switch Amount"}),a.jsx("p",{className:"text-sm font-bold text-[var(--text-primary)] tabular-nums",children:G(J)})]}),q>0&&a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-xs text-[var(--text-dim)]",children:"Units Bought"}),a.jsx("p",{className:"text-sm font-bold text-[var(--text-primary)] tabular-nums",children:q.toFixed(4)})]}),N&&a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-xs text-[var(--text-dim)]",children:"Est. Gain/Loss"}),a.jsxs("p",{className:`text-sm font-bold tabular-nums ${Z>=0?"text-emerald-400":"text-[var(--accent-rose)]"}`,children:[Z>=0?"+":"",G(Z)]})]})]}),y&&q>0&&a.jsxs("p",{className:"text-xs text-[var(--text-dim)] mt-1 border-t border-[var(--border-light)] pt-1",children:["New total: ",(y.units+q).toFixed(2)," units  New avg NAV: ",((y.investment+J)/(y.units+q)).toFixed(2)]})]}),a.jsx(X,{label:"Notes",children:a.jsx(ce,{value:f.notes,onChange:E=>k("notes",E),placeholder:"Optional notes..."})}),a.jsx(Dt,{onCancel:c,onSubmit:$,submitLabel:"Switch Funds",loading:S})]})}function T5({portfolioId:n,onSave:o,onCancel:c}){const{mfHoldings:u,mfPortfolios:x}=Re(),m=x.find(T=>T.portfolioId===n),h=g.useMemo(()=>u.filter(T=>T.portfolioId===n),[u,n]),[f,v]=g.useState(()=>h.map(T=>({schemeCode:T.schemeCode,fundName:T.fundName,units:T.units,currentValue:T.currentValue,currentAllocationPct:T.currentAllocationPct,targetAllocationPct:T.targetAllocationPct,isNew:!1}))),[d,j]=g.useState(null),[S,M]=g.useState(""),[k,z]=g.useState(""),[A,N]=g.useState(!1),[y,w]=g.useState(""),p=f.reduce((T,O)=>T+O.targetAllocationPct,0),I=f.reduce((T,O)=>T+O.currentValue,0),J=(m?.rebalanceThreshold||.05)*100;function q(T,O){v(ie=>ie.map(ue=>ue.schemeCode===T?{...ue,targetAllocationPct:Number(O)||0}:ue)),z("")}function Z(T){const O=f.find(ie=>ie.schemeCode===T);O&&O.units>0||v(ie=>ie.filter(ue=>ue.schemeCode!==T))}function D(){if(d){if(f.find(T=>T.schemeCode===d.schemeCode)){z("Fund already exists in portfolio");return}v(T=>[...T,{schemeCode:d.schemeCode,fundName:d.fundName,units:0,currentValue:0,currentAllocationPct:0,targetAllocationPct:Number(S)||0,isNew:!0}]),j(null),M(""),z("")}}async function $(){if(p>100){z(`Total allocation is ${p.toFixed(1)}%  must be  100%`);return}N(!0);try{await o(f.map(T=>({schemeCode:T.schemeCode,fundName:T.fundName,targetAllocationPct:T.targetAllocationPct,isNew:T.isNew})))}finally{N(!1)}}const P=f.map(T=>{const O=I>0?T.targetAllocationPct/100*I:0,ie=O-T.currentValue;return{...T,targetValue:O,gap:ie}}),le=m?.sipTarget||0,E=f.map(T=>({...T,sipAmount:le>0?T.targetAllocationPct/100*le:0})),fe=Number(y)||m?.lumpsumTarget||0,W=g.useMemo(()=>{if(fe<=0)return[];const T=I+fe,O=f.map(ue=>{const R=Math.abs(ue.currentAllocationPct-ue.targetAllocationPct),ee=R>J,oe=ue.targetAllocationPct/100*T,de=Math.max(0,oe-ue.currentValue),je=ue.targetAllocationPct/100*fe,_=ee?de:je,te=ue.currentValue+_,he=T>0?te/T*100:0;return{...ue,allocation:_,simpleAllocation:je,smartAllocation:de,needsRebalance:ee,deviation:R,newValue:te,newPct:he}}),ie=O.reduce((ue,R)=>ue+R.allocation,0);if(ie>0&&Math.abs(ie-fe)>1){const ue=fe/ie;O.forEach(R=>{R.allocation=R.allocation*ue,R.newValue=R.currentValue+R.allocation,R.newPct=T>0?R.newValue/T*100:0})}return O},[f,fe,I,J]),[se,F]=g.useState("allocations");return a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"bg-[var(--bg-inset)] rounded-lg px-3 py-2 border border-[var(--border-light)]",children:[a.jsx("p",{className:"text-xs font-semibold text-[var(--text-primary)]",children:m?.portfolioName}),a.jsxs("div",{className:"flex items-center gap-3 text-xs text-[var(--text-dim)] mt-0.5 flex-wrap",children:[a.jsxs("span",{children:["Current Value: ",a.jsx("span",{className:"font-semibold text-[var(--text-primary)]",children:G(I)})]}),le>0&&a.jsxs("span",{children:["SIP Target: ",G(le),"/mo"]}),m?.lumpsumTarget>0&&a.jsxs("span",{children:["Lumpsum: ",G(m.lumpsumTarget)]}),a.jsxs("span",{children:["Rebalance Threshold: ",J.toFixed(0),"%"]})]})]}),a.jsx("div",{className:"flex items-center gap-1 bg-[var(--bg-inset)] rounded-lg p-0.5 overflow-x-auto",children:[{id:"allocations",label:"Allocations"},{id:"gap",label:"Gap Analysis"},{id:"sip",label:"SIP Plan"},{id:"rebalance",label:"Rebalance Lumpsum"}].map(T=>a.jsx("button",{onClick:()=>F(T.id),className:`px-3 py-1.5 text-xs font-semibold rounded-md transition-colors whitespace-nowrap ${se===T.id?"bg-[var(--bg-card)] text-[var(--text-primary)] shadow-sm":"text-[var(--text-muted)] hover:text-[var(--text-secondary)]"}`,children:T.label},T.id))}),se==="allocations"&&a.jsxs("div",{className:"space-y-3",children:[a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full text-sm",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b border-[var(--border-light)]",children:[a.jsx("th",{className:"text-left py-1.5 px-2 text-xs text-[var(--text-muted)] font-semibold",children:"Fund"}),a.jsx("th",{className:"text-right py-1.5 px-2 text-xs text-[var(--text-muted)] font-semibold",children:"Units"}),a.jsx("th",{className:"text-right py-1.5 px-2 text-xs text-[var(--text-muted)] font-semibold",children:"Current %"}),a.jsx("th",{className:"text-center py-1.5 px-2 text-xs text-[var(--text-muted)] font-semibold",children:"Target %"}),a.jsx("th",{className:"text-center py-1.5 px-2 text-xs text-[var(--text-muted)] font-semibold w-8"})]})}),a.jsx("tbody",{children:f.map(T=>{const O=T.isNew&&T.targetAllocationPct>0&&T.targetAllocationPct<100&&I>0?T.targetAllocationPct/(100-T.targetAllocationPct)*I:0,ie=T.isNew&&T.targetAllocationPct>0&&le>0?T.targetAllocationPct/100*le:0;return a.jsxs("tr",{className:"border-b border-[var(--border-light)] last:border-0",children:[a.jsxs("td",{className:"py-2 px-2",children:[a.jsx("p",{className:"text-xs text-[var(--text-primary)] leading-tight max-w-[200px] truncate",children:T.fundName}),a.jsxs("p",{className:"text-xs text-[var(--text-dim)]",children:[T.schemeCode,T.isNew&&a.jsx("span",{className:"text-violet-400 ml-1",children:"(new)"})]}),(O>0||ie>0)&&a.jsxs("p",{className:"text-xs text-blue-400 mt-0.5",children:["Invest: ",O>0&&a.jsx("span",{className:"font-semibold",children:G(O)}),O>0&&ie>0&&"  ",ie>0&&a.jsxs("span",{className:"font-semibold",children:[G(ie),"/mo SIP"]})]})]}),a.jsx("td",{className:"py-2 px-2 text-right text-xs text-[var(--text-secondary)] tabular-nums",children:T.units.toFixed(2)}),a.jsxs("td",{className:"py-2 px-2 text-right text-xs text-[var(--text-secondary)] tabular-nums",children:[T.currentAllocationPct.toFixed(1),"%"]}),a.jsx("td",{className:"py-2 px-2",children:a.jsx("input",{type:"number",value:T.targetAllocationPct,onChange:ue=>q(T.schemeCode,ue.target.value),className:"w-20 mx-auto block bg-[var(--bg-inset)] border border-[var(--border)] rounded px-2 py-1 text-xs text-center text-[var(--text-primary)] focus:outline-none focus:border-violet-500/50"})}),a.jsx("td",{className:"py-2 px-2 text-center",children:T.units===0&&a.jsx("button",{onClick:()=>Z(T.schemeCode),className:"p-1 rounded hover:bg-rose-500/15 text-[var(--text-dim)] hover:text-[var(--accent-rose)] transition-colors",children:a.jsx(Sd,{size:12})})})]},T.schemeCode)})}),a.jsx("tfoot",{children:a.jsxs("tr",{className:"border-t border-[var(--border)]",children:[a.jsx("td",{className:"py-2 px-2 text-xs font-bold text-[var(--text-primary)]",children:"Total"}),a.jsx("td",{}),a.jsxs("td",{className:"py-2 px-2 text-right text-xs font-bold text-[var(--text-primary)] tabular-nums",children:[f.reduce((T,O)=>T+O.currentAllocationPct,0).toFixed(1),"%"]}),a.jsx("td",{className:"py-2 px-2 text-center",children:a.jsxs("span",{className:`text-xs font-bold tabular-nums ${p>100?"text-[var(--accent-rose)]":p===100?"text-emerald-400":"text-amber-400"}`,children:[p.toFixed(1),"%"]})}),a.jsx("td",{})]})})]})}),a.jsxs("div",{className:"border-t border-[var(--border-light)] pt-3",children:[a.jsx("p",{className:"text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider mb-1",children:"Add New Fund"}),a.jsx("p",{className:"text-xs text-[var(--text-dim)] mb-2",children:"Set target % to see how much to invest. After buying, use Invest to record the transaction."}),a.jsxs("div",{className:"flex items-end gap-2",children:[a.jsx("div",{className:"flex-1",children:a.jsx(Cd,{value:d,onSelect:T=>j(T.schemeCode?T:null),placeholder:"Search fund to add..."})}),a.jsx("div",{className:"w-20",children:a.jsx(ce,{type:"number",value:S,onChange:M,placeholder:"%"})}),a.jsxs("button",{onClick:D,disabled:!d,className:"shrink-0 flex items-center gap-1 px-3 py-2 text-xs font-semibold text-violet-400 hover:text-violet-300 bg-[var(--bg-card)] border border-[var(--border)] rounded-lg transition-colors disabled:opacity-40 disabled:cursor-not-allowed",children:[a.jsx(aa,{size:14})," Add"]})]})]})]}),se==="gap"&&a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full text-sm",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b border-[var(--border-light)]",children:[a.jsx("th",{className:"text-left py-1.5 px-2 text-xs text-[var(--text-muted)] font-semibold",children:"Fund"}),a.jsx("th",{className:"text-right py-1.5 px-2 text-xs text-[var(--text-muted)] font-semibold",children:"Current Value"}),a.jsxs("th",{className:"text-right py-1.5 px-2 text-xs text-[var(--text-muted)] font-semibold",children:[a.jsx("div",{children:"Allocation"}),a.jsx("div",{className:"text-[10px] font-medium text-[var(--text-dim)]",children:"Curr / Target"})]}),a.jsx("th",{className:"text-right py-1.5 px-2 text-xs text-[var(--text-muted)] font-semibold",children:"Target Value"}),a.jsx("th",{className:"text-right py-1.5 px-2 text-xs text-[var(--text-muted)] font-semibold",children:"Gap"})]})}),a.jsx("tbody",{children:P.map(T=>a.jsxs("tr",{className:"border-b border-[var(--border-light)] last:border-0",children:[a.jsx("td",{className:"py-2 px-2 text-xs text-[var(--text-primary)] max-w-[180px] truncate",children:T.fundName}),a.jsx("td",{className:"py-2 px-2 text-right text-xs text-[var(--text-secondary)] tabular-nums",children:G(T.currentValue)}),a.jsxs("td",{className:"py-2 px-2 text-right",children:[a.jsxs("span",{className:"text-xs text-[var(--text-secondary)] tabular-nums",children:[T.currentAllocationPct.toFixed(1),"%"]}),a.jsxs("span",{className:"text-xs text-[var(--text-dim)]",children:[" / ",T.targetAllocationPct.toFixed(1),"%"]})]}),a.jsx("td",{className:"py-2 px-2 text-right text-xs text-[var(--text-secondary)] tabular-nums",children:G(T.targetValue)}),a.jsx("td",{className:"py-2 px-2 text-right",children:a.jsxs("span",{className:`text-xs font-semibold tabular-nums ${T.gap>=0?"text-emerald-400":"text-[var(--accent-rose)]"}`,children:[T.gap>=0?"+":"",G(T.gap)]})})]},T.schemeCode))})]})}),se==="sip"&&a.jsx("div",{className:"space-y-2",children:le>0?a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full text-sm",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b border-[var(--border-light)]",children:[a.jsx("th",{className:"text-left py-1.5 px-2 text-xs text-[var(--text-muted)] font-semibold",children:"Fund"}),a.jsxs("th",{className:"text-right py-1.5 px-2 text-xs text-[var(--text-muted)] font-semibold",children:[a.jsx("div",{children:"Allocation"}),a.jsx("div",{className:"text-[10px] font-medium text-[var(--text-dim)]",children:"Curr / Target"})]}),a.jsx("th",{className:"text-right py-1.5 px-2 text-xs text-[var(--text-muted)] font-semibold",children:"Monthly SIP"})]})}),a.jsx("tbody",{children:E.filter(T=>T.targetAllocationPct>0).map(T=>a.jsxs("tr",{className:"border-b border-[var(--border-light)] last:border-0",children:[a.jsx("td",{className:"py-2 px-2 text-xs text-[var(--text-primary)] max-w-[200px] truncate",children:T.fundName}),a.jsxs("td",{className:"py-2 px-2 text-right",children:[a.jsxs("span",{className:"text-xs text-[var(--text-secondary)] tabular-nums",children:[T.currentAllocationPct.toFixed(1),"%"]}),a.jsxs("span",{className:"text-xs text-[var(--text-dim)]",children:[" / ",T.targetAllocationPct.toFixed(1),"%"]})]}),a.jsx("td",{className:"py-2 px-2 text-right text-xs font-semibold text-blue-400 tabular-nums",children:G(T.sipAmount)})]},T.schemeCode))}),a.jsx("tfoot",{children:a.jsxs("tr",{className:"border-t border-[var(--border)]",children:[a.jsx("td",{className:"py-2 px-2 text-xs font-bold text-[var(--text-primary)]",children:"Total"}),a.jsx("td",{}),a.jsx("td",{className:"py-2 px-2 text-right text-xs font-bold text-blue-400 tabular-nums",children:G(le)})]})})]})}):a.jsx("p",{className:"text-xs text-[var(--text-muted)] text-center py-4",children:"No SIP target set for this portfolio. Edit portfolio to set one."})}),se==="rebalance"&&a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-end gap-3",children:[a.jsx("div",{className:"flex-1",children:a.jsx(X,{label:"Lumpsum Amount ()",children:a.jsx(ce,{type:"number",value:y,onChange:w,placeholder:m?.lumpsumTarget?`Default: ${G(m.lumpsumTarget)}`:"Enter amount to invest..."})})}),m?.lumpsumTarget>0&&!y&&a.jsx("p",{className:"text-xs text-[var(--text-dim)] pb-2",children:"Using portfolio lumpsum target"})]}),fe>0?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"bg-violet-500/10 rounded-lg px-3 py-2 border border-violet-500/20",children:a.jsxs("p",{className:"text-xs text-violet-300 leading-relaxed",children:["Smart rebalance: Funds deviating >",J.toFixed(0),"% from target get adjusted allocation. Overweight funds get 0. Underweight funds get more to bring them toward target."]})}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full text-sm",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b border-[var(--border-light)]",children:[a.jsx("th",{className:"text-left py-1.5 px-2 text-xs text-[var(--text-muted)] font-semibold",children:"Fund"}),a.jsxs("th",{className:"text-right py-1.5 px-2 text-xs text-[var(--text-muted)] font-semibold",children:[a.jsx("div",{children:"Allocation"}),a.jsx("div",{className:"text-[10px] font-medium text-[var(--text-dim)]",children:"Curr  After"})]}),a.jsx("th",{className:"text-right py-1.5 px-2 text-xs text-[var(--text-muted)] font-semibold",children:"Current Value"}),a.jsx("th",{className:"text-right py-1.5 px-2 text-xs text-[var(--text-muted)] font-semibold",children:"Invest"}),a.jsx("th",{className:"text-right py-1.5 px-2 text-xs text-[var(--text-muted)] font-semibold",children:"After Value"})]})}),a.jsx("tbody",{children:W.map(T=>{const O=T.allocation<1;return a.jsxs("tr",{className:`border-b border-[var(--border-light)] last:border-0 ${O?"opacity-50":""}`,children:[a.jsxs("td",{className:"py-2 px-2",children:[a.jsx("p",{className:"text-xs text-[var(--text-primary)] max-w-[160px] truncate",children:T.fundName}),T.needsRebalance&&a.jsxs("span",{className:"text-xs text-amber-400 font-semibold",children:[T.currentAllocationPct>T.targetAllocationPct?"overweight":"underweight"," (",T.deviation.toFixed(1),"%)"]})]}),a.jsxs("td",{className:"py-2 px-2 text-right",children:[a.jsxs("span",{className:"text-xs text-[var(--text-secondary)] tabular-nums",children:[T.currentAllocationPct.toFixed(1),"%"]}),a.jsx("span",{className:"text-xs text-[var(--text-dim)]",children:"  "}),a.jsxs("span",{className:`text-xs font-semibold tabular-nums ${Math.abs(T.newPct-T.targetAllocationPct)<J?"text-emerald-400":"text-amber-400"}`,children:[T.newPct.toFixed(1),"%"]}),a.jsxs("p",{className:"text-xs text-[var(--text-dim)]",children:["target: ",T.targetAllocationPct.toFixed(1),"%"]})]}),a.jsx("td",{className:"py-2 px-2 text-right text-xs text-[var(--text-secondary)] tabular-nums",children:G(T.currentValue)}),a.jsx("td",{className:"py-2 px-2 text-right",children:T.allocation>=1?a.jsx("span",{className:"text-xs font-bold text-emerald-400 tabular-nums",children:G(T.allocation)}):a.jsx("span",{className:"text-xs text-[var(--text-dim)]",children:"0"})}),a.jsx("td",{className:"py-2 px-2 text-right text-xs text-[var(--text-secondary)] tabular-nums",children:G(T.newValue)})]},T.schemeCode)})}),a.jsx("tfoot",{children:a.jsxs("tr",{className:"border-t border-[var(--border)]",children:[a.jsx("td",{className:"py-2 px-2 text-xs font-bold text-[var(--text-primary)]",children:"Total"}),a.jsx("td",{}),a.jsx("td",{className:"py-2 px-2 text-right text-xs font-bold text-[var(--text-primary)] tabular-nums",children:G(I)}),a.jsx("td",{className:"py-2 px-2 text-right text-xs font-bold text-emerald-400 tabular-nums",children:G(fe)}),a.jsx("td",{className:"py-2 px-2 text-right text-xs font-bold text-[var(--text-primary)] tabular-nums",children:G(I+fe)})]})})]})})]}):a.jsx("p",{className:"text-xs text-[var(--text-muted)] text-center py-4",children:"Enter an amount above to see rebalance distribution."})]}),k&&a.jsx("p",{className:"text-xs text-[var(--accent-rose)] font-medium",children:k}),a.jsx(Dt,{onCancel:c,onSubmit:$,submitLabel:"Save Allocations",loading:A})]})}const sr=n=>n?.replace(/^PFL-/,"")||n;function fp(n){return n>=20?{color:"#c62828",fontWeight:700}:n>=10?{color:"#d84315",fontWeight:700}:n>=5?{color:"#e67e00",fontWeight:400}:n>=1?{color:"#b8860b",fontWeight:400}:{color:"var(--text-dim)",fontWeight:400}}function k5(){const{selectedMember:n}=At(),{mfPortfolios:o,mfHoldings:c,mfTransactions:u,activeMembers:x,activeInvestmentAccounts:m,addMFPortfolio:h,updateMFPortfolio:f,deleteMFPortfolio:v,investMF:d,redeemMF:j,switchMF:S,updateHoldingAllocations:M}=Re(),{showToast:k,showBlockUI:z,hideBlockUI:A}=za(),{mv:N}=Ra(),[y,w]=g.useState(null),[p,I]=g.useState("all"),[J,q]=g.useState("holdings"),[Z,D]=g.useState(!1),$=g.useMemo(()=>o?o.filter(_=>_.status!=="Inactive").map(_=>{let te=m.find(me=>me.accountId===_.investmentAccountId);!te&&_.investmentAccountId&&(te=m.find(me=>`${me.accountName} - ${me.platformBroker}`===_.investmentAccountId));const he=te?.memberId||_.ownerId||"",pe=he?x.find(me=>me.memberId===he):null;return{..._,investmentAccountId:te?.accountId||_.investmentAccountId,ownerId:he,ownerName:pe?.memberName||_.ownerName||"",platform:te?.platformBroker||_.investmentAccountName||"",clientId:te?.accountClientId||""}}):[],[o,m,x]),P=g.useMemo(()=>$.length?n==="all"?$:$.filter(_=>_.ownerId===n):[],[$,n]),le=g.useMemo(()=>c?P.map(_=>{const te=c.filter(pe=>pe.portfolioId===_.portfolioId),he=(u||[]).filter(pe=>pe.portfolioId===_.portfolioId);return{..._,holdings:te,txns:he,fundCount:te.length}}):[],[P,c,u]),E=g.useMemo(()=>{const _=p==="all"?le:le.filter(Pe=>Pe.portfolioId===p),te=_.reduce((Pe,Ie)=>Pe+Ie.totalInvestment,0),he=_.reduce((Pe,Ie)=>Pe+Ie.currentValue,0),pe=_.reduce((Pe,Ie)=>Pe+Ie.unrealizedPL,0),me=_.reduce((Pe,Ie)=>Pe+Ie.realizedPL,0),Se=pe+me,Oe=te>0?Se/te*100:0,Ue=te>0?pe/te*100:0,$e=te>0?me/te*100:0,st=_.reduce((Pe,Ie)=>Pe+Ie.fundCount,0),zt=(c?p==="all"?c.filter(Pe=>_.some(Ie=>Ie.portfolioId===Pe.portfolioId)):c.filter(Pe=>Pe.portfolioId===p):[]).reduce((Pe,Ie)=>Pe+(Ie.sipAmount||0),0);return{invested:te,current:he,unrealizedPL:pe,unrealizedPLPct:Ue,realizedPL:me,realizedPLPct:$e,totalPL:Se,totalPLPct:Oe,funds:st,monthlySIP:zt}},[le,p,c]),fe=g.useMemo(()=>c?p==="all"?c.filter(_=>P.some(te=>te.portfolioId===_.portfolioId)):c.filter(_=>_.portfolioId===p):[],[c,P,p]),W=g.useMemo(()=>u?(p==="all"?u.filter(te=>P.some(he=>he.portfolioId===te.portfolioId)):u.filter(te=>te.portfolioId===p)).sort((te,he)=>new Date(he.date)-new Date(te.date)):[],[u,P,p]),se=g.useMemo(()=>{const _={};return fe.forEach(te=>{_[te.portfolioId]=(_[te.portfolioId]||0)+te.currentValue}),fe.map(te=>{const he=_[te.portfolioId]||0,pe=he>0?te.currentValue/he*100:0;return{...te,currentAllocationPct:pe}})},[fe]),F=g.useMemo(()=>{if(!c)return{};const _={};return le.forEach(te=>{const he=c.filter(Ue=>Ue.portfolioId===te.portfolioId&&Ue.units>0),pe=he.reduce((Ue,$e)=>Ue+$e.currentValue,0),me=(te.rebalanceThreshold||.05)*100;let Se=0,Oe=0;he.forEach(Ue=>{Ue.athNav>0&&Ue.belowATHPct>=5&&Se++;const $e=pe>0?Ue.currentValue/pe*100:0;Math.abs($e-Ue.targetAllocationPct)>me&&Oe++}),_[te.portfolioId]={buyOpp:Se,rebalance:Oe}}),_},[le,c]),T=g.useMemo(()=>{if(p!=="all")return F[p]||{buyOpp:0,rebalance:0};let _=0,te=0;return Object.values(F).forEach(he=>{_+=he.buyOpp,te+=he.rebalance}),{buyOpp:_,rebalance:te}},[p,F]);if(o===null||c===null)return a.jsx(ll,{title:"Loading mutual funds",cards:5});const O=le.find(_=>_.portfolioId===p),ie=p==="all"?`All Portfolios (${P.length})`:`${sr(O?.portfolioName)}  ${O?.ownerName}`;async function ue(_){z("Saving...");try{y?.editPortfolio?await f(y.editPortfolio.portfolioId,_):await h(_),k(y?.editPortfolio?"Portfolio updated":"Portfolio created"),w(null)}catch(te){k(te.message||"Failed to save portfolio","error")}finally{A()}}async function R(){if(y?.editPortfolio&&confirm("Deactivate this portfolio?")){z("Deactivating...");try{await v(y.editPortfolio.portfolioId),k("Portfolio deactivated"),I("all"),w(null)}catch(_){k(_.message||"Failed to deactivate portfolio","error")}finally{A()}}}async function ee(_){z("Recording investment...");try{await d(_,_.transactionType),k("Investment recorded"),w(null)}catch(te){k(te.message||"Failed to record investment","error")}finally{A()}}async function oe(_){z("Recording redemption...");try{await j(_),k("Redemption recorded"),w(null)}catch(te){k(te.message||"Failed to record redemption","error")}finally{A()}}async function de(_){z("Recording switch...");try{await S(_),k("Switch recorded"),w(null)}catch(te){k(te.message||"Failed to record switch","error")}finally{A()}}async function je(_){if(y?.allocations){z("Saving allocations...");try{await M(y.allocations,_),k("Allocations updated"),w(null)}catch(te){k(te.message||"Failed to update allocations","error")}finally{A()}}}return a.jsxs("div",{className:"space-y-4",children:[P.length===0?a.jsxs("div",{className:"bg-[var(--bg-card)] rounded-xl border border-[var(--border)] py-12 flex flex-col items-center gap-3",children:[a.jsx(Ys,{size:32,className:"text-[var(--text-dim)]"}),a.jsx("p",{className:"text-sm text-[var(--text-muted)]",children:"No mutual fund portfolios yet"}),a.jsx("button",{onClick:()=>w("addPortfolio"),className:"text-xs font-semibold text-violet-400 hover:text-violet-300",children:"Create your first portfolio"})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex items-center justify-between gap-3 flex-wrap",children:[a.jsxs("div",{className:"relative",children:[a.jsxs("button",{onClick:()=>D(!Z),className:"flex items-center gap-2 bg-[var(--bg-card)] border border-[var(--border)] rounded-lg px-4 py-2.5 text-sm font-semibold text-[var(--text-primary)] hover:border-[var(--border-light)] transition-colors min-w-[220px]",children:[a.jsx(Ys,{size:14,className:"text-violet-400 shrink-0"}),a.jsx("span",{className:"truncate",children:ie}),a.jsx(Qs,{size:14,className:`text-[var(--text-dim)] shrink-0 transition-transform ${Z?"rotate-180":""}`})]}),Z&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"fixed inset-0 z-30",onClick:()=>D(!1)}),a.jsxs("div",{className:"absolute left-0 top-full mt-1 z-40 bg-[var(--bg-card)] border border-[var(--border)] rounded-lg shadow-xl min-w-[300px] py-1 overflow-hidden",children:[a.jsxs("button",{onClick:()=>{I("all"),D(!1),q("holdings")},className:`w-full text-left px-4 py-2.5 text-sm transition-colors ${p==="all"?"bg-[var(--sidebar-active-bg)] text-[var(--text-primary)] font-semibold":"text-[var(--text-secondary)] hover:bg-[var(--bg-hover)]"}`,children:["All Portfolios (",P.length,")"]}),a.jsx("div",{className:"border-t border-[var(--border-light)]"}),le.map(_=>{const te=_.totalPL>=0,he=F[_.portfolioId]||{};return a.jsx("button",{onClick:()=>{I(_.portfolioId),D(!1),q("holdings")},className:`w-full text-left px-4 py-2.5 transition-colors ${p===_.portfolioId?"bg-[var(--sidebar-active-bg)]":"hover:bg-[var(--bg-hover)]"}`,children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-1.5",children:[a.jsx("p",{className:`text-sm ${p===_.portfolioId?"font-semibold text-[var(--text-primary)]":"text-[var(--text-secondary)]"}`,children:sr(_.portfolioName)}),he.buyOpp>0&&a.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-emerald-400 shrink-0",title:`${he.buyOpp} buy opportunities`}),he.rebalance>0&&a.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-violet-400 shrink-0",title:`${he.rebalance} funds need rebalancing`})]}),a.jsxs("p",{className:"text-xs text-[var(--text-dim)]",children:[_.ownerName,"  ",_.platform,"  ",_.fundCount," funds"]})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-xs font-semibold text-[var(--text-primary)] tabular-nums",children:G(_.currentValue)}),a.jsxs("p",{className:`text-xs font-semibold tabular-nums ${te?"text-emerald-400":"text-[var(--accent-rose)]"}`,children:[te?"+":"",_.totalPLPct.toFixed(1),"%"]})]})]})},_.portfolioId)})]})]})]}),a.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[a.jsxs("button",{onClick:()=>w("buyOpp"),disabled:T.buyOpp===0,className:`flex items-center gap-1.5 px-3 py-2 text-xs font-medium rounded-lg transition-colors ${T.buyOpp>0?"text-emerald-400 hover:text-emerald-300 bg-[var(--bg-card)] border border-emerald-500/30 animate-glow-emerald":"text-[var(--text-dim)] bg-[var(--bg-card)] border border-[var(--border)] opacity-50 cursor-not-allowed"}`,children:[a.jsx(xo,{size:12})," Buy Opp.",T.buyOpp>0&&a.jsx("span",{className:"text-xs font-bold px-1.5 py-0.5 rounded-full bg-emerald-500/15",children:T.buyOpp})]}),a.jsxs("button",{onClick:()=>w("rebalance"),disabled:T.rebalance===0,className:`flex items-center gap-1.5 px-3 py-2 text-xs font-medium rounded-lg transition-colors ${T.rebalance>0?"text-violet-400 hover:text-violet-300 bg-[var(--bg-card)] border border-violet-500/30 animate-glow-violet":"text-[var(--text-dim)] bg-[var(--bg-card)] border border-[var(--border)] opacity-50 cursor-not-allowed"}`,children:[a.jsx(dr,{size:12})," Rebalance",T.rebalance>0&&a.jsx("span",{className:"text-xs font-bold px-1.5 py-0.5 rounded-full bg-violet-500/15",children:T.rebalance})]}),O&&a.jsxs(a.Fragment,{children:[a.jsxs("button",{onClick:()=>w({allocations:O.portfolioId}),className:"flex items-center gap-1.5 px-3 py-2 text-xs font-medium text-[var(--text-muted)] hover:text-[var(--text-primary)] bg-[var(--bg-card)] border border-[var(--border)] rounded-lg transition-colors",children:[a.jsx(bN,{size:12})," Allocations"]}),a.jsxs("button",{onClick:()=>w({editPortfolio:O}),className:"flex items-center gap-1.5 px-3 py-2 text-xs font-medium text-[var(--text-muted)] hover:text-[var(--text-primary)] bg-[var(--bg-card)] border border-[var(--border)] rounded-lg transition-colors",children:[a.jsx(Da,{size:12})," Edit"]})]}),a.jsxs("button",{onClick:()=>w("addPortfolio"),className:"flex items-center gap-1.5 px-3 py-2 text-xs font-semibold text-violet-400 hover:text-violet-300 bg-[var(--bg-card)] border border-[var(--border)] rounded-lg transition-colors",children:[a.jsx(aa,{size:14})," New Portfolio"]})]})]}),O&&a.jsxs("div",{className:"flex items-center gap-4 text-xs text-[var(--text-dim)] px-1 flex-wrap",children:[a.jsxs("span",{children:[a.jsx("span",{className:"font-semibold",children:"Platform:"})," ",O.platform]}),a.jsxs("span",{children:[a.jsx("span",{className:"font-semibold",children:"Client ID:"})," ",N(O.clientId,"clientId")]}),a.jsxs("span",{children:[a.jsx("span",{className:"font-semibold",children:"Funds:"})," ",O.fundCount]}),O.sipTarget>0&&a.jsxs("span",{children:[a.jsx("span",{className:"font-semibold",children:"SIP Target:"})," ",G(O.sipTarget),"/mo"]}),O.lumpsumTarget>0&&a.jsxs("span",{children:[a.jsx("span",{className:"font-semibold",children:"Lumpsum Target:"})," ",G(O.lumpsumTarget)]}),a.jsxs("span",{children:[a.jsx("span",{className:"font-semibold",children:"Rebalance Threshold:"})," ",(O.rebalanceThreshold*100).toFixed(0),"%"]})]}),a.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-6 gap-3",children:[a.jsx(qs,{label:"Invested",value:G(E.invested)}),a.jsx(qs,{label:"Current Value",value:G(E.current),bold:!0}),a.jsx(qs,{label:"Unrealized P&L",value:`${E.unrealizedPL>=0?"+":""}${G(E.unrealizedPL)}`,sub:`${E.unrealizedPLPct>=0?"+":""}${E.unrealizedPLPct.toFixed(1)}%`,positive:E.unrealizedPL>=0}),a.jsx(qs,{label:"Realized P&L",value:`${E.realizedPL>=0?"+":""}${G(E.realizedPL)}`,sub:`${E.realizedPLPct>=0?"+":""}${E.realizedPLPct.toFixed(1)}%`,positive:E.realizedPL>=0}),a.jsx(qs,{label:"Total P&L",value:`${E.totalPL>=0?"+":""}${G(E.totalPL)}`,sub:`${E.totalPLPct>=0?"+":""}${E.totalPLPct.toFixed(1)}%`,positive:E.totalPL>=0,bold:!0}),a.jsx(qs,{label:"Monthly SIP",value:G(E.monthlySIP),sub:`${E.funds} funds`})]}),a.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-2",children:[a.jsxs("div",{className:"flex items-center gap-1 bg-[var(--bg-inset)] rounded-lg p-0.5",children:[a.jsxs("button",{onClick:()=>q("holdings"),className:`flex items-center gap-1.5 px-3 py-1.5 text-xs font-semibold rounded-md transition-colors ${J==="holdings"?"bg-[var(--bg-card)] text-[var(--text-primary)] shadow-sm":"text-[var(--text-muted)] hover:text-[var(--text-secondary)]"}`,children:[a.jsx(O0,{size:12})," Holdings (",fe.length,")"]}),a.jsxs("button",{onClick:()=>q("transactions"),className:`flex items-center gap-1.5 px-3 py-1.5 text-xs font-semibold rounded-md transition-colors ${J==="transactions"?"bg-[var(--bg-card)] text-[var(--text-primary)] shadow-sm":"text-[var(--text-muted)] hover:text-[var(--text-secondary)]"}`,children:[a.jsx(no,{size:12})," Transactions (",W.length,")"]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[p==="all"&&a.jsx("span",{className:"text-xs text-[var(--text-dim)] mr-1 hidden sm:inline",children:"Select a portfolio to take actions"}),a.jsxs("button",{onClick:()=>p!=="all"&&w({invest:p}),disabled:p==="all",className:`flex items-center gap-1.5 px-4 py-2 text-xs font-bold rounded-lg transition-colors shadow-sm ${p==="all"?"bg-emerald-600/40 text-white/50 cursor-not-allowed":"text-white bg-emerald-600 hover:bg-emerald-500"}`,title:p==="all"?"Select a portfolio first":"",children:[a.jsx(Xs,{size:14})," Invest"]}),a.jsxs("button",{onClick:()=>p!=="all"&&fe.length>0&&w({redeem:p}),disabled:p==="all"||fe.length===0,className:`flex items-center gap-1.5 px-4 py-2 text-xs font-bold rounded-lg transition-colors shadow-sm ${p==="all"||fe.length===0?"bg-rose-600/40 text-white/50 cursor-not-allowed":"text-white bg-rose-600 hover:bg-rose-500"}`,title:p==="all"?"Select a portfolio first":"",children:[a.jsx(k0,{size:14})," Redeem"]}),a.jsxs("button",{onClick:()=>p!=="all"&&fe.length>0&&w({switchFunds:p}),disabled:p==="all"||fe.length===0,className:`flex items-center gap-1.5 px-4 py-2 text-xs font-bold rounded-lg transition-colors shadow-sm ${p==="all"||fe.length===0?"bg-amber-600/40 text-white/50 cursor-not-allowed":"text-white bg-amber-600 hover:bg-amber-500"}`,title:p==="all"?"Select a portfolio first":"",children:[a.jsx(cN,{size:14})," Switch"]})]})]}),J==="holdings"&&a.jsx(a.Fragment,{children:fe.length>0?a.jsxs("div",{className:"bg-[var(--bg-card)] rounded-xl border border-[var(--border)] overflow-hidden",children:[a.jsx("div",{className:"hidden lg:block overflow-x-auto",children:a.jsxs("table",{className:"w-full text-sm",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b border-[var(--border-light)] bg-[var(--bg-inset)]",children:[a.jsx("th",{className:"text-left py-2 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Fund Name"}),a.jsx("th",{className:"text-right py-2 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Units"}),a.jsxs("th",{className:"text-right py-2 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:[a.jsx("div",{children:"NAV"}),a.jsx("div",{className:"text-[10px] font-medium text-[var(--text-dim)]",children:"Current / Avg"})]}),a.jsxs("th",{className:"text-right py-2 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:[a.jsx("div",{children:"Allocation %"}),a.jsx("div",{className:"text-[10px] font-medium text-[var(--text-dim)]",children:"Current / Target"})]}),a.jsxs("th",{className:"text-right py-2 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:[a.jsx("div",{children:"Amount"}),a.jsx("div",{className:"text-[10px] font-medium text-[var(--text-dim)]",children:"Current / Invested"})]}),a.jsxs("th",{className:"text-right py-2 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:[a.jsx("div",{children:"P&L"}),a.jsx("div",{className:"text-[10px] font-medium text-[var(--text-dim)]",children:"on Holdings"})]})]})}),a.jsx("tbody",{children:se.map(_=>{const te=fp(_.belowATHPct),he=p==="all"?le.find(nt=>nt.portfolioId===_.portfolioId):null,pe=_.units===0,me=le.find(nt=>nt.portfolioId===_.portfolioId),Se=me?.currentValue||0,Oe=_.pl,Ue=Oe>=0,$e=pe&&_.targetAllocationPct>0&&_.targetAllocationPct<100&&Se>0?_.targetAllocationPct/(100-_.targetAllocationPct)*Se:0,st=pe&&_.targetAllocationPct>0&&me?.sipTarget>0?_.targetAllocationPct/100*me.sipTarget:0;return a.jsxs("tr",{className:`border-b border-[var(--border-light)] last:border-0 hover:bg-[var(--bg-hover)] transition-colors ${pe?"opacity-60":""}`,children:[a.jsxs("td",{className:"py-2.5 px-3 max-w-[240px]",children:[a.jsxs("p",{className:"text-xs text-[var(--text-primary)] leading-tight",children:[_.fundName,pe&&a.jsx("span",{className:"ml-1.5 text-xs font-semibold text-violet-400 bg-violet-500/15 px-1.5 py-0.5 rounded",children:"Planned"})]}),he&&a.jsx("p",{className:"text-xs text-[var(--text-dim)]",children:sr(he.portfolioName)}),pe&&($e>0||st>0)&&a.jsxs("div",{className:"flex items-center gap-2 mt-0.5 flex-wrap",children:[$e>0&&a.jsxs("span",{className:"text-xs text-emerald-400 font-semibold",children:["Buy ",G($e)]}),st>0&&a.jsxs("span",{className:"text-xs text-blue-400 font-semibold",children:["SIP ",G(st),"/mo"]})]})]}),a.jsx("td",{className:"py-2.5 px-3 text-right text-xs text-[var(--text-secondary)] tabular-nums",children:pe?"":_.units.toFixed(2)}),a.jsx("td",{className:"py-2.5 px-3 text-right",children:pe?a.jsx("span",{className:"text-xs text-[var(--text-dim)]",children:""}):a.jsxs(a.Fragment,{children:[a.jsxs("p",{className:"text-xs font-semibold text-[var(--text-primary)] tabular-nums",children:["",_.currentNav.toFixed(2)]}),a.jsxs("p",{className:"text-xs text-[var(--text-dim)] tabular-nums",children:["",_.avgNav.toFixed(2)]}),_.athNav>0&&_.belowATHPct>0&&a.jsxs("p",{className:"text-xs tabular-nums",style:te,children:["ATH ",_.athNav.toFixed(2)," ",_.belowATHPct.toFixed(1),"%"]})]})}),a.jsx("td",{className:"py-2.5 px-3 text-right",children:pe?a.jsxs("p",{className:"text-xs font-semibold text-violet-400 tabular-nums",children:[_.targetAllocationPct.toFixed(1),"%"]}):a.jsxs(a.Fragment,{children:[a.jsxs("p",{className:"text-xs font-semibold text-[var(--text-primary)] tabular-nums",children:[_.currentAllocationPct.toFixed(1),"%"]}),a.jsxs("p",{className:"text-xs text-[var(--text-dim)] tabular-nums",children:[_.targetAllocationPct.toFixed(1),"%"]})]})}),a.jsx("td",{className:"py-2.5 px-3 text-right",children:pe?a.jsx("span",{className:"text-xs text-[var(--text-dim)]",children:""}):a.jsxs(a.Fragment,{children:[a.jsx("p",{className:"text-xs font-semibold text-[var(--text-primary)] tabular-nums",children:G(_.currentValue)}),a.jsx("p",{className:"text-xs text-[var(--text-dim)] tabular-nums",children:G(_.investment)})]})}),a.jsx("td",{className:"py-2.5 px-3 text-right",children:pe?a.jsx("span",{className:"text-xs text-[var(--text-dim)]",children:""}):a.jsxs(a.Fragment,{children:[a.jsxs("p",{className:`text-xs font-semibold tabular-nums ${Ue?"text-emerald-400":"text-[var(--accent-rose)]"}`,children:[Ue?"+":"",G(Oe)]}),a.jsxs("p",{className:`text-xs font-bold tabular-nums ${Ue?"text-emerald-400":"text-[var(--accent-rose)]"}`,children:[Ue?"+":"",_.plPct.toFixed(1),"%"]})]})})]},_.holdingId)})})]})}),a.jsx("div",{className:"lg:hidden divide-y divide-[var(--border-light)]",children:se.map(_=>{const te=fp(_.belowATHPct),he=p==="all"?le.find(nt=>nt.portfolioId===_.portfolioId):null,pe=_.units===0,me=le.find(nt=>nt.portfolioId===_.portfolioId),Se=me?.currentValue||0,Oe=_.pl,Ue=Oe>=0,$e=pe&&_.targetAllocationPct>0&&_.targetAllocationPct<100&&Se>0?_.targetAllocationPct/(100-_.targetAllocationPct)*Se:0,st=pe&&_.targetAllocationPct>0&&me?.sipTarget>0?_.targetAllocationPct/100*me.sipTarget:0;return a.jsxs("div",{className:`px-4 py-3 ${pe?"opacity-60":""}`,children:[a.jsxs("div",{className:"flex items-start justify-between mb-1.5",children:[a.jsxs("div",{className:"flex-1 mr-3",children:[a.jsxs("p",{className:"text-xs font-medium text-[var(--text-primary)] leading-tight",children:[_.fundName,pe&&a.jsx("span",{className:"ml-1.5 text-xs font-semibold text-violet-400 bg-violet-500/15 px-1.5 py-0.5 rounded",children:"Planned"})]}),he&&a.jsx("p",{className:"text-xs text-[var(--text-dim)]",children:sr(he.portfolioName)}),pe&&($e>0||st>0)&&a.jsxs("div",{className:"flex items-center gap-2 mt-0.5 flex-wrap",children:[$e>0&&a.jsxs("span",{className:"text-xs text-emerald-400 font-semibold",children:["Buy ",G($e)]}),st>0&&a.jsxs("span",{className:"text-xs text-blue-400 font-semibold",children:["SIP ",G(st),"/mo"]})]})]}),pe?a.jsxs("p",{className:"text-xs font-semibold text-violet-400 tabular-nums shrink-0",children:["Target: ",_.targetAllocationPct.toFixed(1),"%"]}):a.jsxs("div",{className:"text-right shrink-0",children:[a.jsxs("p",{className:`text-xs font-bold tabular-nums ${Ue?"text-emerald-400":"text-[var(--accent-rose)]"}`,children:[Ue?"+":"",G(Oe)]}),a.jsxs("p",{className:`text-xs font-semibold tabular-nums ${Ue?"text-emerald-400":"text-[var(--accent-rose)]"}`,children:[Ue?"+":"",_.plPct.toFixed(1),"%"]})]})]}),pe?null:a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex items-center justify-between text-xs text-[var(--text-dim)]",children:[a.jsxs("div",{children:[a.jsxs("span",{children:[_.units.toFixed(2)," units"]}),a.jsx("span",{className:"mx-1",children:""}),a.jsxs("span",{children:["NAV ",_.currentNav.toFixed(2)," / ",_.avgNav.toFixed(2)]})]}),a.jsx("p",{className:"text-xs font-semibold text-[var(--text-primary)] tabular-nums",children:G(_.currentValue)})]}),a.jsxs("div",{className:"flex items-center gap-3 mt-1 text-xs text-[var(--text-dim)] flex-wrap",children:[a.jsxs("span",{children:["Alloc: ",_.currentAllocationPct.toFixed(1),"% / ",_.targetAllocationPct.toFixed(1),"%"]}),_.athNav>0&&_.belowATHPct>0&&a.jsxs("span",{style:te,children:["ATH ",_.belowATHPct.toFixed(1),"%"]})]})]})]},_.holdingId)})})]}):a.jsxs("div",{className:"bg-[var(--bg-card)] rounded-xl border border-[var(--border)] py-10 flex flex-col items-center gap-3",children:[a.jsx(Ys,{size:28,className:"text-[var(--text-dim)]"}),a.jsxs("p",{className:"text-sm text-[var(--text-muted)]",children:["No holdings",O?" in this portfolio":""]}),a.jsx("button",{onClick:()=>w({invest:p!=="all"?p:void 0}),className:"text-xs font-semibold text-emerald-400 hover:text-emerald-300",children:"Add your first fund"})]})}),J==="transactions"&&a.jsx(a.Fragment,{children:W.length>0?a.jsxs("div",{className:"bg-[var(--bg-card)] rounded-xl border border-[var(--border)] overflow-hidden",children:[a.jsx("div",{className:"hidden sm:block overflow-x-auto",children:a.jsxs("table",{className:"w-full text-sm",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b border-[var(--border-light)] bg-[var(--bg-inset)]",children:[a.jsx("th",{className:"text-left py-2 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Date"}),a.jsx("th",{className:"text-left py-2 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Type"}),a.jsx("th",{className:"text-left py-2 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Fund"}),a.jsx("th",{className:"text-right py-2 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Units"}),a.jsx("th",{className:"text-right py-2 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"NAV"}),a.jsx("th",{className:"text-right py-2 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Amount"}),a.jsx("th",{className:"text-right py-2 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Gain/Loss"})]})}),a.jsx("tbody",{children:W.map(_=>{const te=_.type==="BUY",he=!te&&_.gainLoss!=null&&_.gainLoss!==0,pe=he&&_.gainLoss>=0,me=p==="all"?le.find(Oe=>Oe.portfolioId===_.portfolioId):null,Se={INITIAL:{bg:"bg-purple-500/15",text:"text-purple-400"},SIP:{bg:"bg-blue-500/15",text:"text-blue-400"},LUMPSUM:{bg:"bg-emerald-500/15",text:"text-emerald-400"},WITHDRAWAL:{bg:"bg-rose-500/15",text:"text-[var(--accent-rose)]"},SWITCH:{bg:"bg-amber-500/15",text:"text-amber-400"}}[_.transactionType]||{bg:"bg-gray-500/15",text:"text-[var(--text-muted)]"};return a.jsxs("tr",{className:"border-b border-[var(--border-light)] last:border-0 hover:bg-[var(--bg-hover)] transition-colors",children:[a.jsx("td",{className:"py-2.5 px-3 text-xs text-[var(--text-secondary)]",children:_.date}),a.jsx("td",{className:"py-2.5 px-3",children:a.jsxs("div",{className:"flex items-center gap-1.5",children:[a.jsx("span",{className:`text-xs font-bold px-2 py-0.5 rounded-full ${te?"bg-emerald-500/15 text-emerald-400":"bg-rose-500/15 text-[var(--accent-rose)]"}`,children:_.type}),a.jsx("span",{className:`text-xs font-semibold px-1.5 py-0.5 rounded ${Se.bg} ${Se.text}`,children:_.transactionType})]})}),a.jsxs("td",{className:"py-2.5 px-3",children:[a.jsx("p",{className:"text-xs text-[var(--text-primary)] truncate max-w-[200px]",children:_.fundName}),me&&a.jsx("p",{className:"text-xs text-[var(--text-dim)]",children:sr(me.portfolioName)})]}),a.jsx("td",{className:"py-2.5 px-3 text-right text-xs text-[var(--text-secondary)] tabular-nums",children:_.units.toFixed(2)}),a.jsxs("td",{className:"py-2.5 px-3 text-right text-xs text-[var(--text-muted)] tabular-nums",children:["",_.price.toFixed(2)]}),a.jsx("td",{className:"py-2.5 px-3 text-right text-xs font-semibold text-[var(--text-primary)] tabular-nums",children:G(_.totalAmount)}),a.jsx("td",{className:"py-2.5 px-3 text-right",children:he?a.jsxs("span",{className:`text-xs font-semibold tabular-nums ${pe?"text-emerald-400":"text-[var(--accent-rose)]"}`,children:[pe?"+":"",G(_.gainLoss)]}):a.jsx("span",{className:"text-xs text-[var(--text-dim)]",children:""})})]},_.transactionId)})})]})}),a.jsx("div",{className:"sm:hidden divide-y divide-[var(--border-light)]",children:W.map(_=>{const te=_.type==="BUY",he=!te&&_.gainLoss!=null&&_.gainLoss!==0,pe=he&&_.gainLoss>=0;return a.jsxs("div",{className:"px-4 py-3",children:[a.jsxs("div",{className:"flex items-center justify-between mb-1",children:[a.jsxs("div",{className:"flex items-center gap-1.5",children:[a.jsx("span",{className:`text-xs font-bold px-2 py-0.5 rounded-full ${te?"bg-emerald-500/15 text-emerald-400":"bg-rose-500/15 text-[var(--accent-rose)]"}`,children:_.type}),a.jsx("span",{className:"text-xs font-semibold text-[var(--text-dim)]",children:_.transactionType})]}),a.jsx("p",{className:"text-xs text-[var(--text-dim)]",children:_.date})]}),a.jsx("p",{className:"text-xs text-[var(--text-primary)] truncate mb-1",children:_.fundName}),a.jsxs("div",{className:"flex items-center justify-between text-xs",children:[a.jsxs("p",{className:"text-[var(--text-dim)]",children:[_.units.toFixed(2)," units @ ",_.price.toFixed(2)]}),a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-xs font-semibold text-[var(--text-primary)] tabular-nums",children:G(_.totalAmount)}),he&&a.jsxs("p",{className:`text-xs font-semibold tabular-nums ${pe?"text-emerald-400":"text-[var(--accent-rose)]"}`,children:["G/L: ",pe?"+":"",G(_.gainLoss)]})]})]}),_.notes&&a.jsx("p",{className:"text-xs text-[var(--text-dim)] mt-1",children:_.notes})]},_.transactionId)})})]}):a.jsxs("div",{className:"bg-[var(--bg-card)] rounded-xl border border-[var(--border)] py-10 flex flex-col items-center gap-3",children:[a.jsx(no,{size:28,className:"text-[var(--text-dim)]"}),a.jsx("p",{className:"text-sm text-[var(--text-muted)]",children:"No transactions yet"}),a.jsx("button",{onClick:()=>w({invest:p!=="all"?p:void 0}),className:"text-xs font-semibold text-emerald-400 hover:text-emerald-300",children:"Make your first investment"})]})})]}),a.jsx(ft,{open:y==="addPortfolio"||!!y?.editPortfolio,onClose:()=>w(null),title:y?.editPortfolio?"Edit Portfolio":"New MF Portfolio",children:a.jsx(_2,{initial:y?.editPortfolio||void 0,onSave:ue,onDelete:y?.editPortfolio?R:void 0,onCancel:()=>w(null)})}),a.jsx(ft,{open:!!y?.invest,onClose:()=>w(null),title:"Invest in Mutual Fund",wide:!0,children:a.jsx(C5,{portfolioId:typeof y?.invest=="string"?y.invest:void 0,onSave:ee,onCancel:()=>w(null)})}),a.jsx(ft,{open:!!y?.redeem,onClose:()=>w(null),title:"Redeem Mutual Fund",wide:!0,children:a.jsx(A5,{portfolioId:typeof y?.redeem=="string"?y.redeem:void 0,onSave:oe,onCancel:()=>w(null)})}),a.jsx(ft,{open:!!y?.switchFunds,onClose:()=>w(null),title:"Switch Funds",wide:!0,children:a.jsx(M5,{portfolioId:typeof y?.switchFunds=="string"?y.switchFunds:void 0,onSave:de,onCancel:()=>w(null)})}),a.jsx(ft,{open:!!y?.allocations,onClose:()=>w(null),title:"Manage Portfolio Allocation",wide:!0,children:y?.allocations&&a.jsx(T5,{portfolioId:y.allocations,onSave:je,onCancel:()=>w(null)})}),a.jsx(ft,{open:y==="rebalance",onClose:()=>w(null),title:"Rebalance Portfolios",wide:!0,children:y==="rebalance"&&a.jsx(P0,{})}),a.jsx(ft,{open:y==="buyOpp",onClose:()=>w(null),title:"Buy Opportunities",wide:!0,children:y==="buyOpp"&&a.jsx($0,{})})]})}function qs({label:n,value:o,sub:c,positive:u,bold:x}){return a.jsxs("div",{className:"bg-[var(--bg-card)] rounded-xl border border-[var(--border)] px-4 py-3",children:[a.jsx("p",{className:"text-xs text-[var(--text-dim)] uppercase tracking-wider mb-1",children:n}),a.jsx("p",{className:`text-sm tabular-nums ${x?"font-bold":"font-semibold"} ${u===void 0?"text-[var(--text-primary)]":u?"text-emerald-400":"text-[var(--accent-rose)]"}`,children:o}),c&&a.jsx("p",{className:`text-xs font-semibold tabular-nums mt-0.5 ${u?"text-emerald-400":"text-[var(--accent-rose)]"}`,children:c})]})}function E5({initial:n,onSave:o,onDelete:c,onCancel:u}){const{activeMembers:x,activeInvestmentAccounts:m}=Re(),h=!!n,[f,v]=g.useState({portfolioName:n?.portfolioName||"",ownerId:n?.ownerId||"",investmentAccountId:n?.investmentAccountId||""}),[d,j]=g.useState({}),[S,M]=g.useState(!1);function k(p,I){v(J=>({...J,[p]:I})),j(J=>({...J,[p]:void 0}))}function z(p){v(I=>({...I,ownerId:p,investmentAccountId:""})),j(I=>({...I,ownerId:void 0}))}const A=g.useMemo(()=>f.ownerId?m.filter(p=>p.memberId===f.ownerId&&(p.accountType==="Demat + Trading"||p.accountType==="Trading")).map(p=>({value:p.accountId,label:`${p.accountName} - ${p.platformBroker}`})):[],[m,f.ownerId]);function N(){const p={};return f.portfolioName.trim()||(p.portfolioName="Required"),f.ownerId||(p.ownerId="Required"),f.investmentAccountId||(p.investmentAccountId="Required"),j(p),Object.keys(p).length===0}async function y(){if(N()){M(!0);try{await o(f)}finally{M(!1)}}}const w=x.map(p=>({value:p.memberId,label:`${p.memberName} (${p.relationship})`}));return a.jsxs("div",{className:"space-y-4",children:[a.jsx(X,{label:"Portfolio Name",required:!0,error:d.portfolioName,children:a.jsx(ce,{value:f.portfolioName,onChange:p=>k("portfolioName",p),placeholder:"e.g., Long-Term Growth"})}),a.jsx(X,{label:"Owner",required:!0,error:d.ownerId,children:a.jsx(Me,{value:f.ownerId,onChange:z,options:w,placeholder:"Select family member..."})}),a.jsx(X,{label:"Investment Account",required:!0,error:d.investmentAccountId,children:a.jsx(Me,{value:f.investmentAccountId,onChange:p=>k("investmentAccountId",p),options:A,placeholder:f.ownerId?A.length?"Select demat account...":"No demat accounts for this member":"Select owner first..."})}),a.jsxs("div",{className:"flex items-center justify-between",children:[h&&c?a.jsx(Oa,{onClick:c}):a.jsx("div",{}),a.jsx(Dt,{onCancel:u,onSubmit:y,submitLabel:h?"Update":"Create Portfolio",loading:S})]})]})}function D5({portfolioId:n,onSave:o,onCancel:c}){const{stockPortfolios:u}=Re(),{selectedMember:x}=At(),m=g.useMemo(()=>{const w=u.filter(p=>p.status==="Active");return x==="all"?w:w.filter(p=>p.ownerId===x)},[u,x]),[h,f]=g.useState({portfolioId:n||"",symbol:"",companyName:"",exchange:"NSE",date:new Date().toISOString().split("T")[0],quantity:"",pricePerShare:"",brokerage:"0",notes:""}),[v,d]=g.useState({}),[j,S]=g.useState(!1);function M(w,p){f(I=>({...I,[w]:p})),d(I=>({...I,[w]:void 0}))}const k=g.useMemo(()=>{const w=Number(h.quantity)||0,p=Number(h.pricePerShare)||0;return w*p},[h.quantity,h.pricePerShare]),z=g.useMemo(()=>k+(Number(h.brokerage)||0),[k,h.brokerage]);function A(){const w={};return h.portfolioId||(w.portfolioId="Required"),h.symbol.trim()||(w.symbol="Required"),h.companyName.trim()||(w.companyName="Required"),h.date||(w.date="Required"),(!h.quantity||Number(h.quantity)<=0)&&(w.quantity="Must be > 0"),(!h.pricePerShare||Number(h.pricePerShare)<=0)&&(w.pricePerShare="Must be > 0"),d(w),Object.keys(w).length===0}async function N(){if(A()){S(!0);try{await o(h)}finally{S(!1)}}}const y=m.map(w=>({value:w.portfolioId,label:`${w.portfolioName} (${w.ownerName})`}));return a.jsxs("div",{className:"space-y-4",children:[a.jsx(X,{label:"Portfolio",required:!0,error:v.portfolioId,children:a.jsx(Me,{value:h.portfolioId,onChange:w=>M("portfolioId",w),options:y,placeholder:"Select portfolio..."})}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsx(X,{label:"Stock Symbol",required:!0,error:v.symbol,children:a.jsx(ce,{value:h.symbol,onChange:w=>M("symbol",w.toUpperCase()),placeholder:"e.g., RELIANCE"})}),a.jsx(X,{label:"Company Name",required:!0,error:v.companyName,children:a.jsx(ce,{value:h.companyName,onChange:w=>M("companyName",w),placeholder:"e.g., Reliance Industries Ltd"})})]}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:a.jsx(X,{label:"Purchase Date",required:!0,error:v.date,children:a.jsx(ce,{type:"date",value:h.date,onChange:w=>M("date",w)})})}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsx(X,{label:"Quantity (Shares)",required:!0,error:v.quantity,children:a.jsx(ce,{type:"number",value:h.quantity,onChange:w=>M("quantity",w),placeholder:"e.g., 100"})}),a.jsx(X,{label:"Price per Share ()",required:!0,error:v.pricePerShare,children:a.jsx(ce,{type:"number",value:h.pricePerShare,onChange:w=>M("pricePerShare",w),placeholder:"e.g., 2500"})})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsx(X,{label:"Brokerage ()",children:a.jsx(ce,{type:"number",value:h.brokerage,onChange:w=>M("brokerage",w),placeholder:"0"})}),a.jsx("div",{className:"flex flex-col justify-end",children:a.jsxs("div",{className:"bg-[var(--bg-inset)] rounded-lg px-3 py-2 border border-[var(--border-light)]",children:[a.jsx("p",{className:"text-xs text-[var(--text-dim)]",children:"Total Amount"}),a.jsx("p",{className:"text-sm font-bold text-[var(--text-primary)] tabular-nums",children:G(k)}),Number(h.brokerage)>0&&a.jsxs("p",{className:"text-xs text-[var(--text-muted)] tabular-nums",children:["Net: ",G(z)]})]})})]}),a.jsx(X,{label:"Notes",children:a.jsx(ce,{value:h.notes,onChange:w=>M("notes",w),placeholder:"Optional notes..."})}),a.jsx(Dt,{onCancel:c,onSubmit:N,submitLabel:"Buy Stock",loading:j})]})}function z5({portfolioId:n,onSave:o,onCancel:c}){const{stockPortfolios:u,stockHoldings:x}=Re(),{selectedMember:m}=At(),h=g.useMemo(()=>{const $=u.filter(P=>P.status==="Active");return m==="all"?$:$.filter(P=>P.ownerId===m)},[u,m]),[f,v]=g.useState({portfolioId:n||"",symbol:"",companyName:"",date:new Date().toISOString().split("T")[0],quantity:"",pricePerShare:"",brokerage:"0",notes:""}),[d,j]=g.useState({}),[S,M]=g.useState(!1);function k($,P){v(le=>({...le,[$]:P})),j(le=>({...le,[$]:void 0}))}const z=g.useMemo(()=>f.portfolioId?x.filter($=>$.portfolioId===f.portfolioId&&$.quantity>0):[],[x,f.portfolioId]),A=z.find($=>$.symbol===f.symbol),N=A?.quantity||0,y=g.useMemo(()=>{const $=Number(f.quantity)||0,P=Number(f.pricePerShare)||0;return $*P},[f.quantity,f.pricePerShare]),w=g.useMemo(()=>y-(Number(f.brokerage)||0),[y,f.brokerage]);function p($){const P=z.find(le=>le.symbol===$);v(le=>({...le,symbol:$,companyName:P?.companyName||""})),j(le=>({...le,symbol:void 0}))}function I($){v(P=>({...P,portfolioId:$,symbol:"",companyName:"",quantity:""})),j(P=>({...P,portfolioId:void 0}))}function J(){const $={};return f.portfolioId||($.portfolioId="Required"),f.symbol||($.symbol="Required"),f.date||($.date="Required"),(!f.quantity||Number(f.quantity)<=0)&&($.quantity="Must be > 0"),Number(f.quantity)>N&&($.quantity=`Max ${N} shares`),(!f.pricePerShare||Number(f.pricePerShare)<=0)&&($.pricePerShare="Must be > 0"),j($),Object.keys($).length===0}async function q(){if(J()){M(!0);try{await o(f)}finally{M(!1)}}}const Z=h.map($=>({value:$.portfolioId,label:`${$.portfolioName} (${$.ownerName})`})),D=z.map($=>({value:$.symbol,label:`${$.symbol}  ${$.quantity} shares`}));return a.jsxs("div",{className:"space-y-4",children:[a.jsx(X,{label:"Portfolio",required:!0,error:d.portfolioId,children:a.jsx(Me,{value:f.portfolioId,onChange:I,options:Z,placeholder:"Select portfolio..."})}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsx(X,{label:"Stock to Sell",required:!0,error:d.symbol,children:a.jsx(Me,{value:f.symbol,onChange:p,options:D,placeholder:f.portfolioId?z.length?"Select stock...":"No holdings in this portfolio":"Select portfolio first..."})}),A&&a.jsx("div",{className:"flex flex-col justify-end",children:a.jsxs("div",{className:"bg-[var(--bg-inset)] rounded-lg px-3 py-2 border border-[var(--border-light)]",children:[a.jsx("p",{className:"text-xs text-[var(--text-dim)]",children:A.companyName}),a.jsxs("p",{className:"text-xs text-[var(--text-muted)]",children:["Available: ",a.jsx("span",{className:"font-semibold text-[var(--text-primary)]",children:N})," shares @ ",G(A.avgBuyPrice)," avg"]})]})})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsx(X,{label:"Sale Date",required:!0,error:d.date,children:a.jsx(ce,{type:"date",value:f.date,onChange:$=>k("date",$)})}),a.jsx(X,{label:"Quantity to Sell",required:!0,error:d.quantity,children:a.jsx(ce,{type:"number",value:f.quantity,onChange:$=>k("quantity",$),placeholder:N?`Max: ${N}`:""})})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsx(X,{label:"Sale Price per Share ()",required:!0,error:d.pricePerShare,children:a.jsx(ce,{type:"number",value:f.pricePerShare,onChange:$=>k("pricePerShare",$),placeholder:"e.g., 2750"})}),a.jsx(X,{label:"Brokerage ()",children:a.jsx(ce,{type:"number",value:f.brokerage,onChange:$=>k("brokerage",$),placeholder:"0"})})]}),y>0&&a.jsx("div",{className:"bg-[var(--bg-inset)] rounded-lg px-3 py-2 border border-[var(--border-light)]",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-[var(--text-dim)]",children:"Net Sale Amount"}),a.jsx("p",{className:"text-sm font-bold text-[var(--text-primary)] tabular-nums",children:G(w)})]}),A&&a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-xs text-[var(--text-dim)]",children:"Est. P&L"}),(()=>{const $=Number(f.quantity)*A.avgBuyPrice,P=w-$,le=P>=0;return a.jsxs("p",{className:`text-sm font-bold tabular-nums ${le?"text-emerald-400":"text-[var(--accent-rose)]"}`,children:[le?"+":"",G(P)]})})()]})]})}),a.jsx(X,{label:"Notes",children:a.jsx(ce,{value:f.notes,onChange:$=>k("notes",$),placeholder:"Optional notes..."})}),a.jsx(Dt,{onCancel:c,onSubmit:q,submitLabel:"Sell Stock",loading:S})]})}function R5(){const{selectedMember:n}=At(),{stockPortfolios:o,stockHoldings:c,stockTransactions:u,activeInvestmentAccounts:x,addStockPortfolio:m,updateStockPortfolio:h,deleteStockPortfolio:f,buyStock:v,sellStock:d}=Re(),{showToast:j,showBlockUI:S,hideBlockUI:M}=za(),{mv:k}=Ra(),[z,A]=g.useState(null),[N,y]=g.useState("all"),[w,p]=g.useState("holdings"),[I,J]=g.useState(!1),q=g.useMemo(()=>{if(!o)return[];const T=o.filter(O=>O.status!=="Inactive");return n==="all"?T:T.filter(O=>O.ownerId===n)},[o,n]),Z=g.useMemo(()=>c?q.map(T=>{const O=c.filter(te=>te.portfolioId===T.portfolioId),ie=(u||[]).filter(te=>te.portfolioId===T.portfolioId),ue=O.reduce((te,he)=>te+he.totalInvestment,0),R=O.reduce((te,he)=>te+he.currentValue,0),ee=R-ue,oe=ie.filter(te=>te.type==="SELL"&&te.realizedPL!=null).reduce((te,he)=>te+he.realizedPL,0),de=ee+oe,je=ue>0?de/ue*100:0,_=x.find(te=>te.accountId===T.investmentAccountId);return{...T,holdings:O,txns:ie,invested:ue,current:R,unrealizedPL:ee,realizedPL:oe,totalPL:de,totalPLPct:je,stockCount:O.length,platform:_?.platformBroker||T.investmentAccountName||"",clientId:_?.accountClientId||""}}):[],[q,c,u,x]),D=g.useMemo(()=>{const T=N==="all"?Z:Z.filter(_=>_.portfolioId===N),O=T.reduce((_,te)=>_+te.invested,0),ie=T.reduce((_,te)=>_+te.current,0),ue=T.reduce((_,te)=>_+te.unrealizedPL,0),R=T.reduce((_,te)=>_+te.realizedPL,0),ee=ue+R,oe=O>0?ee/O*100:0,de=O>0?ue/O*100:0,je=T.reduce((_,te)=>_+te.stockCount,0);return{invested:O,current:ie,unrealizedPL:ue,unrealizedPLPct:de,realizedPL:R,totalPL:ee,totalPLPct:oe,stocks:je}},[Z,N]),$=g.useMemo(()=>c?N==="all"?c.filter(T=>q.some(O=>O.portfolioId===T.portfolioId)):c.filter(T=>T.portfolioId===N):[],[c,q,N]),P=g.useMemo(()=>u?(N==="all"?u.filter(O=>q.some(ie=>ie.portfolioId===O.portfolioId)):u.filter(O=>O.portfolioId===N)).sort((O,ie)=>new Date(ie.date)-new Date(O.date)):[],[u,q,N]);if(o===null||c===null)return a.jsx(ll,{title:"Loading stocks",cards:5});const le=Z.find(T=>T.portfolioId===N),E=N==="all"?`All Portfolios (${q.length})`:`${le?.portfolioName}  ${le?.ownerName}`;async function fe(T){S("Saving...");try{z?.editPortfolio?await h(z.editPortfolio.portfolioId,T):await m(T),j(z?.editPortfolio?"Portfolio updated":"Portfolio created"),A(null)}catch(O){j(O.message||"Failed to save portfolio","error")}finally{M()}}async function W(){if(z?.editPortfolio&&confirm("Deactivate this portfolio?")){S("Deactivating...");try{await f(z.editPortfolio.portfolioId),j("Portfolio deactivated"),y("all"),A(null)}catch(T){j(T.message||"Failed to deactivate portfolio","error")}finally{M()}}}async function se(T){S("Recording purchase...");try{await v(T),j("Stock purchase recorded"),A(null)}catch(O){j(O.message||"Failed to record purchase","error")}finally{M()}}async function F(T){S("Recording sale...");try{await d(T),j("Stock sale recorded"),A(null)}catch(O){j(O.message||"Failed to record sale","error")}finally{M()}}return a.jsxs("div",{className:"space-y-4",children:[q.length===0?a.jsxs("div",{className:"bg-[var(--bg-card)] rounded-xl border border-[var(--border)] py-12 flex flex-col items-center gap-3",children:[a.jsx(rr,{size:32,className:"text-[var(--text-dim)]"}),a.jsx("p",{className:"text-sm text-[var(--text-muted)]",children:"No stock portfolios yet"}),a.jsx("button",{onClick:()=>A("addPortfolio"),className:"text-xs font-semibold text-violet-400 hover:text-violet-300",children:"Create your first portfolio"})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex items-center justify-between gap-3 flex-wrap",children:[a.jsxs("div",{className:"relative",children:[a.jsxs("button",{onClick:()=>J(!I),className:"flex items-center gap-2 bg-[var(--bg-card)] border border-[var(--border)] rounded-lg px-4 py-2.5 text-sm font-semibold text-[var(--text-primary)] hover:border-[var(--border-light)] transition-colors min-w-[220px]",children:[a.jsx(rr,{size:14,className:"text-violet-400 shrink-0"}),a.jsx("span",{className:"truncate",children:E}),a.jsx(Qs,{size:14,className:`text-[var(--text-dim)] shrink-0 transition-transform ${I?"rotate-180":""}`})]}),I&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"fixed inset-0 z-30",onClick:()=>J(!1)}),a.jsxs("div",{className:"absolute left-0 top-full mt-1 z-40 bg-[var(--bg-card)] border border-[var(--border)] rounded-lg shadow-xl min-w-[280px] py-1 overflow-hidden",children:[a.jsxs("button",{onClick:()=>{y("all"),J(!1),p("holdings")},className:`w-full text-left px-4 py-2.5 text-sm transition-colors ${N==="all"?"bg-[var(--sidebar-active-bg)] text-[var(--text-primary)] font-semibold":"text-[var(--text-secondary)] hover:bg-[var(--bg-hover)]"}`,children:["All Portfolios (",q.length,")"]}),a.jsx("div",{className:"border-t border-[var(--border-light)]"}),Z.map(T=>{const O=T.totalPL>=0;return a.jsx("button",{onClick:()=>{y(T.portfolioId),J(!1),p("holdings")},className:`w-full text-left px-4 py-2.5 transition-colors ${N===T.portfolioId?"bg-[var(--sidebar-active-bg)]":"hover:bg-[var(--bg-hover)]"}`,children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:`text-sm ${N===T.portfolioId?"font-semibold text-[var(--text-primary)]":"text-[var(--text-secondary)]"}`,children:T.portfolioName}),a.jsxs("p",{className:"text-xs text-[var(--text-dim)]",children:[T.ownerName,"  ",T.platform]})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-xs font-semibold text-[var(--text-primary)] tabular-nums",children:G(T.current)}),a.jsxs("p",{className:`text-xs font-semibold tabular-nums ${O?"text-emerald-400":"text-[var(--accent-rose)]"}`,children:[O?"+":"",T.totalPLPct.toFixed(1),"%"]})]})]})},T.portfolioId)})]})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[le&&a.jsxs("button",{onClick:()=>A({editPortfolio:le}),className:"flex items-center gap-1.5 px-3 py-2 text-xs font-medium text-[var(--text-muted)] hover:text-[var(--text-primary)] bg-[var(--bg-card)] border border-[var(--border)] rounded-lg transition-colors",children:[a.jsx(Da,{size:12})," Edit"]}),a.jsxs("button",{onClick:()=>A("addPortfolio"),className:"flex items-center gap-1.5 px-3 py-2 text-xs font-semibold text-violet-400 hover:text-violet-300 bg-[var(--bg-card)] border border-[var(--border)] rounded-lg transition-colors",children:[a.jsx(aa,{size:14})," New Portfolio"]})]})]}),le&&a.jsxs("div",{className:"flex items-center gap-4 text-xs text-[var(--text-dim)] px-1",children:[a.jsxs("span",{children:[a.jsx("span",{className:"font-semibold",children:"Platform:"})," ",le.platform]}),a.jsxs("span",{children:[a.jsx("span",{className:"font-semibold",children:"Client ID:"})," ",k(le.clientId,"clientId")]}),a.jsxs("span",{children:[a.jsx("span",{className:"font-semibold",children:"Stocks:"})," ",le.stockCount]})]}),a.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-5 gap-3",children:[a.jsx(nr,{label:"Invested",value:G(D.invested)}),a.jsx(nr,{label:"Current Value",value:G(D.current),bold:!0}),a.jsx(nr,{label:"Unrealized P&L",value:`${D.unrealizedPL>=0?"+":""}${G(D.unrealizedPL)}`,sub:`${D.unrealizedPLPct>=0?"+":""}${D.unrealizedPLPct.toFixed(1)}%`,positive:D.unrealizedPL>=0}),a.jsx(nr,{label:"Realized P&L",value:`${D.realizedPL>=0?"+":""}${G(D.realizedPL)}`,positive:D.realizedPL>=0}),a.jsx(nr,{label:"Total P&L",value:`${D.totalPL>=0?"+":""}${G(D.totalPL)}`,sub:`${D.totalPLPct>=0?"+":""}${D.totalPLPct.toFixed(1)}%`,positive:D.totalPL>=0,bold:!0})]}),a.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-2",children:[a.jsxs("div",{className:"flex items-center gap-1 bg-[var(--bg-inset)] rounded-lg p-0.5",children:[a.jsxs("button",{onClick:()=>p("holdings"),className:`flex items-center gap-1.5 px-3 py-1.5 text-xs font-semibold rounded-md transition-colors ${w==="holdings"?"bg-[var(--bg-card)] text-[var(--text-primary)] shadow-sm":"text-[var(--text-muted)] hover:text-[var(--text-secondary)]"}`,children:[a.jsx(O0,{size:12})," Holdings (",$.length,")"]}),a.jsxs("button",{onClick:()=>p("transactions"),className:`flex items-center gap-1.5 px-3 py-1.5 text-xs font-semibold rounded-md transition-colors ${w==="transactions"?"bg-[var(--bg-card)] text-[var(--text-primary)] shadow-sm":"text-[var(--text-muted)] hover:text-[var(--text-secondary)]"}`,children:[a.jsx(no,{size:12})," Transactions (",P.length,")"]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("button",{onClick:()=>N!=="all"&&A({buy:N}),disabled:N==="all",className:`flex items-center gap-1.5 px-4 py-2 text-xs font-bold rounded-lg transition-colors shadow-sm ${N==="all"?"bg-emerald-600/40 text-white/50 cursor-not-allowed":"text-white bg-emerald-600 hover:bg-emerald-500"}`,title:N==="all"?"Select a portfolio first":"",children:[a.jsx(Xs,{size:14})," Buy"]}),a.jsxs("button",{onClick:()=>N!=="all"&&$.length>0&&A({sell:N}),disabled:N==="all"||$.length===0,className:`flex items-center gap-1.5 px-4 py-2 text-xs font-bold rounded-lg transition-colors shadow-sm ${N==="all"||$.length===0?"bg-rose-600/40 text-white/50 cursor-not-allowed":"text-white bg-rose-600 hover:bg-rose-500"}`,title:N==="all"?"Select a portfolio first":"",children:[a.jsx(xo,{size:14})," Sell"]})]})]}),w==="holdings"&&a.jsx(a.Fragment,{children:$.length>0?a.jsxs("div",{className:"bg-[var(--bg-card)] rounded-xl border border-[var(--border)] overflow-hidden",children:[a.jsx("div",{className:"hidden sm:block overflow-x-auto",children:a.jsxs("table",{className:"w-full text-sm",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b border-[var(--border-light)] bg-[var(--bg-inset)]",children:[a.jsx("th",{className:"text-left py-2 px-4 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Stock"}),a.jsx("th",{className:"text-right py-2 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Qty"}),a.jsx("th",{className:"text-right py-2 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Avg Price"}),a.jsx("th",{className:"text-right py-2 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Current Price"}),a.jsx("th",{className:"text-right py-2 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Invested"}),a.jsx("th",{className:"text-right py-2 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Current Value"}),a.jsx("th",{className:"text-right py-2 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"P&L"}),a.jsx("th",{className:"text-right py-2 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Returns"})]})}),a.jsxs("tbody",{children:[$.map(T=>{const O=T.unrealizedPL>=0,ie=N==="all"?Z.find(ue=>ue.portfolioId===T.portfolioId):null;return a.jsxs("tr",{className:"border-b border-[var(--border-light)] last:border-0 hover:bg-[var(--bg-hover)] transition-colors",children:[a.jsxs("td",{className:"py-2.5 px-4",children:[a.jsx("p",{className:"text-xs font-medium text-[var(--text-primary)]",children:T.companyName}),a.jsxs("p",{className:"text-xs font-mono text-[var(--text-dim)]",children:[T.symbol,ie&&a.jsxs("span",{className:"ml-1.5 text-[var(--text-dim)] font-sans",children:[" ",ie.portfolioName]})]})]}),a.jsx("td",{className:"py-2.5 px-3 text-right text-xs text-[var(--text-secondary)] tabular-nums",children:T.quantity}),a.jsx("td",{className:"py-2.5 px-3 text-right text-xs text-[var(--text-muted)] tabular-nums",children:G(T.avgBuyPrice)}),a.jsx("td",{className:"py-2.5 px-3 text-right text-xs font-semibold text-[var(--text-primary)] tabular-nums",children:G(T.currentPrice)}),a.jsx("td",{className:"py-2.5 px-3 text-right text-xs text-[var(--text-secondary)] tabular-nums",children:G(T.totalInvestment)}),a.jsx("td",{className:"py-2.5 px-3 text-right text-xs font-semibold text-[var(--text-primary)] tabular-nums",children:G(T.currentValue)}),a.jsxs("td",{className:`py-2.5 px-3 text-right text-xs font-semibold tabular-nums ${O?"text-emerald-400":"text-[var(--accent-rose)]"}`,children:[O?"+":"",G(T.unrealizedPL)]}),a.jsxs("td",{className:`py-2.5 px-3 text-right text-xs font-bold tabular-nums ${O?"text-emerald-400":"text-[var(--accent-rose)]"}`,children:[O?"+":"",T.unrealizedPLPct.toFixed(1),"%"]})]},T.holdingId)}),a.jsxs("tr",{className:"bg-[var(--bg-inset)] border-t-2 border-[var(--border-light)]",children:[a.jsxs("td",{className:"py-2.5 px-4 text-xs font-semibold text-[var(--text-muted)]",children:["Total (",$.length," stocks)"]}),a.jsx("td",{colSpan:3,className:"py-2.5 px-3"}),a.jsx("td",{className:"py-2.5 px-3 text-right text-xs font-semibold text-[var(--text-primary)] tabular-nums",children:G(D.invested)}),a.jsx("td",{className:"py-2.5 px-3 text-right text-xs font-semibold text-[var(--text-primary)] tabular-nums",children:G(D.current)}),a.jsxs("td",{className:`py-2.5 px-3 text-right text-xs font-semibold tabular-nums ${D.unrealizedPL>=0?"text-emerald-400":"text-[var(--accent-rose)]"}`,children:[D.unrealizedPL>=0?"+":"",G(D.unrealizedPL)]}),a.jsxs("td",{className:`py-2.5 px-3 text-right text-xs font-bold tabular-nums ${D.unrealizedPL>=0?"text-emerald-400":"text-[var(--accent-rose)]"}`,children:[D.unrealizedPLPct>=0?"+":"",D.unrealizedPLPct.toFixed(1),"%"]})]})]})]})}),a.jsx("div",{className:"sm:hidden divide-y divide-[var(--border-light)]",children:$.map(T=>{const O=T.unrealizedPL>=0,ie=N==="all"?Z.find(ue=>ue.portfolioId===T.portfolioId):null;return a.jsxs("div",{className:"px-4 py-3",children:[a.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-medium text-[var(--text-primary)]",children:T.companyName}),a.jsxs("p",{className:"text-xs font-mono text-[var(--text-dim)]",children:[T.symbol,ie&&a.jsxs("span",{className:"ml-1 font-sans",children:[" ",ie.portfolioName]})]})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("p",{className:`text-xs font-bold tabular-nums ${O?"text-emerald-400":"text-[var(--accent-rose)]"}`,children:[O?"+":"",T.unrealizedPLPct.toFixed(1),"%"]}),a.jsxs("p",{className:`text-xs font-semibold tabular-nums ${O?"text-emerald-400":"text-[var(--accent-rose)]"}`,children:[O?"+":"",G(T.unrealizedPL)]})]})]}),a.jsxs("div",{className:"flex items-center justify-between text-xs",children:[a.jsxs("div",{className:"text-[var(--text-dim)]",children:[a.jsxs("span",{children:[T.quantity," shares"]}),a.jsx("span",{className:"mx-1",children:""}),a.jsxs("span",{children:["Avg ",G(T.avgBuyPrice)]}),a.jsx("span",{className:"mx-1",children:""}),a.jsxs("span",{children:["CMP ",G(T.currentPrice)]})]}),a.jsx("p",{className:"text-xs font-semibold text-[var(--text-primary)] tabular-nums",children:G(T.currentValue)})]})]},T.holdingId)})})]}):a.jsxs("div",{className:"bg-[var(--bg-card)] rounded-xl border border-[var(--border)] py-10 flex flex-col items-center gap-3",children:[a.jsx(rr,{size:28,className:"text-[var(--text-dim)]"}),a.jsxs("p",{className:"text-sm text-[var(--text-muted)]",children:["No holdings",le?" in this portfolio":""]}),a.jsx("button",{onClick:()=>A({buy:N!=="all"?N:void 0}),className:"text-xs font-semibold text-emerald-400 hover:text-emerald-300",children:"Buy your first stock"})]})}),w==="transactions"&&a.jsx(a.Fragment,{children:P.length>0?a.jsxs("div",{className:"bg-[var(--bg-card)] rounded-xl border border-[var(--border)] overflow-hidden",children:[a.jsx("div",{className:"hidden sm:block overflow-x-auto",children:a.jsxs("table",{className:"w-full text-sm",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b border-[var(--border-light)] bg-[var(--bg-inset)]",children:[a.jsx("th",{className:"text-left py-2 px-4 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Date"}),a.jsx("th",{className:"text-left py-2 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Type"}),a.jsx("th",{className:"text-left py-2 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Stock"}),a.jsx("th",{className:"text-right py-2 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Qty"}),a.jsx("th",{className:"text-right py-2 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Price"}),a.jsx("th",{className:"text-right py-2 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Amount"}),a.jsx("th",{className:"text-right py-2 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Brokerage"}),a.jsx("th",{className:"text-right py-2 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Net"}),a.jsx("th",{className:"text-right py-2 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Realized P&L"})]})}),a.jsx("tbody",{children:P.map(T=>{const O=T.type==="BUY",ie=!O&&T.realizedPL!=null,ue=ie&&T.realizedPL>=0,R=N==="all"?Z.find(ee=>ee.portfolioId===T.portfolioId):null;return a.jsxs("tr",{className:"border-b border-[var(--border-light)] last:border-0 hover:bg-[var(--bg-hover)] transition-colors",children:[a.jsx("td",{className:"py-2.5 px-4 text-xs text-[var(--text-secondary)]",children:T.date}),a.jsx("td",{className:"py-2.5 px-3",children:a.jsx("span",{className:`text-xs font-bold px-2 py-0.5 rounded-full ${O?"bg-emerald-500/15 text-emerald-400":"bg-rose-500/15 text-[var(--accent-rose)]"}`,children:T.type})}),a.jsxs("td",{className:"py-2.5 px-3",children:[a.jsx("p",{className:"text-xs font-medium text-[var(--text-primary)]",children:T.symbol}),a.jsxs("p",{className:"text-xs text-[var(--text-dim)] truncate max-w-[140px]",children:[T.companyName,R&&a.jsxs("span",{children:["  ",R.portfolioName]})]})]}),a.jsx("td",{className:"py-2.5 px-3 text-right text-xs text-[var(--text-secondary)] tabular-nums",children:T.quantity}),a.jsx("td",{className:"py-2.5 px-3 text-right text-xs text-[var(--text-muted)] tabular-nums",children:G(T.pricePerShare)}),a.jsx("td",{className:"py-2.5 px-3 text-right text-xs text-[var(--text-secondary)] tabular-nums",children:G(T.totalAmount)}),a.jsx("td",{className:"py-2.5 px-3 text-right text-xs text-[var(--text-dim)] tabular-nums",children:T.brokerage>0?G(T.brokerage):""}),a.jsx("td",{className:"py-2.5 px-3 text-right text-xs font-semibold text-[var(--text-primary)] tabular-nums",children:G(T.netAmount)}),a.jsx("td",{className:"py-2.5 px-3 text-right",children:ie?a.jsxs("span",{className:`text-xs font-semibold tabular-nums ${ue?"text-emerald-400":"text-[var(--accent-rose)]"}`,children:[ue?"+":"",G(T.realizedPL)]}):a.jsx("span",{className:"text-xs text-[var(--text-dim)]",children:""})})]},T.transactionId)})})]})}),a.jsx("div",{className:"sm:hidden divide-y divide-[var(--border-light)]",children:P.map(T=>{const O=T.type==="BUY",ie=!O&&T.realizedPL!=null,ue=ie&&T.realizedPL>=0;return a.jsxs("div",{className:"px-4 py-3",children:[a.jsxs("div",{className:"flex items-center justify-between mb-1",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:`text-xs font-bold px-2 py-0.5 rounded-full ${O?"bg-emerald-500/15 text-emerald-400":"bg-rose-500/15 text-[var(--accent-rose)]"}`,children:T.type}),a.jsx("p",{className:"text-xs font-semibold text-[var(--text-primary)]",children:T.symbol})]}),a.jsx("p",{className:"text-xs text-[var(--text-dim)]",children:T.date})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("p",{className:"text-xs text-[var(--text-dim)]",children:[T.quantity," shares @ ",G(T.pricePerShare)]}),a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-xs font-semibold text-[var(--text-primary)] tabular-nums",children:G(T.netAmount)}),ie&&a.jsxs("p",{className:`text-xs font-semibold tabular-nums ${ue?"text-emerald-400":"text-[var(--accent-rose)]"}`,children:["P&L: ",ue?"+":"",G(T.realizedPL)]})]})]}),T.notes&&a.jsx("p",{className:"text-xs text-[var(--text-dim)] mt-1",children:T.notes})]},T.transactionId)})})]}):a.jsxs("div",{className:"bg-[var(--bg-card)] rounded-xl border border-[var(--border)] py-10 flex flex-col items-center gap-3",children:[a.jsx(no,{size:28,className:"text-[var(--text-dim)]"}),a.jsx("p",{className:"text-sm text-[var(--text-muted)]",children:"No transactions yet"}),a.jsx("button",{onClick:()=>A({buy:N!=="all"?N:void 0}),className:"text-xs font-semibold text-emerald-400 hover:text-emerald-300",children:"Make your first purchase"})]})})]}),a.jsx(ft,{open:z==="addPortfolio"||!!z?.editPortfolio,onClose:()=>A(null),title:z?.editPortfolio?"Edit Portfolio":"New Stock Portfolio",children:a.jsx(E5,{initial:z?.editPortfolio||void 0,onSave:fe,onDelete:z?.editPortfolio?W:void 0,onCancel:()=>A(null)})}),a.jsx(ft,{open:!!z?.buy,onClose:()=>A(null),title:"Buy Stock",wide:!0,children:a.jsx(D5,{portfolioId:typeof z?.buy=="string"?z.buy:void 0,onSave:se,onCancel:()=>A(null)})}),a.jsx(ft,{open:!!z?.sell,onClose:()=>A(null),title:"Sell Stock",wide:!0,children:a.jsx(z5,{portfolioId:typeof z?.sell=="string"?z.sell:void 0,onSave:F,onCancel:()=>A(null)})})]})}function nr({label:n,value:o,sub:c,positive:u,bold:x}){return a.jsxs("div",{className:"bg-[var(--bg-card)] rounded-xl border border-[var(--border)] px-4 py-3",children:[a.jsx("p",{className:"text-xs text-[var(--text-dim)] uppercase tracking-wider mb-1",children:n}),a.jsx("p",{className:`text-sm tabular-nums ${x?"font-bold":"font-semibold"} ${u===void 0?"text-[var(--text-primary)]":u?"text-emerald-400":"text-[var(--accent-rose)]"}`,children:o}),c&&a.jsx("p",{className:`text-xs font-semibold tabular-nums mt-0.5 ${u?"text-emerald-400":"text-[var(--accent-rose)]"}`,children:c})]})}const O5=["Self","Spouse","Father","Mother","Son","Daughter","Brother","Sister","Other"].map(n=>({value:n,label:n})),Fi={pan:/^[A-Z]{5}[0-9]{4}[A-Z]{1}$/,aadhar:/^\d{12}$/,email:/^[^\s@]+@[^\s@]+\.[^\s@]+$/,mobile:/^\d{10}$/};function L5({initial:n,onSave:o,onDelete:c,onCancel:u}){const x=!!n,[m,h]=g.useState({memberName:n?.memberName||"",relationship:n?.relationship||"",pan:n?.pan||"",aadhar:n?.aadhar||"",email:n?.email||"",mobile:n?.mobile||"",includeInEmailReports:n?.includeInEmailReports??!0,status:n?.status||"Active"}),[f,v]=g.useState({}),[d,j]=g.useState(!1),[S,M]=g.useState(()=>{const p=n?.dynamicFields||{};return Object.entries(p).map(([I,J])=>({key:I,value:J}))});function k(p,I){h(J=>({...J,[p]:I})),v(J=>({...J,[p]:void 0}))}function z(){const p={};return m.memberName.trim()||(p.memberName="Required"),m.relationship||(p.relationship="Required"),Fi.pan.test(m.pan.toUpperCase())||(p.pan="Format: ABCDE1234F"),Fi.aadhar.test(m.aadhar)||(p.aadhar="12 digits required"),Fi.email.test(m.email)||(p.email="Invalid email"),Fi.mobile.test(m.mobile)||(p.mobile="10 digits required"),v(p),Object.keys(p).length===0}function A(){M(p=>[...p,{key:"",value:""}])}function N(p,I,J){M(q=>q.map((Z,D)=>D===p?{...Z,[I]:J}:Z))}function y(p){M(I=>I.filter((J,q)=>q!==p))}async function w(){if(!z())return;const p={};S.forEach(({key:I,value:J})=>{const q=I.trim();q&&(p[q]=J)}),j(!0);try{await o({...m,pan:m.pan.toUpperCase(),dynamicFields:p})}finally{j(!1)}}return a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsx(X,{label:"Member Name",required:!0,error:f.memberName,children:a.jsx(ce,{value:m.memberName,onChange:p=>k("memberName",p),placeholder:"e.g., Jagadeesh"})}),a.jsx(X,{label:"Relationship",required:!0,error:f.relationship,children:a.jsx(Me,{value:m.relationship,onChange:p=>k("relationship",p),options:O5,placeholder:"Select..."})})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsx(X,{label:"PAN",required:!0,error:f.pan,children:a.jsx(ce,{sensitive:!0,value:m.pan,onChange:p=>k("pan",p.toUpperCase()),placeholder:"ABCDE1234F",maxLength:10})}),a.jsx(X,{label:"Aadhar",required:!0,error:f.aadhar,children:a.jsx(ce,{sensitive:!0,value:m.aadhar,onChange:p=>k("aadhar",p.replace(/\D/g,"")),placeholder:"123456789012",maxLength:12})})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsx(X,{label:"Email",required:!0,error:f.email,children:a.jsx(ce,{sensitive:!0,type:"email",value:m.email,onChange:p=>k("email",p),placeholder:"email@example.com"})}),a.jsx(X,{label:"Mobile",required:!0,error:f.mobile,children:a.jsx(ce,{sensitive:!0,value:m.mobile,onChange:p=>k("mobile",p.replace(/\D/g,"")),placeholder:"9876543210",maxLength:10})})]}),a.jsx(ZN,{checked:m.includeInEmailReports,onChange:p=>k("includeInEmailReports",p),label:"Include in email reports"}),x&&a.jsx(X,{label:"Status",children:a.jsx(Me,{value:m.status,onChange:p=>k("status",p),options:[{value:"Active",label:"Active"},{value:"Inactive",label:"Inactive"}]})}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("p",{className:"text-xs font-semibold text-[var(--text-muted)]",children:"Custom Fields"}),a.jsxs("button",{onClick:A,type:"button",className:"flex items-center gap-1 text-xs font-semibold text-violet-400 hover:text-violet-300 transition-colors",children:[a.jsx(aa,{size:12})," Add Field"]})]}),S.length===0&&a.jsx("p",{className:"text-xs text-[var(--text-dim)]",children:"No custom fields. Add DOB, occupation, blood group, etc."}),a.jsx("div",{className:"space-y-2",children:S.map((p,I)=>a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{value:p.key,onChange:J=>N(I,"key",J.target.value),placeholder:"Field name",className:"flex-1 px-2.5 py-1.5 text-xs bg-[var(--bg-input)] border border-[var(--border-input)] rounded-lg text-[var(--text-primary)] placeholder:text-[var(--text-dim)] focus:outline-none focus:border-[var(--sidebar-active-text)] transition-colors"}),a.jsx("input",{value:p.value,onChange:J=>N(I,"value",J.target.value),placeholder:"Value",className:"flex-1 px-2.5 py-1.5 text-xs bg-[var(--bg-input)] border border-[var(--border-input)] rounded-lg text-[var(--text-primary)] placeholder:text-[var(--text-dim)] focus:outline-none focus:border-[var(--sidebar-active-text)] transition-colors"}),a.jsx("button",{onClick:()=>y(I),type:"button",className:"p-1 text-[var(--text-dim)] hover:text-rose-400 transition-colors",children:a.jsx(Sd,{size:13})})]},I))})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[x&&c?a.jsx(Oa,{onClick:c}):a.jsx("div",{}),a.jsx(Dt,{onCancel:u,onSubmit:w,submitLabel:x?"Update":"Add Member",loading:d})]})]})}const qi=["from-violet-500 to-indigo-500","from-rose-500 to-pink-500","from-blue-500 to-cyan-500","from-amber-500 to-orange-500","from-emerald-500 to-teal-500"],hp={Self:"bg-violet-500/15 text-[var(--accent-violet)]",Spouse:"bg-rose-500/15 text-[var(--accent-rose)]",Father:"bg-blue-500/15 text-[var(--accent-blue)]",Mother:"bg-amber-500/15 text-[var(--accent-amber)]",Son:"bg-emerald-500/15 text-emerald-400",Daughter:"bg-emerald-500/15 text-emerald-400"};function _5(){const{members:n,addMember:o,updateMember:c,deleteMember:u}=Re(),{showToast:x,showBlockUI:m,hideBlockUI:h}=za(),{mv:f}=Ra(),[v,d]=g.useState(null);if(n===null)return a.jsx(ll,{title:"Loading family",cards:3});const j=n.filter(k=>k.status!=="Inactive");async function S(k){m("Saving member...");try{v?.edit?await c(v.edit.memberId,k):await o(k),x(v?.edit?"Member updated":"Member added"),d(null)}catch(z){x(z.message||"Failed to save member","error")}finally{h()}}async function M(){if(v?.edit&&confirm("Deactivate this family member?")){m("Deactivating...");try{await u(v.edit.memberId),x("Member deactivated"),d(null)}catch(k){x(k.message||"Failed to deactivate member","error")}finally{h()}}}return[...new Set(j.flatMap(k=>Object.keys(k.dynamicFields||{})))],a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"flex items-center justify-end px-1",children:a.jsxs("button",{onClick:()=>d("add"),className:"flex items-center gap-1.5 px-3 py-2 text-xs font-semibold text-violet-400 hover:text-violet-300 bg-[var(--bg-card)] border border-[var(--border)] rounded-lg transition-colors",children:[a.jsx(aa,{size:14})," Add Member"]})}),j.length===0?a.jsxs("div",{className:"bg-[var(--bg-card)] rounded-xl border border-[var(--border)] py-12 flex flex-col items-center gap-3",children:[a.jsx(Zs,{size:32,className:"text-[var(--text-dim)]"}),a.jsx("p",{className:"text-sm text-[var(--text-muted)]",children:"No family members yet"}),a.jsx("button",{onClick:()=>d("add"),className:"text-xs font-semibold text-violet-400 hover:text-violet-300",children:"Add your first member"})]}):a.jsxs("div",{className:"bg-[var(--bg-card)] rounded-xl border border-[var(--border)] overflow-hidden",children:[a.jsx("div",{className:"hidden sm:block overflow-x-auto",children:a.jsxs("table",{className:"w-full text-sm min-w-[640px]",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b border-[var(--border-light)] bg-[var(--bg-inset)]",children:[a.jsx("th",{className:"text-left py-2.5 px-4 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Member"}),a.jsx("th",{className:"text-left py-2.5 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Relationship"}),a.jsx("th",{className:"text-left py-2.5 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"PAN"}),a.jsx("th",{className:"text-left py-2.5 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Aadhaar"}),a.jsx("th",{className:"text-left py-2.5 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Email"}),a.jsx("th",{className:"text-left py-2.5 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Mobile"}),a.jsx("th",{className:"w-8 py-2.5 px-2"})]})}),a.jsx("tbody",{children:j.map((k,z)=>{const A=k.dynamicFields||{},N=Object.entries(A);return a.jsxs("tr",{className:"border-b border-[var(--border-light)] last:border-0 hover:bg-[var(--bg-hover)] transition-colors group",children:[a.jsx("td",{className:"py-2.5 px-4",children:a.jsxs("div",{className:"flex items-center gap-2.5",children:[a.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-xs font-bold text-white bg-gradient-to-br ${qi[z%qi.length]}`,children:k.memberName.charAt(0)}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-[var(--text-primary)]",children:k.memberName}),N.length>0&&a.jsxs("div",{className:"flex flex-wrap gap-1 mt-0.5",children:[N.slice(0,3).map(([y,w])=>a.jsxs("span",{className:"text-[10px] text-[var(--text-dim)] bg-[var(--bg-inset)] px-1.5 py-0.5 rounded",children:[y,": ",w]},y)),N.length>3&&a.jsxs("span",{className:"text-[10px] text-[var(--text-dim)]",children:["+",N.length-3," more"]})]})]})]})}),a.jsx("td",{className:"py-2.5 px-3",children:a.jsx("span",{className:`text-xs font-semibold px-2 py-0.5 rounded-full ${hp[k.relationship]||"bg-slate-500/15 text-[var(--text-muted)]"}`,children:k.relationship})}),a.jsx("td",{className:"py-2.5 px-3 text-xs text-[var(--text-muted)] font-mono tabular-nums",children:f(k.pan,"pan")||""}),a.jsx("td",{className:"py-2.5 px-3 text-xs text-[var(--text-muted)] font-mono tabular-nums",children:f(k.aadhar,"aadhaar")||""}),a.jsx("td",{className:"py-2.5 px-3 text-xs text-[var(--text-muted)] truncate max-w-[180px]",children:f(k.email,"email")}),a.jsx("td",{className:"py-2.5 px-3 text-xs text-[var(--text-muted)] tabular-nums",children:f(k.mobile,"mobile")}),a.jsx("td",{className:"py-2.5 px-2",children:a.jsx("button",{onClick:()=>d({edit:k}),className:"opacity-0 group-hover:opacity-100 p-1 rounded text-[var(--text-dim)] hover:text-[var(--text-primary)] transition-all",children:a.jsx(Da,{size:12})})})]},k.memberId)})})]})}),a.jsx("div",{className:"sm:hidden divide-y divide-[var(--border-light)]",children:j.map((k,z)=>{const A=k.dynamicFields||{},N=Object.entries(A);return a.jsxs("div",{onClick:()=>d({edit:k}),className:"px-4 py-3.5 hover:bg-[var(--bg-hover)] transition-colors cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2.5 mb-1.5",children:[a.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-xs font-bold text-white bg-gradient-to-br ${qi[z%qi.length]}`,children:k.memberName.charAt(0)}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("p",{className:"text-sm font-medium text-[var(--text-primary)]",children:k.memberName}),a.jsx("span",{className:`text-xs font-semibold px-2 py-0.5 rounded-full ${hp[k.relationship]||"bg-slate-500/15 text-[var(--text-muted)]"}`,children:k.relationship})]}),a.jsx("p",{className:"text-xs text-[var(--text-muted)] truncate",children:f(k.email,"email")})]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("p",{className:"text-xs text-[var(--text-dim)] tabular-nums",children:f(k.mobile,"mobile")}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("p",{className:"text-xs text-[var(--text-dim)] font-mono",children:["PAN: ",f(k.pan,"pan")||""]}),k.aadhar&&a.jsxs("p",{className:"text-xs text-[var(--text-dim)] font-mono",children:["Aadhaar: ",f(k.aadhar,"aadhaar")]})]})]}),N.length>0&&a.jsxs("div",{className:"flex flex-wrap gap-1 mt-1.5",children:[N.slice(0,3).map(([y,w])=>a.jsxs("span",{className:"text-[10px] text-[var(--text-dim)] bg-[var(--bg-inset)] px-1.5 py-0.5 rounded",children:[y,": ",w]},y)),N.length>3&&a.jsxs("span",{className:"text-[10px] text-[var(--text-dim)]",children:["+",N.length-3," more"]})]})]},k.memberId)})})]}),a.jsx(ft,{open:!!v,onClose:()=>d(null),title:v?.edit?"Edit Member":"Add Family Member",wide:!0,children:a.jsx(L5,{initial:v?.edit||void 0,onSave:S,onDelete:v?.edit?M:void 0,onCancel:()=>d(null)})})]})}const pp=["Retirement","Emergency Fund","Child Education","Home Purchase","Car","Travel","Wedding","Custom"].map(n=>({value:n,label:n})),bp=[{value:"High",label:"High"},{value:"Medium",label:"Medium"},{value:"Low",label:"Low"}],I5=[{value:"On Track",label:"On Track"},{value:"Needs Attention",label:"Needs Attention"},{value:"Achieved",label:"Achieved"},{value:"Paused",label:"Paused"}],$i={Retirement:{inflation:6,cagr:12},"Emergency Fund":{inflation:0,cagr:7},"Child Education":{inflation:10,cagr:12},"Home Purchase":{inflation:8,cagr:12},Wedding:{inflation:6,cagr:12},Car:{inflation:5,cagr:10},Travel:{inflation:6,cagr:10},Custom:{inflation:6,cagr:12}},vp=[{label:"Basics",icon:fr},{label:"Financials",icon:Cj},{label:"Review",icon:an}];function B5({initial:n,onSave:o,onDelete:c,onCancel:u}){const x=!!n,{activeMembers:m}=Re(),h=[{value:"",label:"Family (Default)"},...m.map(D=>({value:D.memberId,label:D.memberName}))],[f,v]=g.useState(0),[d,j]=g.useState(()=>{if(x){const D=(n.expectedInflation||.06)*100,$=(n.expectedCAGR||.12)*100,P=n.targetDate?Math.max(0,(new Date(n.targetDate)-new Date)/(365.25*24*60*60*1e3)):0,le=D/100;let E=n.targetAmount||0;return le>0&&P>0&&n.goalType!=="Emergency Fund"&&(E=n.targetAmount/Math.pow(1+le,P)),{goalType:n.goalType||"",goalName:n.goalName||"",familyMemberId:n.familyMemberId||"",todaysCost:Math.round(E).toString(),targetDate:n.targetDate||"",lumpsum:(n.lumpsumInvested||0).toString(),monthlySIP:(n.monthlyInvestment||0).toString(),inflation:D.toString(),cagr:$.toString(),priority:n.priority||"Medium",status:n.status||"On Track",notes:n.notes||"",monthlyExpenses:(n.monthlyExpenses||"").toString(),emergencyMonths:(n.emergencyMonths||6).toString()}}return{goalType:"",goalName:"",familyMemberId:"",todaysCost:"",targetDate:"",lumpsum:"",monthlySIP:"",inflation:"6",cagr:"12",priority:"Medium",status:"On Track",notes:"",monthlyExpenses:"",emergencyMonths:"6"}}),[S,M]=g.useState({}),[k,z]=g.useState(!1);function A(D,$){j(P=>({...P,[D]:$})),M(P=>({...P,[D]:void 0}))}g.useEffect(()=>{if(x||!d.goalType)return;const D=$i[d.goalType]||$i.Custom;j($=>({...$,inflation:D.inflation.toString(),cagr:D.cagr.toString()}))},[d.goalType,x]);const N=d.goalType==="Retirement",y=d.goalType==="Emergency Fund",w=g.useMemo(()=>{const D=(Number(d.inflation)||0)/100,P=(Number(d.cagr)||0)/100/12,le=Number(d.lumpsum)||0,E=Number(d.monthlySIP)||0,fe=Number(d.monthlyExpenses)||0,W=Number(d.emergencyMonths)||6,se=d.targetDate?Math.max(0,(new Date(d.targetDate)-new Date)/(365.25*24*60*60*1e3)):0,F=Math.round(se*12);let T=0,O=0;N?(T=fe*12*25,O=T*Math.pow(1+D,se)):y?(T=fe*W,O=T):(T=Number(d.todaysCost)||0,O=D>0&&se>0?T*Math.pow(1+D,se):T),O=Math.round(O);const ie=le>0&&F>0?le*Math.pow(1+P,F):le,ue=E>0&&P>0&&F>0?E*((Math.pow(1+P,F)-1)/P):E*F,R=Math.round(ie+ue),ee=Math.round(le+E*F),oe=R-ee;let de=0;if(O>0&&F>0){const te=O-ie;te>0&&P>0?de=te/((Math.pow(1+P,F)-1)/P):te>0&&(de=te/F),de=Math.max(0,Math.ceil(de))}const je=O>0&&R>=O,_=O>0?R/O*100:0;return{todaysCost:T,inflatedTarget:O,yearsToGo:se,months:F,fvLumpsum:Math.round(ie),fvSIP:Math.round(ue),projectedValue:R,totalInvested:ee,totalReturns:oe,requiredSIP:de,isOnTrack:je,pctOfTarget:_,hasTarget:O>0,hasInputs:le>0||E>0}},[d.todaysCost,d.targetDate,d.lumpsum,d.monthlySIP,d.inflation,d.cagr,d.monthlyExpenses,d.emergencyMonths,N,y]);function p(D){const $={};return D===0&&(d.goalType||($.goalType="Required"),d.goalName.trim()||($.goalName="Required")),D===1&&(d.targetDate||($.targetDate="Required"),N||y?(!d.monthlyExpenses||Number(d.monthlyExpenses)<=0)&&($.monthlyExpenses="Required"):(!d.todaysCost||Number(d.todaysCost)<=0)&&($.todaysCost="Must be > 0")),M($),Object.keys($).length===0}function I(){const D={};return d.goalType||(D.goalType="Required"),d.goalName.trim()||(D.goalName="Required"),d.targetDate||(D.targetDate="Required"),N||y?(!d.monthlyExpenses||Number(d.monthlyExpenses)<=0)&&(D.monthlyExpenses="Required"):(!d.todaysCost||Number(d.todaysCost)<=0)&&(D.todaysCost="Must be > 0"),M(D),Object.keys(D).length===0}function J(){p(f)&&v(D=>Math.min(D+1,2))}async function q(){if(!I())return;const D=d.familyMemberId&&m.find($=>$.memberId===d.familyMemberId)?.memberName||"Family";z(!0);try{await o({goalType:d.goalType,goalName:d.goalName,familyMemberId:d.familyMemberId||"",familyMember:D,targetAmount:w.inflatedTarget,targetDate:d.targetDate,priority:d.priority,status:d.status,notes:d.notes,expectedInflation:(Number(d.inflation)||0)/100,expectedCAGR:(Number(d.cagr)||0)/100,monthlyInvestment:Number(d.monthlySIP)||0,lumpsumInvested:Number(d.lumpsum)||0,monthlyExpenses:N||y?Number(d.monthlyExpenses)||0:void 0,emergencyMonths:y?Number(d.emergencyMonths)||6:void 0,isRetirement:N,currentCost:w.todaysCost})}finally{z(!1)}}const Z=d.familyMemberId&&m.find(D=>D.memberId===d.familyMemberId)?.memberName||"Family";return x?a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsx(X,{label:"Goal Type",required:!0,error:S.goalType,children:a.jsx(Me,{value:d.goalType,onChange:D=>A("goalType",D),options:pp,placeholder:"Select type..."})}),a.jsx(X,{label:"Goal Name",required:!0,error:S.goalName,children:a.jsx(ce,{value:d.goalName,onChange:D=>A("goalName",D),placeholder:"e.g., Retirement Fund (2045)"})})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsx(X,{label:"Family Member",error:S.familyMemberId,children:a.jsx(Me,{value:d.familyMemberId,onChange:D=>A("familyMemberId",D),options:h,placeholder:"Family (Default)"})}),a.jsx(X,{label:"Target Date",required:!0,error:S.targetDate,children:a.jsx(ce,{type:"date",value:d.targetDate,onChange:D=>A("targetDate",D)})})]}),N||y?a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsx(X,{label:"Monthly Expenses",required:!0,error:S.monthlyExpenses,children:a.jsx(ce,{type:"number",value:d.monthlyExpenses,onChange:D=>A("monthlyExpenses",D),placeholder:"e.g., 50000"})}),y&&a.jsx(X,{label:"Emergency Months",children:a.jsx(ce,{type:"number",value:d.emergencyMonths,onChange:D=>A("emergencyMonths",D),placeholder:"6"})})]}):a.jsx(X,{label:"Today's Cost",required:!0,error:S.todaysCost,children:a.jsx(ce,{type:"number",value:d.todaysCost,onChange:D=>A("todaysCost",D),placeholder:"e.g., 1000000"})}),a.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:[a.jsx(X,{label:"Inflation %",children:a.jsx(ce,{type:"number",value:d.inflation,onChange:D=>A("inflation",D),placeholder:"6"})}),a.jsx(X,{label:"Expected CAGR %",children:a.jsx(ce,{type:"number",value:d.cagr,onChange:D=>A("cagr",D),placeholder:"12"})}),a.jsx(X,{label:"Lumpsum",children:a.jsx(ce,{type:"number",value:d.lumpsum,onChange:D=>A("lumpsum",D),placeholder:"0"})}),a.jsx(X,{label:"Monthly SIP",children:a.jsx(ce,{type:"number",value:d.monthlySIP,onChange:D=>A("monthlySIP",D),placeholder:"0"})})]}),w.hasTarget&&a.jsx(gp,{calc:w,inflation:d.inflation,isRetirement:N,isEmergency:y}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsx(X,{label:"Priority",children:a.jsx(Me,{value:d.priority,onChange:D=>A("priority",D),options:bp})}),a.jsx(X,{label:"Status",children:a.jsx(Me,{value:d.status,onChange:D=>A("status",D),options:I5})})]}),a.jsx(X,{label:"Notes",children:a.jsx(Ks,{value:d.notes,onChange:D=>A("notes",D),placeholder:"Optional notes...",rows:2})}),a.jsxs("div",{className:"flex items-center justify-between",children:[c?a.jsx(Oa,{onClick:c}):a.jsx("div",{}),a.jsx(Dt,{onCancel:u,onSubmit:q,submitLabel:"Update Goal",loading:k})]})]}):a.jsxs("div",{className:"space-y-5",children:[a.jsx("div",{className:"flex items-center gap-1 mb-2",children:vp.map((D,$)=>{const P=D.icon,le=$===f,E=$<f;return a.jsxs("div",{className:"flex items-center flex-1",children:[a.jsxs("button",{onClick:()=>{$<f&&v($)},className:`flex items-center gap-1.5 text-xs font-semibold transition-colors ${le?"text-violet-400":E?"text-emerald-400 cursor-pointer":"text-[var(--text-dim)]"}`,children:[a.jsx("span",{className:`w-6 h-6 rounded-full flex items-center justify-center text-[10px] font-bold border ${le?"border-violet-400 bg-violet-500/15":E?"border-emerald-400 bg-emerald-500/15":"border-[var(--border)] bg-[var(--bg-inset)]"}`,children:E?a.jsx(an,{size:12}):a.jsx(P,{size:12})}),a.jsx("span",{className:"hidden sm:inline",children:D.label})]}),$<vp.length-1&&a.jsx("div",{className:`flex-1 h-px mx-2 ${E?"bg-emerald-400/40":"bg-[var(--border)]"}`})]},D.label)})}),f===0&&a.jsxs("div",{className:"space-y-4",children:[a.jsx("p",{className:"text-xs text-[var(--text-muted)]",children:"Tell us about your financial goal"}),a.jsx(X,{label:"Goal Type",required:!0,error:S.goalType,children:a.jsx(Me,{value:d.goalType,onChange:D=>A("goalType",D),options:pp,placeholder:"Select type..."})}),d.goalType&&a.jsxs("div",{className:"flex items-center gap-3 px-3 py-2 rounded-lg bg-[var(--bg-inset)] border border-[var(--border-light)]",children:[a.jsx(Xs,{size:12,className:"text-[var(--text-dim)] shrink-0"}),a.jsxs("p",{className:"text-[11px] text-[var(--text-muted)]",children:["Default: ",$i[d.goalType]?.inflation||6,"% inflation, ",$i[d.goalType]?.cagr||12,"% CAGR",N&&"  Uses 25x annual expenses rule",y&&"  No inflation applied"]})]}),a.jsx(X,{label:"Goal Name",required:!0,error:S.goalName,children:a.jsx(ce,{value:d.goalName,onChange:D=>A("goalName",D),placeholder:"e.g., Retirement Fund (2045)"})}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsx(X,{label:"Family Member",error:S.familyMemberId,children:a.jsx(Me,{value:d.familyMemberId,onChange:D=>A("familyMemberId",D),options:h,placeholder:"Family (Default)"})}),a.jsx(X,{label:"Priority",children:a.jsx(Me,{value:d.priority,onChange:D=>A("priority",D),options:bp})})]})]}),f===1&&a.jsxs("div",{className:"space-y-4",children:[a.jsx("p",{className:"text-xs text-[var(--text-muted)]",children:N?"Set your retirement timeline and monthly expenses":y?"Set your emergency fund requirements":"Set your target and investment plan"}),a.jsx(X,{label:"Target Date",required:!0,error:S.targetDate,children:a.jsx(ce,{type:"date",value:d.targetDate,onChange:D=>A("targetDate",D)})}),N||y?a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsx(X,{label:"Monthly Expenses (Today)",required:!0,error:S.monthlyExpenses,children:a.jsx(ce,{type:"number",value:d.monthlyExpenses,onChange:D=>A("monthlyExpenses",D),placeholder:"e.g., 50000"})}),y&&a.jsx(X,{label:"Emergency Fund (Months)",children:a.jsx(ce,{type:"number",value:d.emergencyMonths,onChange:D=>A("emergencyMonths",D),placeholder:"6"})}),N&&a.jsx("div",{className:"sm:col-span-2",children:a.jsxs("p",{className:"text-[11px] text-[var(--text-dim)]",children:["Corpus = Monthly Expenses x 12 x 25 = ",G(w.todaysCost)," (today)"]})})]}):a.jsx(X,{label:"Today's Cost",required:!0,error:S.todaysCost,children:a.jsx(ce,{type:"number",value:d.todaysCost,onChange:D=>A("todaysCost",D),placeholder:"e.g., 1000000"})}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsx(X,{label:`Inflation Rate (%)${y?"  N/A":""}`,children:a.jsx(ce,{type:"number",value:d.inflation,onChange:D=>A("inflation",D),placeholder:"6"})}),a.jsx(X,{label:"Expected Returns (CAGR %)",children:a.jsx(ce,{type:"number",value:d.cagr,onChange:D=>A("cagr",D),placeholder:"12"})})]}),w.hasTarget&&a.jsx(gp,{calc:w,inflation:d.inflation,isRetirement:N,isEmergency:y}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsx(X,{label:"Lumpsum Investment (Optional)",children:a.jsx(ce,{type:"number",value:d.lumpsum,onChange:D=>A("lumpsum",D),placeholder:"0"})}),a.jsx(X,{label:"Monthly SIP",children:a.jsx(ce,{type:"number",value:d.monthlySIP,onChange:D=>A("monthlySIP",D),placeholder:"0"})})]}),w.hasTarget&&w.months>0&&a.jsx(yp,{calc:w,sip:d.monthlySIP,lumpsum:d.lumpsum}),a.jsx(X,{label:"Notes",children:a.jsx(Ks,{value:d.notes,onChange:D=>A("notes",D),placeholder:"Optional notes...",rows:2})})]}),f===2&&a.jsxs("div",{className:"space-y-4",children:[a.jsx("p",{className:"text-xs text-[var(--text-muted)]",children:"Review your goal before saving"}),a.jsxs("div",{className:"bg-[var(--bg-inset)] rounded-lg border border-[var(--border-light)] p-4 space-y-3",children:[a.jsx($t,{label:"Goal",value:d.goalName,bold:!0}),a.jsx($t,{label:"Type",value:d.goalType,color:"violet"}),a.jsx($t,{label:"Member",value:Z}),a.jsx($t,{label:"Priority",value:d.priority,badge:d.priority==="High"?"rose":d.priority==="Low"?"blue":"amber"}),a.jsxs("div",{className:"border-t border-[var(--border-light)] pt-3 space-y-2",children:[(N||y)&&a.jsx($t,{label:"Monthly Expenses",value:G(Number(d.monthlyExpenses)||0)}),y&&a.jsx($t,{label:"Emergency Months",value:d.emergencyMonths}),!N&&!y&&a.jsx($t,{label:"Today's Cost",value:G(w.todaysCost)}),a.jsx($t,{label:"Inflation",value:`${d.inflation}% p.a.`}),a.jsx($t,{label:"Expected CAGR",value:`${d.cagr}% p.a.`}),a.jsx($t,{label:"Future Value (Inflated)",value:G(w.inflatedTarget),bold:!0,color:"violet"})]}),a.jsxs("div",{className:"border-t border-[var(--border-light)] pt-3 space-y-2",children:[a.jsx($t,{label:"Lumpsum",value:G(Number(d.lumpsum)||0)}),a.jsx($t,{label:"Monthly SIP",value:`${G(Number(d.monthlySIP)||0)}/mo`,color:"emerald"}),a.jsx($t,{label:"Target Date",value:d.targetDate}),a.jsx($t,{label:"Time Remaining",value:w.yearsToGo>0?`${w.yearsToGo.toFixed(1)} years`:""})]})]}),w.hasTarget&&w.months>0&&w.hasInputs&&a.jsx(yp,{calc:w,sip:d.monthlySIP,lumpsum:d.lumpsum,compact:!0})]}),a.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-[var(--border-light)]",children:[a.jsx("div",{children:f>0&&a.jsxs("button",{onClick:()=>v(D=>D-1),className:"flex items-center gap-1 px-4 py-2 text-xs font-semibold text-[var(--text-muted)] hover:text-[var(--text-primary)] rounded-lg hover:bg-[var(--bg-hover)] transition-colors",children:[a.jsx(T0,{size:14})," Back"]})}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:u,className:"px-4 py-2 text-xs font-semibold text-[var(--text-muted)] hover:text-[var(--text-primary)] rounded-lg hover:bg-[var(--bg-hover)] transition-colors",children:"Cancel"}),f<2?a.jsxs("button",{onClick:J,className:"flex items-center gap-1 px-5 py-2 text-xs font-semibold text-white bg-violet-600 hover:bg-violet-500 rounded-lg transition-colors",children:["Next ",a.jsx(ir,{size:14})]}):a.jsx("button",{onClick:q,disabled:k,className:"px-5 py-2 text-xs font-semibold text-white bg-violet-600 hover:bg-violet-500 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:k?"Saving...":"Create Goal"})]})]})]})}function gp({calc:n,inflation:o,isRetirement:c,isEmergency:u}){return u?a.jsx("div",{className:"flex items-center gap-2 px-3 py-2 rounded-lg bg-blue-500/5 border border-blue-500/15",children:a.jsxs("p",{className:"text-xs text-[var(--text-muted)]",children:["Emergency Fund: ",a.jsx("span",{className:"font-bold text-[var(--text-primary)]",children:G(n.inflatedTarget)}),a.jsx("span",{className:"text-[var(--text-dim)]",children:" (no inflation applied)"})]})}):a.jsxs("div",{className:"flex items-center justify-between gap-2 px-3 py-2 rounded-lg bg-violet-500/5 border border-violet-500/15",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-[10px] font-semibold text-[var(--text-dim)] uppercase tracking-wider",children:c?"Corpus Today":"Today's Cost"}),a.jsx("p",{className:"text-xs font-semibold text-[var(--text-secondary)]",children:G(n.todaysCost)})]}),a.jsxs("div",{className:"text-center",children:[a.jsxs("p",{className:"text-[10px] text-[var(--text-dim)]",children:[o,"% x ",n.yearsToGo.toFixed(1),"yrs"]}),a.jsx(ir,{size:12,className:"text-violet-400 mx-auto"})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-[10px] font-semibold text-violet-400 uppercase tracking-wider",children:"Future Value"}),a.jsx("p",{className:"text-xs font-bold text-[var(--text-primary)]",children:G(n.inflatedTarget)})]})]})}function yp({calc:n,sip:o,lumpsum:c,compact:u}){const x=Number(o)||0,m=Number(c)||0;return a.jsxs("div",{className:`rounded-lg border p-3 space-y-2 ${n.isOnTrack?"bg-emerald-500/5 border-emerald-500/20":"bg-amber-500/5 border-amber-500/20"}`,children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-1.5",children:[n.isOnTrack?a.jsx(an,{size:12,className:"text-emerald-400"}):a.jsx(fo,{size:12,className:"text-amber-400"}),a.jsx("p",{className:`text-[10px] font-bold uppercase tracking-wider ${n.isOnTrack?"text-emerald-400":"text-amber-400"}`,children:n.isOnTrack?"On Track":"SIP May Be Insufficient"})]}),a.jsxs("p",{className:"text-[10px] text-[var(--text-dim)]",children:["@","0","CAGR assumed"]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-xs text-[var(--text-dim)]",children:"Required Monthly SIP"}),a.jsxs("span",{className:"text-sm font-bold text-[var(--text-primary)] tabular-nums",children:[G(n.requiredSIP),"/mo"]})]}),!u&&n.hasInputs&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-xs text-[var(--text-dim)]",children:"Projected Value"}),a.jsx("span",{className:`text-sm font-bold tabular-nums ${n.isOnTrack?"text-emerald-400":"text-amber-400"}`,children:G(n.projectedValue)})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"flex-1 h-1.5 bg-[var(--bg-card)] rounded-full overflow-hidden",children:a.jsx("div",{className:`h-full rounded-full ${n.isOnTrack?"bg-emerald-500":"bg-amber-500"}`,style:{width:`${Math.min(n.pctOfTarget,100)}%`}})}),a.jsxs("span",{className:"text-xs font-bold tabular-nums text-[var(--text-primary)]",children:[Math.round(n.pctOfTarget),"%"]})]}),a.jsxs("div",{className:"border-t border-[var(--border-light)] pt-2 space-y-1",children:[m>0&&a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("span",{className:"text-[11px] text-[var(--text-dim)]",children:["Lumpsum ",G(m)," grows to"]}),a.jsx("span",{className:"text-[11px] font-semibold text-emerald-400 tabular-nums",children:G(n.fvLumpsum)})]}),x>0&&a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("span",{className:"text-[11px] text-[var(--text-dim)]",children:["SIP ",G(x),"/mo x ",n.months," mo"]}),a.jsx("span",{className:"text-[11px] font-semibold text-blue-400 tabular-nums",children:G(n.fvSIP)})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-[11px] text-[var(--text-dim)]",children:"Total Invested"}),a.jsx("span",{className:"text-[11px] font-semibold text-[var(--text-primary)] tabular-nums",children:G(n.totalInvested)})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-[11px] text-[var(--text-dim)]",children:"Wealth Created"}),a.jsxs("span",{className:"text-[11px] font-semibold text-emerald-400 tabular-nums",children:["+",G(n.totalReturns)]})]})]})]})]})}function $t({label:n,value:o,bold:c,color:u,badge:x}){const m=u==="violet"?"text-violet-400":u==="emerald"?"text-emerald-400":"text-[var(--text-primary)]";if(x){const h=x==="rose"?"bg-rose-500/15 text-rose-400":x==="blue"?"bg-blue-500/15 text-blue-400":"bg-amber-500/15 text-amber-400";return a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-xs text-[var(--text-dim)]",children:n}),a.jsx("span",{className:`text-xs font-semibold px-1.5 py-0.5 rounded ${h}`,children:o})]})}return a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-xs text-[var(--text-dim)]",children:n}),a.jsx("span",{className:`text-xs ${c?"font-bold text-sm":"font-semibold"} ${m}`,children:o})]})}function U5({goal:n,onClose:o}){const{mfPortfolios:c,goalPortfolioMappings:u,updateGoalMappings:x}=Re(),m=c.filter(N=>N.status!=="Inactive"),h=g.useMemo(()=>u.filter(N=>N.goalId===n.goalId).map(N=>({portfolioId:N.portfolioId,allocationPct:N.allocationPct})),[u,n.goalId]),[f,v]=g.useState(h.length>0?h:[]),d=f.reduce((N,y)=>N+(y.allocationPct||0),0),j=d===100||f.length===0;function S(){const N=new Set(f.map(w=>w.portfolioId)),y=m.find(w=>!N.has(w.portfolioId));y&&v(w=>[...w,{portfolioId:y.portfolioId,allocationPct:0}])}function M(N){v(y=>y.filter((w,p)=>p!==N))}function k(N,y,w){v(p=>p.map((I,J)=>J===N?{...I,[y]:y==="allocationPct"?Math.max(0,Math.min(100,Number(w)||0)):w}:I))}function z(){x(n.goalId,f),o()}const A=f.reduce((N,y)=>{const w=m.find(p=>p.portfolioId===y.portfolioId);return N+(w?w.currentValue*y.allocationPct/100:0)},0);return a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"bg-[var(--bg-inset)] rounded-lg border border-[var(--border-light)] p-3",children:[a.jsxs("div",{className:"flex items-center justify-between mb-1",children:[a.jsx("span",{className:"text-xs text-[var(--text-dim)]",children:"Goal Target"}),a.jsx("span",{className:"text-sm font-bold text-[var(--text-primary)]",children:G(n.targetAmount)})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-xs text-[var(--text-dim)]",children:"Linked Portfolio Value"}),a.jsx("span",{className:"text-sm font-semibold text-emerald-400",children:G(A)})]})]}),f.length===0?a.jsxs("div",{className:"py-6 text-center",children:[a.jsx(so,{size:24,className:"mx-auto mb-2 text-[var(--text-dim)]"}),a.jsx("p",{className:"text-xs text-[var(--text-muted)]",children:"No portfolios linked to this goal"})]}):a.jsx("div",{className:"space-y-2",children:f.map((N,y)=>{const w=m.find(p=>p.portfolioId===N.portfolioId);return a.jsxs("div",{className:"flex items-center gap-2 bg-[var(--bg-inset)] rounded-lg border border-[var(--border-light)] p-3",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("select",{value:N.portfolioId,onChange:p=>k(y,"portfolioId",p.target.value),className:"w-full px-2 py-1.5 text-xs bg-[var(--bg-input)] border border-[var(--border-input)] rounded-lg text-[var(--text-primary)] focus:outline-none focus:border-[var(--sidebar-active-text)]",children:m.map(p=>a.jsxs("option",{value:p.portfolioId,disabled:f.some((I,J)=>J!==y&&I.portfolioId===p.portfolioId),children:[p.portfolioName," (",p.ownerName,")  ",G(p.currentValue)]},p.portfolioId))}),w&&a.jsxs("p",{className:"text-[10px] text-[var(--text-dim)] mt-1 px-1",children:["Contributes ",G(w.currentValue*N.allocationPct/100)," to this goal"]})]}),a.jsxs("div",{className:"flex items-center gap-1 shrink-0",children:[a.jsx("input",{type:"number",value:N.allocationPct,onChange:p=>k(y,"allocationPct",p.target.value),className:"w-16 px-2 py-1.5 text-xs text-center bg-[var(--bg-input)] border border-[var(--border-input)] rounded-lg text-[var(--text-primary)] focus:outline-none focus:border-[var(--sidebar-active-text)]",min:"0",max:"100"}),a.jsx("span",{className:"text-xs text-[var(--text-dim)]",children:"%"}),a.jsx("button",{onClick:()=>M(y),className:"p-1.5 text-[var(--text-dim)] hover:text-rose-400 rounded transition-colors",children:a.jsx(Sd,{size:12})})]})]},y)})}),f.length>0&&a.jsxs("div",{className:"flex items-center justify-between px-1",children:[a.jsx("span",{className:"text-xs text-[var(--text-dim)]",children:"Total Allocation"}),a.jsxs("span",{className:`text-xs font-bold ${d===100?"text-emerald-400":d>100?"text-rose-400":"text-amber-400"}`,children:[d,"%",d!==100&&a.jsx("span",{className:"font-normal text-[var(--text-dim)]",children:" (must be 100%)"})]})]}),f.length<m.length&&a.jsxs("button",{onClick:S,className:"flex items-center gap-1.5 text-xs font-semibold text-violet-400 hover:text-violet-300 transition-colors",children:[a.jsx(aa,{size:14})," Link Portfolio"]}),a.jsxs("div",{className:"flex items-center justify-end gap-2 pt-4 border-t border-[var(--border-light)]",children:[a.jsx("button",{onClick:o,className:"px-4 py-2 text-xs font-semibold text-[var(--text-muted)] hover:text-[var(--text-primary)] rounded-lg hover:bg-[var(--bg-hover)] transition-colors",children:"Cancel"}),a.jsx("button",{onClick:z,disabled:!j,className:"px-5 py-2 text-xs font-semibold text-white bg-violet-600 hover:bg-violet-500 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Save Mapping"})]})]})}function H5({goal:n,onClose:o}){const{goalPortfolioMappings:c,mfPortfolios:u,mfHoldings:x}=Re(),m=g.useMemo(()=>{const f=c.filter(S=>S.goalId===n.goalId);if(f.length===0)return null;const v=f.map(S=>{const M=u.find(y=>y.portfolioId===S.portfolioId);if(!M)return null;const k=x.filter(y=>y.portfolioId===S.portfolioId&&y.units>0),z=k.reduce((y,w)=>y+w.currentValue,0),A=z*S.allocationPct/100,N=k.map(y=>{const w=z>0?y.currentValue/z:0,p=A*w,I=y.currentNav>0?p/y.currentNav:0,J=p-I*y.avgNav;return{fundName:y.fundName,currentValue:y.currentValue,withdrawValue:p,withdrawUnits:Math.min(I,y.units),currentNav:y.currentNav,taxableGain:J,availableUnits:y.units}}).filter(y=>y.withdrawValue>0);return{portfolioName:M.portfolioName,ownerName:M.ownerName,allocationPct:S.allocationPct,portfolioValue:z,linkedValue:A,fundWithdrawals:N}}).filter(Boolean),d=v.reduce((S,M)=>S+M.linkedValue,0),j=v.reduce((S,M)=>S+M.fundWithdrawals.reduce((k,z)=>k+z.taxableGain,0),0);return{portfolioDetails:v,totalLinked:d,totalTaxableGain:j}},[n,c,u,x]);if(!m)return a.jsxs("div",{className:"py-8 text-center space-y-2",children:[a.jsx(fo,{size:24,className:"mx-auto text-amber-400"}),a.jsx("p",{className:"text-sm text-[var(--text-muted)]",children:"No portfolios linked to this goal"}),a.jsx("p",{className:"text-xs text-[var(--text-dim)]",children:"Link portfolios first to generate a withdrawal plan"}),a.jsx("button",{onClick:o,className:"mt-2 px-4 py-2 text-xs font-semibold text-[var(--text-muted)] hover:text-[var(--text-primary)] rounded-lg hover:bg-[var(--bg-hover)] transition-colors",children:"Close"})]});const h=n.targetAmount>0?m.totalLinked/n.targetAmount*100:0;return a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"bg-[var(--bg-inset)] rounded-lg border border-[var(--border-light)] p-4 space-y-2",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-xs text-[var(--text-dim)]",children:"Goal Target"}),a.jsx("span",{className:"text-sm font-bold text-[var(--text-primary)]",children:G(n.targetAmount)})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-xs text-[var(--text-dim)]",children:"Available from Linked Portfolios"}),a.jsx("span",{className:`text-sm font-bold ${m.totalLinked>=n.targetAmount?"text-emerald-400":"text-amber-400"}`,children:G(m.totalLinked)})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"flex-1 h-2 bg-[var(--bg-card)] rounded-full overflow-hidden",children:a.jsx("div",{className:`h-full rounded-full ${h>=100?"bg-emerald-500":"bg-amber-500"}`,style:{width:`${Math.min(h,100)}%`}})}),a.jsxs("span",{className:"text-xs font-bold text-[var(--text-primary)] tabular-nums",children:[h.toFixed(0),"%"]})]}),m.totalTaxableGain>0&&a.jsxs("div",{className:"flex items-center justify-between pt-1",children:[a.jsx("span",{className:"text-xs text-[var(--text-dim)]",children:"Estimated Taxable Gain"}),a.jsx("span",{className:"text-xs font-semibold text-amber-400",children:G(m.totalTaxableGain)})]})]}),m.portfolioDetails.map(f=>a.jsxs("div",{className:"bg-[var(--bg-inset)] rounded-lg border border-[var(--border-light)] overflow-hidden",children:[a.jsxs("div",{className:"px-4 py-2.5 bg-[var(--bg-card)] border-b border-[var(--border-light)] flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-semibold text-[var(--text-primary)]",children:f.portfolioName}),a.jsxs("p",{className:"text-[10px] text-[var(--text-dim)]",children:[f.ownerName,"  ",f.allocationPct,"% allocated to goal"]})]}),a.jsx("span",{className:"text-xs font-bold text-[var(--text-primary)]",children:G(f.linkedValue)})]}),a.jsx("div",{className:"px-4 py-2",children:a.jsxs("table",{className:"w-full text-xs",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"text-[var(--text-dim)]",children:[a.jsx("th",{className:"text-left py-1 font-medium",children:"Fund"}),a.jsx("th",{className:"text-right py-1 font-medium",children:"Units"}),a.jsx("th",{className:"text-right py-1 font-medium",children:"Amount"}),a.jsx("th",{className:"text-right py-1 font-medium",children:"Gain"})]})}),a.jsx("tbody",{children:f.fundWithdrawals.map(v=>a.jsxs("tr",{className:"border-t border-[var(--border-light)]",children:[a.jsx("td",{className:"py-1.5 text-[var(--text-secondary)] max-w-[180px] truncate",children:v.fundName}),a.jsx("td",{className:"py-1.5 text-right text-[var(--text-muted)] tabular-nums",children:v.withdrawUnits.toFixed(2)}),a.jsx("td",{className:"py-1.5 text-right text-[var(--text-primary)] font-semibold tabular-nums",children:G(v.withdrawValue)}),a.jsx("td",{className:`py-1.5 text-right tabular-nums font-semibold ${v.taxableGain>=0?"text-emerald-400":"text-rose-400"}`,children:G(Math.abs(v.taxableGain))})]},v.fundName))})]})})]},f.portfolioName)),a.jsx("div",{className:"flex items-center justify-end gap-2 pt-4 border-t border-[var(--border-light)]",children:a.jsx("button",{onClick:o,className:"px-5 py-2 text-xs font-semibold text-[var(--text-muted)] hover:text-[var(--text-primary)] rounded-lg hover:bg-[var(--bg-hover)] transition-colors",children:"Close"})})]})}const jp={"On Track":"bg-blue-500/15 text-[var(--accent-blue)]","Needs Attention":"bg-amber-500/15 text-[var(--accent-amber)]",Achieved:"bg-emerald-500/15 text-emerald-400",Paused:"bg-slate-500/15 text-[var(--text-muted)]"},F5={High:"bg-rose-500/15 text-[var(--accent-rose)]",Medium:"bg-amber-500/15 text-[var(--accent-amber)]",Low:"bg-blue-500/15 text-[var(--accent-blue)]"},Np={"On Track":"bg-blue-500","Needs Attention":"bg-amber-500",Achieved:"bg-emerald-500",Paused:"bg-slate-500"};function q5(){const{selectedMember:n,member:o}=At(),{goalList:c,addGoal:u,updateGoal:x,deleteGoal:m,goalPortfolioMappings:h}=Re(),{showToast:f,showBlockUI:v,hideBlockUI:d}=za(),[j,S]=g.useState(null),[M,k]=g.useState(null),[z,A]=g.useState(null),[N,y]=g.useState(null),w=g.useRef(new Set),p=g.useMemo(()=>{if(!c)return[];const W=c.filter(se=>se.isActive!==!1);return n==="all"?W:W.filter(se=>se.familyMemberId===n)},[c,n]),I=p.reduce((W,se)=>W+(se.targetAmount||0),0),J=p.reduce((W,se)=>W+(se.currentValue||0),0),q=p.reduce((W,se)=>W+(se.monthlyInvestment||0),0),Z=I>0?J/I*100:0,D=p.filter(W=>W.status==="Needs Attention").length,$=p.filter(W=>W.status==="Achieved").length;if(g.useEffect(()=>{const W=new Set(p.filter(F=>F.status==="Achieved").map(F=>F.goalId)),se=w.current;for(const F of W)if(!se.has(F)){const T=p.find(O=>O.goalId===F);T&&(y(T),setTimeout(()=>y(null),5e3))}w.current=W},[p]),c===null)return a.jsx(ll,{title:"Loading goals",cards:5});async function P(W){v("Saving...");try{j?.edit?await x(j.edit.goalId,W):await u(W),f(j?.edit?"Goal updated":"Goal added"),S(null)}catch(se){f(se.message||"Failed to save goal","error")}finally{d()}}async function le(){if(j?.edit&&confirm("Delete this goal?")){v("Deleting...");try{await m(j.edit.goalId),f("Goal deleted"),S(null)}catch(W){f(W.message||"Failed to delete goal","error")}finally{d()}}}function E(W){return!W.targetAmount||W.targetAmount===0?0:Math.min((W.currentValue||0)/W.targetAmount*100,100)}function fe(W){if(!W.targetDate)return null;const F=(new Date(W.targetDate)-new Date)/(365.25*24*60*60*1e3);return F>0?F.toFixed(1):"0"}return a.jsxs("div",{className:"space-y-4",children:[p.length===0?a.jsxs("div",{className:"bg-[var(--bg-card)] rounded-xl border border-[var(--border)] py-12 flex flex-col items-center gap-3",children:[a.jsx(fr,{size:32,className:"text-[var(--text-dim)]"}),a.jsxs("p",{className:"text-sm text-[var(--text-muted)]",children:["No goals set",o?` for ${o.memberName}`:""]}),a.jsx("button",{onClick:()=>S("add"),className:"text-xs font-semibold text-violet-400 hover:text-violet-300",children:"Create your first goal"})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-6 gap-3",children:[a.jsx($s,{label:"Goals",value:p.length,sub:$>0?`${$} achieved`:void 0}),a.jsx($s,{label:"Target",value:G(I),bold:!0}),a.jsx($s,{label:"Current Value",value:G(J),bold:!0}),a.jsx($s,{label:"Total Gap",value:G(Math.max(I-J,0)),sub:I>J?"remaining to target":"all targets met",positive:I<=J,bold:!0}),a.jsx($s,{label:"Overall Progress",value:`${Z.toFixed(1)}%`,positive:Z>=50,bold:!0}),a.jsx($s,{label:"Monthly SIP",value:G(q),sub:D>0?`${D} need attention`:void 0})]}),N&&a.jsxs("div",{className:"relative bg-gradient-to-r from-emerald-500/10 via-yellow-500/10 to-emerald-500/10 rounded-xl border border-emerald-500/30 px-4 py-3 flex items-center gap-3 animate-fade-in overflow-hidden",children:[a.jsx("div",{className:"absolute inset-0 pointer-events-none",children:Array.from({length:20}).map((W,se)=>a.jsx("span",{className:"absolute text-sm animate-confetti",style:{left:`${Math.random()*100}%`,animationDelay:`${Math.random()*2}s`,animationDuration:`${2+Math.random()*2}s`},children:["","","","",""][se%5]},se))}),a.jsx(Hh,{size:20,className:"text-yellow-400 shrink-0 relative z-10"}),a.jsxs("div",{className:"relative z-10",children:[a.jsx("p",{className:"text-sm font-bold text-emerald-400",children:"Goal Achieved!"}),a.jsxs("p",{className:"text-xs text-[var(--text-secondary)]",children:[N.goalName,"  Congratulations!"]})]}),a.jsx("button",{onClick:()=>y(null),className:"ml-auto text-xs text-[var(--text-dim)] hover:text-[var(--text-primary)] relative z-10",children:"Dismiss"})]}),$>0&&a.jsxs("div",{className:"bg-[var(--bg-card)] rounded-xl border border-emerald-500/20 p-4",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[a.jsx(Hh,{size:14,className:"text-yellow-400"}),a.jsx("p",{className:"text-xs font-bold text-[var(--text-secondary)] uppercase tracking-wider",children:"Achieved Goals"})]}),a.jsx("div",{className:"flex gap-3 overflow-x-auto no-scrollbar pb-1",children:p.filter(W=>W.status==="Achieved").map(W=>a.jsxs("div",{className:"shrink-0 bg-emerald-500/10 border border-emerald-500/20 rounded-lg px-3 py-2 min-w-[160px]",children:[a.jsx("p",{className:"text-xs font-semibold text-emerald-400",children:W.goalName}),a.jsx("p",{className:"text-sm font-bold text-[var(--text-primary)] mt-1",children:G(W.targetAmount)}),a.jsx("p",{className:"text-[10px] text-[var(--text-dim)] mt-0.5",children:W.familyMemberName})]},W.goalId))})]}),a.jsx("div",{className:"flex items-center justify-end gap-2 px-1",children:a.jsxs("button",{onClick:()=>S("add"),className:"flex items-center gap-1.5 px-3 py-2 text-xs font-semibold text-violet-400 hover:text-violet-300 bg-[var(--bg-card)] border border-[var(--border)] rounded-lg transition-colors",children:[a.jsx(aa,{size:14})," Add Goal"]})}),a.jsxs("div",{className:"bg-[var(--bg-card)] rounded-xl border border-[var(--border)] overflow-hidden",children:[a.jsx("div",{className:"hidden lg:block overflow-x-auto",children:a.jsxs("table",{className:"w-full text-sm",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b border-[var(--border-light)] bg-[var(--bg-inset)]",children:[a.jsx("th",{className:"text-left py-2.5 px-4 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Goal"}),!o&&a.jsx("th",{className:"text-left py-2.5 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Member"}),a.jsxs("th",{className:"text-right py-2.5 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:[a.jsx("div",{children:"Amount"}),a.jsx("div",{className:"text-[10px] font-medium text-[var(--text-dim)]",children:"Current / Target"})]}),a.jsx("th",{className:"text-center py-2.5 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider min-w-[120px]",children:"Progress"}),a.jsx("th",{className:"text-right py-2.5 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Monthly SIP"}),a.jsxs("th",{className:"text-center py-2.5 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:[a.jsx("div",{children:"Timeline"}),a.jsx("div",{className:"text-[10px] font-medium text-[var(--text-dim)]",children:"Years Left"})]}),a.jsx("th",{className:"text-center py-2.5 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Status"}),a.jsx("th",{className:"w-8 py-2.5 px-2"})]})}),a.jsx("tbody",{children:p.map(W=>{const se=E(W),F=fe(W);return a.jsxs("tr",{className:"border-b border-[var(--border-light)] last:border-0 hover:bg-[var(--bg-hover)] transition-colors group",children:[a.jsxs("td",{className:"py-2.5 px-4",children:[a.jsx("p",{className:"text-sm font-medium text-[var(--text-primary)]",children:W.goalName}),a.jsxs("div",{className:"flex items-center gap-1.5 mt-0.5",children:[a.jsx("span",{className:`text-xs font-semibold px-1.5 py-0.5 rounded ${F5[W.priority]||""}`,children:W.priority}),W.notes&&a.jsx("span",{className:"text-xs text-[var(--text-dim)]",children:W.notes})]})]}),!o&&a.jsx("td",{className:"py-2.5 px-3 text-xs text-[var(--text-secondary)]",children:W.familyMemberName}),a.jsxs("td",{className:"py-2.5 px-3 text-right",children:[a.jsx("p",{className:"text-xs font-semibold text-[var(--text-primary)] tabular-nums",children:G(W.currentValue)}),a.jsx("p",{className:"text-xs text-[var(--text-dim)] tabular-nums",children:G(W.targetAmount)})]}),a.jsx("td",{className:"py-2.5 px-3",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"flex-1 h-2 bg-[var(--bg-inset)] rounded-full overflow-hidden",children:a.jsx("div",{className:`h-full rounded-full ${Np[W.status]||"bg-blue-500"}`,style:{width:`${se}%`}})}),a.jsxs("span",{className:"text-xs font-bold text-[var(--text-primary)] tabular-nums w-10 text-right",children:[se.toFixed(0),"%"]})]})}),a.jsx("td",{className:"py-2.5 px-3 text-right text-xs font-semibold text-[var(--text-primary)] tabular-nums",children:G(W.monthlyInvestment)}),a.jsx("td",{className:"py-2.5 px-3 text-center text-xs text-[var(--text-muted)] tabular-nums",children:W.status==="Achieved"?"Done":F?`${F} yrs`:""}),a.jsx("td",{className:"py-2.5 px-3 text-center",children:a.jsx("span",{className:`text-xs font-semibold px-2 py-0.5 rounded-full ${jp[W.status]||"bg-slate-500/15 text-[var(--text-muted)]"}`,children:W.status})}),a.jsx("td",{className:"py-2.5 px-2",children:a.jsxs("div",{className:"flex items-center gap-0.5 opacity-0 group-hover:opacity-100 transition-all",children:[a.jsx("button",{onClick:()=>A(W),className:"p-1 rounded text-[var(--text-dim)] hover:text-emerald-400 transition-colors",title:"Withdrawal plan",children:a.jsx(k0,{size:12})}),a.jsx("button",{onClick:()=>k(W),className:"p-1 rounded text-[var(--text-dim)] hover:text-violet-400 transition-colors",title:"Link portfolios",children:a.jsx(so,{size:12})}),a.jsx("button",{onClick:()=>S({edit:W}),className:"p-1 rounded text-[var(--text-dim)] hover:text-[var(--text-primary)] transition-colors",children:a.jsx(Da,{size:12})})]})})]},W.goalId)})})]})}),a.jsx("div",{className:"lg:hidden divide-y divide-[var(--border-light)]",children:p.map(W=>{const se=E(W),F=fe(W);return a.jsxs("div",{onClick:()=>S({edit:W}),className:"px-4 py-4 hover:bg-[var(--bg-hover)] transition-colors cursor-pointer",children:[a.jsxs("div",{className:"flex items-start justify-between mb-2",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-[var(--text-primary)]",children:W.goalName}),a.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[a.jsxs("span",{className:"text-xs text-[var(--text-muted)]",children:[W.familyMemberName,"  SIP ",G(W.monthlyInvestment),"/mo"]}),h.filter(T=>T.goalId===W.goalId).length>0&&a.jsxs("span",{className:"text-[10px] font-semibold text-violet-400 flex items-center gap-0.5",children:[a.jsx(so,{size:9}),h.filter(T=>T.goalId===W.goalId).length]})]})]}),a.jsx("span",{className:`text-xs font-semibold px-2 py-0.5 rounded-full shrink-0 ${jp[W.status]||"bg-slate-500/15 text-[var(--text-muted)]"}`,children:W.status})]}),a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("div",{className:"flex-1 h-2 bg-[var(--bg-inset)] rounded-full overflow-hidden",children:a.jsx("div",{className:`h-full rounded-full ${Np[W.status]||"bg-blue-500"}`,style:{width:`${se}%`}})}),a.jsxs("span",{className:"text-xs font-bold text-[var(--text-primary)] tabular-nums",children:[se.toFixed(0),"%"]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("span",{className:"text-xs text-[var(--text-muted)]",children:[G(W.currentValue)," ",a.jsx("span",{className:"text-[var(--text-dim)]",children:"of"})," ",G(W.targetAmount)]}),a.jsx("span",{className:"text-xs text-[var(--text-dim)]",children:W.status==="Achieved"?"Done":F?`${F} yrs left`:""})]})]},W.goalId)})})]})]}),a.jsx(ft,{open:!!j,onClose:()=>S(null),title:j?.edit?"Edit Goal":"Add Goal",wide:!0,children:a.jsx(B5,{initial:j?.edit||void 0,onSave:P,onDelete:j?.edit?le:void 0,onCancel:()=>S(null)})}),a.jsx(ft,{open:!!M,onClose:()=>k(null),title:`Link Portfolios  ${M?.goalName||""}`,wide:!0,children:M&&a.jsx(U5,{goal:M,onClose:()=>k(null)})}),a.jsx(ft,{open:!!z,onClose:()=>A(null),title:`Withdrawal Plan  ${z?.goalName||""}`,wide:!0,children:z&&a.jsx(H5,{goal:z,onClose:()=>A(null)})})]})}function $s({label:n,value:o,sub:c,positive:u,bold:x}){return a.jsxs("div",{className:"bg-[var(--bg-card)] rounded-xl border border-[var(--border)] px-4 py-3",children:[a.jsx("p",{className:"text-xs text-[var(--text-dim)] uppercase tracking-wider mb-1",children:n}),a.jsx("p",{className:`text-sm tabular-nums ${x?"font-bold":"font-semibold"} ${u===void 0?"text-[var(--text-primary)]":u?"text-emerald-400":"text-[var(--accent-amber)]"}`,children:o}),c&&a.jsx("p",{className:"text-xs text-[var(--text-dim)] mt-0.5",children:c})]})}const $5=[{label:"Reports & Transactions",desc:"View transaction history",icon:z0,path:"/reports",color:"bg-blue-500/15 text-[var(--accent-blue)]"},{label:"Reminders",desc:"View and manage reminders",icon:mo,path:"/reminders",color:"bg-amber-500/15 text-[var(--accent-amber)]"},{label:"Health Check",desc:"Financial health questionnaire",icon:td,path:"/health-check",color:"bg-emerald-500/15 text-emerald-400"},{label:"Settings",desc:"App configuration",icon:Nd,path:"/settings",color:"bg-slate-500/15 text-[var(--text-muted)]"},{label:"About",desc:"Capital Friends v2.0",icon:Fj,path:"/about",color:"bg-violet-500/15 text-[var(--accent-violet)]"},{label:"Support Developer",desc:"UPI: jagadeeshmanne.hdfc@kphdfc",icon:lo,path:"/about",color:"bg-pink-500/15 text-pink-400"}];function P5(){const n=Wl();return a.jsxs("div",{className:"space-y-4",children:[a.jsx("h1",{className:"text-base font-bold text-[var(--text-primary)]",children:"More"}),a.jsx("div",{className:"space-y-2",children:$5.map(o=>a.jsxs("button",{onClick:()=>n(o.path),className:"w-full flex items-center gap-3 bg-[var(--bg-card)] rounded-xl border border-[var(--border)] p-4 hover:bg-[var(--bg-hover)] transition-colors text-left",children:[a.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center shrink-0 ${o.color}`,children:a.jsx(o.icon,{size:18})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-[var(--text-primary)]",children:o.label}),a.jsx("p",{className:"text-xs text-[var(--text-dim)]",children:o.desc})]})]},o.label))})]})}const Pi=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];function G5(){const n=Wl(),{theme:o,toggle:c}=N0(),{members:u,settings:x,updateSettings:m,updateMember:h,healthCheckCompleted:f}=Re(),{user:v,signOut:d}=es(),{masked:j,toggleMask:S,mv:M}=Ra(),k=u.filter(se=>se.status==="Active"),[z,A]=g.useState("Daily"),[N,y]=g.useState("09"),[w,p]=g.useState("Monday"),[I,J]=g.useState(!1),[q,Z]=g.useState(!1),[D,$]=g.useState(!1),[P,le]=g.useState(null);g.useEffect(()=>{!x||!Object.keys(x).length||(x.EmailFrequency&&A(x.EmailFrequency),x.EmailHour!=null&&y(String(x.EmailHour).padStart(2,"0")),x.EmailDayOfWeek!=null&&p(Pi[Number(x.EmailDayOfWeek)]||"Monday"))},[x]);async function E(){J(!0),Z(!1);try{const se=Pi.indexOf(w);await m({EmailFrequency:z==="None"?"None":z,EmailConfigured:z==="None"?"FALSE":"TRUE",EmailHour:String(parseInt(N,10)),EmailMinute:"0",EmailDayOfWeek:String(se>=0?se:1)}),Z(!0),setTimeout(()=>Z(!1),2e3)}catch(se){alert("Failed to save: "+se.message)}finally{J(!1)}}async function fe(){$(!0),le(null);try{const se=await D1();le(se)}catch(se){le({error:se.message})}finally{$(!1)}}function W(se){if(!se)return"Never";try{const F=new Date(se);if(isNaN(F.getTime()))return"Unknown";const T=Date.now(),O=Math.floor((T-F.getTime())/(1e3*60));if(O<1)return"Just now";if(O<60)return O+" min ago";const ie=Math.floor(O/60);return ie<24?ie+"h ago":F.toLocaleDateString("en-IN",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"})}catch{return"Unknown"}}return a.jsxs("div",{className:"space-y-4 max-w-xl mx-auto",children:[a.jsxs(Zl,{children:[a.jsx(Kl,{icon:a.jsx(TN,{size:14}),title:"Account"}),a.jsxs("div",{className:"px-4 py-4 space-y-3",children:[a.jsx(Wt,{label:"Signed in as",children:a.jsx("p",{className:"text-xs font-semibold text-[var(--text-primary)] truncate max-w-[200px]",children:M(v?.email,"email")||""})}),a.jsx(Wt,{label:"Name",children:a.jsx("p",{className:"text-xs font-semibold text-[var(--text-primary)]",children:v?.name||""})}),a.jsx("div",{className:"pt-1",children:a.jsxs("button",{onClick:d,className:"flex items-center gap-1.5 px-3 py-1.5 text-xs font-semibold text-red-500 border border-red-200 dark:border-red-800/40 rounded-lg hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors",children:[a.jsx(_0,{size:12}),"Sign Out"]})})]})]}),a.jsxs(Zl,{children:[a.jsx(Kl,{icon:a.jsx(td,{size:14}),title:"Financial Health Check"}),a.jsxs("div",{className:"px-4 py-4 space-y-3",children:[a.jsx(Wt,{label:"Status",children:a.jsx("span",{className:`text-xs font-semibold ${f?"text-emerald-400":"text-[var(--accent-amber)]"}`,children:f?"Completed":"Not completed"})}),a.jsx("div",{className:"flex justify-end pt-1",children:a.jsxs("button",{onClick:()=>n("/health-check"),className:"flex items-center gap-1.5 px-3 py-1.5 text-xs font-semibold rounded-lg border border-[var(--border)] text-[var(--text-primary)] hover:bg-[var(--bg-hover)] transition-colors",children:[a.jsx(td,{size:12}),f?"Update Answers":"Take Health Check"]})})]})]}),a.jsxs(Zl,{children:[a.jsx(Kl,{icon:a.jsx(Sj,{size:14}),title:"Data & Sync"}),a.jsxs("div",{className:"px-4 py-4 space-y-3",children:[a.jsx(Wt,{label:"Last synced",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("p",{className:"text-xs font-semibold text-[var(--text-primary)]",children:W(x.masterDataLastSync)}),x._stale&&a.jsx("span",{className:"text-[10px] font-bold text-amber-600 px-1.5 py-0.5 rounded bg-amber-100 dark:bg-amber-900/30",children:"STALE"})]})}),x._navDataDate&&a.jsx(Wt,{label:"NAV data as of",children:a.jsx("p",{className:"text-xs font-semibold text-[var(--text-primary)]",children:x._navDataDate})}),a.jsx(Wt,{label:"Auto-refresh",children:a.jsx("p",{className:"text-xs text-[var(--text-muted)]",children:"Daily at ~6:30 AM"})}),a.jsxs("div",{className:"flex items-center justify-between pt-1",children:[a.jsx("p",{className:"text-xs text-[var(--text-dim)]",children:"Refresh MF NAVs, ATH & Stock prices"}),a.jsxs("button",{onClick:fe,disabled:D,className:"flex items-center gap-1.5 px-3 py-1.5 text-xs font-semibold rounded-lg bg-violet-600 text-white hover:bg-violet-500 transition-colors disabled:opacity-50",children:[a.jsx(dr,{size:12,className:D?"animate-spin":""}),D?"Refreshing...":"Refresh Now"]})]}),P&&a.jsx("div",{className:`text-xs px-3 py-2 rounded-lg ${P.error?"bg-red-50 text-red-600 dark:bg-red-900/20 dark:text-red-400":"bg-green-50 text-green-600 dark:bg-green-900/20 dark:text-green-400"}`,children:P.error?"Failed: "+P.error:`Done  MF: ${P.mf?.count||0} | ATH: ${P.ath?.count||0} | Stocks: ${P.stocks?.count||0} (${P.duration})`})]})]}),a.jsxs(Zl,{children:[a.jsx(Kl,{icon:a.jsx(ed,{size:14}),title:"Appearance"}),a.jsx("div",{className:"px-4 py-4",children:a.jsx(Wt,{label:"Theme",children:a.jsxs("button",{onClick:c,className:"flex items-center gap-2 px-3 py-1.5 text-xs font-semibold rounded-lg border border-[var(--border)] bg-[var(--bg-inset)] text-[var(--text-primary)] hover:bg-[var(--bg-hover)] transition-colors",children:[o==="dark"?a.jsx(I0,{size:12}):a.jsx(ed,{size:12}),o==="dark"?"Dark":"Light"]})})})]}),a.jsxs(Zl,{children:[a.jsx(Kl,{icon:a.jsx(Jj,{size:14}),title:"Email Reports"}),a.jsxs("div",{className:"px-4 py-4 space-y-3",children:[a.jsx(Wt,{label:"Frequency",children:a.jsx(Zu,{value:z,onChange:A,options:["Daily","Weekly","Monthly","None"]})}),z!=="None"&&a.jsx(Wt,{label:"Send time",children:a.jsx(Zu,{value:N,onChange:y,options:Array.from({length:24},(se,F)=>String(F).padStart(2,"0")),suffix:":00"})}),z==="Weekly"&&a.jsx(Wt,{label:"Day",children:a.jsx(Zu,{value:w,onChange:p,options:Pi.slice(1).concat(Pi[0])})}),a.jsx("div",{className:"flex justify-end pt-1",children:a.jsx("button",{onClick:E,disabled:I,className:"px-4 py-1.5 text-xs font-semibold text-white bg-violet-600 hover:bg-violet-500 rounded-lg transition-colors disabled:opacity-50",children:I?"Saving...":q?"Saved!":"Save"})}),k.length>0&&a.jsx(a.Fragment,{children:a.jsxs("div",{className:"border-t border-[var(--border-light)] pt-3",children:[a.jsx("p",{className:"text-xs text-[var(--text-dim)] mb-2",children:"Send report to"}),a.jsx("div",{className:"space-y-2",children:k.map(se=>a.jsx(V5,{member:se,onToggle:h},se.memberId))})]})}),k.length===0&&a.jsx("p",{className:"text-xs text-[var(--text-dim)] pt-1",children:"Add family members to configure email recipients."})]})]}),a.jsxs(Zl,{children:[a.jsx(Kl,{icon:a.jsx(Ki,{size:14}),title:"Privacy"}),a.jsxs("div",{className:"px-4 py-4 space-y-3",children:[a.jsx(Wt,{label:"Mask sensitive data",children:a.jsx("button",{onClick:S,className:`relative w-9 h-5 rounded-full transition-colors shrink-0 ${j?"bg-amber-500":"bg-[var(--bg-inset)] border border-[var(--border)]"}`,children:a.jsx("span",{className:`absolute top-0.5 w-4 h-4 rounded-full transition-all ${j?"left-[18px] bg-white":"left-0.5 bg-[var(--text-dim)]"}`})})}),a.jsxs("p",{className:"text-xs text-[var(--text-dim)]",children:[j?"Sensitive data is hidden. ":"","Masks PAN, Aadhaar, mobile, email, account numbers, client IDs, and policy numbers across the app. Use the ",j?a.jsx(Ki,{size:11,className:"inline text-amber-400"}):a.jsx(jd,{size:11,className:"inline"})," icon in the header to quickly toggle."]}),j&&a.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 rounded-lg bg-amber-500/10 border border-amber-500/20",children:[a.jsx(Ki,{size:14,className:"text-amber-400 shrink-0"}),a.jsx("p",{className:"text-xs text-amber-400 font-medium",children:"Data masking is active  safe for screen sharing"})]})]})]}),a.jsxs(Zl,{children:[a.jsx(Kl,{icon:a.jsx(_j,{size:14}),title:"Display"}),a.jsxs("div",{className:"px-4 py-4 space-y-3",children:[a.jsx(Wt,{label:"Currency",children:a.jsx("p",{className:"text-xs font-semibold text-[var(--text-primary)]",children:"INR ()"})}),a.jsx(Wt,{label:"Date format",children:a.jsx("p",{className:"text-xs font-semibold text-[var(--text-primary)]",children:"DD/MM/YYYY"})})]})]})]})}function Zl({children:n}){return a.jsx("div",{className:"bg-[var(--bg-card)] rounded-xl border border-[var(--border)] overflow-hidden",children:n})}function Kl({icon:n,title:o}){return a.jsx("div",{className:"px-4 py-2.5 border-b border-[var(--border-light)] bg-[var(--bg-inset)]",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-[var(--text-muted)]",children:n}),a.jsx("h3",{className:"text-xs font-bold text-[var(--text-muted)] uppercase tracking-wider",children:o})]})})}function Wt({label:n,children:o}){return a.jsxs("div",{className:"flex items-center justify-between gap-4",children:[a.jsx("p",{className:"text-xs text-[var(--text-dim)] shrink-0",children:n}),o]})}function Zu({value:n,onChange:o,options:c,suffix:u}){return a.jsxs("div",{className:"relative",children:[a.jsx("select",{value:n,onChange:x=>o(x.target.value),className:"appearance-none pl-3 pr-7 py-1.5 text-xs font-semibold bg-[var(--bg-inset)] border border-[var(--border)] rounded-lg text-[var(--text-primary)] focus:outline-none focus:border-violet-500 cursor-pointer",children:c.map(x=>a.jsxs("option",{value:x,children:[x,u||""]},x))}),a.jsx(Qs,{size:10,className:"absolute right-2 top-1/2 -translate-y-1/2 text-[var(--text-dim)] pointer-events-none"})]})}function V5({member:n,onToggle:o}){const{mv:c}=Ra(),u=n.includeInEmailReports==="Yes"||n.includeInEmailReports===!0,[x,m]=g.useState(!1);async function h(){m(!0);try{await o(n.memberId,{...n,includeInEmailReports:u?"No":"Yes"})}catch{}finally{m(!1)}}return a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[a.jsx("div",{className:"w-6 h-6 rounded-full bg-violet-100 dark:bg-violet-900/30 flex items-center justify-center shrink-0",children:a.jsx("span",{className:"text-[10px] font-bold text-violet-600",children:n.memberName?.charAt(0)?.toUpperCase()})}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("p",{className:"text-xs font-semibold text-[var(--text-primary)] truncate",children:n.memberName}),n.email&&a.jsx("p",{className:"text-[10px] text-[var(--text-dim)] truncate",children:c(n.email,"email")})]})]}),a.jsx("button",{onClick:h,disabled:x,className:`relative w-9 h-5 rounded-full transition-colors shrink-0 disabled:opacity-50 ${u?"bg-violet-500":"bg-[var(--bg-inset)] border border-[var(--border)]"}`,children:a.jsx("span",{className:`absolute top-0.5 w-4 h-4 rounded-full transition-all ${u?"left-[18px] bg-white":"left-0.5 bg-[var(--text-dim)]"}`})})]})}const Y5=["SIP Due Date","Insurance Renewal","FD Maturity","Loan EMI","Investment Review","Custom"].map(n=>({value:n,label:n})),Q5=[{value:"One-time",label:"One-time"},{value:"Monthly",label:"Monthly"},{value:"Quarterly",label:"Quarterly"},{value:"Yearly",label:"Yearly"}],X5=[{value:"High",label:"High"},{value:"Medium",label:"Medium"},{value:"Low",label:"Low"}];function Z5({initial:n,onSave:o,onDelete:c,onCancel:u}){const x=!!n,{activeMembers:m}=Re(),h=m.map(N=>({value:N.memberId,label:N.memberName})),[f,v]=g.useState({reminderType:n?.reminderType||"",title:n?.title||"",description:n?.description||"",familyMemberId:n?.familyMemberId||"",dueDate:n?.dueDate||"",advanceNoticeDays:n?.advanceNoticeDays?.toString()||"7",frequency:n?.frequency||"One-time",priority:n?.priority||"Medium",status:n?.status||"Pending"}),[d,j]=g.useState({}),[S,M]=g.useState(!1);function k(N,y){v(w=>({...w,[N]:y})),j(w=>({...w,[N]:void 0}))}function z(){const N={};return f.reminderType||(N.reminderType="Required"),f.title.trim()||(N.title="Required"),f.familyMemberId||(N.familyMemberId="Required"),f.dueDate||(N.dueDate="Required"),j(N),Object.keys(N).length===0}async function A(){if(z()){M(!0);try{await o({...f,advanceNoticeDays:Number(f.advanceNoticeDays)||7})}finally{M(!1)}}}return a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsx(X,{label:"Reminder Type",required:!0,error:d.reminderType,children:a.jsx(Me,{value:f.reminderType,onChange:N=>k("reminderType",N),options:Y5,placeholder:"Select type..."})}),a.jsx(X,{label:"Title",required:!0,error:d.title,children:a.jsx(ce,{value:f.title,onChange:N=>k("title",N),placeholder:"e.g., HDFC SIP Due"})})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsx(X,{label:"Family Member",required:!0,error:d.familyMemberId,children:a.jsx(Me,{value:f.familyMemberId,onChange:N=>k("familyMemberId",N),options:h,placeholder:"Select member..."})}),a.jsx(X,{label:"Due Date",required:!0,error:d.dueDate,children:a.jsx(ce,{type:"date",value:f.dueDate,onChange:N=>k("dueDate",N)})})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[a.jsx(X,{label:"Frequency",children:a.jsx(Me,{value:f.frequency,onChange:N=>k("frequency",N),options:Q5})}),a.jsx(X,{label:"Priority",children:a.jsx(Me,{value:f.priority,onChange:N=>k("priority",N),options:X5})}),a.jsx(X,{label:"Advance Notice (days)",children:a.jsx(ce,{type:"number",value:f.advanceNoticeDays,onChange:N=>k("advanceNoticeDays",N),placeholder:"7"})})]}),x&&a.jsx(X,{label:"Status",children:a.jsx(Me,{value:f.status,onChange:N=>k("status",N),options:[{value:"Pending",label:"Pending"},{value:"Completed",label:"Completed"}]})}),a.jsx(X,{label:"Description",children:a.jsx(Ks,{value:f.description,onChange:N=>k("description",N),placeholder:"Optional details...",rows:2})}),a.jsxs("div",{className:"flex items-center justify-between",children:[x&&c?a.jsx(Oa,{onClick:c,label:"Delete"}):a.jsx("div",{}),a.jsx(Dt,{onCancel:u,onSubmit:A,submitLabel:x?"Update Reminder":"Add Reminder",loading:S})]})]})}const Gi={"SIP Due Date":"bg-violet-500/15 text-[var(--accent-violet)]","Insurance Renewal":"bg-amber-500/15 text-[var(--accent-amber)]","FD Maturity":"bg-blue-500/15 text-[var(--accent-blue)]","Loan EMI":"bg-rose-500/15 text-[var(--accent-rose)]","Investment Review":"bg-emerald-500/15 text-emerald-400",Custom:"bg-slate-500/15 text-[var(--text-muted)]"},Sp={High:"bg-rose-500",Medium:"bg-amber-500",Low:"bg-blue-500"};function Ps(n){if(!n)return 1/0;const o=new Date(n)-new Date;return Math.ceil(o/(1440*60*1e3))}function K5(){const{selectedMember:n,member:o}=At(),{reminderList:c,addReminder:u,updateReminder:x,deleteReminder:m}=Re(),{showToast:h,showBlockUI:f,hideBlockUI:v}=za(),[d,j]=g.useState(null),S=g.useMemo(()=>{const p=c.filter(I=>I.isActive!==!1);return n==="all"?p:p.filter(I=>I.familyMemberId===n)},[c,n]),M=S.filter(p=>Ps(p.dueDate)<0).length,k=S.filter(p=>{const I=Ps(p.dueDate);return I>=0&&I<=7}).length,z=S.filter(p=>{const I=Ps(p.dueDate);return I>7&&I<=30}).length,A=[...S].sort((p,I)=>{const J=Ps(p.dueDate),q=Ps(I.dueDate);return J-q});async function N(p){f("Saving...");try{d?.edit?await x(d.edit.reminderId,p):await u(p),h(d?.edit?"Reminder updated":"Reminder added"),j(null)}catch(I){h(I.message||"Failed to save reminder","error")}finally{v()}}async function y(){if(d?.edit&&confirm("Delete this reminder?")){f("Deleting...");try{await m(d.edit.reminderId),h("Reminder deleted"),j(null)}catch(p){h(p.message||"Failed to delete reminder","error")}finally{v()}}}function w(p){const I=Ps(p);return I<0?{label:`${Math.abs(I)}d overdue`,cls:"bg-rose-500/20 text-[var(--accent-rose)]"}:I===0?{label:"Today",cls:"bg-rose-500/20 text-[var(--accent-rose)]"}:I<=7?{label:`${I}d`,cls:"bg-amber-500/20 text-[var(--accent-amber)]"}:I<=30?{label:`${I}d`,cls:"bg-blue-500/20 text-[var(--accent-blue)]"}:{label:`${I}d`,cls:"bg-slate-500/20 text-[var(--text-muted)]"}}return a.jsxs("div",{className:"space-y-4",children:[S.length===0?a.jsxs("div",{className:"bg-[var(--bg-card)] rounded-xl border border-[var(--border)] py-12 flex flex-col items-center gap-3",children:[a.jsx(lj,{size:32,className:"text-[var(--text-dim)]"}),a.jsxs("p",{className:"text-sm text-[var(--text-muted)]",children:["No reminders",o?` for ${o.memberName}`:""]}),a.jsx("button",{onClick:()=>j("add"),className:"text-xs font-semibold text-violet-400 hover:text-violet-300",children:"Add a reminder"})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:[a.jsx(Vi,{label:"Active",value:S.length}),M>0&&a.jsx(Vi,{label:"Overdue",value:M,color:"rose"}),k>0&&a.jsx(Vi,{label:"Due This Week",value:k,color:"amber"}),a.jsx(Vi,{label:"Next 30 Days",value:z})]}),a.jsx("div",{className:"flex items-center justify-end px-1",children:a.jsxs("button",{onClick:()=>j("add"),className:"flex items-center gap-1.5 px-3 py-2 text-xs font-semibold text-violet-400 hover:text-violet-300 bg-[var(--bg-card)] border border-[var(--border)] rounded-lg transition-colors",children:[a.jsx(aa,{size:14})," Add Reminder"]})}),a.jsxs("div",{className:"bg-[var(--bg-card)] rounded-xl border border-[var(--border)] overflow-hidden",children:[a.jsx("div",{className:"hidden sm:block overflow-x-auto",children:a.jsxs("table",{className:"w-full text-sm min-w-[680px]",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b border-[var(--border-light)] bg-[var(--bg-inset)]",children:[a.jsx("th",{className:"text-left py-2.5 px-4 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Reminder"}),a.jsx("th",{className:"text-left py-2.5 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Type"}),!o&&a.jsx("th",{className:"text-left py-2.5 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Member"}),a.jsx("th",{className:"text-center py-2.5 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Due Date"}),a.jsx("th",{className:"text-center py-2.5 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Frequency"}),a.jsx("th",{className:"text-center py-2.5 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Status"}),a.jsx("th",{className:"w-8 py-2.5 px-2"})]})}),a.jsx("tbody",{children:A.map(p=>{const I=w(p.dueDate);return a.jsxs("tr",{className:"border-b border-[var(--border-light)] last:border-0 hover:bg-[var(--bg-hover)] transition-colors group",children:[a.jsx("td",{className:"py-2.5 px-4",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:`w-2 h-2 rounded-full shrink-0 ${Sp[p.priority]||"bg-slate-400"}`}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-[var(--text-primary)]",children:p.title}),p.description&&a.jsx("p",{className:"text-xs text-[var(--text-dim)] truncate max-w-[200px]",children:p.description})]})]})}),a.jsx("td",{className:"py-2.5 px-3",children:a.jsx("span",{className:`text-xs font-semibold px-2 py-0.5 rounded-full ${Gi[p.reminderType]||Gi.Custom}`,children:p.reminderType})}),!o&&a.jsx("td",{className:"py-2.5 px-3 text-xs text-[var(--text-secondary)]",children:p.familyMemberName}),a.jsx("td",{className:"py-2.5 px-3 text-center",children:a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-[var(--text-muted)] tabular-nums",children:p.dueDate}),a.jsx("span",{className:`text-xs font-semibold px-1.5 py-0.5 rounded-full ${I.cls}`,children:I.label})]})}),a.jsx("td",{className:"py-2.5 px-3 text-center text-xs text-[var(--text-muted)]",children:p.frequency}),a.jsx("td",{className:"py-2.5 px-3 text-center",children:a.jsx("span",{className:`text-xs font-semibold px-2 py-0.5 rounded-full ${p.status==="Pending"?"bg-amber-500/15 text-[var(--accent-amber)]":"bg-emerald-500/15 text-emerald-400"}`,children:p.status})}),a.jsx("td",{className:"py-2.5 px-2",children:a.jsx("button",{onClick:()=>j({edit:p}),className:"opacity-0 group-hover:opacity-100 p-1 rounded text-[var(--text-dim)] hover:text-[var(--text-primary)] transition-all",children:a.jsx(Da,{size:12})})})]},p.reminderId)})})]})}),a.jsx("div",{className:"sm:hidden divide-y divide-[var(--border-light)]",children:A.map(p=>{const I=w(p.dueDate);return a.jsxs("div",{onClick:()=>j({edit:p}),className:"px-4 py-3.5 hover:bg-[var(--bg-hover)] transition-colors cursor-pointer",children:[a.jsxs("div",{className:"flex items-center justify-between mb-1",children:[a.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[a.jsx("span",{className:`w-2 h-2 rounded-full shrink-0 ${Sp[p.priority]||"bg-slate-400"}`}),a.jsx("p",{className:"text-sm font-medium text-[var(--text-primary)] truncate",children:p.title})]}),a.jsx("span",{className:`text-xs font-semibold px-2 py-0.5 rounded-full shrink-0 ml-2 ${Gi[p.reminderType]||Gi.Custom}`,children:p.reminderType})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("p",{className:"text-xs text-[var(--text-muted)]",children:[p.familyMemberName,"  ",p.frequency]}),a.jsx("span",{className:`text-xs font-semibold px-1.5 py-0.5 rounded-full ${I.cls}`,children:I.label})]})]},p.reminderId)})})]})]}),a.jsx(ft,{open:!!d,onClose:()=>j(null),title:d?.edit?"Edit Reminder":"Add Reminder",wide:!0,children:a.jsx(Z5,{initial:d?.edit||void 0,onSave:N,onDelete:d?.edit?y:void 0,onCancel:()=>j(null)})})]})}function Vi({label:n,value:o,color:c}){const u=c==="rose"?"text-[var(--accent-rose)]":c==="amber"?"text-[var(--accent-amber)]":"text-[var(--text-primary)]";return a.jsxs("div",{className:"bg-[var(--bg-card)] rounded-xl border border-[var(--border)] px-4 py-3",children:[a.jsx("p",{className:"text-xs text-[var(--text-dim)] uppercase tracking-wider mb-1",children:n}),a.jsx("p",{className:`text-sm font-bold tabular-nums ${u}`,children:o})]})}const wp={BUY:"bg-emerald-500/15 text-emerald-400",SELL:"bg-rose-500/15 text-[var(--accent-rose)]"},J5={INITIAL:"bg-violet-500/15 text-[var(--accent-violet)]",SIP:"bg-blue-500/15 text-[var(--accent-blue)]",LUMPSUM:"bg-emerald-500/15 text-emerald-400",WITHDRAWAL:"bg-amber-500/15 text-[var(--accent-amber)]",SWITCH:"bg-orange-500/15 text-[var(--accent-orange)]"};function W5(){const{selectedMember:n}=At(),{mfTransactions:o,mfPortfolios:c,stockTransactions:u,stockPortfolios:x}=Re(),[m,h]=g.useState("mf"),[f,v]=g.useState("all"),d=g.useMemo(()=>{let A=[...o].sort((N,y)=>new Date(y.date)-new Date(N.date));if(n!=="all"){const N=new Set(c.filter(y=>y.ownerId===n).map(y=>y.portfolioId));A=A.filter(y=>N.has(y.portfolioId))}return f!=="all"&&(A=A.filter(N=>N.type===f)),A},[o,c,n,f]),j=g.useMemo(()=>{let A=[...u].sort((N,y)=>new Date(y.date)-new Date(N.date));if(n!=="all"){const N=new Set(x.filter(y=>y.ownerId===n).map(y=>y.portfolioId));A=A.filter(y=>N.has(y.portfolioId))}return f!=="all"&&(A=A.filter(N=>N.type===f)),A},[u,x,n,f]),S=m==="mf"?d:j,M=S.filter(A=>A.type==="BUY").reduce((A,N)=>A+(N.totalAmount||0),0),k=S.filter(A=>A.type==="SELL").reduce((A,N)=>A+(N.totalAmount||0),0),z=S.reduce((A,N)=>A+(N.gainLoss||N.realizedPL||0),0);return a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:[a.jsx(Yi,{label:"Transactions",value:S.length}),a.jsx(Yi,{label:"Total Bought",value:G(M)}),a.jsx(Yi,{label:"Total Sold",value:G(k)}),a.jsx(Yi,{label:"Realized P&L",value:`${z>=0?"+":""}${G(Math.abs(z))}`,positive:z>=0,bold:!0})]}),a.jsxs("div",{className:"flex items-center justify-between px-1",children:[a.jsx("div",{className:"flex gap-1",children:["mf","stocks"].map(A=>a.jsx("button",{onClick:()=>h(A),className:`px-3 py-1.5 text-xs font-semibold rounded-lg transition-colors ${m===A?"bg-violet-500/20 text-violet-400 border border-violet-500/30":"text-[var(--text-dim)] hover:text-[var(--text-primary)] border border-transparent"}`,children:A==="mf"?"Mutual Funds":"Stocks"},A))}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(Oj,{size:12,className:"text-[var(--text-dim)]"}),["all","BUY","SELL"].map(A=>a.jsx("button",{onClick:()=>v(A),className:`px-2 py-1 text-xs font-semibold rounded transition-colors ${f===A?"bg-[var(--bg-card)] text-[var(--text-primary)] border border-[var(--border)]":"text-[var(--text-dim)] hover:text-[var(--text-muted)]"}`,children:A==="all"?"All":A},A))]})]}),a.jsx("div",{className:"bg-[var(--bg-card)] rounded-xl border border-[var(--border)] overflow-hidden",children:S.length===0?a.jsxs("div",{className:"py-12 flex flex-col items-center gap-3",children:[a.jsx(z0,{size:32,className:"text-[var(--text-dim)]"}),a.jsx("p",{className:"text-sm text-[var(--text-muted)]",children:"No transactions found"})]}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"hidden sm:block overflow-x-auto",children:a.jsxs("table",{className:"w-full text-sm min-w-[700px]",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b border-[var(--border-light)] bg-[var(--bg-inset)]",children:[a.jsx("th",{className:"text-left py-2.5 px-4 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Date"}),a.jsx("th",{className:"text-left py-2.5 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Type"}),a.jsx("th",{className:"text-left py-2.5 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:m==="mf"?"Fund":"Stock"}),a.jsx("th",{className:"text-left py-2.5 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Portfolio"}),a.jsx("th",{className:"text-right py-2.5 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:m==="mf"?"Units":"Qty"}),a.jsx("th",{className:"text-right py-2.5 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:m==="mf"?"NAV":"Price"}),a.jsx("th",{className:"text-right py-2.5 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"Amount"}),a.jsx("th",{className:"text-right py-2.5 px-3 text-xs text-[var(--text-muted)] font-semibold uppercase tracking-wider",children:"P&L"})]})}),a.jsx("tbody",{children:S.map(A=>{const N=A.gainLoss||A.realizedPL||0;return a.jsxs("tr",{className:"border-b border-[var(--border-light)] last:border-0 hover:bg-[var(--bg-hover)] transition-colors",children:[a.jsx("td",{className:"py-2.5 px-4 text-xs text-[var(--text-muted)] tabular-nums",children:A.date}),a.jsx("td",{className:"py-2.5 px-3",children:a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("span",{className:`text-xs font-semibold px-1.5 py-0.5 rounded ${wp[A.type]||""}`,children:A.type}),A.transactionType&&a.jsx("span",{className:`text-[10px] font-semibold px-1 py-0.5 rounded ${J5[A.transactionType]||""}`,children:A.transactionType})]})}),a.jsxs("td",{className:"py-2.5 px-3",children:[a.jsx("p",{className:"text-xs font-medium text-[var(--text-primary)] truncate max-w-[180px]",children:A.fundName||A.companyName}),a.jsx("p",{className:"text-[10px] text-[var(--text-dim)]",children:A.fundCode||A.symbol})]}),a.jsx("td",{className:"py-2.5 px-3 text-xs text-[var(--text-muted)]",children:A.portfolioName||""}),a.jsx("td",{className:"py-2.5 px-3 text-right text-xs text-[var(--text-muted)] tabular-nums",children:(A.units||A.quantity||0).toFixed(m==="mf"?2:0)}),a.jsx("td",{className:"py-2.5 px-3 text-right text-xs text-[var(--text-muted)] tabular-nums",children:G(A.price||A.pricePerShare||0)}),a.jsx("td",{className:"py-2.5 px-3 text-right text-xs font-semibold text-[var(--text-primary)] tabular-nums",children:G(A.totalAmount||0)}),a.jsx("td",{className:"py-2.5 px-3 text-right",children:N!==0?a.jsxs("span",{className:`text-xs font-semibold tabular-nums ${N>=0?"text-emerald-400":"text-[var(--accent-rose)]"}`,children:[N>=0?"+":"",G(Math.abs(N))]}):a.jsx("span",{className:"text-xs text-[var(--text-dim)]",children:""})})]},A.transactionId)})})]})}),a.jsx("div",{className:"sm:hidden divide-y divide-[var(--border-light)]",children:S.map(A=>(A.gainLoss||A.realizedPL,a.jsxs("div",{className:"px-4 py-3",children:[a.jsxs("div",{className:"flex items-center justify-between mb-1",children:[a.jsx("p",{className:"text-sm font-medium text-[var(--text-primary)] truncate mr-2",children:A.fundName||A.companyName}),a.jsx("span",{className:`text-xs font-semibold px-1.5 py-0.5 rounded shrink-0 ${wp[A.type]||""}`,children:A.type})]}),a.jsxs("p",{className:"text-xs text-[var(--text-muted)]",children:[A.date,"  ",A.portfolioName]}),a.jsxs("div",{className:"flex items-center justify-between mt-1.5",children:[a.jsxs("span",{className:"text-xs text-[var(--text-dim)]",children:[(A.units||A.quantity||0).toFixed(m==="mf"?2:0)," @ ",G(A.price||A.pricePerShare||0)]}),a.jsx("span",{className:"text-xs font-semibold text-[var(--text-primary)] tabular-nums",children:G(A.totalAmount||0)})]})]},A.transactionId)))})]})})]})}function Yi({label:n,value:o,positive:c,bold:u}){return a.jsxs("div",{className:"bg-[var(--bg-card)] rounded-xl border border-[var(--border)] px-4 py-3",children:[a.jsx("p",{className:"text-xs text-[var(--text-dim)] uppercase tracking-wider mb-1",children:n}),a.jsx("p",{className:`text-sm tabular-nums ${u?"font-bold":"font-semibold"} ${c===void 0?"text-[var(--text-primary)]":c?"text-emerald-400":"text-[var(--accent-rose)]"}`,children:o})]})}const ka=[{id:"healthIns",question:"Does your family have Health Insurance?",tip:"50L to 1Cr family floater recommended (considering inflation & future expenses)",category:"Insurance"},{id:"termLife",question:"Do you have adequate Term Life Insurance?",tip:"Recommended: 10-15x annual income",category:"Insurance"},{id:"emergencyFund",question:"Do you have an Emergency Fund?",tip:"6-12 months of monthly expenses in liquid assets",category:"Savings"},{id:"familyAware",question:"Is your family aware of all investments?",tip:"Ensure nominees and family know about all assets",category:"Planning"},{id:"hasWill",question:"Do you have a Will?",tip:"Legal document for asset distribution",category:"Planning"},{id:"nominees",question:"Have you updated Nominees on all accounts?",tip:"Bank, demat, insurance, MF  all should have nominees",category:"Planning"},{id:"goals",question:"Do you have clearly defined Financial Goals?",tip:"Retirement, education, home  with target amounts and dates",category:"Goals"}];function eS(){const n=Wl(),{members:o,insurancePolicies:c,goalList:u,otherInvList:x,healthCheckCompleted:m,completeHealthCheck:h}=Re(),f=o.filter(P=>P.status==="Active"),v=m===!1,[d,j]=g.useState(!1),[S,M]=g.useState(!0),[k,z]=g.useState(null),A=g.useMemo(()=>{const P={},le=c.filter(se=>se.policyType==="Health"&&se.status==="Active");P.healthIns=le.length>0;const E=c.filter(se=>se.policyType==="Term Life"&&se.status==="Active");P.termLife=E.length>0;const fe=u.filter(se=>se.goalType==="Emergency Fund"&&se.isActive),W=x.filter(se=>se.investmentType==="FD"||se.investmentType==="PPF");return P.emergencyFund=fe.length>0||W.length>0,P.goals=u.filter(se=>se.isActive).length>=2,P},[c,u,x]);g.useEffect(()=>{let P=!1;async function le(){const E=await g0("healthCheckAnswers");!P&&E&&(z(E),M(!1));try{const fe=await v0();!P&&fe&&(z(fe),Pt("healthCheckAnswers",fe))}catch{}P||M(!1)}return le(),()=>{P=!0}},[]);const[N,y]=g.useState(()=>{const P={};return ka.forEach(le=>{P[le.id]=A[le.id]?"yes":""}),P});g.useEffect(()=>{k&&y(P=>{const le={...P};return ka.forEach(E=>{const fe=k[E.id];fe==="Yes"?le[E.id]="yes":fe==="No"&&(le[E.id]="no")}),le})},[k]);const w=Object.values(N).filter(P=>P).length,p=Object.values(N).filter(P=>P==="yes").length,I=w===ka.length,J=w>0?Math.round(p/ka.length*100):0;function q(){return J>=80?"text-emerald-400":J>=50?"text-[var(--accent-amber)]":"text-[var(--accent-rose)]"}function Z(){return J>=80?"Excellent":J>=60?"Good":J>=40?"Needs Work":"Critical"}const D=g.useMemo(()=>{const P=[];return N.healthIns!=="yes"&&P.push({severity:"critical",text:"Get Health Insurance for your family",action:"Minimum 5L cover recommended"}),N.termLife!=="yes"&&P.push({severity:"critical",text:"Get Term Life Insurance (10-15x annual income)",action:"Compare plans online"}),N.emergencyFund!=="yes"&&P.push({severity:"warning",text:"Build an Emergency Fund",action:"Save 6-12 months expenses in liquid fund/FD"}),N.familyAware!=="yes"&&P.push({severity:"warning",text:"Share investment details with family",action:"Create a document with all account info"}),N.hasWill!=="yes"&&P.push({severity:"warning",text:"Create a legal Will",action:"Consult a lawyer for Will registration"}),N.nominees!=="yes"&&P.push({severity:"warning",text:"Update nominees on all accounts",action:"Check bank, demat, insurance, MF accounts"}),N.goals!=="yes"&&P.push({severity:"info",text:"Define clear financial goals",action:"Use the Goal Planner to set targets"}),P},[N]),$=g.useCallback(async()=>{if(I){j(!0);try{const P={};ka.forEach(le=>{P[le.id]=N[le.id]==="yes"?"Yes":"No"}),P.score=p,P.total=ka.length,await h(P),n("/dashboard")}catch(P){console.error("Failed to save health check:",P)}finally{j(!1)}}},[I,N,p,h,n]);return a.jsxs("div",{className:"space-y-4 max-w-2xl mx-auto",children:[v&&a.jsxs("div",{className:"bg-violet-500/10 border border-violet-500/20 rounded-xl p-4",children:[a.jsx("h2",{className:"text-base font-bold text-violet-400 mb-1",children:"Welcome to Capital Friends!"}),a.jsx("p",{className:"text-sm text-[var(--text-secondary)]",children:"Before you start, please complete this quick Financial Health Check. It takes less than a minute and helps you understand where your family stands financially."})]}),a.jsxs("div",{className:"bg-[var(--bg-card)] rounded-xl border border-[var(--border)] p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(D0,{size:16,className:"text-violet-400"}),a.jsx("h2",{className:"text-sm font-bold text-[var(--text-primary)]",children:"Financial Health Score"})]}),a.jsxs("span",{className:"text-xs text-[var(--text-dim)]",children:[w,"/",ka.length," answered"]})]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("div",{className:"relative w-20 h-20",children:[a.jsxs("svg",{className:"w-20 h-20 -rotate-90",viewBox:"0 0 36 36",children:[a.jsx("path",{d:"M18 2.0845a 15.9155 15.9155 0 0 1 0 31.831a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",stroke:"var(--border)",strokeWidth:"3"}),a.jsx("path",{d:"M18 2.0845a 15.9155 15.9155 0 0 1 0 31.831a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeDasharray:`${J}, 100`,className:q(),strokeLinecap:"round"})]}),a.jsxs("span",{className:`absolute inset-0 flex items-center justify-center text-lg font-bold ${q()}`,children:[J,"%"]})]}),a.jsxs("div",{children:[a.jsx("p",{className:`text-base font-bold ${q()}`,children:Z()}),a.jsxs("p",{className:"text-xs text-[var(--text-dim)] mt-0.5",children:[p," of ",ka.length," checks passed"]}),a.jsxs("p",{className:"text-xs text-[var(--text-dim)]",children:[f.length," family members tracked"]})]})]})]}),a.jsxs("div",{className:"bg-[var(--bg-card)] rounded-xl border border-[var(--border)] overflow-hidden",children:[a.jsx("div",{className:"px-4 py-3 border-b border-[var(--border-light)] bg-[var(--bg-inset)]",children:a.jsx("h3",{className:"text-xs font-bold text-[var(--text-muted)] uppercase tracking-wider",children:"Health Check Questions"})}),a.jsx("div",{className:"divide-y divide-[var(--border-light)]",children:ka.map((P,le)=>a.jsxs("div",{className:"px-4 py-3",children:[a.jsxs("div",{className:"flex items-start justify-between gap-3",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("p",{className:"text-sm text-[var(--text-primary)]",children:[a.jsxs("span",{className:"text-[var(--text-dim)] mr-2",children:[le+1,"."]}),P.question]}),a.jsx("p",{className:"text-xs text-[var(--text-dim)] mt-0.5 ml-5",children:P.tip})]}),a.jsxs("div",{className:"flex gap-1 shrink-0",children:[a.jsx("button",{onClick:()=>y(E=>({...E,[P.id]:"yes"})),className:`px-3 py-1.5 text-xs font-semibold rounded-lg transition-colors ${N[P.id]==="yes"?"bg-emerald-500/20 text-emerald-400 border border-emerald-500/30":"bg-[var(--bg-inset)] text-[var(--text-dim)] border border-[var(--border)] hover:text-[var(--text-primary)]"}`,children:"Yes"}),a.jsx("button",{onClick:()=>y(E=>({...E,[P.id]:"no"})),className:`px-3 py-1.5 text-xs font-semibold rounded-lg transition-colors ${N[P.id]==="no"?"bg-rose-500/20 text-[var(--accent-rose)] border border-rose-500/30":"bg-[var(--bg-inset)] text-[var(--text-dim)] border border-[var(--border)] hover:text-[var(--text-primary)]"}`,children:"No"})]})]}),A[P.id]&&a.jsx("p",{className:"text-xs text-violet-400 mt-1 ml-5",children:"Auto-detected from your data"})]},P.id))})]}),D.length>0&&I&&a.jsxs("div",{className:"bg-[var(--bg-card)] rounded-xl border border-[var(--border)] overflow-hidden",children:[a.jsx("div",{className:"px-4 py-3 border-b border-[var(--border-light)] bg-[var(--bg-inset)]",children:a.jsx("h3",{className:"text-xs font-bold text-[var(--text-muted)] uppercase tracking-wider",children:"Recommendations"})}),a.jsx("div",{className:"divide-y divide-[var(--border-light)]",children:D.map((P,le)=>{const E=P.severity==="critical"?a.jsx(E0,{size:14,className:"text-[var(--accent-rose)]"}):P.severity==="warning"?a.jsx(fo,{size:14,className:"text-[var(--accent-amber)]"}):a.jsx(xj,{size:14,className:"text-[var(--accent-blue)]"});return a.jsxs("div",{className:"flex items-start gap-3 px-4 py-3",children:[a.jsx("span",{className:"shrink-0 mt-0.5",children:E}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm text-[var(--text-primary)]",children:P.text}),a.jsx("p",{className:"text-xs text-[var(--text-dim)] mt-0.5",children:P.action})]})]},le)})})]}),a.jsxs("div",{className:"bg-[var(--bg-card)] rounded-xl border border-[var(--border)] p-4",children:[!I&&a.jsxs("p",{className:"text-xs text-[var(--accent-amber)] mb-3",children:["Please answer all ",ka.length," questions before saving."]}),a.jsx("button",{onClick:$,disabled:!I||d,className:`w-full flex items-center justify-center gap-2 px-4 py-3 rounded-lg text-sm font-bold transition-colors ${I&&!d?"bg-violet-600 hover:bg-violet-500 text-white":"bg-[var(--bg-inset)] text-[var(--text-dim)] cursor-not-allowed"}`,children:d?a.jsxs(a.Fragment,{children:[a.jsx(L0,{size:16,className:"animate-spin"}),"Saving..."]}):v?a.jsxs(a.Fragment,{children:["Save & Continue to Dashboard",a.jsx(W1,{size:16})]}):a.jsxs(a.Fragment,{children:[a.jsx(xN,{size:16}),"Update Health Check"]})})]})]})}function tS(){return a.jsxs("div",{className:"space-y-4 max-w-lg mx-auto",children:[a.jsxs("div",{className:"bg-[var(--bg-card)] rounded-xl border border-[var(--border)] p-5 text-center",children:[a.jsx("div",{className:"w-14 h-14 rounded-2xl bg-gradient-to-br from-violet-500 to-indigo-600 flex items-center justify-center mx-auto mb-3",children:a.jsx("span",{className:"text-xl font-bold text-white",children:"CF"})}),a.jsx("h1",{className:"text-lg font-bold text-[var(--text-primary)]",children:"Capital Friends"}),a.jsx("p",{className:"text-xs text-[var(--text-dim)] mt-0.5",children:"Family Portfolio Management"}),a.jsx("p",{className:"text-xs text-[var(--text-muted)] mt-2",children:"v2.0.0"})]}),a.jsxs("div",{className:"bg-[var(--bg-card)] rounded-xl border border-[var(--border)] overflow-hidden",children:[a.jsx("div",{className:"px-4 py-3 border-b border-[var(--border-light)] bg-[var(--bg-inset)]",children:a.jsx("h3",{className:"text-xs font-bold text-[var(--text-muted)] uppercase tracking-wider",children:"Features"})}),a.jsx("div",{className:"px-4 py-3 space-y-2",children:["Track Mutual Funds, Stocks & Other Investments","Family member-wise portfolio management","ATH-based Buy Opportunities","Smart Rebalancing with threshold alerts","Goal planning with portfolio mapping","Insurance, Liabilities & Bank Accounts","Financial Health Check questionnaire","Reminders for SIPs, renewals & due dates","Email reports with detailed breakdowns"].map(n=>a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-violet-500 shrink-0"}),a.jsx("p",{className:"text-xs text-[var(--text-secondary)]",children:n})]},n))})]}),a.jsxs("div",{className:"bg-[var(--bg-card)] rounded-xl border border-[var(--border)] overflow-hidden",children:[a.jsx("div",{className:"px-4 py-3 border-b border-[var(--border-light)] bg-[var(--bg-inset)]",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(lo,{size:12,className:"text-pink-400"}),a.jsx("h3",{className:"text-xs font-bold text-[var(--text-muted)] uppercase tracking-wider",children:"Support Developer"})]})}),a.jsxs("div",{className:"px-4 py-4 text-center",children:[a.jsx("p",{className:"text-sm text-[var(--text-secondary)] mb-3",children:"If Capital Friends helps you manage your family finances, consider supporting the developer."}),a.jsxs("div",{className:"bg-[var(--bg-inset)] rounded-lg px-4 py-3 border border-[var(--border)]",children:[a.jsx("p",{className:"text-xs text-[var(--text-dim)] mb-1",children:"UPI"}),a.jsx("p",{className:"text-sm font-mono font-semibold text-[var(--text-primary)] select-all",children:"jagadeeshmanne.hdfc@kphdfc"})]}),a.jsxs("div",{className:"flex items-center justify-center gap-1 mt-3",children:[a.jsx(vj,{size:12,className:"text-[var(--accent-amber)]"}),a.jsx("p",{className:"text-xs text-[var(--text-dim)]",children:"Buy me a chai!"})]})]})]}),a.jsxs("div",{className:"text-center py-2",children:[a.jsxs("p",{className:"text-xs text-[var(--text-dim)]",children:["Made with ",a.jsx(lo,{size:10,className:"inline text-pink-400 mx-0.5"})," by Jagadeesh Manne"]}),a.jsx("p",{className:"text-xs text-[var(--text-dim)] mt-0.5",children:"Built with React + Vite + Tailwind CSS"})]})]})}function aS(){return Date.now().toString(36).toUpperCase()}function lS(){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZ",o=c=>Array.from({length:c},()=>n[Math.floor(Math.random()*26)]).join("");return o(5)+Math.floor(1e3+Math.random()*9e3)+o(1)}function sS(){return String(Math.floor(2e11+Math.random()*8e11))}function Cp(){return"9"+String(Math.floor(1e8+Math.random()*9e8))}function nS(){return String(Math.floor(1e9+Math.random()*9e9))}function rS(){const n=aS();return{member:{memberName:`Test Member ${n}`,relationship:"Self",pan:lS(),aadhar:sS(),email:`test-${n.toLowerCase()}@example.com`,mobile:Cp(),includeInEmailReports:!0},bank:{accountName:`Test Savings ${n}`,bankName:"Test Bank",accountNumber:nS(),ifscCode:"TEST0001234",accountType:"Savings",branchName:"Test Branch"},investmentAccount:{accountName:`Test Demat ${n}`,accountType:"Demat",platformBroker:"Test Broker Platform",accountClientId:`CLI-${n}`,registeredEmail:`test-${n.toLowerCase()}@example.com`,registeredPhone:Cp()},insurance:{policyType:"Term Life",company:"Test Insurance Co",policyNumber:`POL-${n}`,policyName:`Test Term Plan ${n}`,sumAssured:5e6,nominee:"Test Nominee",dynamicFields:{Premium:15e3,"Premium Frequency":"Annual"}},liability:{liabilityType:"Home Loan",lenderName:"Test Bank",outstandingBalance:45e5,dynamicFields:{"Principal Amount":5e6,"Interest Rate":8.5,"EMI Amount":45e3},notes:`Test liability ${n}`},otherInvestment:{investmentType:"Fixed Deposit",investmentName:`Test FD ${n}`,investedAmount:1e5,currentValue:105e3,investmentCategory:"Debt"},stockPortfolio:{portfolioName:`Test Stock Portfolio ${n}`,broker:"Test Broker"},reminder:{title:`Test Reminder ${n}`,description:"Automated test reminder",dueDate:new Date(Date.now()+10080*60*1e3).toISOString().split("T")[0],category:"Insurance",priority:"Medium"},goal:{goalName:`Test Goal ${n}`,goalType:"Custom",targetAmount:1e6,targetDate:"2040-01-01",priority:"Medium",expectedInflation:.06,expectedCAGR:.12}}}function iS({status:n,text:o}){const c={pass:"bg-emerald-500/20 text-emerald-400 border-emerald-500/30",fail:"bg-rose-500/20 text-rose-400 border-rose-500/30",skip:"bg-amber-500/20 text-amber-400 border-amber-500/30",running:"bg-blue-500/20 text-blue-400 border-blue-500/30",pending:"bg-gray-500/20 text-gray-400 border-gray-500/30"};return a.jsx("span",{className:`text-xs font-medium px-2 py-0.5 rounded border ${c[n]||c.pending}`,children:o||n.toUpperCase()})}function oS(){const{user:n}=es(),[o,c]=g.useState([]),[u,x]=g.useState(!1),[m,h]=g.useState(null),[f,v]=g.useState(!1),d=g.useCallback((N,y,w="")=>{c(p=>[...p,{test:N,status:y,detail:w,time:new Date().toLocaleTimeString()}])},[]),j=g.useCallback((N,y="")=>{c(w=>{const p=[...w];return p.length>0&&(p[p.length-1]={...p[p.length-1],status:N,detail:y}),p})},[]),S=async()=>{v(!0),h(null);try{const N=await be("test:diagnose");h(N)}catch(N){h({error:N.message})}finally{v(!1)}},M=async()=>{x(!0),c([]);const N=rS();let y=null,w=null,p=null,I=null,J=null,q=null,Z=null,D=null,$=null,P=null;try{d("API Echo Test","running");try{const E=await be("test:echo",{hello:"world"});E&&E.echo&&E.echo.hello==="world"?j("pass","Echo response received correctly"):j("fail","Unexpected response: "+JSON.stringify(E))}catch(E){j("fail",E.message)}d("Diagnostics","running");try{const E=await be("test:diagnose"),fe=Object.entries(E.sheets||{}).filter(([,se])=>!se.exists).map(([se])=>se);if(fe.length>0)j("fail",`Missing sheets: ${fe.join(", ")}`);else{const se=Object.keys(E.sheets).length;j("pass",`All ${se} sheets exist. SpreadsheetId: ${E.spreadsheetId}`)}const W=Object.entries(E.dataTests||{}).filter(([,se])=>!se.success).map(([se,F])=>`${se}: ${F.error}`);W.length>0&&d("Data Function Errors","fail",W.join("; "))}catch(E){j("fail",E.message)}d("Load All Data (bulk)","running");try{const E=await ao(),fe=Object.entries(E).map(([W,se])=>`${W}: ${Array.isArray(se)?se.length:"?"}`);j("pass",fe.join(", "))}catch(E){j("fail",E.message)}d("Members  Create","running");try{const E=await Gp(N.member);y=E?.memberId,w=N.member.memberName,y?j("pass",`Created: ${y}`):j("fail","No memberId returned: "+JSON.stringify(E))}catch(E){j("fail",E.message)}d("Members  List","running");try{const E=await Pp();Array.isArray(E)&&E.some(W=>W.memberId===y)?j("pass",`Found ${y} in ${E.length} member(s)`):j("fail",`Member ${y} not found. Got ${Array.isArray(E)?E.length:0} members: ${JSON.stringify(E).substring(0,200)}`)}catch(E){j("fail",E.message)}if(y){d("Members  Update","running");try{await Vp({...N.member,memberId:y,memberName:"Updated Test Member"}),w="Updated Test Member",j("pass",'Updated name to "Updated Test Member"')}catch(E){j("fail",E.message)}}d("Banks  Create","running");try{const E=await Xp({...N.bank,memberId:y||"FM-001"});p=E?.accountId,j(p?"pass":"fail",p?`Created: ${p}`:"No accountId: "+JSON.stringify(E))}catch(E){j("fail",E.message)}d("Banks  List","running");try{const E=await Qp();j("pass",`${Array.isArray(E)?E.length:0} account(s)`)}catch(E){j("fail",E.message)}d("Investment Accounts  Create","running");try{const E=await Jp({...N.investmentAccount,memberId:y||"FM-001",bankAccountId:p||"BA-001"});I=E?.accountId,j(I?"pass":"fail",I?`Created: ${I}`:"No accountId: "+JSON.stringify(E))}catch(E){j("fail",E.message)}d("Investment Accounts  List","running");try{const E=await Kp();j("pass",`${Array.isArray(E)?E.length:0} account(s)`)}catch(E){j("fail",E.message)}d("Insurance  Create","running");try{const E=await s0({...N.insurance,memberId:y||"FM-001",insuredMember:w||"Test Member"});J=E?.policyId,j(J?"pass":"fail",J?`Created: ${J}`:"No policyId: "+JSON.stringify(E))}catch(E){j("fail",E.message)}d("Insurance  List","running");try{const E=await l0();j("pass",`${Array.isArray(E)?E.length:0} policy/policies`)}catch(E){j("fail",E.message)}d("Liabilities  Create","running");try{const E=await i0({...N.liability,familyMember:y||"FM-001"});q=E?.liabilityId,j(q?"pass":"fail",q?`Created: ${q}`:"No liabilityId: "+JSON.stringify(E))}catch(E){j("fail",E.message)}d("Liabilities  List","running");try{const E=await r0();j("pass",`${Array.isArray(E)?E.length:0} liability/liabilities`)}catch(E){j("fail",E.message)}d("Other Investments  Create","running");try{const E=await u0({...N.otherInvestment,familyMember:y||"FM-001"});Z=E?.investmentId,j(Z?"pass":"fail",Z?`Created: ${Z}`:"No investmentId: "+JSON.stringify(E))}catch(E){j("fail",E.message)}d("Other Investments  List","running");try{const E=await c0();j("pass",`${Array.isArray(E)?E.length:0} investment(s)`)}catch(E){j("fail",E.message)}d("Stock Portfolios  Create","running");try{const E=await x0({...N.stockPortfolio,owner:y||"FM-001"});D=E?.portfolioId,j(D?"pass":"fail",D?`Created: ${D}`:"No portfolioId: "+JSON.stringify(E))}catch(E){j("fail",E.message)}d("Stock Portfolios  List","running");try{const E=await m0();j("pass",`${Array.isArray(E)?E.length:0} portfolio(s)`)}catch(E){j("fail",E.message)}d("Reminders  Create","running");try{const E=await p0(N.reminder);$=E?.reminderId,j($?"pass":"fail",$?`Created: ${$}`:"No reminderId: "+JSON.stringify(E))}catch(E){j("fail",E.message)}d("Reminders  List","running");try{const E=await h0();j("pass",`${Array.isArray(E)?E.length:0} reminder(s)`)}catch(E){j("fail",E.message)}d("Goals  Create","running");try{const E=await t0(N.goal);P=E?.goalId,j(P?"pass":"fail",P?`Created: ${P}`:"No goalId: "+JSON.stringify(E))}catch(E){j("fail",E.message)}d("Goals  List","running");try{const E=await e0();j("pass",`${Array.isArray(E)?E.length:0} goal(s)`)}catch(E){j("fail",E.message)}d("Cleanup  Delete test data","running");const le=[];if(P)try{await a0(P)}catch(E){le.push("goal: "+E.message)}if($)try{await b0($)}catch(E){le.push("reminder: "+E.message)}if(D)try{await f0(D)}catch(E){le.push("stockPortfolio: "+E.message)}if(Z)try{await d0(Z)}catch(E){le.push("otherInv: "+E.message)}if(q)try{await o0(q)}catch(E){le.push("liability: "+E.message)}if(J)try{await n0(J)}catch(E){le.push("insurance: "+E.message)}if(I)try{await Wp(I)}catch(E){le.push("invAcct: "+E.message)}if(p)try{await Zp(p)}catch(E){le.push("bank: "+E.message)}if(y)try{await Yp(y)}catch(E){le.push("member: "+E.message)}le.length>0?j("fail",le.join("; ")):j("pass","All test data cleaned up"),d("Final Load All (post-cleanup)","running");try{const E=await ao(),fe=Object.entries(E).map(([W,se])=>`${W}: ${Array.isArray(se)?se.length:"?"}`);j("pass",fe.join(", "))}catch(E){j("fail",E.message)}}catch(le){d("UNEXPECTED ERROR","fail",le.message)}finally{x(!1)}},k=o.filter(N=>N.status==="pass").length,z=o.filter(N=>N.status==="fail").length,A=o.filter(N=>N.status!=="running").length;return a.jsx("div",{className:"min-h-screen bg-[var(--bg-main)] p-4 max-w-3xl mx-auto",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-lg font-bold text-[var(--text-primary)]",children:"API Test Suite"}),a.jsxs("p",{className:"text-xs text-[var(--text-dim)]",children:["Signed in as ",n?.email||"unknown"]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:S,disabled:f||u,className:"px-3 py-1.5 text-xs font-medium rounded-lg bg-[var(--bg-card)] border border-[var(--border)] text-[var(--text-secondary)] hover:bg-[var(--bg-elevated)] disabled:opacity-50 cursor-pointer",children:f?"Running...":"Diagnostics"}),a.jsx("button",{onClick:M,disabled:u,className:"px-3 py-1.5 text-xs font-medium rounded-lg bg-violet-600 text-white hover:bg-violet-700 disabled:opacity-50 cursor-pointer",children:u?"Running Tests...":"Run All Tests"})]})]}),A>0&&a.jsxs("div",{className:"flex gap-3 text-xs",children:[a.jsxs("span",{className:"text-emerald-400",children:["Pass: ",k]}),a.jsxs("span",{className:"text-rose-400",children:["Fail: ",z]}),a.jsxs("span",{className:"text-[var(--text-dim)]",children:["Total: ",A]})]}),m&&a.jsxs("div",{className:"bg-[var(--bg-card)] rounded-xl border border-[var(--border)] p-4 space-y-3",children:[a.jsx("h2",{className:"text-sm font-semibold text-[var(--text-primary)]",children:"Diagnostics Report"}),m.error?a.jsx("p",{className:"text-xs text-rose-400",children:m.error}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"text-xs text-[var(--text-secondary)] space-y-1",children:[a.jsxs("p",{children:[a.jsx("span",{className:"text-[var(--text-dim)]",children:"Spreadsheet:"})," ",m.spreadsheetName]}),a.jsxs("p",{children:[a.jsx("span",{className:"text-[var(--text-dim)]",children:"ID:"})," ",a.jsx("code",{className:"text-[10px]",children:m.spreadsheetId})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-xs font-medium text-[var(--text-primary)] mb-1",children:"Sheets"}),a.jsx("div",{className:"grid grid-cols-2 gap-1",children:Object.entries(m.sheets||{}).map(([N,y])=>a.jsxs("div",{className:"flex items-center justify-between text-[11px] px-2 py-1 rounded bg-[var(--bg-elevated)]",children:[a.jsx("span",{className:"text-[var(--text-secondary)] truncate",children:N}),y.exists?a.jsxs("span",{className:"text-emerald-400 ml-1",children:[y.dataRows,"r"]}):a.jsx("span",{className:"text-rose-400 ml-1",children:"MISSING"})]},N))})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-xs font-medium text-[var(--text-primary)] mb-1",children:"Data Functions"}),a.jsx("div",{className:"space-y-1",children:Object.entries(m.dataTests||{}).map(([N,y])=>a.jsxs("div",{className:"flex items-center justify-between text-[11px] px-2 py-1 rounded bg-[var(--bg-elevated)]",children:[a.jsx("span",{className:"text-[var(--text-secondary)]",children:N}),y.success?a.jsxs("span",{className:"text-emerald-400",children:[y.count," items"]}):a.jsx("span",{className:"text-rose-400 truncate ml-2 max-w-[200px]",title:y.error,children:y.error})]},N))})]}),m.safeCallErrors&&m.safeCallErrors.length>0&&a.jsxs("div",{children:[a.jsx("h3",{className:"text-xs font-medium text-rose-400 mb-1",children:"SafeCall Errors"}),m.safeCallErrors.map((N,y)=>a.jsxs("p",{className:"text-[11px] text-rose-400",children:[N.fn,": ",N.error]},y))]})]})]}),o.length>0&&a.jsx("div",{className:"bg-[var(--bg-card)] rounded-xl border border-[var(--border)] overflow-hidden",children:a.jsx("div",{className:"divide-y divide-[var(--border)]",children:o.map((N,y)=>a.jsxs("div",{className:"px-4 py-2 flex items-start gap-3",children:[a.jsx("div",{className:"mt-0.5 shrink-0",children:a.jsx(iS,{status:N.status})}),a.jsxs("div",{className:"min-w-0 flex-1",children:[a.jsx("p",{className:"text-xs font-medium text-[var(--text-primary)]",children:N.test}),N.detail&&a.jsx("p",{className:"text-[11px] text-[var(--text-dim)] mt-0.5 break-all",children:N.detail})]}),a.jsx("span",{className:"text-[10px] text-[var(--text-dim)] shrink-0",children:N.time})]},y))})}),o.length===0&&!m&&a.jsxs("div",{className:"text-center py-12 text-[var(--text-dim)]",children:[a.jsx("p",{className:"text-sm",children:'Click "Run All Tests" to test all CRUD operations'}),a.jsx("p",{className:"text-xs mt-1",children:'or "Diagnostics" to check spreadsheet structure'})]})]})})}function cS(){return a.jsxs(gy,{children:[a.jsx(at,{index:!0,element:a.jsx(x2,{})}),a.jsx(at,{path:"login",element:a.jsx(G0,{})}),a.jsx(at,{element:a.jsx(o2,{}),children:a.jsxs(at,{element:a.jsx(i2,{}),children:[a.jsx(at,{path:"dashboard",element:a.jsx(eo,{to:"/investments/mutual-funds",replace:!0})}),a.jsx(at,{path:"family",element:a.jsx(_5,{})}),a.jsx(at,{path:"accounts/bank",element:a.jsx(ep,{})}),a.jsx(at,{path:"accounts/investment",element:a.jsx(g2,{})}),a.jsx(at,{path:"insurance",element:a.jsx(S2,{})}),a.jsx(at,{path:"investments/mutual-funds",element:a.jsx(k5,{})}),a.jsx(at,{path:"investments/stocks",element:a.jsx(R5,{})}),a.jsx(at,{path:"investments/other",element:a.jsx(L2,{})}),a.jsx(at,{path:"liabilities",element:a.jsx(M2,{})}),a.jsx(at,{path:"goals",element:a.jsx(q5,{})}),a.jsx(at,{path:"reports",element:a.jsx(W5,{})}),a.jsx(at,{path:"reminders",element:a.jsx(K5,{})}),a.jsx(at,{path:"health-check",element:a.jsx(eS,{})}),a.jsx(at,{path:"about",element:a.jsx(tS,{})}),a.jsx(at,{path:"test",element:a.jsx(oS,{})}),a.jsx(at,{path:"settings",element:a.jsx(G5,{})}),a.jsx(at,{path:"more",element:a.jsx(P5,{})}),a.jsx(at,{path:"accounts",element:a.jsx(ep,{})}),a.jsx(at,{path:"*",element:a.jsx(f2,{})})]})})]})}yg.createRoot(document.getElementById("root")).render(a.jsx($y,{children:a.jsx(H1,{children:a.jsx(F1,{children:a.jsx(qN,{children:a.jsx(RN,{children:a.jsx($1,{children:a.jsx(P1,{children:a.jsx(cS,{})})})})})})})}));
