================================================================================
                 CAPITAL FRIENDS ARCHITECTURE
              (How GitHub Pages + Apps Script Work Together)
================================================================================

┌────────────────────────────────────────────────────────────────────────────┐
│                           USER'S JOURNEY                                    │
└────────────────────────────────────────────────────────────────────────────┘

 1. User hears about Capital Friends
    (Social media, Google search, friend recommendation)
           │
           ├─> Visits: https://username.github.io/capital-friends/
           │
           v
 ┌──────────────────────────────────────────────────────────┐
 │            GITHUB PAGES (Marketing Website)               │
 │  ┌────────────────────────────────────────────────────┐  │
 │  │  ├ Homepage (index.html)                           │  │
 │  │    • What is Capital Friends?                      │  │
 │  │    • Key features                                  │  │
 │  │    • Screenshots/demos                             │  │
 │  │    • FAQ                                           │  │
 │  │    • [Launch Capital Friends] button               │  │
 │  │                                                     │  │
 │  │  ├ Privacy Policy (privacy-policy.html)            │  │
 │  │    • What data we collect                          │  │
 │  │    • How we use it                                 │  │
 │  │    • User rights                                   │  │
 │  │                                                     │  │
 │  │  ├ Terms of Service (terms-of-service.html)        │  │
 │  │    • Legal agreement                               │  │
 │  │    • Disclaimers                                   │  │
 │  │    • User responsibilities                         │  │
 │  └────────────────────────────────────────────────────┘  │
 │                                                           │
 │  Purpose: Information + Google Verification Requirement   │
 │  Runs on: GitHub's servers (free)                         │
 │  Contains: Static HTML files only                         │
 └───────────────────────────────────────────────────────────┘
           │
           │ User clicks "Launch Capital Friends" button
           │
           v
 ┌──────────────────────────────────────────────────────────┐
 │                  REDIRECT TO APPS SCRIPT                  │
 │                                                            │
 │  Browser redirects to:                                    │
 │  https://script.google.com/macros/s/ABC123.../exec       │
 └───────────────────────────────────────────────────────────┘
           │
           v
 ┌──────────────────────────────────────────────────────────┐
 │           GOOGLE OAUTH CONSENT SCREEN                     │
 │  ┌────────────────────────────────────────────────────┐  │
 │  │  ✅ Capital Friends - Family Wealth Tracking       │  │
 │  │                                                     │  │
 │  │  wants to access your Google Account               │  │
 │  │                                                     │  │
 │  │  This will allow Capital Friends to:                │  │
 │  │  • Create and edit spreadsheets                    │  │
 │  │  • Manage files in your Drive                      │  │
 │  │  • Send email on your behalf                       │  │
 │  │                                                     │  │
 │  │  [Cancel]  [Allow]                                 │  │
 │  │                                                     │  │
 │  │  Learn more:                                       │  │
 │  │  Privacy Policy | Terms of Service                 │  │
 │  └────────────────────────────────────────────────────┘  │
 │                                                           │
 │  ⚠️ BEFORE VERIFICATION: Shows "unverified" warning       │
 │  ✅ AFTER VERIFICATION: Clean, trusted screen             │
 └───────────────────────────────────────────────────────────┘
           │
           │ User clicks "Allow"
           │
           v
 ┌──────────────────────────────────────────────────────────┐
 │          APPS SCRIPT WEB APP (The Actual App)             │
 │  ┌────────────────────────────────────────────────────┐  │
 │  │  Code.gs                                           │  │
 │  │  ├─ doGet() - Entry point                          │  │
 │  │  ├─ showLandingPage() - Display page               │  │
 │  │  └─ include() - Load HTML files                    │  │
 │  │                                                     │  │
 │  │  LandingPage.html                                  │  │
 │  │  ├─ Email input form                               │  │
 │  │  ├─ "Create My Copy" button                        │  │
 │  │  ├─ Copy count display                             │  │
 │  │  └─ Includes Questionnaire.html                    │  │
 │  │                                                     │  │
 │  │  Questionnaire.html                                │  │
 │  │  ├─ 8 security questions                           │  │
 │  │  ├─ Yes/No buttons                                 │  │
 │  │  ├─ Progress tracker                               │  │
 │  │  └─ Submit button                                  │  │
 │  │                                                     │  │
 │  │  WebAppLogic.gs                                    │  │
 │  │  ├─ createUserCopy() - Make sheet copy             │  │
 │  │  ├─ saveQuestionnaireAndTransfer() - Save answers  │  │
 │  │  ├─ checkExistingPendingCopy() - Prevent dupes     │  │
 │  │  └─ getTotalCopyCount() - Analytics                │  │
 │  └────────────────────────────────────────────────────┘  │
 │                                                           │
 │  Purpose: The functional application                      │
 │  Runs on: Google Apps Script infrastructure               │
 │  Contains: Backend logic + frontend HTML                  │
 └───────────────────────────────────────────────────────────┘
           │
           │ User enters email, completes questionnaire
           │
           v
 ┌──────────────────────────────────────────────────────────┐
 │                    USER'S GOOGLE DRIVE                    │
 │  ┌────────────────────────────────────────────────────┐  │
 │  │  📊 Capital Friends - [User's Name] Copy           │  │
 │  │     Owner: user@gmail.com                          │  │
 │  │     Created: Today                                 │  │
 │  │                                                     │  │
 │  │     Sheets:                                        │  │
 │  │     • Dashboard                                    │  │
 │  │     • Assets                                       │  │
 │  │     • Liabilities                                  │  │
 │  │     • Portfolio Allocation                         │  │
 │  │     • Rebalancing Recommendations                  │  │
 │  │     • Config (with questionnaire answers)          │  │
 │  └────────────────────────────────────────────────────┘  │
 │                                                           │
 │  User's data stays 100% in THEIR Drive                    │
 │  We never see or access their financial data              │
 └───────────────────────────────────────────────────────────┘


================================================================================
                              KEY POINTS
================================================================================

1. TWO SEPARATE COMPONENTS:
   
   GitHub Pages (username.github.io)
   └─> Static website for marketing + verification
       ├─ index.html
       ├─ privacy-policy.html
       └─ terms-of-service.html
   
   Apps Script (script.google.com)
   └─> The actual working application
       ├─ Code.gs
       ├─ LandingPage.html
       ├─ Questionnaire.html
       └─ WebAppLogic.gs

2. HOW THEY CONNECT:
   
   GitHub Pages homepage has a button:
   <a href="https://script.google.com/macros/s/ABC.../exec">
     Launch Capital Friends
   </a>
   
   This redirects users from the marketing site to the real app.

3. WHY YOU NEED BOTH:
   
   ✅ GitHub Pages = Required for Google OAuth verification
      (Google wants to see public homepage + privacy policy)
   
   ✅ Apps Script = Required for the app to actually work
      (GitHub Pages can't run backend logic or create sheets)

4. DATA FLOW:
   
   User data NEVER goes to GitHub Pages (it's just static HTML)
                      ↓
   User data goes to Apps Script
                      ↓
   Apps Script creates sheet in USER'S Drive
                      ↓
   User owns 100% of their data


================================================================================
                         VERIFICATION SETUP
================================================================================

OAuth Consent Screen URLs (use your GitHub Pages URLs):

┌────────────────────────────────────────────────────────────────┐
│ Application homepage:                                           │
│ https://YOUR_USERNAME.github.io/capital-friends/               │
├────────────────────────────────────────────────────────────────┤
│ Privacy policy:                                                 │
│ https://YOUR_USERNAME.github.io/capital-friends/privacy-policy │
├────────────────────────────────────────────────────────────────┤
│ Terms of service:                                               │
│ https://YOUR_USERNAME.github.io/capital-friends/terms-of-servi │
├────────────────────────────────────────────────────────────────┤
│ Authorized domains:                                             │
│ YOUR_USERNAME.github.io                                         │
└────────────────────────────────────────────────────────────────┘

Apps Script URL (for the button on GitHub Pages):

┌────────────────────────────────────────────────────────────────┐
│ Web app URL:                                                    │
│ https://script.google.com/macros/s/YOUR_SCRIPT_ID/exec        │
│                                                                 │
│ This goes in index.html where it says:                         │
│ YOUR_WEB_APP_URL_HERE                                          │
└────────────────────────────────────────────────────────────────┘


================================================================================
                           COST BREAKDOWN
================================================================================

GitHub Pages:           $0  (free forever)
Apps Script:            $0  (free tier sufficient)
Google Cloud Project:   $0  (no charges for Apps Script usage)
OAuth Verification:     $0  (free process)
Domain (optional):      $12/year (only if you want custom domain)

Total: $0 or $12/year


================================================================================
                         NEXT STEPS SUMMARY
================================================================================

1. Replace placeholders in /docs/*.html files
2. Push /docs folder to GitHub
3. Enable GitHub Pages in repository settings
4. Follow GOOGLE_VERIFICATION_COMPLETE_GUIDE.md
5. Submit for verification
6. Wait 24-72 hours
7. Enjoy verified, trusted app! ✅


================================================================================
